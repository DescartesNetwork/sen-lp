(globalThis.webpackChunksen_lp=globalThis.webpackChunksen_lp||[]).push([[643],{88510:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Page:()=>lr,Widget:()=>cr,widgetConfig:()=>dr});var r=t(55754),n=t(49142),o=t(92950),a=t(45055),i=t(95418),l=t(99019);const d={"logo-telegram":t.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"};var c=t(45263);const u=(0,o.forwardRef)((({name:e,className:s,...t},r)=>{const n=s?"anticon "+s:"anticon";return(0,c.jsx)("span",{className:n,...t,children:d[e]?(0,c.jsx)("ion-icon",{ref:r,src:d[e]}):(0,c.jsx)("ion-icon",{ref:r,name:e})})}));var p=t(44891);const h=({pools:e,onChange:s})=>{const[t,r]=(0,o.useState)(""),{tokenProvider:a}=(0,n.useMint)(),d=(0,o.useCallback)((async()=>{if(!t||t.length<3)return s(void 0);if(i.account.isAddress(t)){const r=e.find((({address:e})=>e===t));return s(r?[r]:[])}const r=await a.find(t);if(!r)return s(void 0);const n=r.map((({address:e})=>e)),o=e.filter((e=>{const{mint_a:s,mint_b:t}=e;return!!n.includes(s)||!!n.includes(t)}));return s(o)}),[e,t,s,a]);return(0,o.useEffect)((()=>{d()}),[d]),(0,c.jsx)(l.Card,{bodyStyle:{padding:8},bordered:!1,className:"lp-card",children:(0,c.jsx)(l.Input,{placeholder:"Search",value:t,size:"small",bordered:!1,prefix:(0,c.jsx)(l.Button,{type:"text",style:{marginLeft:-7},size:"small",onClick:t?()=>r(""):()=>{},icon:(0,c.jsx)(u,{name:t?"close-outline":"search-outline"})}),onChange:e=>r(e.target.value)})})};var x=t(16200),m=t.n(x),y=t(63805);const j={ttl:3e4},g={limit:{calls:10,time:1e3},cache:j};class f{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,s){this.resolveQueue.push(e),this.rejectQueue.push(s)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class w{static set(e,s,t=j){this.mapCache.set(e,s),setTimeout((()=>{this.mapCache.delete(e)}),t.ttl)}static get(e){return this.mapCache.get(e)}}w.mapCache=new Map;class v{static getSingleFlight(e){const s=JSON.stringify(e);if(this.mapInstance.has(s)){const e=this.mapInstance.get(s);if(e)return e}let t=new b(e);return this.mapInstance.set(s,t),t}static async load(e,s,t={}){"object"===typeof e&&(e=JSON.stringify(e));let r=v.getSingleFlight(t);v.mapInstance.set(e,r);const n=new f(e);return r.load(n,s)}}v.mapInstance=new Map;class b{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(g,e)}async load(e,s){const t=w.get(e.key);if(t)return Promise.resolve(t);let r=!1,n=this.mapRequestCalling.get(e.key);return n||(n=e,r=!0,this.mapRequestCalling.set(n.key,n)),new Promise(((e,t)=>{if(!n)return t("Not found request!");n.add(e,t),r&&this.fetch(n,s)}))}fetch(e,s){if(!this.validateLimit())return this.addRequestQueue(e,s);this.createTimeLogs(),s().then((s=>{w.set(e.key,s,this.config.cache),e.resolves(s)})).catch((s=>{e.rejects(s)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(s)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const s=this.requestQueue.shift();s&&this.load(s,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,s){var t;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(s)}),null===(t=this.config.limit)||void 0===t?void 0:t.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const s=(new Date).getTime();this.timeLogs.push(s),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}const C=e=>new Promise((s=>setTimeout(s,e))),A=(e,s=4,t="...")=>e.substring(0,s)+t+e.substring(e.length-s,e.length),T=e=>i.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${y.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${y.ef}`,k=e=>e?m()(e):m()("0"),S=async(e="")=>v.load("fetchCGK"+e,(()=>i.utils.parseCGK(e))),P=({poolAddress:e})=>{const{tokenProvider:s}=(0,n.useMint)(),{pools:t}=(0,n.usePool)(),[r,a]=(0,o.useState)(0),l=(0,o.useCallback)((async()=>{try{const{reserve_a:r,reserve_b:n,mint_a:o,mint_b:l}=t[e],d=[o,l],c=await Promise.all(d.map((e=>i.account.isAddress(e)?s.findByAddress(e):{}))),u=[r,n],p=c.map((({decimals:e})=>e)),h=(await Promise.all(c.map((({extensions:e})=>null!==e&&void 0!==e&&e.coingeckoId?S(null===e||void 0===e?void 0:e.coingeckoId):{})))).map((({price:e})=>e));let x=0;return[0,1,2].forEach((e=>{u[e]&&p[e]&&h[e]&&(x+=Number(i.utils.undecimalize(u[e],p[e]))*h[e])})),a(x)}catch(r){return a(0)}}),[t,e,s]);return(0,o.useEffect)((()=>{l()}),[l]),(0,c.jsxs)("span",{children:["$",k(r).format("0,0.[00]a")]})};let R,I;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(R||(R={})),function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Open=1]="Open",e[e.Approved=2]="Approved",e[e.Done=3]="Done",e[e.Rejected=4]="Rejected",e[e.Canceled=5]="Canceled"}(I||(I={}));const z=[{locktime:7,discount:.05},{locktime:30,discount:.25},{locktime:60,discount:.35},{locktime:90,discount:.4}],B=({poolAddress:e})=>{const{pools:s}=(0,n.usePool)(),t=s[e]||{},{wallet:{address:r}}=(0,n.useWallet)(),o=t.state===R.Frozen,a=r===(null===t||void 0===t?void 0:t.owner);return(0,c.jsxs)(l.Space,{children:[o&&(0,c.jsx)(u,{name:"snow-outline",style:{fontSize:16}}),a&&(0,c.jsx)(u,{name:"person-outline",style:{fontSize:16}})]})},D=e=>{const{tokenProvider:s}=(0,n.useMint)(),{pools:t}=(0,n.usePool)(),[r,a]=(0,o.useState)([]),i=(0,o.useCallback)((async()=>{const r=await s.findByAddress(e);if(r)return a([r]);const n=Object.values(t).find((({mint_lpt:s})=>s===e));if(!n)return a([void 0]);const{mint_a:o,mint_b:i}=n,l=await s.findByAddress(o),d=await s.findByAddress(i);return a([l,d])}),[e,t,s]);return(0,o.useEffect)((()=>{i()}),[i]),r},_=({mintAddress:e,size:s=24,icon:t=(0,c.jsx)(u,{name:"diamond-outline"}),isReserve:r=!1})=>{const n=D(e),a=(0,o.useMemo)((()=>{const e=JSON.parse(JSON.stringify(n));return r?e.reverse():e}),[r,n]);return(0,c.jsx)(l.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},children:a.map(((e,r)=>(0,c.jsx)(l.Avatar,{src:null===e||void 0===e?void 0:e.logoURI,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:t},(null===e||void 0===e?void 0:e.address)||r)))})},M=({mintAddress:e,separator:s=" \u2022 ",isReverse:t=!1})=>{const r=D(e),n=(0,o.useMemo)((()=>{let n=r.map((s=>{if(!s)return A(e);const{name:t,address:n,symbol:o}=s;return 1===r.length&&t?t:o||A(n)}));return t&&n.reverse(),n.join(s),1===r.length?n:`${n} LP`}),[t,e,s,r]);return(0,c.jsx)("span",{children:n})},L=({mintAddress:e,separator:s=" \u2022 ",isReverse:t=!1})=>{const[r,a]=(0,o.useState)(""),{tokenProvider:l}=(0,n.useMint)(),{pools:d}=(0,n.usePool)(),u=(0,o.useCallback)((async e=>{const s=await l.findByAddress(e);return null!==s&&void 0!==s&&s.symbol?s.symbol:e.substring(0,4)}),[l]),p=(0,o.useCallback)((async()=>{if(!i.account.isAddress(e))return a("");const r=Object.values(d).find((({mint_lpt:s})=>s===e));if(r){const{mint_a:e,mint_b:n}=r,o=await Promise.all([e,n].map(u));return t&&o.reverse(),a(o.join(s))}const n=await u(e);return a(n)}),[e,t,u,d,s]);return(0,o.useEffect)((()=>{p()}),[p]),(0,c.jsx)("span",{children:r})};var E=t(19289);const N={appId:"sen_lp",url:"https://descartesnetwork.github.io/sen-lp/index.js",senhub:"senhub@https://descartesnetwork.github.io/senhub/index.js"},O={development:{...N},staging:{...N},production:{...N}},F={devnet:{swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9",senOwner:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"],sntrAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",purchasingAddress:"FHeonxeZFH76K57KGRWgsmE97tiupcHDjvWNKMQDmdVd",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:"https://api.devnet.solana.com",get purchasing(){return new i.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}},testnet:{swapAddress:"",taxmanAddress:"",senOwner:[],sntrAddress:"",purchasingAddress:"",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:"https://api.testnet.solana.com",get purchasing(){return new i.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}},mainnet:{swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e",senOwner:["Cs6jYywHTAgdvjxn8xG4VkJJH8DXXy7zbtatzMUWoCMG"],sntrAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",purchasingAddress:"Ecw8Vh3cwwwwMsaU63mW6knKMsuaiSakVDvKxB5nyhFC",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:"https://api.mainnet-beta.solana.com",get purchasing(){return new i.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}}},Y={devnet:{baseURL:"https://stat-dev.sentre.io"},testnet:{baseURL:"https://stat-dev.sentre.io"},mainnet:{baseURL:"https://stat.sentre.io"}},W={development:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},staging:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},production:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)}},q={development:{myRoute:"/app/senhub",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"},staging:{myRoute:"/app/sen_lp",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"},production:{myRoute:"/app/sen_lp",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"}},U={manifest:O[y.OB],sol:F[y.ef],stat:Y[y.ef],fee:W[y.OB],route:q[y.OB]};var V=t(21995),H=t.n(V);const Z={auth:async(e=!1)=>{if("object"===typeof e)return e;if(!e)return null;const s=window.sentre.wallet;if(!s)throw new Error("Wallet is not connected");const t=(Number(new Date)+1e4).toString()+Math.floor(Math.random()*10**16),r=await s.signMessage(t);return{Authorization:JSON.stringify(r)}},post:async(e,s=null,t=!1)=>{const r=await Z.auth(t);try{const{data:t}=await H()({method:"post",url:e,data:s,headers:r});if("ERROR"===t.status)throw new Error(t.error);return t}catch(n){if(!n.response)throw new Error(n.message);const{response:{data:{error:e}}}=n;throw new Error(e)}},get:async(e,s=null,t=!1)=>{const r=await Z.auth(t);try{const{data:t}=await H()({method:"get",url:e,params:s,headers:r});if("ERROR"===t.status)throw new Error(t.error);return t}catch(n){if(!n.response)throw new Error(n.message);const{response:{data:{error:e}}}=n;throw new Error(e)}},put:async(e,s=null,t=!1)=>{const r=await Z.auth(t);try{const{data:t}=await H()({method:"put",url:e,data:s,headers:r});if("ERROR"===t.status)throw new Error(t.error);return t}catch(n){if(!n.response)throw new Error(n.message);const{response:{data:{error:e}}}=n;throw new Error(e)}},delete:async(e,s=null,t=!1)=>{const r=await Z.auth(t);try{const{data:t}=await H()({method:"delete",url:e,data:s,headers:r});if("ERROR"===t.status)throw new Error(t.error);return t}catch(n){if(!n.response)throw new Error(n.message);const{response:{data:{error:e}}}=n;throw new Error(e)}}},G=Z;let $;!function(e){e.endpointDetail="public/api/v1/detail/pools",e.endpointDaily="public/api/v1/daily/pools"}($||($={}));const{stat:{baseURL:Q}}=U,J="stat",K=(0,E.createAsyncThunk)("stat/fetchStatPoolData",(async({address:e},{getState:s})=>{try{const t=s().stat[e];if(t)return{[e]:t};const r=G.get(`${Q}/${$.endpointDetail}/${e}`),n=G.get(`${Q}/${$.endpointDaily}/${e}`),[o,a]=await Promise.all([r,n]);return{[e]:{details:o,daily:a}}}catch(t){return{}}})),X=(0,E.createSlice)({name:J,initialState:{},reducers:{},extraReducers:e=>{e.addCase(K.fulfilled,((e,{payload:s})=>{Object.assign(e,s)}))}}).reducer,ee=({poolAddress:e,onClick:s=(()=>{}),action:t=(0,c.jsx)(o.Fragment,{}),selected:a=!1})=>{var i;const d=(0,r.useDispatch)(),{pools:u}=(0,n.usePool)(),p=(0,r.useSelector)((s=>{var t;return null===(t=s.stat[e])||void 0===t?void 0:t.details})),h=(null===u||void 0===u?void 0:u[e])||{},{state:x}=h,m=null===u||void 0===u||null===(i=u[e])||void 0===i?void 0:i.mint_lpt,y=(0,o.useMemo)((()=>{if(!p)return 0;const e=p.roi;return Math.pow(1+Number(e||0)/100,365)-1}),[p]);(0,o.useEffect)((()=>{e&&d(K({address:e}))}),[d,e]);const j=x===R.Frozen,g=a?"card-active lp-card":"lp-card";return(0,c.jsx)(l.Card,{className:g,bodyStyle:{padding:12,height:78},onClick:s,bordered:a,hoverable:!0,children:(0,c.jsxs)(l.Row,{gutter:[12,12],wrap:!1,align:"middle",children:[(0,c.jsx)(l.Col,{span:24,flex:"auto",children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(_,{mintAddress:m,size:24}),(0,c.jsx)(l.Typography.Text,{type:j?"secondary":void 0,children:(0,c.jsx)(L,{mintAddress:m})})]}),(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,c.jsx)(l.Typography.Text,{children:(0,c.jsx)(P,{poolAddress:e})}),(0,c.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,c.jsx)(l.Typography.Text,{children:k(y).format("0,0.[00]%")})]})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{size:2,children:[(0,c.jsx)(B,{poolAddress:e}),t]})})]})})},{sol:{senOwner:se}}=U,te=({onClick:e=(()=>{}),selectedPoolAddress:s,action:t=(()=>(0,c.jsx)(o.Fragment,{}))})=>{const[a,i]=(0,o.useState)(),{settings:{showArchived:d}}=(0,r.useSelector)((e=>e)),{pools:u}=(0,n.usePool)(),x=(0,o.useMemo)((()=>Object.keys(u).map((e=>({address:e,...u[e]}))).filter((e=>{const{owner:s}=e||{};return!se.includes(s)})).filter((e=>{const{reserve_a:s,reserve_b:t}=e||{};return d||!(!s||!t)})).sort((({reserve_a:e,reserve_b:s},{reserve_a:t,reserve_b:r})=>{const n=e*s,o=t*r;return n>o?-1:n<o?1:0}))),[u,d]);return(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(h,{onChange:i,pools:x})}),(a||x).map(((r,n)=>(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(ee,{poolAddress:r.address,action:t(r.address),onClick:()=>e(r.address),selected:s===r.address})})},r.address+n)))]})},re="main",ne=(0,E.createAsyncThunk)("main/selectPool",(async e=>({selectedPoolAddress:e,selectedLptAddress:""}))),oe=(0,E.createAsyncThunk)("main/selectCategoryPool",(async e=>({selectedCategoryPool:e}))),ae=(0,E.createAsyncThunk)("main/handleOpenDrawer",(async e=>({visible:e}))),ie=(0,E.createSlice)({name:re,initialState:{selectedPoolAddress:"",visible:!1,selectedCategoryPool:""},reducers:{},extraReducers:e=>{e.addCase(ne.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(ae.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(oe.fulfilled,((e,{payload:s})=>{Object.assign(e,s)}))}}).reducer,{route:{myRoute:le}}=U,de=()=>{const e=(0,a.useHistory)(),s=(0,r.useDispatch)(),{selectedPoolAddress:t}=(0,r.useSelector)((e=>e.main)),n=(0,o.useCallback)((async t=>(await s(ne(t)),await s(ae(!1)),e.push(`${le}?poolAddress=${t}`))),[s,e]),i=(0,o.useCallback)((e=>(0,c.jsx)(l.Button,{type:"text",onClick:s=>{s.stopPropagation(),n(e)},icon:(0,c.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[n]);return(0,c.jsx)(l.Row,{gutter:[12,12],children:(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(te,{action:i,selectedPoolAddress:t,onClick:n})})})},ce=({data:e,onClick:s=(()=>{}),action:t=(0,c.jsx)(o.Fragment,{}),selected:r=!1})=>{var a;const{pool:d,amount:u}=e,p=i.utils.undecimalize(u,9),h=r?"card-active lp-card":"lp-card",x=e.state===R.Frozen,{pools:m}=(0,n.usePool)(),y=(null===m||void 0===m||null===(a=m[d])||void 0===a?void 0:a.mint_lpt)||"";return(0,c.jsx)(l.Card,{className:h,bodyStyle:{padding:12,height:78},onClick:s,bordered:r,hoverable:!0,children:(0,c.jsxs)(l.Row,{gutter:[12,12],align:"middle",wrap:!1,children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsxs)(l.Space,{size:"middle",children:[(0,c.jsx)(_,{mintAddress:y,size:24}),(0,c.jsx)(l.Typography.Text,{type:x?"secondary":void 0,children:(0,c.jsx)(L,{mintAddress:y})})]}),(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,c.jsx)(l.Typography.Text,{children:(0,c.jsx)(P,{poolAddress:d})}),(0,c.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"My LP:"}),(0,c.jsx)(l.Typography.Text,{children:k(p).format("0,0.[00]")})]})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{size:2,children:[(0,c.jsx)(B,{poolAddress:d})," ",t]})})]})})},ue=({onClick:e=(()=>{}),selectedPoolAddress:s,action:t=(()=>(0,c.jsx)(o.Fragment,{}))})=>{const a=(0,r.useSelector)((e=>e.lpts)),{pools:i}=(0,n.usePool)(),{wallet:{address:d}}=(0,n.useWallet)(),u=(0,o.useMemo)((()=>Object.keys(a).filter((e=>{var s;const{pool:t}=a[e];return(null===(s=i[t])||void 0===s?void 0:s.owner)===d}))),[a,i,d]);return(0,c.jsx)(l.Row,{gutter:[12,12],children:u.map(((r,n)=>{const{pool:o}=a[r];return(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(ce,{data:a[r],action:t(r,o),onClick:()=>e(r,o),selected:s===o})})},r+n)}))})},pe=()=>{const e=(0,r.useDispatch)(),{main:{selectedPoolAddress:s}}=(0,r.useSelector)((e=>e)),t=(0,o.useCallback)(((s,t)=>{e(ne(t)),e(ae(!1))}),[e]),n=(0,o.useCallback)(((e,s)=>(0,c.jsx)(l.Button,{type:"text",onClick:()=>t(e,s),size:"small",icon:(0,c.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[t]);return(0,c.jsx)(l.Row,{gutter:[12,12],children:(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ue,{action:n,selectedPoolAddress:s,onClick:t})})})};let he;const xe=(0,o.forwardRef)((({max:e,onValue:s=(()=>{}),onChange:t=(()=>{}),onBlur:r=(()=>{}),...n},a)=>{var i;const[d,p]=(0,o.useState)(""),[h,x]=(0,o.useState)(null),m=(0,o.useRef)(a),y=(0,o.useCallback)((t=>{const r=e=>{he&&(clearTimeout(he),he=void 0),p(e),he=setTimeout((()=>p("")),500)};return/^\d*(\.\d*)?$/.test(t)?e&&parseFloat(t)>parseFloat(e.toString())?r("Not enough balance"):s(t):r("Invalid character")}),[e,s]);return null===m||void 0===m||null===(i=m.current)||void 0===i||i.setSelectionRange(h,h),(0,c.jsx)(l.Tooltip,{title:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(u,{name:"warning"}),d]}),visible:!!d,children:(0,c.jsx)(l.Input,{...n,onBlur:e=>{r(e);const s=Number(e.target.value);e.target.value&&y(s?s.toString():"")},onChange:e=>{t(e),x(e.target.selectionStart),y(e.target.value||"")},ref:m})})})),me=e=>{const[s,t]=(0,o.useState)(0),{getDecimals:r}=(0,n.useMint)(),a=(0,o.useCallback)((async()=>{try{const s=await r(e);return t(s)}catch(s){return t(0)}}),[e,r]);return(0,o.useEffect)((()=>{a()}),[a]),s},ye=({mintAddresses:e,activeMintAddress:s,onSelect:t})=>(0,c.jsxs)(l.Select,{onChange:t,value:s||"",bordered:!1,suffixIcon:(0,c.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),style:{marginLeft:-7},children:[(0,c.jsx)(l.Select.Option,{value:"Select",children:(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsx)(_,{mintAddress:"Select",icon:(0,c.jsx)(u,{name:"help-outline"})}),(0,c.jsx)(l.Typography.Text,{children:"Select"})]})}),e.map(((e,s)=>(0,c.jsx)(l.Select.Option,{value:e,children:(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsx)(_,{mintAddress:e}),(0,c.jsx)(L,{mintAddress:e})]})},e+s)))]}),je=({mintAddresses:e,onChange:s,suggestInfo:t})=>{const[r,a]=(0,o.useState)(""),[d,u]=(0,o.useState)("Select"),[p,h]=(0,o.useState)(""),{accounts:x}=(0,n.useAccount)(),m=D(d),y=me(d),{wallet:{address:j}}=(0,n.useWallet)(),g=null===x||void 0===x?void 0:x[p],{symbol:f}=m[0]||{},w=(0,o.useMemo)((()=>{const{amount:e}=g||{};return e&&y&&i.utils.undecimalize(e,y)||"0"}),[g,y]),v=(0,o.useCallback)((async()=>{const{splt:e}=window.sentre;let s="";try{s=await(null===i.account||void 0===i.account?void 0:i.account.deriveAssociatedAddress(j,d,e.spltProgramId.toBase58(),e.splataProgramId.toBase58()))}catch(t){}h(s)}),[d,j]),b=(0,o.useCallback)((async e=>{if(await a(e),i.account.isAddress(d))return s(y?{amount:i.utils.decimalize(e,y),mintAddress:d}:{amount:BigInt(0),mintAddress:d})}),[s,y,d]),C=(0,o.useCallback)((async e=>(await u(e),y&&parseFloat(r)?s({amount:i.utils.decimalize(r,y),mintAddress:e}):s({amount:BigInt(0),mintAddress:e}))),[s,y,r]);(0,o.useEffect)((()=>{v()}),[v]);const{symbol:A,amount:T,address:S}=t||{},P=d===S;return(0,c.jsxs)(l.Row,{gutter:[4,4],children:[(0,c.jsx)(xe,{placeholder:`Amount of ${f||"TOKEN"}`,value:r,onValue:b,prefix:(0,c.jsx)(ye,{mintAddresses:e,activeMintAddress:d,onSelect:C}),size:"large",suffix:(0,c.jsx)(l.Button,{type:"text",style:{marginRight:-7},onClick:()=>b(w),children:"MAX"}),max:w}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[4,4],children:[(0,c.jsx)(l.Col,{span:24,flex:"auto",children:P&&T?(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"Recommend:"}),(0,c.jsx)(l.Typography.Text,{type:"danger",style:{fontSize:12,cursor:"pointer"},onClick:()=>b((null===T||void 0===T?void 0:T.toString())||"0"),children:k(T).format("0,0.[00000]a")}),(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:A||"TOKEN"})]}):null}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Text,{type:"secondary",className:"caption",children:["Available: ",k(w).format("0,0.[0000]")," ",f||"TOKEN"]})})]})})]})},ge=(e,s)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(T(s),"_blank")}),fe=e=>window.notify({type:"error",description:e.message}),we={calculateAmount:(e,s,t)=>{if(!e||!s||!t)return 0;const{price:r}=t,{decimals:n,price:o}=s;return Number(i.utils.undecimalize(e,n))*o/r}},{sol:{taxmanAddress:ve},fee:{exoticFee:be,exoticTax:Ce}}=U,Ae=()=>{const[e,s]=(0,o.useState)(!1),[t,a]=(0,o.useState)(BigInt(0)),[d,p]=(0,o.useState)(""),[h,x]=(0,o.useState)(BigInt(0)),[m,y]=(0,o.useState)(""),[j,g]=(0,o.useState)(new Map),[f,w]=(0,o.useState)(),[v,b]=(0,o.useState)(!1),{accounts:C}=(0,n.useAccount)(),A=(0,r.useSelector)((e=>e.lpts)),{wallet:{address:T}}=(0,n.useWallet)(),{pools:k}=(0,n.usePool)(),{tokenProvider:P}=(0,n.useMint)(),R=(0,o.useMemo)((()=>Object.keys(A).map((e=>{var s;const{pool:t}=A[e];return null===k||void 0===k||null===(s=k[t])||void 0===s?void 0:s.mint_lpt}))),[k,A]),I=()=>{const e=[];for(const s of Object.keys(C)){const{mint:t}=C[s];R.includes(t)||e.push(t)}return e},z=(0,o.useMemo)((()=>{const e=[];return d&&e.push(d),m&&e.push(m),e}),[d,m]),B=t&&h&&i.account.isAddress(d)&&i.account.isAddress(m),D=`${d}${m}`,_=`${m}${d}`,M=j.has(D)||j.has(_),L=(0,o.useMemo)((()=>{if(!f)return;const e=f.get(d),s=f.get(m);if(!e||!s)return;const{address:r,symbol:n}=e,{address:o,symbol:a}=s;let i=0,l="",c="";return v?(i=we.calculateAmount(t,e,s),l=a,c=o):(i=we.calculateAmount(h,s,e),l=n,c=r),{symbol:l,amount:i,address:c}}),[v,d,m,f,t,h]),E=(0,o.useCallback)((()=>{for(let e in k){const s=k[e],{mint_a:t,mint_b:r}=s,n=`${t}${r}`;j.set(n,e)}g(j)}),[j,k]);(0,o.useEffect)((()=>{E()}),[E]);const N=(0,o.useCallback)((async e=>{let s=e.map((async e=>{var s;const t={},r=await P.findByAddress(e),n=null===r||void 0===r||null===(s=r.extensions)||void 0===s?void 0:s.coingeckoId;let o=0;return n&&(o=(await S(n)).price),r&&(t.symbol=r.symbol,t.decimals=r.decimals,t.address=r.address,t.price=o),t}));const t=await Promise.all(s),r=new Map;return t.forEach((e=>{r.set(e.address,e)})),r}),[P]);return(0,o.useEffect)((()=>{z&&(async()=>{const e=await N(z);w(e)})()}),[z,N]),(0,c.jsxs)(o.Fragment,{children:[(0,c.jsx)(l.Button,{type:"primary",icon:(0,c.jsx)(u,{name:"add-outline"}),onClick:()=>s(!e),children:"New"}),(0,c.jsx)(l.Modal,{visible:e,onCancel:()=>{s(!e),p(""),y("")},title:(0,c.jsx)(l.Typography.Title,{level:4,children:"New Pool"}),footer:(0,c.jsx)(l.Button,{type:"primary",size:"large",onClick:async()=>{const{swap:e,splt:r,wallet:n}=window.sentre,o=[d,m],a=await Promise.all(o.map((e=>r.deriveAssociatedAddress(T,e))));if(n)try{const{txId:r}=await e.initializePool(t,h,be,Ce,T,a[0],a[1],ve,n);return s(!1),ge("Create a new pool",r)}catch(i){return fe(i)}},disabled:!B,block:!0,children:"Supply"}),destroyOnClose:!0,centered:!0,children:(0,c.jsxs)(l.Row,{gutter:[16,12],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"This is your first time adding liquidity. It is the rate you add that sets the price for that LP token pair. If you feel satisfied with the rate please press the Supply button."})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Typography.Text,{type:"secondary",children:[(0,c.jsx)("strong",{className:"content",children:"Liquidity provider incentive."})," ","Liquidity providers earn a 0.25% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(je,{mintAddresses:I(),onChange:({amount:e,mintAddress:s})=>{a(e),p(s),b(!0)},suggestInfo:L})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(je,{mintAddresses:I(),onChange:async({amount:e,mintAddress:s})=>{x(e),y(s),b(!1)},suggestInfo:L})}),M&&(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Text,{className:"caption",type:"danger",children:"The pool you want to create with selected mints already exists. We hightly recomment to deposit your liquidity to the pool instead."})})]})})]})},{sol:{senOwner:Te},route:{myRoute:ke}}=U,Se=()=>{const e=(0,a.useHistory)(),s=(0,r.useDispatch)(),{main:{selectedPoolAddress:t},settings:{showArchived:d}}=(0,r.useSelector)((e=>e)),{pools:p}=(0,n.usePool)(),h=new URLSearchParams((0,a.useLocation)().search).get("poolAddress")||"",x=Object.keys(p).filter((e=>{const{owner:s}=p[e]||{};return Te.includes(s)})).filter((e=>{const{reserve_a:s,reserve_b:t}=p[e]||{};return d||!(!s||!t)})),m=(0,o.useCallback)((async t=>(await s(ne(t)),await s(ae(!1)),e.push(`${ke}?poolAddress=${t}`))),[s,e]),y=(0,o.useCallback)((e=>{const t=i.account.isAddress(h)?h:e;return s(ne(t))}),[s,h]);return(0,o.useEffect)((()=>{x.length&&!t&&y(x[0])}),[x,y,t]),(0,c.jsx)(l.Row,{gutter:[12,12],children:x.map(((e,s)=>(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ee,{poolAddress:e,action:(0,c.jsx)(l.Button,{type:"text",onClick:s=>{s.stopPropagation(),m(e)},icon:(0,c.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})}),onClick:()=>m(e),selected:t===e})},e+s)))})},Pe=()=>{const e=(0,r.useDispatch)(),s=(0,r.useSelector)((e=>e.lpts)),{main:{selectedPoolAddress:t}}=(0,r.useSelector)((e=>e)),n=(0,o.useCallback)((s=>{e(ne(s)),e(ae(!1))}),[e]),a=(0,o.useCallback)((e=>(0,c.jsx)(l.Button,{type:"text",onClick:()=>n(e),icon:(0,c.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[n]);return(0,c.jsx)(l.Row,{gutter:[12,12],children:Object.keys(s).map(((e,r)=>{const{pool:o}=s[e];return(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(ce,{data:s[e],action:a(o),onClick:()=>n(o),selected:t===o})})},e+r)}))})},Re="settings",Ie=(0,E.createAsyncThunk)("settings/setShowArchived",(async e=>({showArchived:e}))),ze=(0,E.createSlice)({name:Re,initialState:{showArchived:!1},reducers:{},extraReducers:e=>{e.addCase(Ie.fulfilled,((e,{payload:s})=>{Object.assign(e,s)}))}}).reducer,Be=()=>{const e=(0,r.useDispatch)(),{settings:{showArchived:s}}=(0,r.useSelector)((e=>e));return(0,c.jsx)(l.Popover,{zIndex:1e3,content:(0,c.jsx)(l.Row,{gutter:[8,8],style:{maxWidth:224},children:(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{size:"large",children:[(0,c.jsx)(l.Switch,{size:"small",checked:s,onChange:s=>e(Ie(s))}),(0,c.jsx)(l.Typography.Text,{children:"Show archived pools"})]})})}),trigger:"click",placement:"topRight",children:(0,c.jsx)(l.Button,{type:"text",icon:(0,c.jsx)(u,{name:"cog-outline"})})})},De=()=>{const[e,s]=(0,o.useState)("sentre-pools"),t=()=>"sentre-pools"===e?(0,c.jsx)(Se,{}):"community-pools"===e?(0,c.jsx)(de,{}):"deposited-pools"===e?(0,c.jsx)(Pe,{}):(0,c.jsx)(pe,{});return(0,c.jsxs)(l.Row,{gutter:[12,24],className:"side-bar",children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[8,8],wrap:!1,children:[(0,c.jsx)(l.Col,{children:(0,c.jsx)(Be,{})}),(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Select,{defaultValue:"sentre-pools",onChange:e=>{s(e)},className:"header-sidebar",children:[(0,c.jsx)(l.Select.Option,{value:"sentre-pools",children:"Sentre pools"}),(0,c.jsx)(l.Select.Option,{value:"deposited-pools",children:"Deposited pools"}),(0,c.jsx)(l.Select.Option,{value:"your-pools",children:"Your pools"}),(0,c.jsx)(l.Select.Option,{value:"community-pools",children:"Community pools"})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(Ae,{})})]})}),(0,c.jsx)(l.Col,{span:24,className:"body-sidebar scrollbar",children:(0,c.jsx)(t,{})})]})};var _e=t(51518),Me=t.n(_e);const{route:{swapRoute:Le}}=U,Ee=({poolAddress:e})=>{const s=(0,a.useHistory)(),{pools:t}=(0,n.usePool)(),r=(null===t||void 0===t?void 0:t[e].state)===R.Frozen,o=t=>(console.log(Le,e,t),s.push({pathname:Le,state:{poolAddress:e,originalRoute:t}}));return(0,c.jsxs)(l.Row,{gutter:[24,12],style:{width:256},children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{direction:"vertical",size:0,children:[(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(u,{style:{color:"#FA8C16"},name:"alert-circle-outline"}),(0,c.jsx)(l.Typography.Title,{level:5,children:"Choose the route"})]}),(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"We recommend choosing the best route to optimize the price."})]})}),(0,c.jsx)(l.Col,{style:{textAlign:"right"},span:24,children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Button,{size:"small",disabled:r,onClick:()=>o(!0),children:"Original route"}),(0,c.jsx)(l.Button,{size:"small",onClick:()=>o(!1),type:"primary",children:"Best route"})]})})]})},Ne=({poolAddress:e})=>(0,c.jsx)(l.Popover,{trigger:"click",placement:"bottomLeft",content:(0,c.jsx)(Ee,{poolAddress:e}),children:(0,c.jsx)(l.Button,{block:!0,children:"Swap"})}),{route:{farmRoute:Oe}}=U,Fe=({poolAddress:e})=>{const[s,t]=(0,o.useState)(!1),r=(0,a.useHistory)(),{pools:i}=(0,n.usePool)(),{mint_lpt:d}=(null===i||void 0===i?void 0:i[e])||{},p=(0,o.useCallback)((()=>r.push(`${Oe}?search=${e}`)),[r,e]);return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(_,{mintAddress:d,size:32}),(0,c.jsx)(L,{mintAddress:d}),(0,c.jsx)(l.Popover,{placement:"right",content:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Tooltip,{title:"Copied",visible:s,arrowPointAtCenter:!0,children:(0,c.jsx)(Me(),{text:e,children:(0,c.jsx)(l.Button,{type:"text",size:"small",icon:(0,c.jsx)(u,{name:"copy-outline"}),onClick:async()=>{t(!0),await C(1500),t(!1)}})})}),(0,c.jsxs)(l.Typography.Text,{children:["PoolAddress: ",e]})]}),children:(0,c.jsx)(l.Button,{type:"text",icon:(0,c.jsx)(u,{name:"alert-circle-outline"})})})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(Ne,{poolAddress:e}),(0,c.jsx)(l.Button,{onClick:p,children:"Go Farming"})]})})]})},Ye=({poolAddress:e,reversed:s=!1})=>{const{pools:t}=(0,n.usePool)(),{mint_a:r,mint_b:o,reserve_a:a,reserve_b:d,mint_lpt:u}=t[e]||{},p=me(r),h=me(o),x=Number(i.utils.undecimalize(a,p)),m=Number(i.utils.undecimalize(d,h)),y=m?x/m:0,j=x?m/x:0;return(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Typography.Text,{children:k(s?j:y).format("0,0.[0000]")}),(0,c.jsx)(L,{mintAddress:u,isReverse:s,separator:" / "})]})},We=({poolAddress:e})=>{const{pools:s}=(0,n.usePool)(),[t,r]=(0,o.useState)(!0),{mint_lpt:a}=s[e]||{};return(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(_,{mintAddress:a,isReserve:t}),(0,c.jsx)(Ye,{poolAddress:e,reversed:t}),(0,c.jsx)(l.Button,{type:"text",onClick:()=>r(!t),icon:(0,c.jsx)(u,{name:"swap-horizontal-outline"})})]})},qe=({value:e="0",poolAddress:s})=>{const[t,a]=(0,o.useState)(!1),[d,p]=(0,o.useState)("0"),{lpts:h}=(0,r.useSelector)((e=>e)),{getMint:x}=(0,n.useMint)(),{pools:m}=(0,n.usePool)(),{mint_a:y,mint_b:j,reserve_a:g,reserve_b:f,mint_lpt:w}=m[s]||{},v=me(y),b=me(j),C=i.utils.undecimalize(g,v),A=i.utils.undecimalize(f,b),T=Object.keys(h).find((e=>h[e].pool===s))||"",{amount:S}=h[T]||{},P=Number(i.utils.undecimalize(S||BigInt(0),9));return(0,o.useEffect)((()=>{(async()=>{const{[w]:{supply:e,decimals:s}}=await x({address:w});p(i.utils.undecimalize(e,s))})()}),[w,x]),(0,c.jsx)(l.Card,{bordered:!1,className:"lp-card",children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"In-Pool Price"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Button,{type:"text",style:{width:"auto",height:"auto"},icon:(0,c.jsx)(u,{name:"swap-horizontal-outline"}),onClick:()=>a(!t)}),(0,c.jsx)(Ye,{poolAddress:s,reversed:t})]})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Pool Composition"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsxs)(l.Typography.Text,{children:[k(C).format("0,0.[00]a")," ",(0,c.jsx)(L,{mintAddress:y})]}),(0,c.jsx)(l.Typography.Title,{level:5,children:" + "}),(0,c.jsxs)(l.Typography.Text,{children:[k(A).format("0,0.[00]a")," ",(0,c.jsx)(L,{mintAddress:j})]})]})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"My Current LP"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Text,{children:[k(P).format("0,0.[0000]")," LP"]})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[8,8],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Total LP"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Text,{children:[k(d).format("0,0.[0000]")," LP"]})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"You will reveice"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsx)(l.Typography.Title,{level:5,children:k(e).format("0,0.[0000]")}),(0,c.jsx)(l.Typography.Title,{level:5,children:"LP"})]})})]})})]})})},Ue=({mintAddress:e,onChange:s,value:t})=>{const[r,a]=(0,o.useState)(""),[d,u]=(0,o.useState)(""),{wallet:{address:p}}=(0,n.useWallet)(),{accounts:h}=(0,n.useAccount)(),x=me(e),m=null===h||void 0===h?void 0:h[d],y=(0,o.useMemo)((()=>{const{amount:e}=m||{};return e&&x&&i.utils.undecimalize(e,x)||"0"}),[m,x]),j=(0,o.useCallback)((async e=>(await a(e),x&&parseFloat(e)?s(i.utils.decimalize(e,x)):s(BigInt(0)))),[x,s]),g=(0,o.useCallback)((()=>{const e=i.utils.undecimalize(t,x||0);Number(e)!==Number(r)&&a(e)}),[x,t]),f=(0,o.useCallback)((async()=>{const{splt:s}=window.sentre;try{const t=await i.account.deriveAssociatedAddress(p,e,s.spltProgramId.toBase58(),s.splataProgramId.toBase58());u(t)}catch(t){}}),[e,p]);(0,o.useEffect)((()=>{f()}),[f]),(0,o.useEffect)((()=>{g()}),[g]);const w=Number(r)>Number(y);return(0,c.jsxs)(l.Row,{gutter:[4,4],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Card,{bodyStyle:{padding:8},bordered:!1,className:"lp-card",children:(0,c.jsx)(xe,{placeholder:"0",value:r,onValue:j,size:"small",bordered:!1,prefix:(0,c.jsxs)(l.Space,{style:{marginLeft:-4,marginRight:7,lineHeight:1},children:[(0,c.jsx)(_,{mintAddress:e}),(0,c.jsx)(l.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,c.jsx)(l.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>j(y),children:"MAX"}),max:y})})}),(0,c.jsx)(l.Col,{flex:"auto",children:w&&(0,c.jsx)(l.Typography.Text,{style:{fontSize:12},type:"danger",children:"Not enough balance."})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",k(y).format("0,0.[0000]")," ",(0,c.jsx)(L,{mintAddress:e})]})})]})},Ve=({poolAddress:e,onClose:s=(()=>{}),onChange:t=(()=>{})})=>{const[r,a]=(0,o.useState)(!1),[d,u]=(0,o.useState)(""),[p,h]=(0,o.useState)([BigInt(0),BigInt(0)]),[x,m]=(0,o.useState)("all"),[y,j]=(0,o.useState)(!0),{pools:g}=(0,n.usePool)(),{wallet:{address:f}}=(0,n.useWallet)(),{getMint:w}=(0,n.useMint)(),{accounts:v}=(0,n.useAccount)(),{mint_a:b,mint_b:C,reserve_a:A,reserve_b:k,mint_lpt:S,fee_ratio:P,tax_ratio:R}=g[e],I=[b,C],z=me(b),B=me(C),D=(0,o.useMemo)((()=>[z,B]),[z,B]),_=(0,o.useMemo)((()=>Number(i.utils.undecimalize(A,z))/Number(i.utils.undecimalize(k,B))),[z,B,A,k]),M=(0,o.useCallback)(((e,s)=>{if(!D)return BigInt(0);const t=0===s?D[1]:D[0],r=Number(i.utils.undecimalize(e,D[s]));let n=r*_;return 0===s&&(n=r/_),i.utils.decimalize(n,t)}),[D,_]),E=(0,o.useCallback)((async()=>{if(!i.account.isAddress(f))return u("");try{const{[S]:{supply:e}}=await w({address:S}),{lpt:s}=i.Swap.oracle.sided_deposit(p[0],p[1],A,k,e,P,R);return u(i.utils.undecimalize(s,9))}catch(e){window.notify({type:"error",description:e.message})}}),[p,P,w,S,A,k,R,f]);(0,o.useEffect)((()=>{E()}),[E]),(0,o.useEffect)((()=>{h([BigInt(0),BigInt(0)])}),[x]);const N=(0,o.useCallback)((async()=>{const{splt:e}=window.sentre,s=await e.deriveAssociatedAddress(f,b),t=v[s],r=await e.deriveAssociatedAddress(f,C),n=v[r],o=(null===t||void 0===t?void 0:t.amount)||0,a=(null===n||void 0===n?void 0:n.amount)||0,i=p[0]>o||p[1]>a;j(i)}),[v,p,b,C,f]);(0,o.useEffect)((()=>{N()}),[N]);return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Radio.Group,{onChange:e=>{var s;m((s=e).target.value),t(s.target.value)},value:x,children:[(0,c.jsx)(l.Radio,{value:"all",children:(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsx)(L,{mintAddress:S,separator:"+"}),(0,c.jsx)(l.Tag,{className:"deposit-tag",children:"0 Fee"})]})}),I.map(((e,s)=>(0,c.jsx)(l.Radio,{value:e,children:(0,c.jsx)(L,{mintAddress:e})},e+s)))]})}),I.map(((e,s)=>(e===x||"all"===x)&&(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Ue,{mintAddress:e,value:p[s],onChange:s=>((e,s)=>{if(!i.account.isAddress(e)||!s)return h([BigInt(0),BigInt(0)]);const t=I.findIndex((s=>s===e));if(-1===t)return;let r=[...p];"all"===x&&(r[0]=r[1]=M(s,t)),r[t]=s,h(r)})(e,s)})},e+s))),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(qe,{value:d,poolAddress:e})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{type:"primary",onClick:async()=>{a(!0);const{splt:t,swap:r,wallet:n}=window.sentre,[o,i]=await Promise.all(I.map((e=>t.deriveAssociatedAddress(f,e))));if(n)try{const{txId:t}=await r.addSidedLiquidity(p[0],p[1],e,o,i,n);return s(),window.notify({type:"success",description:"Deposit liquidity successfully. Click to view details.",onClick:()=>window.open(T(t),"_blank")})}catch(l){return window.notify({type:"error",description:l.message})}finally{a(!1)}},disabled:!Number(d)||y,block:!0,loading:r,children:"Deposit"})})]})},He=({poolAddress:e,onClose:s=(()=>{})})=>{const{pools:t}=(0,n.usePool)(),[r,a]=(0,o.useState)("all"),{fee_ratio:d,tax_ratio:u}=t[e]||{},p=d||BigInt(0),h=u||BigInt(0),x=i.utils.undecimalize(p+h,7),m="all"!==r,y=m?"#F9575E":"inherit",j=m?void 0:"secondary";return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Title,{level:5,children:"Deposit Liquidity"})}),(0,c.jsxs)(l.Col,{span:24,children:[(0,c.jsxs)(l.Typography.Paragraph,{type:"secondary",children:[(0,c.jsx)("strong",{children:"Liquidity provider incentive."})," Liquidity providers earn a ",x,"% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]}),(0,c.jsxs)(l.Typography.Paragraph,{type:j,children:[(0,c.jsx)("strong",{style:{color:y},children:"Asymmetric Deposit."})," ","Instead of depositing amounts of tokens proportionally, Asymmetric Deposit allows you to deposit even one side of token. The pool will automatically re-balance itself."]})]}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Ve,{poolAddress:e,onClose:s,onChange:a})})]})},Ze=({lptAddress:e,onChange:s})=>{const[t,a]=(0,o.useState)(""),d=(0,r.useSelector)((e=>e.lpts)),{pools:u}=(0,n.usePool)(),{amount:p,pool:h}=(null===d||void 0===d?void 0:d[e])||{},{mint_lpt:x}=(null===u||void 0===u?void 0:u[h])||{},m=(0,o.useMemo)((()=>p&&i.utils.undecimalize(p,9)||"0"),[p]),y=(0,o.useCallback)((async e=>(await a(e),parseFloat(e)?s(i.utils.decimalize(e,9)):s(BigInt(0)))),[s]);return(0,c.jsxs)(l.Row,{gutter:[4,4],justify:"end",children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Card,{bodyStyle:{padding:8},bordered:!1,children:(0,c.jsx)(xe,{placeholder:"Amount of LP",value:t,onValue:y,size:"small",bordered:!1,prefix:(0,c.jsxs)(l.Space,{style:{marginLeft:-7,marginRight:7,fontSize:12,lineHeight:1},children:[(0,c.jsx)(_,{mintAddress:x,size:24}),(0,c.jsx)(l.Typography.Text,{children:(0,c.jsx)(M,{mintAddress:x})}),(0,c.jsx)(l.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,c.jsx)(l.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>y(m),children:"MAX"}),max:m})})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",k(m).format("0,0.[0000]")," LPT"]})})]})},Ge=({mintAddresses:e,amounts:s})=>(0,c.jsx)(l.Card,{bordered:!1,children:(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Text,{children:"You will receive"})}),e.map(((e,t)=>(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[8,8],justify:"space-between",align:"middle",children:[(0,c.jsx)(l.Col,{children:(0,c.jsx)(_,{mintAddress:e,size:32})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Title,{level:5,style:{margin:0},children:[k(s[t]||0).format("0,0.[0000]")," ",(0,c.jsx)(L,{mintAddress:e})]})})]})},t)))]})}),$e=({poolAddress:e,onClose:s=(()=>{})})=>{var t;const[a,d]=(0,o.useState)(BigInt(0)),[u,p]=(0,o.useState)(),[h,x]=(0,o.useState)([]),[m,y]=(0,o.useState)([0,0]),[j,g]=(0,o.useState)(!1),f=(0,r.useSelector)((e=>e.lpts)),w=Object.keys(f).find((s=>f[s].pool===e))||"",v=null===f||void 0===f||null===(t=f[w])||void 0===t?void 0:t.pool,{wallet:{address:b}}=(0,n.useWallet)(),{pools:C}=(0,n.usePool)(),{getMint:A}=(0,n.useMint)(),{mint_a:k,mint_b:S,mint_lpt:P,reserve_a:R,reserve_b:I}=(null===C||void 0===C?void 0:C[v])||{},z=[k,S],B=(0,o.useCallback)((async()=>{try{const{[P]:{supply:e}}=await A({address:P});p(e)}catch(e){}try{const{[k]:{decimals:e}}=await A({address:k}),{[S]:{decimals:s}}=await A({address:S});y([e,s])}catch(e){}}),[k,S,P,A]);return(0,o.useEffect)((()=>{if(u){const{deltaA:e,deltaB:s}=i.Swap.oracle.withdraw(a,u,R,I),t=[e,s].map(((e,s)=>i.utils.undecimalize(e,m[s])));x(t)}else x([])}),[R,I,a,u,m]),(0,o.useEffect)((()=>{B()}),[B]),(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Title,{level:5,children:"Withdraw Liquidity"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Ze,{lptAddress:w,onChange:d})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Ge,{mintAddresses:z,amounts:h})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{type:"primary",onClick:async()=>{if(!a)return;g(!0);const{swap:t,wallet:r,splt:n}=window.sentre,o=await Promise.all(z.map((e=>n.deriveAssociatedAddress(b,e))));if(r)try{const{txId:n}=await t.removeLiquidity(a,e,o[0],o[1],r);return s(),window.notify({type:"success",description:"Withdraw liquidity successfully. Click to view details.",onClick:()=>window.open(T(n),"_blank")})}catch(i){return window.notify({type:"error",description:i.message})}finally{g(!1)}},disabled:!a,block:!0,loading:j,children:"Withdraw"})})]})},Qe=({poolAddress:e,lpt:s})=>{const[t,r]=(0,o.useState)(!1),[n,a]=(0,o.useState)(!1);return(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(l.Button,{onClick:()=>a(!0),icon:(0,c.jsx)(u,{name:"log-out-outline"}),disabled:!s,block:!0,children:"Withdraw"})}),(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(l.Button,{onClick:()=>r(!0),type:"primary",icon:(0,c.jsx)(u,{name:"log-in-outline"}),block:!0,children:"Deposit"})}),(0,c.jsx)(l.Modal,{visible:t,onCancel:()=>r(!1),closeIcon:(0,c.jsx)(u,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,c.jsx)(He,{poolAddress:e,onClose:()=>r(!1)})}),(0,c.jsx)(l.Modal,{visible:n,onCancel:()=>a(!1),closeIcon:(0,c.jsx)(u,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,c.jsx)($e,{poolAddress:e,onClose:()=>a(!1)})})]})},Je=({label:e="label",title:s="",subTitle:t=null})=>(0,c.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,c.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:e}),(0,c.jsx)("span",{children:s}),t&&(0,c.jsx)(l.Typography.Text,{type:"secondary",children:t})]}),Ke=({value:e=0,sub:s="",format:t=""})=>(0,c.jsxs)(l.Space,{size:4,align:"baseline",children:[(0,c.jsx)(l.Typography.Title,{level:4,children:k(e).format(t)}),s&&(0,c.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:s})]}),Xe=({poolAddress:e})=>{const[s,t]=(0,o.useState)(0),a=(0,r.useSelector)((e=>e.lpts)),d=(0,r.useSelector)((s=>{var t,r,n;return null===(t=s.stat)||void 0===t||null===(r=t[e])||void 0===r||null===(n=r.details)||void 0===n?void 0:n.roi})),{getMint:u}=(0,n.useMint)(),{pools:p}=(0,n.usePool)(),{mint_a:h,mint_b:x,reserve_a:m,reserve_b:y,mint_lpt:j}=p[e]||{},g=me(h),f=me(x),w=i.utils.undecimalize(m,g),v=i.utils.undecimalize(y,f),b=Object.keys(a).find((s=>a[s].pool===e))||"",{amount:C}=a[b]||{},A=Number(i.utils.undecimalize(C||BigInt(0),9)),T=(0,o.useCallback)((e=>d&&e?Math.pow(d/100+1,e)-1:0),[d]);return(0,o.useEffect)((()=>{(async()=>{if(!i.account.isAddress(j))return 0;const{[j]:{decimals:e,supply:s}}=await u({address:j});t(Number(i.utils.undecimalize(s,e)))})()}),[u,j]),(0,c.jsx)(l.Card,{bordered:!1,children:(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Title,{level:4,children:"Liquidity Position"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[20,20],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Je,{label:"APY",title:(0,c.jsx)(Ke,{value:T(365),format:"0,0.[00]%"})})}),(0,c.jsx)(l.Col,{xs:8,children:(0,c.jsx)(Je,{label:"My Contribution",title:(0,c.jsx)(Ke,{value:A,sub:"LP",format:"0,0.[0000]a"})})}),(0,c.jsx)(l.Col,{xs:16,children:(0,c.jsx)(Je,{label:"Pool Composition",title:(0,c.jsxs)(l.Space,{size:4,align:"baseline",children:[(0,c.jsx)(Ke,{value:w,sub:(0,c.jsx)(L,{mintAddress:h}),format:"0,0.[00]a"}),(0,c.jsx)(l.Typography.Title,{level:5,children:"+"}),(0,c.jsx)(Ke,{value:v,sub:(0,c.jsx)(L,{mintAddress:x}),format:"0,0.[00]a"})]})})}),(0,c.jsx)(l.Col,{xs:8,children:(0,c.jsx)(Je,{label:"My Portion",title:(0,c.jsx)(Ke,{value:A/s,format:"0,0.[00]%"}),subTitle:`Over ${k(s).format("0,0.[0000]a")} LP`})}),(0,c.jsx)(l.Col,{xs:16,children:(0,c.jsx)(Je,{label:"In-Pool Price",title:(0,c.jsx)(We,{poolAddress:e})})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Qe,{lpt:A,poolAddress:e})})]})})},es=({title:e,label:s,ratio:t,currentRatio:r="0",onChange:n=(()=>{})})=>(0,c.jsxs)(l.Row,{gutter:[4,4],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Text,{type:"secondary",children:e})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Card,{bodyStyle:{padding:4},bordered:!1,children:(0,c.jsx)(xe,{placeholder:"0",value:t,onValue:n,bordered:!1})})}),(0,c.jsx)(l.Col,{span:24,style:{fontSize:12},children:(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsxs)(l.Typography.Text,{type:"secondary",children:[s,":"]}),(0,c.jsxs)(l.Typography.Text,{children:[r,"%"]})]})})]}),ss=({address:e})=>{const{pools:s}=(0,n.usePool)(),[t,r]=(0,o.useState)(""),[a,d]=(0,o.useState)(""),[p,h]=(0,o.useState)(!1),x=s[e],{fee_ratio:m,tax_ratio:y}=x||{},j=(0,o.useMemo)((()=>m?i.utils.undecimalize(m,7):"0"),[m]),g=(0,o.useMemo)((()=>y?i.utils.undecimalize(y,7):"0"),[y]);return(0,c.jsxs)(l.Row,{gutter:[16,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[4,4],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(es,{title:"Fee (%)",label:"Current fee",ratio:t,currentRatio:j,onChange:r})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(es,{title:"Tax (%)",label:"Current tax",ratio:a,currentRatio:g,onChange:d})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{onClick:async()=>{h(!0);const s=i.utils.decimalize(t||j,7),n=i.utils.decimalize(a||g,7),{swap:o,wallet:l}=window.sentre;if(!l)return;const{txId:c}=await o.updateFee(s,n,e,l);return h(!1),c?(r(""),d(""),window.notify({type:"success",description:"Update fee successfully. Click to view details",onClick:()=>window.open(T(c),"_blank")})):window.notify({type:"error",description:"Update fee make failure."})},icon:(0,c.jsx)(u,{name:"cash-outline"}),block:!0,loading:p,disabled:!a&&!t,children:"Update Fee"})})]})};var ts;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(ts||(ts={}));const rs=({poolStatus:e,description:s})=>{const t=e===ts.Active;return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{size:0,children:[(0,c.jsx)(l.Badge,{status:t?"success":"error"}),(0,c.jsxs)(l.Typography.Text,{children:["Current status: ",t?"Active":"Frozen"]})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Card,{bordered:!1,bodyStyle:{padding:16},children:(0,c.jsxs)(l.Space,{size:4,align:"start",children:[(0,c.jsx)(u,{name:"information-circle-outline"}),(0,c.jsx)(l.Space,{direction:"vertical",size:0,children:(0,c.jsx)(l.Typography.Text,{children:s})})]})})})]})},ns=({address:e})=>{const{pools:s}=(0,n.usePool)(),[t,r]=(0,o.useState)(!1),a=s[e],i=(0,o.useMemo)((()=>{const e=null===a||void 0===a?void 0:a.state;return e===ts.Active?(0,c.jsx)(rs,{poolStatus:e,description:"Freezing a pool will prevent all actions until the pool has been thawed."}):e===ts.Frozen?(0,c.jsx)(rs,{poolStatus:e,description:"Thaw a pool will active all actions"}):"Pool is closed"}),[null===a||void 0===a?void 0:a.state]);return(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:i}),(0,c.jsx)(l.Col,{span:24,children:(null===a||void 0===a?void 0:a.state)===ts.Active?(0,c.jsx)(l.Button,{style:{background:"#40A9FF",color:"#fff"},onClick:async()=>{r(!0);const{swap:s,wallet:t}=window.sentre;if(!t)return;const{txId:n}=await s.freezePool(e,t);return r(!1),n?window.notify({type:"success",description:"Freeze the pool successfully. Click to view details",onClick:()=>window.open(T(n),"_blank")}):window.notify({type:"error",description:"Freeze the pool make failure."})},icon:(0,c.jsx)(u,{name:"snow-outline"}),block:!0,loading:t,children:"Freeze Pool"}):(0,c.jsx)(l.Button,{type:"primary",onClick:async()=>{r(!0);const{swap:s,wallet:t}=window.sentre;if(!t)return;const{txId:n}=await s.thawPool(e,t);return r(!1),n?window.notify({type:"success",description:"Thaw the pool successfully. Click to view details",onClick:()=>window.open(T(n),"_blank")}):window.notify({type:"error",description:"Thaw the pool make failure."})},icon:(0,c.jsx)(u,{name:"sunny-outline"}),block:!0,loading:t,children:"Thaw Pool"})})]})},os=({address:e})=>{const[s,t]=(0,o.useState)(""),[r,n]=(0,o.useState)(!1);return(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Space,{align:"start",children:[(0,c.jsx)(u,{name:"information-circle-outline"}),(0,c.jsx)(l.Typography.Text,{children:"Your current account will lose the pool control when you transfer ownership."})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Card,{bodyStyle:{padding:8},bordered:!1,children:(0,c.jsxs)(l.Row,{gutter:[0,0],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Text,{style:{marginLeft:12,fontSize:12},type:"secondary",children:"Transfer to Owner"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Input,{placeholder:"E.g. AgTMC...",value:s,onChange:e=>t(e.target.value),bordered:!1})})]})})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{onClick:async()=>{await n(!0);try{const{swap:t,wallet:r}=window.sentre;if(!r)throw new Error("Wallet is not connected.");const{txId:o}=await t.transferPoolOwnership(e,s,r);return window.notify({type:"success",description:"Transfer successfully. Click to view details.",onClick:()=>window.open(T(o),"_blank")})}catch(t){return window.notify({type:"error",description:t.message})}finally{return n(!1)}},icon:(0,c.jsx)(u,{name:"airplane-outline"}),disabled:!i.account.isAddress(s),loading:r,block:!0,children:"Transfer"})})]})},as=({poolAddress:e})=>{const{wallet:{address:s}}=(0,n.useWallet)(),{pools:t}=(0,n.usePool)(),r=t[e];return r&&s===r.owner?(0,c.jsx)(l.Card,{style:{minHeight:285},bodyStyle:{padding:0},bordered:!1,children:(0,c.jsxs)(l.Tabs,{style:{padding:24},children:[(0,c.jsx)(l.Tabs.TabPane,{tab:"Freeze/Thaw",children:(0,c.jsx)(ns,{address:e})},"freeze-thaw"),(0,c.jsx)(l.Tabs.TabPane,{tab:"Fee",children:(0,c.jsx)(ss,{address:e})},"fee"),(0,c.jsx)(l.Tabs.TabPane,{tab:"Transfer Owner",children:(0,c.jsx)(os,{address:e})},"transfer-owner")]})}):null};var is=t(4550),ls=t.n(is),ds=t(76907),cs=t.n(ds),us=t(21111),ps=t.n(us);const hs=({chartData:e=[],labels:s=[],type:t="line",configs:r,disableAxe:n=!1,chartId:a="sen_chart"})=>{const{backgroundColor:i}=r||{},[l,d]=(0,o.useState)(!1),u=(0,o.useCallback)(((e,s,t)=>({labels:s,datasets:[{...r,data:e,backgroundColor:t}]})),[r]),p=(0,o.useRef)(null),h=(0,o.useCallback)((()=>{var e,s;if(!p||!i)return"#dadada";const r=null===p||void 0===p||null===(e=p.current)||void 0===e||null===(s=e.canvas)||void 0===s?void 0:s.getContext("2d"),n=null===r||void 0===r?void 0:r.createLinearGradient(0,0,0,270);null===n||void 0===n||n.addColorStop(0,i),null===n||void 0===n||n.addColorStop(1,`${i}00`);return"line"===t?n:i}),[i,t]);return(0,o.useEffect)((()=>{var t;const r=p.current,n=null===r||void 0===r||null===(t=r.data.datasets)||void 0===t?void 0:t.find((({data:e})=>e)),o=ps()(null===n||void 0===n?void 0:n.data,e);r&&!o&&(r.data=u(e,s,h()),null===r||void 0===r||r.update())}),[e,u,h,s]),(0,c.jsx)("canvas",{id:a,height:"270",ref:e=>{if(!e)return;const s=e.getContext("2d");s&&!l&&(p.current=new(cs())(s,{type:t,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!n}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!n,beginAtZero:!1,maxTicksLimit:8,callback:function(e,s,t){return k(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,s)=>{const t=document.getElementById(a);t&&(t.style.cursor=s[0]?"pointer":"default")}}}}),d(!0))}})};class xs{constructor(){this.programId="",this.time=0,this.address="",this.mint="",this.actionType="",this.amountIn=BigInt(0),this.amountOut=BigInt(0),this.totalTrans=0}}class ms{parserDailyReport(e){let s=new Array;for(const t of e)s=s.concat(this.parseDailyReport(t));return this.mergeDailyReport(s)}parseDailyReport(e){const s=new Array,{programId:t,time:r,actionType:n,actionTransfers:o}=e;for(const a of o){const{source:e,destination:o,amount:i}=a,l=new xs;if(l.programId=t,l.time=r,l.actionType=n,e){const{mint:t,address:r}=e;s.push({...l,mint:t,address:r,amountOut:BigInt(i)})}if(o){const{mint:e,address:t}=o;s.push({...l,mint:e,address:t,amountIn:BigInt(i)})}}return s}mergeDailyReport(e){const s=new Map;for(const r of e){const e=`${r.time}^${r.address}^${r.mint}^${r.actionType}`;if(s.has(e)){const t=s.get(e);void 0!==t&&(r.amountIn+=t.amountIn,r.amountOut+=t.amountOut,r.totalTrans+=t.totalTrans)}s.set(e,r)}const t=new Array;return s.forEach((e=>t.push(e))),t}}var ys=t(15454),js=t.n(ys),gs=t(32642),fs=t(97429).Buffer;class ws{constructor(){this._ipfs=async()=>{try{return window.ipfs||(window.ipfs=await(0,gs.Ue)()),window.ipfs}catch(e){return await C(500),await this._ipfs()}},this.get=async e=>{if(!ws.isCID(e))throw new Error("Invalid CID");const s=await this._ipfs(),t=await s.cat(e);let r="";for await(const n of t)r+=fs.from(n).toString();return JSON.parse(r)},this.set=async e=>{if(!e)throw new Error("Empty data");const s=JSON.stringify(e),t=await this._ipfs(),{path:r}=await t.add(s);return r}}}ws.isCID=e=>{try{return!!e&&gs.bf.multihash(e)}catch(s){return!1}};const vs=ws;class bs{constructor(e){if(this.dbName=void 0,this.driver=void 0,this.ipfs=void 0,this.createInstance=e=>js().createInstance({driver:this.driver,name:this.dbName,storeName:e}),this.dropInstance=async e=>{const s=this.createInstance(e);return await s.clear(),await js().dropInstance({name:this.dbName,storeName:e})},this.all=async()=>{let e={};const s=(await this.createInstance("sentre").getItem("appIds")||[]).flat().concat(["sentre"]);for(const t of s){e[t]={};const s=this.createInstance(t);await s.iterate(((s,r)=>{e[t][r]=s}))}return e},this.fetch=async e=>await this.ipfs.get(e),this.backup=async()=>{const e=await this.all();return await this.ipfs.set(e)},this.restore=async e=>{const s=await this.fetch(e);for(const t in s){const e=await this.createInstance(t);for(const r in s[t]){const n=s[t][r];await e.setItem(r,n)}}return s},!i.account.isAddress(e))throw new Error("Invalid address");this.dbName=e,this.driver=[js().WEBSQL,js().LOCALSTORAGE],this.ipfs=new vs}}const Cs=bs;var As=t(74370),Ts=t(70320);class ks{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class Ss{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class Ps{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}var Rs=t(71256);const Is=700;class zs{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,s,t=700){t>Is&&(t=Is);const r={limit:t,before:s};return this.conn.getConfirmedSignaturesForAddress2(e,r)}async fetchConfirmTransaction(e){let s=[];const t=[];for(let n=0;n<=e.length/200;n++){const s=200*n,r=e.slice(s,s+200);t.push(this.conn.getParsedConfirmedTransactions(r))}const r=await Promise.all(t);for(const n of r)s=s.concat(n);return s}async fetchTransactions(e,s){const t=(new Date).getTime()/1e3;let{secondFrom:r,secondTo:n,lastSignature:o,limit:a}=s;r=Math.floor(r||0),n=Math.floor(n||t);const i=new Rs.PublicKey(e);let l=[],d=!1;for(;!d;){const e=await this.fetchSignatures(i,o,a);if(null===e||void 0===e||!e.length||d)break;for(const s of e){const e=s.blockTime;if(e&&!(e>n)){if(e<r){d=!0;break}o=s.signature,l.push(s.signature)}}if(a&&l.length>=a)break;if((null===e||void 0===e?void 0:e.length)<Is)break}return await this.fetchConfirmTransaction(l)}}let Bs;!function(e){e.Transfer="transfer"}(Bs||(Bs={}));const Ds=1e3;let _s;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(_s||(_s={}));class Ms{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const s=new Ms,t=e*Ds;return s.setMilliSeconds(t),s}static fromYmd(e){const s=new Ms,t=ls()(e,_s.YMD).valueOf();return s.setMilliSeconds(t),s}static getListDate(e,s){const t=[];let r=Ms.fromYmd(e);const n=Ms.fromYmd(s);for(;r.ymd()<=n.ymd();)t.push(r.ymd()),r=r.addDay();return t}format(e){const s=new Date(this.milliSeconds);return ls()(s).format(e)}subtractDay(e=1){const s=ls()(this.milliSeconds).subtract(e,"days").valueOf();return Ms.fromSeconds(s/Ds)}addDay(e=1){const s=ls()(this.milliSeconds).add(e,"days").valueOf();return Ms.fromSeconds(s/Ds)}seconds(){return(this.milliSeconds-this.milliSeconds%Ds)/Ds}ymd(){return Number(this.format(_s.YMD))}static today(e=_s.YMD){return ls()().format(e)}}var Ls=t(97429).Buffer;const Es={key:"code",type:"u8"};let Ns;!function(e){e.InitPool="INITIALIZE_POOL",e.AddLiquidity="ADD_LIQUIDITY",e.RemoveLiquidity="REMOVE_LIQUIDITY",e.Swap="SWAP",e.Route="SWAP"}(Ns||(Ns={}));const Os={0:Ns.InitPool,1:Ns.AddLiquidity,2:Ns.RemoveLiquidity,3:Ns.Swap,8:Ns.Route};class Fs extends class{constructor(){this.parseAction=e=>""}async collect(e,s,t){let{lastSignature:r,limit:n}=s;const o=new zs;let a=[],i=r,l=!1,d=200;for(;!l;){const r=await o.fetchTransactions(e,{...s,lastSignature:i,limit:d});for(const e of r){i=e.transaction.signatures[0];const s=this.parseTransLog(e);if(s){if(t){if(!await t(s))continue}if(a.push(s),n&&a.length>=n){l=!0;break}}}if(n&&(d=d*n/(a.length||1)),!r.length)break;if(l)break}return a}parseTransLog(e){var s,t;const{blockTime:r,meta:n,transaction:o}=e;if(!r||!n)return;const{postTokenBalances:a,preTokenBalances:i,postBalances:l,preBalances:d}=n,{signatures:c,message:u}=o,p=(null===(s=n.innerInstructions)||void 0===s||null===(t=s[0])||void 0===t?void 0:t.instructions)||[],h=u.instructions[0]||[],x=new ks;x.signature=c[0],x.blockTime=r,x.time=Ms.fromSeconds(r).ymd(),x.programId=h.programId.toString();const m=this.parseAccountInfo(u.accountKeys,a||[],i||[],l,d);return this.isParsedInstruction(h)?(x.programTransfer=this.parseListActionTransfer([h],m),x):(x.actionTransfers=this.parseListActionTransfer(p,m),x.programInfo={programId:h.programId.toString(),data:h.data},x.actionType="",x.actionType=this.parseAction(x),x)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,s){const t=[];for(const r of e){if(!this.isParsedInstruction(r))continue;const e=r.parsed||{};if(e.type===Bs.Transfer){const r=e.info,n=this.parseActionTransfer(r,s);n&&t.push(n)}}return t}parseActionTransfer(e,s){const{source:t,destination:r,amount:n,lamports:o}=e,a=n||o.toString();if(!a||!s.has(t)||!s.has(r))return;const i=new Ps;return i.source=s.get(t),i.destination=s.get(r),i.amount=a,i}parseAccountInfo(e,s,t,r,n){const o=new Map;for(const a of s){const{accountIndex:s,mint:t,uiTokenAmount:r}=a,n=new Ss;n.address=e[s].pubkey.toString(),n.postBalance=r.amount,n.mint=t,n.decimals=r.decimals,o.set(n.address,n)}for(const a of t){const{accountIndex:s,uiTokenAmount:t}=a,r=e[s].pubkey.toString(),n=o.get(r)||new Ss;n.preBalance=t.amount,o.set(n.address,n)}return e.forEach(((e,s)=>{const t=e.pubkey.toString();if(!i.account.isAssociatedAddress(t)){const e=o.get(t)||new Ss;e.address=t,e.mint="11111111111111111111111111111111",e.postBalance=String(r[s]||0),e.preBalance=String(n[s]||0),e.decimals=9,o.set(e.address,e)}})),o}}{constructor(...e){super(...e),this.parseAction=e=>{var s;const t=null===(s=e.programInfo)||void 0===s?void 0:s.data,r=(0,As.base58_to_binary)(t),n=new Ts.struct([Es]).fromBuffer(Ls.from(r));return Os[n.code]||""}}}var Ys=t(16781);class Ws{constructor(e){this.poolAddress=void 0,this.poolData=void 0,this.poolTransLogService=new Fs,this.dailyReportService=new ms,this.tokenProvider=new Ys.Z,this.getPoolData=async()=>{if(!this.poolData){const e=window.sentre.swap;this.poolData=await e.getPoolData(this.poolAddress)}return this.poolData},this.getUsd=async(e,s)=>{const t=await this.tokenProvider.findByAddress(e);if(!t)return 0;const{decimals:r,extensions:n}=t;try{const e=await S(null===n||void 0===n?void 0:n.coingeckoId);if(null===e||void 0===e||!e.price)return 0;const t=i.utils.undecimalize(s,r);return Number(t)*e.price}catch(o){return 0}},this.fetchTransLog=async(e,s)=>{const t=new Cs(this.poolAddress).createInstance("stat");let r=await t.getItem("translogs")||[];r=r.sort(((e,s)=>s.blockTime-e.blockTime));const n=r[0],o=r.at(-1);if(n&&o){const[t,a]=await Promise.all([this.poolTransLogService.collect(this.poolAddress,{secondFrom:n.blockTime,secondTo:s}),this.poolTransLogService.collect(this.poolAddress,{secondFrom:e,secondTo:o.blockTime,lastSignature:o.signature})]);r=r.filter((s=>s.blockTime>e)),r=[...t,...r,...a]}else r=await this.poolTransLogService.collect(this.poolAddress,{secondFrom:e,secondTo:s});return await t.setItem("translogs",r),r},this.getDailyInfo=async()=>{let e=new Ms;const s=(new Ms).subtractDay(11),{mint_a:t,mint_b:r,treasury_a:n,treasury_b:o,reserve_a:a,reserve_b:l,fee_ratio:d,tax_ratio:c}=await this.getPoolData(),u=await this.fetchTransLog(s.seconds(),e.seconds()),p=this.dailyReportService.parserDailyReport(u),h={};for(const i of p){const{time:e,address:s}=i;s!==n&&s!==o||(h[e]||(h[e]=[]),h[e].push(i))}const x=await this.getUsd(t,a),m=await this.getUsd(r,l),y={};for(y[e.ymd()]={tvl:x+m,fee:0,volume:0};e.ymd()>s.ymd();){const t=h[e.ymd()]||[],r=y[e.ymd()],n=e.subtractDay(1);!y[n.ymd()]&&n.ymd()>=s.ymd()&&(y[n.ymd()]={tvl:r.tvl,fee:0,volume:0});for(const s of t){const t=await this.getUsd(s.mint,s.amountOut),r=await this.getUsd(s.mint,s.amountIn);if(y[n.ymd()]&&(y[n.ymd()].tvl+=t-r,y[n.ymd()].tvl<0&&(y[n.ymd()].tvl=0)),s.actionType===Ns.Swap){y[e.ymd()].volume+=r+t;const s=Number(i.utils.undecimalize(d+c,9))*t;y[e.ymd()].fee+=s}}e=e.subtractDay(1)}return y},this.poolAddress=e}}const qs="#40A9FF",Us=0,Vs=14,Hs="TVL",Zs="transparent",Gs=()=>{var e;const{selectedPoolAddress:s}=(0,r.useSelector)((e=>e.main)),[t,n]=(0,o.useState)([]),[a,i]=(0,o.useState)(!1),d={borderColor:Zs,borderRadius:Us,pointRadius:Us,tooltip:Hs,pointHitRadius:Vs,pointHoverRadius:Us,backgroundColor:qs},u=(0,o.useCallback)((async()=>{if(s)try{i(!0);const e=new Ws(s),t=await v.load("getDailyInfo"+s,e.getDailyInfo,{cache:{ttl:3e5}}),r=Object.keys(t).map((e=>({data:t[e].tvl,label:ls()(e,"YYYYMMDD").format("MM/DD")})));n(r)}catch(e){}finally{i(!1)}}),[s]);return(0,o.useEffect)((()=>{u()}),[u]),(0,c.jsx)(l.Card,{bordered:!1,style:{height:"auto"},children:(0,c.jsx)(l.Spin,{tip:"Loading...",spinning:a,children:(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Title,{level:4,children:"Total Value Locked"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Title,{level:2,children:["$",k(null===(e=t.at(-1))||void 0===e?void 0:e.data).format("0,0.[0]a")]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(hs,{chartData:t.map((e=>e.data)),labels:t.map((e=>e.label)),configs:d})})]})})})},$s="#40A9FF",Qs=0,Js=14,Ks="TVL",Xs="transparent",et=()=>{const{selectedPoolAddress:e}=(0,r.useSelector)((e=>e.main)),[s,t]=(0,o.useState)([]),[n,a]=(0,o.useState)(!1),i={borderColor:Xs,borderRadius:Qs,pointRadius:Qs,tooltip:Ks,pointHitRadius:Js,pointHoverRadius:Qs,backgroundColor:$s},d=(0,o.useCallback)((async()=>{if(e)try{a(!0);const s=new Ws(e),r=await v.load("getDailyInfo"+e,s.getDailyInfo,{cache:{ttl:3e5}}),n=Object.keys(r).map((e=>({data:r[e].volume,label:ls()(e,"YYYYMMDD").format("MM/DD")})));t(n)}catch(s){}finally{a(!1)}}),[e]);(0,o.useEffect)((()=>{d()}),[d]);const u=(0,o.useMemo)((()=>{var e,t;const r=(null===(e=s.at(-1))||void 0===e?void 0:e.data)||0,n=(null===(t=s.at(-2))||void 0===t?void 0:t.data)||0;return r+(new Date).getHours()*n/24}),[s]);return(0,c.jsx)(l.Card,{bordered:!1,style:{height:384},children:(0,c.jsx)(l.Spin,{tip:"Loading...",spinning:n,children:(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Title,{level:4,children:"24h Volume"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Title,{level:2,children:["$",k(u).format("0,0.[0]a")]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(hs,{type:"bar",chartData:s.map((e=>e.data)),labels:s.map((e=>e.label)),configs:i})})]})})})},st=({orderAddress:e})=>{const[s,t]=(0,o.useState)(!1),{orders:n}=(0,r.useSelector)((e=>e)),{state:a,locked_time:i,updated_at:d}=n[e]||{},p=async()=>{try{const{wallet:s}=window.sentre,{sol:{purchasing:r}}=U;if(!s)throw new Error("Wallet is not connected");await t(!0);const{txId:n}=await r.redeemOrder(e,s);return ge("Redeem the order",n)}catch(s){return fe(s)}finally{return t(!1)}};if(a===I.Open)return(0,c.jsx)(l.Button,{type:"text",size:"small",loading:s,onClick:async()=>{try{const{wallet:s}=window.sentre,{sol:{purchasing:r}}=U;if(!s)throw new Error("Wallet is not connected");await t(!0);const{txId:n}=await r.cancelOrder(e,s);return ge("Cancel the order",n)}catch(s){return fe(s)}finally{return t(!1)}},children:"Cancel"});if(a===I.Approved){const e=Number(i)>Date.now()/1e3-Number(d);return(0,c.jsx)(l.Button,{type:"primary",size:"small",disabled:e,loading:s,onClick:p,children:"Redeem"})}return(0,c.jsx)(l.Button,{type:"text",size:"small",icon:(0,c.jsx)(u,{name:"open-outline"}),onClick:async()=>window.open(T(e),"_blank"),children:"Detail"})},tt=({title:e})=>(0,c.jsx)(l.Typography.Text,{type:"secondary",style:{fontSize:12},children:e}),rt=e=>(0,c.jsx)(l.Tag,{style:{border:"none"},...e}),nt=({state:e})=>e===I.Open?(0,c.jsx)(rt,{color:"gold",children:"Pending"}):e===I.Approved?(0,c.jsx)(rt,{color:"cyan",children:"Approved"}):e===I.Done?(0,c.jsx)(rt,{color:"green",children:"Done"}):e===I.Rejected?(0,c.jsx)(rt,{color:"red",children:"Rejected"}):e===I.Canceled?(0,c.jsx)(rt,{color:"volcano",children:"Canceled"}):(0,c.jsx)(rt,{children:"Unknown"}),ot=({orderAddress:e})=>{const[s,t]=(0,o.useState)(!1),{orders:n,retailers:a}=(0,r.useSelector)((e=>e)),{retailer:d,bid_amount:p,ask_amount:h,locked_time:x,state:m,created_at:y,updated_at:j}=n[e]||{},{mint_bid:g,mint_ask:f}=a[d]||{},w=me(g),v=me(f),b=i.utils.undecimalize(p,w),C=i.utils.undecimalize(h,v);return(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Card,{bordered:!1,bodyStyle:{padding:12},className:"order-card order-card-bg",children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{style:{fontSize:12},children:[(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Order ID"}),(0,c.jsx)(l.Typography.Text,{children:A(e)})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Button,{type:"text",size:"small",icon:(0,c.jsx)(u,{name:s?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>t(!s)})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[8,8],justify:"space-between",children:[(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Payment"}),(0,c.jsxs)(l.Typography.Text,{ellipsis:!0,children:[k(b).format("0,0.[0000]")," LP"]})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Receiving"}),(0,c.jsxs)(l.Typography.Text,{style:{fontWeight:700},ellipsis:!0,children:[k(C).format("0,0.[0000]")," ",(0,c.jsx)(L,{mintAddress:f})]})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Locktime"}),(0,c.jsxs)(l.Typography.Text,{children:[Number(x)/86400," days"]})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Status"}),(0,c.jsx)(nt,{state:m})]})})]})})]})})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Collapse,{activeKey:s.toString(),className:"expand-card expand-card-bg",children:(0,c.jsx)(l.Collapse.Panel,{header:null,showArrow:!1,children:(0,c.jsxs)(l.Row,{gutter:[8,8],justify:"space-between",align:"middle",children:[(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Created At"}),(0,c.jsx)(l.Typography.Text,{ellipsis:!0,children:ls()(1e3*Number(y)).format("HH:mm DD/MM/YYYY")})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Updated At"}),(0,c.jsx)(l.Typography.Text,{ellipsis:!0,children:ls()(1e3*Number(j)).format("HH:mm DD/MM/YYYY")})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(st,{orderAddress:e})})]})},"true")})})]})},at=({poolAddress:e})=>{const{orders:s,retailers:t}=(0,r.useSelector)((e=>e)),{pools:o}=(0,n.usePool)(),{mint_lpt:a}=o[e]||{},i=Object.keys(s).filter((e=>{const{retailer:r}=s[e]||{},{mint_bid:n}=t[r]||{};return n===a}));return(0,c.jsxs)(l.Row,{gutter:[16,16],style:{height:282},className:"scrollbar",children:[!i.length&&(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"No available order"}),i.map((e=>(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:125,overflow:!0,children:(0,c.jsx)(ot,{orderAddress:e})})},e)))]})},it=e=>{const[s,t]=(0,o.useState)(0),{orders:a}=(0,r.useSelector)((e=>e)),{wallet:{address:i}}=(0,n.useWallet)(),l=Object.keys(a),d=(0,o.useCallback)((async()=>{try{const{sol:{purchasing:s}}=U;let r=0;for(;r<1e4;){const t=await s.deriveOrderAddress(r,i,e);if(!l.includes(t))break;r+=1}return t(r)}catch(s){return t(0)}}),[e,l,i]);return(0,o.useEffect)((()=>{d()}),[d]),s},lt=(e,s)=>{const{tokenProvider:t,getMint:r,getDecimals:a}=(0,n.useMint)(),{pools:l}=(0,n.usePool)(),[d,c]=(0,o.useState)(0),u=(0,o.useCallback)((async e=>{var r;const n=await t.findByAddress(e),o=null===n||void 0===n||null===(r=n.extensions)||void 0===r?void 0:r.coingeckoId;if(!o){if(s)throw new Error("Unknown Token");return 0}const a=(await S(o)).price;if(!a){if(s)throw new Error("Not find on Cgk");return 0}return a}),[s,t]),p=(0,o.useCallback)((async(e,s)=>{const t=await u(e),r=await a(e);return Number(i.utils.undecimalize(s,r))*t}),[a,u]),h=(0,o.useCallback)((async e=>{const s=Object.values(l).find((s=>s.mint_lpt===e));if(!s)return 0;const{reserve_a:t,reserve_b:n,mint_a:o,mint_b:a}=s;if(t*n===BigInt(0))return 0;const{[e]:{supply:d}}=await r({address:e});return(await p(o,t)+await p(a,n))/Number(i.utils.undecimalize(d,9))}),[r,p,l]),x=(0,o.useCallback)((async e=>{try{var s;const r=await t.findByAddress(e);if(!r){const s=await h(e);return c(s)}const n=null===(s=r.extensions)||void 0===s?void 0:s.coingeckoId;if(!n)return c(0);const o=await S(n);return c(o.price)}catch(r){return 0}}),[h,t]);return(0,o.useEffect)((()=>{x(e)}),[x,e]),d},dt=({label:e="",avatar:s=(0,c.jsx)(o.Fragment,{}),value:t="",subValue:r="",floatRight:n=!1})=>{const a=n?"right":"left";return(0,c.jsxs)(l.Space,{size:12,direction:"vertical",style:{textAlign:a},children:[(0,c.jsx)(l.Typography.Text,{children:e}),s,(0,c.jsx)(l.Typography.Title,{level:3,children:t}),r&&(0,c.jsx)(l.Typography.Title,{level:5,style:{textDecoration:"line-through"},type:"secondary",children:r})]})},ct=({label:e="",value:s=""})=>(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{children:e})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Typography.Title,{level:5,children:s})})]}),ut=({retailerAddress:e,amount:s,locktime:t,visible:n=!1,onClose:a=(()=>{})})=>{var d;const[p,h]=(0,o.useState)(!1),{retailers:{[e]:x}}=(0,r.useSelector)((e=>e)),m=it(e),y=me(x.mint_bid),j=me(x.mint_ask),g=lt(x.mint_bid,!0),f=lt(x.mint_ask,!0),w=BigInt(Math.floor(24*t*60*60)),v=(null===(d=z.find((({locktime:e})=>e===t)))||void 0===d?void 0:d.discount)||0,b=parseFloat(s)*g,C=i.utils.decimalize(s,y),A=f?i.utils.decimalize(b*(1+v)/f,j):BigInt(0);return(0,c.jsx)(l.Modal,{visible:n,footer:!1,closeIcon:(0,c.jsx)(u,{name:"close-outline"}),onCancel:a,children:(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Typography.Title,{level:5,children:"Confirm"})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(dt,{label:"Payment",avatar:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(_,{mintAddress:x.mint_bid}),(0,c.jsx)(l.Typography.Title,{level:5,children:(0,c.jsx)(L,{mintAddress:x.mint_bid})})]}),value:`${k(s).format("0,0.[0000]")} LP`})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(dt,{label:"Receiving",avatar:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(_,{mintAddress:x.mint_ask}),(0,c.jsx)(l.Typography.Title,{level:5,children:(0,c.jsx)(L,{mintAddress:x.mint_ask})})]}),value:k(i.utils.undecimalize(A,j)).format("0,0.[0000]"),subValue:k(b/f).format("0,0.[0000]"),floatRight:!0})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Card,{className:"confirm-sub-card",bodyStyle:{padding:16},bordered:!1,children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ct,{label:"Created At",value:ls()().format("HH:mm DD/MM/YYYY")})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ct,{label:"Locked Time",value:`${t} Days`})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ct,{label:"Multiplier",value:100*(1+v)+"%"})})]})})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{type:"primary",onClick:async()=>{try{const{sol:{purchasing:s}}=U,{wallet:t}=window.sentre;if(!t)throw new Error("Wallet is not connected");await h(!0);const{txId:r}=await s.placeOrder(m,C,A,w,e,t);return ge("Place a new order",r),a()}catch(s){return fe(s)}finally{return h(!1)}},loading:p,block:!0,children:"Confirm"})})]})})},pt=({poolAddress:e,value:s,onChange:t})=>{const o=(0,r.useSelector)((e=>e.lpts)),{pools:a}=(0,n.usePool)(),d=Object.keys(o).find((s=>o[s].pool===e))||"",{amount:u}=o[d]||{},p=Number(i.utils.undecimalize(u||BigInt(0),9)),h=a[e];return(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{children:"I want to pay"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{size:4,className:"caption",children:[(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,c.jsxs)(l.Typography.Text,{type:"secondary",children:[k(p).format("0,0.[0000]")," LP"]})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(xe,{value:s,onValue:t,prefix:(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsx)(L,{mintAddress:null===h||void 0===h?void 0:h.mint_lpt}),(0,c.jsx)(l.Divider,{type:"vertical"})]}),suffix:(0,c.jsx)(l.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>t(p.toString()),children:"MAX"})})})]})},ht=({label:e="",value:s="",discount:t=!1,description:r=null})=>{const n={color:t?"#F9575E":"inherit"};return(0,c.jsxs)(l.Row,{gutter:[8,8],align:"bottom",children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsx)(l.Typography.Text,{style:n,children:e}),r&&(0,c.jsx)(l.Popover,{content:r,placement:"leftTop",arrowPointAtCenter:!0,children:(0,c.jsx)(u,{name:"help-circle"})})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Typography.Title,{style:{...n,textDecoration:t?"unset":"line-through"},level:t?3:5,children:[s,(0,c.jsx)("small",{children:"%"})]})})]})},xt=({locktime:e})=>{var s;const t=(null===(s=z.find((({locktime:s})=>s===e)))||void 0===s?void 0:s.discount)||0;return(0,c.jsxs)(l.Row,{gutter:[5,5],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ht,{label:"SNTR Buy-back",value:Math.round(100*(t+1)),discount:!0})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(ht,{label:"Market Buy-back",value:"100"})})]})},mt=z.map((({locktime:e})=>e)),yt=({poolAddress:e})=>{const[s,t]=(0,o.useState)(!1),[a,d]=(0,o.useState)(""),[p,h]=(0,o.useState)(mt[0]),{retailers:x}=(0,r.useSelector)((e=>e)),{pools:m}=(0,n.usePool)(),y=m[e],j=Object.values(x).findIndex((({mint_bid:e})=>e===(null===y||void 0===y?void 0:y.mint_lpt))),g=Object.keys(x)[j],f=!i.account.isAddress(g);return(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{xs:24,lg:12,children:(0,c.jsxs)(l.Space,{direction:"vertical",size:10,children:[(0,c.jsxs)(l.Space,{size:4,children:[(0,c.jsx)(l.Typography.Text,{children:"Lock Time (days)"}),(0,c.jsx)(u,{name:"alert-circle-outline"})]}),(0,c.jsx)(l.Space,{size:16,children:mt.map((e=>(0,c.jsx)(l.Button,{type:p===e?"primary":"default",icon:e,onClick:()=>h(e)},e)))})]})}),(0,c.jsx)(l.Col,{xs:24,lg:12,children:(0,c.jsx)(xt,{locktime:p})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Typography.Text,{children:[(0,c.jsx)("span",{style:{fontWeight:700,color:"inherit"},children:"SNTR Buy-back Offering:"})," ","Selling your LP tokens with juicy profit. No fee, no slippage. The tokens will be unlocked after the selected period."]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(pt,{poolAddress:e,value:a,onChange:d})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{type:"primary",icon:(0,c.jsx)(u,{name:f?"help-circle-outline":"diamond"}),onClick:()=>t(!0),disabled:!parseFloat(a)||f,block:!0,children:f?"There is no campaign on this pool":"Buy SNTR"})})]})}),!f&&(0,c.jsx)(ut,{retailerAddress:g,amount:a,locktime:p,visible:s,onClose:()=>t(!1)})]})},jt="retailers",gt=(0,E.createAsyncThunk)("retailers/getRetailers",(async()=>{const{sol:{purchasing:e}}=U,s=await e.connection.getProgramAccounts(e.purchasingProgramId,{filters:[{dataSize:161}]});let t={};return s.forEach((({pubkey:s,account:{data:r}})=>{const n=s.toBase58(),o=e.parseRetailerData(r);t[n]=o})),t})),ft=(0,E.createAsyncThunk)("retailers/getRetailer",(async({address:e},{getState:s})=>{if(!i.account.isAddress(e))throw new Error("Invalid retailer address");const{sol:{purchasing:t}}=U,{retailers:{[e]:r}}=s();if(r)return{[e]:r};return{[e]:await t.getRetailerData(e)}})),wt=(0,E.createAsyncThunk)("retailers/upsetRetailer",(async({address:e,data:s})=>{if(!i.account.isAddress(e))throw new Error("Invalid retailer address");if(!s)throw new Error("Data is empty");return{[e]:s}})),vt=(0,E.createAsyncThunk)("retailers/deleteRetailer",(async({address:e})=>{if(!i.account.isAddress(e))throw new Error("Invalid retailer address");return{address:e}})),bt=(0,E.createSlice)({name:jt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(gt.fulfilled,((e,{payload:s})=>s)).addCase(ft.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(wt.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(vt.fulfilled,((e,{payload:s})=>{delete e[s.address]}))}}).reducer,Ct=({poolAddress:e})=>{const s=(0,r.useDispatch)(),{wallet:{address:t}}=(0,n.useWallet)(),{pools:o}=(0,n.usePool)(),a=o[e];return(0,c.jsx)(l.Row,{gutter:[24,24],children:(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Button,{type:"primary",onClick:async()=>{const{wallet:e}=window.sentre,{sol:{purchasing:r,sntrAddress:n}}=U;try{if(!e)throw new Error("Wallet is not connected");if(!i.account.isAddress(null===a||void 0===a?void 0:a.mint_lpt))throw new Error("Invalid bid mint address");if(!i.account.isAddress(n))throw new Error("Invalid ask mint address");const{txId:o,retailerAddress:l}=await r.initializeRetailer(t,a.mint_lpt,n,e);return await s(ft({address:l})).unwrap(),ge("Initialize a new retailer",o)}catch(o){return fe(o)}},children:"New Retailer"})})})},At=({retailerAddress:e})=>{const[s,t]=(0,o.useState)(!1),{retailers:{[e]:n}}=(0,r.useSelector)((e=>e)),a=null===n||void 0===n?void 0:n.state;return(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Typography.Text,{children:"Current State:"}),(0,c.jsx)(u,{name:1===a?"checkmark-circle-sharp":"snow-outline"}),(0,c.jsx)(l.Typography.Text,{style:{fontWeight:700},children:1===a?"Active":"Frozen"}),(0,c.jsx)(l.Button,{size:"small",onClick:1===a?async()=>{try{const{sol:{purchasing:s}}=U,{wallet:r}=window.sentre;if(!r)throw new Error("Wallet is not connected");if(!i.account.isAddress(e))throw new Error("Invalid retailer address");await t(!0);const{txId:n}=await s.freezeRetailer(e,r);return ge(`Freeze the retailer ${e}`,n)}catch(s){return fe(s)}finally{return t(!1)}}:async()=>{try{const{sol:{purchasing:s}}=U,{wallet:r}=window.sentre;if(!r)throw new Error("Wallet is not connected");if(!i.account.isAddress(e))throw new Error("Invalid retailer address");await t(!0);const{txId:n}=await s.thawRetailer(e,r);return ge(`Thaw the retailer ${e}`,n)}catch(s){return fe(s)}finally{return t(!1)}},loading:s,children:1===a?"Freeze":"Thaw"})]})},Tt=({orderAddress:e})=>{const[s,t]=(0,o.useState)(!1),{orders:n}=(0,r.useSelector)((e=>e)),{state:a}=n[e]||{};return a===I.Open?(0,c.jsxs)(l.Space,{direction:"vertical",align:"center",children:[(0,c.jsx)(l.Button,{type:"primary",size:"small",loading:s,onClick:async()=>{try{const{wallet:s}=window.sentre,{sol:{purchasing:r}}=U;if(!s)throw new Error("Wallet is not connected");await t(!0);const{txId:n}=await r.approveOrder(e,s);return ge("Approve the order",n)}catch(s){return fe(s)}finally{return t(!1)}},children:"Approve"}),(0,c.jsx)(l.Button,{type:"text",size:"small",loading:s,onClick:async()=>{try{const{wallet:s}=window.sentre,{sol:{purchasing:r}}=U;if(!s)throw new Error("Wallet is not connected");await t(!0);const{txId:n}=await r.rejectOrder(e,s);return ge("Reject the order",n)}catch(s){return fe(s)}finally{return t(!1)}},children:"Reject"})]}):(0,c.jsx)(l.Button,{type:"text",size:"small",icon:(0,c.jsx)(u,{name:"open-outline"}),onClick:async()=>window.open(T(e),"_blank"),children:"Detail"})},kt=({orderAddress:e})=>{const[s,t]=(0,o.useState)(!1),{orders:n,retailers:a}=(0,r.useSelector)((e=>e)),{retailer:d,bid_amount:p,ask_amount:h,locked_time:x,state:m,created_at:y,updated_at:j}=n[e]||{},{mint_bid:g,mint_ask:f}=a[d]||{},w=me(g),v=me(f),b=i.utils.undecimalize(p,w),C=i.utils.undecimalize(h,v);return(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Card,{bordered:!1,bodyStyle:{padding:12},className:"order-card order-card-bg",children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[12,12],children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{style:{fontSize:12},children:[(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Order ID"}),(0,c.jsx)(l.Typography.Text,{children:A(e)})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(l.Button,{type:"text",size:"small",icon:(0,c.jsx)(u,{name:s?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>t(!s)})})]})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsxs)(l.Row,{gutter:[8,8],justify:"space-between",children:[(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Payment"}),(0,c.jsxs)(l.Typography.Text,{ellipsis:!0,children:[k(b).format("0,0.[0000]")," LP"]})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Receiving"}),(0,c.jsxs)(l.Typography.Text,{style:{fontWeight:700},ellipsis:!0,children:[k(C).format("0,0.[0000]")," ",(0,c.jsx)(L,{mintAddress:f})]})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Locktime"}),(0,c.jsxs)(l.Typography.Text,{children:[Number(x)/86400," days"]})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Status"}),(0,c.jsx)(nt,{state:m})]})})]})})]})})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Collapse,{activeKey:s.toString(),className:"expand-card expand-card-bg",children:(0,c.jsx)(l.Collapse.Panel,{header:null,showArrow:!1,children:(0,c.jsxs)(l.Row,{gutter:[8,8],justify:"space-between",align:"middle",children:[(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Created At"}),(0,c.jsx)(l.Typography.Text,{ellipsis:!0,children:ls()(1e3*Number(y)).format("HH:mm DD/MM/YYYY")})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsx)(tt,{title:"Updated At"}),(0,c.jsx)(l.Typography.Text,{ellipsis:!0,children:ls()(1e3*Number(j)).format("HH:mm DD/MM/YYYY")})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsx)(Tt,{orderAddress:e})})]})},"true")})})]})},St="orders",Pt=(0,E.createAsyncThunk)("orders/getOrders",(async({owner:e,retailer:s})=>{const{sol:{purchasing:t}}=U;let r={},n=[];i.account.isAddress(e)&&n.push({memcmp:{bytes:e,offset:0}}),i.account.isAddress(s)&&n.push({memcmp:{bytes:s,offset:33}});return(await t.connection.getProgramAccounts(t.purchasingProgramId,{filters:[{dataSize:105},...n]})).forEach((({pubkey:e,account:{data:s}})=>{const n=e.toBase58(),o=t.parseOrderData(s);r[n]=o})),r})),Rt=(0,E.createAsyncThunk)("orders/getOrder",(async({address:e},{getState:s})=>{if(!i.account.isAddress(e))throw new Error("Invalid order address");const{sol:{purchasing:t}}=U,{retailers:{[e]:r}}=s();if(r)return{[e]:r};return{[e]:await t.getOrderData(e)}})),It=(0,E.createAsyncThunk)("orders/upsetOrder",(async({address:e,data:s})=>{if(!i.account.isAddress(e))throw new Error("Invalid order address");if(!s)throw new Error("Data is empty");return{[e]:s}})),zt=(0,E.createAsyncThunk)("orders/deleteOrder",(async({address:e})=>{if(!i.account.isAddress(e))throw new Error("Invalid order address");return{address:e}})),Bt=(0,E.createSlice)({name:St,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Pt.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(Rt.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(It.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(zt.fulfilled,((e,{payload:s})=>{delete e[s.address]}))}}).reducer,Dt=({poolAddress:e})=>{const[s,t]=(0,o.useState)(!0),a=(0,r.useDispatch)(),{retailers:d,orders:u}=(0,r.useSelector)((e=>e)),{pools:h}=(0,n.usePool)(),{wallet:{address:x}}=(0,n.useWallet)(),m=h[e],y=Object.keys(d).filter((e=>{const{owner:s}=d[e];return s===x})),j=y.find((e=>{const{mint_bid:s}=d[e];return s===(null===m||void 0===m?void 0:m.mint_lpt)})),g=Object.keys(u).filter((e=>{const{retailer:t,state:r}=u[e];let n=t===j;return s&&(n=n&&r===I.Open),n})),f=(0,o.useCallback)((async()=>{await a(Pt({retailer:x}))}),[a,x]);return(0,o.useEffect)((()=>{f()}),[f]),(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:i.account.isAddress(j)?(0,c.jsxs)(l.Row,{gutter:[24,24],wrap:!1,children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(At,{retailerAddress:j})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Typography.Text,{type:"secondary",children:"Filtered?"}),(0,c.jsx)(l.Switch,{checked:s,onChange:t,size:"small"})]})})]}):(0,c.jsx)(Ct,{poolAddress:e})}),(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(l.Row,{gutter:[16,16],style:{height:234},className:"scrollbar",children:g.map((e=>(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:125,overflow:!0,children:(0,c.jsx)(kt,{orderAddress:e})})},e)))})})]})},_t=({poolAddress:e})=>{const{wallet:{address:s}}=(0,n.useWallet)(),{pools:t}=(0,n.usePool)(),r=t[e],o=s===(null===r||void 0===r?void 0:r.owner);return(0,c.jsx)(l.Card,{bordered:!1,bodyStyle:{padding:0},children:(0,c.jsxs)(l.Tabs,{style:{padding:"16px 24px 24px 24px"},children:[(0,c.jsx)(l.Tabs.TabPane,{tab:"Reinvestment",children:(0,c.jsx)(yt,{poolAddress:e})},"investmnet"),(0,c.jsx)(l.Tabs.TabPane,{tab:"Redeem",children:(0,c.jsx)(at,{poolAddress:e})},"redeem"),o?(0,c.jsx)(l.Tabs.TabPane,{tab:"Admin",children:(0,c.jsx)(Dt,{poolAddress:e})},"admin"):null]})})},Mt=()=>{const{selectedPoolAddress:e}=(0,r.useSelector)((e=>e.main));return(0,c.jsxs)(l.Row,{gutter:[24,24],children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Fe,{poolAddress:e})}),(0,c.jsx)(l.Col,{xs:24,md:12,children:(0,c.jsx)(Gs,{})}),(0,c.jsx)(l.Col,{xs:24,md:12,children:(0,c.jsx)(Xe,{poolAddress:e})}),(0,c.jsx)(l.Col,{xs:24,md:12,children:(0,c.jsx)(et,{})}),(0,c.jsx)(l.Col,{xs:24,md:12,children:(0,c.jsx)(_t,{poolAddress:e})}),(0,c.jsx)(l.Col,{xs:24,md:12,children:(0,c.jsx)(as,{poolAddress:e})})]})},Lt=()=>{const e=(0,r.useDispatch)(),{ui:{width:s}}=(0,n.useUI)();return s>=1200?null:(0,c.jsx)(l.Affix,{style:{position:"fixed",bottom:16,right:16,zIndex:9999},children:(0,c.jsx)(l.Button,{type:"primary",onClick:()=>e(ae(!0)),icon:(0,c.jsx)(u,{name:"list-outline"}),size:"large",children:"Pools List"})})},Et="lpts",Nt=(0,E.createAsyncThunk)("lpts/getLPTs",(async({accounts:e})=>{const{splt:s,swap:t}=window.sentre,r=e.map((({mint:e})=>e)).map((e=>i.account.fromAddress(e))),n=(await i.utils.wrappedGetMultipleAccountsInfo(s.connection,r)).map((e=>null!==e&&void 0!==e&&e.data?s.parseMintData(e.data):null));if(null===n||void 0===n||!n.length)return{};const o=await Promise.all(n.map((async e=>{try{const{mint_authority:s,freeze_authority:r}=e||{};if(!i.account.isAddress(s)||!i.account.isAddress(r))return;return await t.derivePoolAddress(s,r)}catch(s){return}})));let a={};return e.forEach((({address:e,...s},t)=>{const r=o[t];i.account.isAddress(r)&&(a[e]={...s,pool:r})})),a})),Ot=(0,E.createAsyncThunk)("lpts/getLPT",(async({address:e},{getState:s})=>{if(!i.account.isAddress(e))throw new Error("Invalid account address");const{lpts:{[e]:t}}=s();if(t)return{[e]:t};const{swap:r}=window.sentre;return{[e]:await r.getLPTData(e)}})),Ft=(0,E.createAsyncThunk)("lpts/upsetLPT",(async({address:e,data:s},{getState:t})=>{if(!i.account.isAddress(e))throw new Error("Invalid address");if(!s)throw new Error("Data is empty");const{lpts:{[e]:r}}=t(),{pool:n}=r||{};if(i.account.isAddress(n))return{[e]:{...s,pool:n}};const{swap:o}=window.sentre;return{[e]:await o.getLPTData(e)}})),Yt=(0,E.createAsyncThunk)("lpts/deleteLPT",(async({address:e})=>{if(!i.account.isAddress(e))throw new Error("Invalid address");return{address:e}})),Wt=(0,E.createSlice)({name:Et,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Nt.fulfilled,((e,{payload:s})=>s)).addCase(Ot.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(Ft.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(Yt.fulfilled,((e,{payload:s})=>{delete e[s.address]}))}}).reducer;let qt=0;const Ut=()=>{const e=(0,r.useDispatch)(),{accounts:s}=(0,n.useAccount)(),{wallet:{address:t}}=(0,n.useWallet)(),a=(0,o.useMemo)((()=>Object.keys(s).map((e=>({address:e,...s[e]})))),[s]),l=(0,o.useCallback)((async()=>{try{if(!i.account.isAddress(t))return;await e(Nt({accounts:a})).unwrap()}catch(s){await fe(s)}}),[e,a,t]),d=(0,o.useCallback)((async()=>{if(qt)return console.warn("Already watched");const s=[{memcmp:{bytes:t,offset:32}}];qt=window.sentre.splt.watch(((s,t)=>{if(s)return console.error(s);const{address:r,data:n}=t;return e(Ft({address:r,data:n}))}),s)}),[e,t]);return(0,o.useEffect)((()=>(l(),d(),()=>{(async()=>{try{await window.sentre.splt.unwatch(qt)}catch(e){}})(),qt=0})),[l,d]),(0,c.jsx)(o.Fragment,{})},{sol:{purchasing:Vt}}=U;let Ht=0;const Zt=()=>{const e=(0,r.useDispatch)(),{wallet:{address:s}}=(0,n.useWallet)(),t=(0,o.useCallback)((async()=>{try{if(!i.account.isAddress(s))return;await e(gt()).unwrap()}catch(t){await fe(t)}}),[e,s]),a=(0,o.useCallback)((async()=>{if(Ht)return console.warn("Already watched");Ht=Vt.watch(((s,t)=>{if(s)return console.error(s);const{address:r,data:n}=t;return e(wt({address:r,data:n}))}),[{dataSize:161}])}),[e]);return(0,o.useEffect)((()=>(t(),a(),()=>{(async()=>{try{await Vt.unwatch(Ht)}catch(e){}})(),Ht=0})),[t,a]),(0,c.jsx)(o.Fragment,{})},{sol:{purchasing:Gt}}=U;let $t=0;const Qt=()=>{const e=(0,r.useDispatch)(),{wallet:{address:s}}=(0,n.useWallet)(),t=(0,o.useCallback)((async()=>{try{if(!i.account.isAddress(s))return;await e(Pt({owner:s})).unwrap()}catch(t){await fe(t)}}),[e,s]),a=(0,o.useCallback)((async()=>{if($t)return console.warn("Already watched");$t=Gt.watch(((s,t)=>{if(s)return console.error(s);const{address:r,data:n}=t;return e(It({address:r,data:n}))}),[{dataSize:105}])}),[e]);return(0,o.useEffect)((()=>(t(),a(),()=>{(async()=>{try{await Gt.unwatch($t)}catch(e){}})(),$t=0})),[t,a]),(0,c.jsx)(o.Fragment,{})},Jt=()=>{const e=(0,r.useDispatch)(),{main:{visible:s}}=(0,r.useSelector)((e=>e)),{ui:{width:t}}=(0,n.useUI)(),{pools:d}=(0,n.usePool)(),{selectedPoolAddress:p}=(0,r.useSelector)((e=>e.main)),h=new URLSearchParams((0,a.useLocation)().search).get("poolAddress")||"",x=U.sol.senOwner,m=Object.keys(d).filter((e=>{const s=null===d||void 0===d?void 0:d[e],{owner:t}=s;return x.includes(t)})),y=(0,o.useMemo)((()=>{if(Object.keys(d).length)return Object.keys(d).map((e=>({address:e,...d[e]}))).sort((({reserve_a:e,reserve_b:s},{reserve_a:t,reserve_b:r})=>{const n=e*s,o=t*r;return n>o?-1:n<o?1:0}))}),[d]),j=(0,o.useCallback)((()=>{var s;if(i.account.isAddress(p))return;if(i.account.isAddress(h))return e(ne(h));const t=null===y||void 0===y||null===(s=y[0])||void 0===s?void 0:s.address,r=null===m||void 0===m?void 0:m[0];if(i.account.isAddress(r))return e(ne(r));i.account.isAddress(t)&&e(ne(t))}),[e,m,h,p,y]);return(0,o.useEffect)((()=>{j()}),[j]),(0,c.jsxs)(l.Row,{gutter:[24,24],style:{paddingBottom:12},children:[t>=1200?(0,c.jsx)(l.Col,{lg:8,xl:6,children:(0,c.jsx)(l.Card,{bodyStyle:{padding:0},bordered:!1,children:(0,c.jsx)(De,{})})}):(0,c.jsx)(l.Modal,{visible:s,onCancel:()=>e(ae(!1)),closeIcon:(0,c.jsx)(u,{name:"close-outline"}),footer:null,title:(0,c.jsx)(l.Typography.Title,{level:4,children:"Pool Selection"}),bodyStyle:{padding:0},centered:!0,children:(0,c.jsx)(De,{})}),(0,c.jsx)(l.Col,{xs:24,lg:24,xl:18,children:(0,c.jsx)(Mt,{})}),(0,c.jsx)(Lt,{}),(0,c.jsx)(Ut,{}),(0,c.jsx)(Zt,{}),(0,c.jsx)(Qt,{})]})},Kt=()=>{const e=(0,r.useDispatch)();return(0,o.useEffect)((()=>{e(oe("sentre"))}),[e]),(0,c.jsxs)(l.Row,{gutter:24,align:"middle",className:"header-widget",children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsx)(l.Typography.Text,{style:{color:"#e9e9eb "},children:"Pools list by"})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Select,{defaultValue:"sentre",onChange:s=>{e(oe(s))},className:"header-select",children:[(0,c.jsx)(l.Select.Option,{value:"sentre",children:"Sentre"}),(0,c.jsx)(l.Select.Option,{value:"community",children:"Community"}),(0,c.jsx)(l.Select.Option,{value:"deposited",children:"Deposited"}),(0,c.jsx)(l.Select.Option,{value:"your-pools",children:"Your pools"})]})})]})},Xt=({data:e,onClick:s=(()=>{}),action:t=(0,c.jsx)(o.Fragment,{}),keyExpand:r})=>{var a;const{pool:d,amount:p}=e,[h,x]=(0,o.useState)(!1),m=i.utils.undecimalize(p,9),{pools:y}=(0,n.usePool)(),j=(null===y||void 0===y?void 0:y[d].state)===R.Frozen,g=(null===y||void 0===y||null===(a=y[d])||void 0===a?void 0:a.mint_lpt)||"",f=h?"":"expandHidden",w=r.toString();return(0,c.jsxs)(l.Card,{bodyStyle:{padding:12,minHeight:78},hoverable:!0,children:[(0,c.jsxs)(l.Row,{gutter:[12,12],align:"top",children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(_,{mintAddress:g,size:24}),(0,c.jsx)(l.Typography.Text,{type:j?"secondary":void 0,children:(0,c.jsx)(L,{mintAddress:g})})]}),(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,c.jsx)(l.Typography.Text,{children:(0,c.jsx)(P,{poolAddress:d})}),(0,c.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"My LP:"}),(0,c.jsx)(l.Typography.Text,{children:k(m).format("0,0.[00]")})]})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{size:2,children:[(0,c.jsx)(B,{poolAddress:d}),t,(0,c.jsx)(l.Button,{size:"small",type:"text",icon:(0,c.jsx)(u,{name:h?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>x(!h)})]})})]}),(0,c.jsx)(l.Collapse,{className:f,style:{marginTop:16},ghost:!0,activeKey:w,bordered:!1,children:(0,c.jsx)(l.Collapse.Panel,{header:"",children:(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(Ne,{poolAddress:d})}),(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(l.Button,{onClick:s,block:!0,type:"primary",children:"Detail"})})]})},w)})]})},er=({onInit:e=(()=>{}),onClick:s=(()=>{}),action:t=(()=>(0,c.jsx)(o.Fragment,{}))})=>{const a=(0,r.useSelector)((e=>e.lpts)),i=(0,r.useSelector)((e=>e.main.selectedCategoryPool)),{pools:d}=(0,n.usePool)(),{wallet:{address:u}}=(0,n.useWallet)(),h=(0,o.useMemo)((()=>Object.keys(a).filter((e=>{var s;const{pool:t,amount:r}=a[e];return"deposited"===i&&r!==BigInt(0)||"your-pools"===i&&(null===d||void 0===d||null===(s=d[t])||void 0===s?void 0:s.owner)===u?d[t]:null}))),[d,a,u,i]);return(0,o.useEffect)((()=>{h.length&&e(h[0])}),[e,h,a]),h.length?(0,c.jsx)(l.Row,{gutter:[12,12],children:h.map(((e,r)=>{const{pool:n}=a[e];return(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(Xt,{keyExpand:r+1,data:a[e],action:t(e,n),onClick:()=>s(n)})})},e+r)}))}):(0,c.jsx)(l.Empty,{})},sr=({poolAddress:e,onClick:s=(()=>{}),action:t=(0,c.jsx)(o.Fragment,{}),keyExpand:a})=>{const i=(0,r.useDispatch)(),[d,p]=(0,o.useState)(!1),{pools:h}=(0,n.usePool)(),x=(0,r.useSelector)((s=>{var t;return null===(t=s.stat[e])||void 0===t?void 0:t.details})),m=(null===h||void 0===h?void 0:h[e])||{},{mint_lpt:y,state:j}=m,g=(0,o.useMemo)((()=>{if(!x||!x.roi)return 0;const e=x.roi;return Math.pow(1+Number(e)/100,365)-1}),[x]);(0,o.useEffect)((()=>{e&&i(K({address:e}))}),[i,e]);const f=j===R.Frozen,w=d?"":"expandHidden",v=a.toString();return(0,c.jsxs)(l.Card,{bodyStyle:{padding:12,minHeight:78},hoverable:!0,children:[(0,c.jsxs)(l.Row,{gutter:[12,12],align:"top",children:[(0,c.jsx)(l.Col,{flex:"auto",children:(0,c.jsxs)(l.Space,{direction:"vertical",children:[(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(_,{mintAddress:y,size:24}),(0,c.jsx)(l.Typography.Text,{type:f?"secondary":void 0,children:(0,c.jsx)(L,{mintAddress:y})})]}),(0,c.jsxs)(l.Space,{children:[(0,c.jsx)(l.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,c.jsx)(l.Typography.Text,{children:(0,c.jsx)(P,{poolAddress:e})}),(0,c.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,c.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,c.jsx)(l.Typography.Text,{children:k(g).format("0,0.[00]%")})]})]})}),(0,c.jsx)(l.Col,{children:(0,c.jsxs)(l.Space,{size:2,children:[(0,c.jsx)(B,{poolAddress:e}),t,(0,c.jsx)(l.Button,{size:"small",type:"text",icon:(0,c.jsx)(u,{name:d?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>p(!d)})]})})]}),(0,c.jsx)(l.Collapse,{className:w,style:{marginTop:16},ghost:!0,activeKey:v,bordered:!1,children:(0,c.jsx)(l.Collapse.Panel,{header:"",children:(0,c.jsxs)(l.Row,{gutter:[16,16],children:[(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(Ne,{poolAddress:e})}),(0,c.jsx)(l.Col,{span:12,children:(0,c.jsx)(l.Button,{onClick:s,block:!0,type:"primary",children:"Detail"})})]})},v)})]})},{sol:{senOwner:tr}}=U,rr=({onInit:e=(()=>{}),onClick:s=(()=>{}),action:t=(()=>(0,c.jsx)(o.Fragment,{}))})=>{const{pools:a}=(0,n.usePool)(),i=(0,r.useSelector)((e=>e.main.selectedCategoryPool)),d=(0,o.useMemo)((()=>Object.keys(a).map((e=>({address:e,...a[e]}))).sort((({reserve_a:e,reserve_b:s},{reserve_a:t,reserve_b:r})=>{const n=e*s,o=t*r;return n>o?-1:n<o?1:0}))),[a]),u=Object.keys(a).filter((e=>{const s=null===a||void 0===a?void 0:a[e],{owner:t}=s;return tr.includes(t)}));(0,o.useEffect)((()=>{var s;d.length&&e(null===(s=d[0])||void 0===s?void 0:s.address)}),[e,d]);const h=()=>(0,c.jsx)(o.Fragment,{children:d.map(((e,r)=>(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(sr,{poolAddress:e.address,action:t(e.address),onClick:()=>s(e.address),keyExpand:r+1})})},e.address+r)))});if(!u.length)return(0,c.jsx)(l.Empty,{});const x=()=>(0,c.jsx)(o.Fragment,{children:u.map(((e,r)=>(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(sr,{poolAddress:e,action:t(e),onClick:()=>s(e),keyExpand:r+1})})},e+r)))});return(0,c.jsx)(l.Row,{gutter:[12,12],children:"sentre"===i?(0,c.jsx)(x,{}):(0,c.jsx)(h,{})})},nr=()=>{const e=(0,r.useDispatch)(),s=(0,r.useSelector)((e=>e.main.selectedCategoryPool)),t=(0,a.useHistory)(),{manifest:{appId:n}}=U,i=(0,o.useCallback)((s=>{e(ne(s)),e(ae(!1)),t.push(`app/${n}`)}),[e,t,n]);return(0,c.jsxs)(l.Row,{className:"widget",children:[(0,c.jsx)(l.Col,{span:24,children:(0,c.jsx)(Kt,{})}),(0,c.jsx)(l.Col,{span:24,className:"body-widget",children:"sentre"===s||"community"===s?(0,c.jsx)(rr,{onClick:i}):(0,c.jsx)(er,{onClick:i})}),(0,c.jsx)(l.Col,{span:24,style:{height:16}}),(0,c.jsx)(Ut,{}),(0,c.jsx)(Zt,{}),(0,c.jsx)(Qt,{})]})};BigInt.prototype.toJSON=function(){return this.toString()};const or={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const s=Object.getPrototypeOf(e);return null!==s&&null===Object.getPrototypeOf(s)})(e)||"bigint"===typeof e}},ar=(0,E.configureStore)({middleware:e=>e(or),devTools:!1,reducer:{main:ie,stat:X,lpts:Wt,retailers:bt,orders:Bt,settings:ze}}),{manifest:{appId:ir}}=U,lr=()=>(0,c.jsx)(n.UIProvider,{appId:ir,antd:!0,children:(0,c.jsx)(n.MintProvider,{children:(0,c.jsx)(n.PoolProvider,{children:(0,c.jsx)(n.AccountProvider,{children:(0,c.jsx)(n.WalletProvider,{children:(0,c.jsx)(r.Provider,{store:ar,children:(0,c.jsx)(Jt,{})})})})})})}),dr={size:"small",type:"solid"},cr=()=>(0,c.jsx)(n.MintProvider,{children:(0,c.jsx)(n.UIProvider,{appId:ir,antd:!0,children:(0,c.jsx)(n.PoolProvider,{children:(0,c.jsx)(n.AccountProvider,{children:(0,c.jsx)(n.WalletProvider,{children:(0,c.jsx)(r.Provider,{store:ar,children:(0,c.jsx)(nr,{})})})})})})})},16781:(e,s,t)=>{"use strict";t.d(s,{Z:()=>f});var r=t(11796),n=t(67845),o=t(63805);const a={spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},i={devnet:{...a,node:"https://api.devnet.solana.com",chainId:103,sntrAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",sntrPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9"},testnet:{...a,node:"https://api.testnet.solana.com",chainId:102,sntrAddress:"",sntrPoolAddress:"",swapAddress:"",taxmanAddress:""},mainnet:{...a,node:"https://api.mainnet-beta.solana.com",chainId:101,sntrAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",sntrPoolAddress:"Aa3WZX7Xunfebp2MuAcz9CNw8TYTDL7mVrmb11rjyVm6",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}};const l="senhub",d={sen_lp:{url:"https://descartesnetwork.github.io/sen-lp/index.js",appId:"sen_lp",name:"Sen LP",author:{name:"Sentre",email:"hi@sentre.io"},supportedViews:"page,widget".split(",").map((e=>e.trim())).filter((e=>["page","widget"].includes(e))),tags:"solana,dapps,liquidity".split(",").map((e=>e.trim())),description:"Liquidity Provision to pools in the Sentre ecosystem",verified:!1}},c={development:{defaultAppId:l,extra:d,senreg:"https://descartesnetwork.github.io/senreg/register.json"},staging:{defaultAppId:l,extra:d,senreg:"https://descartesnetwork.github.io/senreg/register.json"},production:{defaultAppId:l,extra:{},senreg:"https://descartesnetwork.github.io/senreg/register.json"}},u={sol:i[o.ef],register:c[o.OB]},p=e=>({symbol:"SOL",name:"Solana",address:"11111111111111111111111111111111",decimals:9,chainId:e,extensions:{coingeckoId:"solana"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"}),h=e=>({symbol:"SNTR",name:"Sentre",address:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",decimals:9,chainId:e,extensions:{coingeckoId:"sentre"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png"}),x=[p(103),h(103),{symbol:"wBTC",name:"Wrapped Bitcoin",address:"8jk4eJymMfNZV9mkRNxJEt2VJ3pRvdJvD5FE94GXGBPM",decimals:9,chainId:103,extensions:{coingeckoId:"bitcoin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/qfnqNqs3nCAHjnyCgLRDbBtq4p2MtHZxw8YjSyYhPoL/logo.png"},{symbol:"wETH",name:"Ethereum",address:"27hdcZv7RtuMp75vupThR3T4KLsL61t476eosMdoec4c",decimals:9,chainId:103,extensions:{coingeckoId:"ethereum"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf/logo.png"},{symbol:"UNI",name:"Uniswap",address:"FVZFSXu3yn17YdcxLD72TFDUqkdE5xZvcW18EUpRQEbe",decimals:9,chainId:103,extensions:{coingeckoId:"uniswap"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/3MVa4e32PaKmPxYUQ6n8vFkWtCma68Ld7e7fTktWDueQ/logo.png"},{symbol:"USDC",name:"USD Coin",address:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",decimals:9,chainId:103,extensions:{coingeckoId:"usd-coin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"}],{sol:{chainId:m}}=u,y=/[\W_]+/g,j={tokenize:"full",context:!0,minlength:3},g={document:{id:"address",index:[{field:"symbol",...j},{field:"name",...j}]}};const f=class{constructor(){this.tokenMap=void 0,this.engine=void 0,this.chainId=void 0,this.cluster=void 0,this.loading=void 0,this.queue=void 0,this._init=async()=>this.tokenMap.size?[this.tokenMap,this.engine]:new Promise((async e=>{if(this.loading)return this.queue.push(e);this.loading=!0;let s=await(await(new n.DK).resolve()).filterByChainId(this.chainId).getList();for("devnet"===this.cluster&&(s=s.concat(x)),s="testnet"===this.cluster?s.concat([h(102),p(102)]):s.concat([p(101)]),s.forEach((e=>this.tokenMap.set(e.address,e))),this.engine=new r.Document(g),this.tokenMap.forEach((({address:e,...s})=>this.engine.add(e,s))),e([this.tokenMap,this.engine]);this.queue.length;)this.queue.shift()([this.tokenMap,this.engine]);this.loading=!1})),this.all=async()=>{const[e]=await this._init();return Array.from(e.values())},this.findByAddress=async e=>{const[s]=await this._init();return s.get(e)},this.find=async(e,s)=>{const[t,r]=await this._init();let n=[];return e.split(y).forEach((e=>r.search(e,s).forEach((({result:e})=>e.forEach((e=>{if(n.findIndex((({address:s})=>s===e))<0){const s=t.get(e);s&&n.push(s)}})))))),n},this.tokenMap=new Map,this.engine=void 0,this.chainId=m,this.cluster=o.ef,this.loading=!1,this.queue=[],this._init()}}},63805:(e,s,t)=>{"use strict";t.d(s,{OB:()=>n,ef:()=>o});var r=t(53933);const n="production",o=(()=>{switch(r.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},53933:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});const r="sentre",n=window.localStorage,o=e=>{if(!e)return null;try{return JSON.parse(e)}catch(s){return null}},a={set:(e,s)=>{let t=o(n.getItem(r));t&&"object"===typeof t||(t={}),t[e]=s,n.setItem(r,JSON.stringify(t))},get:e=>{let s=o(n.getItem(r));return s&&"object"===typeof s?s[e]:null},clear:e=>{a.set(e,null)}},i=a},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},88795:()=>{},89408:()=>{},57600:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=643.959071d3.chunk.js.map