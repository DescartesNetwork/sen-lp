(globalThis.webpackChunksen_lp=globalThis.webpackChunksen_lp||[]).push([[267],{12053:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(48449),i=r.n(n),s=r(71256),o=r(68532),a=r.n(o),c=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class u extends(i()){constructor(e,t){if(super(),this._network=t,this._publicKey=null,this._popup=null,this._handlerAdded=!1,this._nextRequestId=1,this._autoApprove=!1,this._responsePromises=new Map,this.handleMessage=e=>{var t;if(this._injectedProvider&&e.source===window||e.origin===(null===(t=this._providerUrl)||void 0===t?void 0:t.origin)&&e.source===this._popup)if("connected"===e.data.method){const t=new s.PublicKey(e.data.params.publicKey);this._publicKey&&this._publicKey.equals(t)||(this._publicKey&&!this._publicKey.equals(t)&&this.handleDisconnect(),this._publicKey=t,this._autoApprove=!!e.data.params.autoApprove,this.emit("connect",this._publicKey))}else if("disconnected"===e.data.method)this.handleDisconnect();else if(e.data.result||e.data.error){const t=this._responsePromises.get(e.data.id);if(t){const[r,n]=t;e.data.result?r(e.data.result):n(new Error(e.data.error))}}},this._beforeUnload=()=>{this.disconnect()},function(e){return"object"===typeof e&&null!==e}(r=e)&&"postMessage"in r&&"function"===typeof r.postMessage)this._injectedProvider=e;else{if(!function(e){return"string"===typeof e}(e))throw new Error("provider parameter must be an injected provider or a URL string.");this._providerUrl=new URL(e),this._providerUrl.hash=new URLSearchParams({origin:window.location.origin,network:this._network}).toString()}var r}handleConnect(){var e;return this._handlerAdded||(this._handlerAdded=!0,window.addEventListener("message",this.handleMessage),window.addEventListener("beforeunload",this._beforeUnload)),this._injectedProvider?new Promise((e=>{this.sendRequest("connect",{}),e()})):(window.name="parent",this._popup=window.open(null===(e=this._providerUrl)||void 0===e?void 0:e.toString(),"_blank","location,resizable,width=460,height=675"),new Promise((e=>{this.once("connect",e)})))}handleDisconnect(){this._handlerAdded&&(this._handlerAdded=!1,window.removeEventListener("message",this.handleMessage),window.removeEventListener("beforeunload",this._beforeUnload)),this._publicKey&&(this._publicKey=null,this.emit("disconnect")),this._responsePromises.forEach(((e,t)=>{let[,r]=e;this._responsePromises.delete(t),r(new Error("Wallet disconnected"))}))}sendRequest(e,t){return c(this,void 0,void 0,(function*(){if("connect"!==e&&!this.connected)throw new Error("Wallet not connected");const r=this._nextRequestId;return++this._nextRequestId,new Promise(((n,i)=>{var s,o,a,c;this._responsePromises.set(r,[n,i]),this._injectedProvider?this._injectedProvider.postMessage({jsonrpc:"2.0",id:r,method:e,params:Object.assign({network:this._network},t)}):(null===(s=this._popup)||void 0===s||s.postMessage({jsonrpc:"2.0",id:r,method:e,params:t},null!==(a=null===(o=this._providerUrl)||void 0===o?void 0:o.origin)&&void 0!==a?a:""),this.autoApprove||null===(c=this._popup)||void 0===c||c.focus())}))}))}get publicKey(){return this._publicKey}get connected(){return null!==this._publicKey}get autoApprove(){return this._autoApprove}connect(){return c(this,void 0,void 0,(function*(){this._popup&&this._popup.close(),yield this.handleConnect()}))}disconnect(){return c(this,void 0,void 0,(function*(){this._injectedProvider&&(yield this.sendRequest("disconnect",{})),this._popup&&this._popup.close(),this.handleDisconnect()}))}sign(e,t){return c(this,void 0,void 0,(function*(){if(!(e instanceof Uint8Array))throw new Error("Data must be an instance of Uint8Array");const r=yield this.sendRequest("sign",{data:e,display:t});return{signature:a().decode(r.signature),publicKey:new s.PublicKey(r.publicKey)}}))}signTransaction(e){return c(this,void 0,void 0,(function*(){const t=yield this.sendRequest("signTransaction",{message:a().encode(e.serializeMessage())}),r=a().decode(t.signature),n=new s.PublicKey(t.publicKey);return e.addSignature(n,r),e}))}signAllTransactions(e){return c(this,void 0,void 0,(function*(){const t=yield this.sendRequest("signAllTransactions",{messages:e.map((e=>a().encode(e.serializeMessage())))}),r=t.signatures.map((e=>a().decode(e))),n=new s.PublicKey(t.publicKey);return e=e.map(((e,t)=>(e.addSignature(n,r[t]),e)))}))}diffieHellman(e){return c(this,void 0,void 0,(function*(){if(!(e instanceof Uint8Array))throw new Error("Data must be an instance of Uint8Array");return yield this.sendRequest("diffieHellman",{publicKey:e})}))}}},71256:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Account:()=>Vt,Authorized:()=>vi,BLOCKHASH_CACHE_TIMEOUT_MS:()=>Hr,BPF_LOADER_DEPRECATED_PROGRAM_ID:()=>$t,BPF_LOADER_PROGRAM_ID:()=>Rr,BpfLoader:()=>Br,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:()=>Nr,ComputeBudgetInstruction:()=>Or,ComputeBudgetProgram:()=>Tr,Connection:()=>mi,Ed25519Program:()=>ki,Enum:()=>Mt,EpochSchedule:()=>qr,FeeCalculatorLayout:()=>wr,Keypair:()=>yi,LAMPORTS_PER_SOL:()=>Vi,Loader:()=>xr,Lockup:()=>_i,MAX_SEED_LENGTH:()=>qt,Message:()=>rr,NONCE_ACCOUNT_LENGTH:()=>_r,NonceAccount:()=>Sr,PACKET_DATA_SIZE:()=>Jt,PublicKey:()=>Kt,SIGNATURE_LENGTH_IN_BYTES:()=>Xt,SOLANA_SCHEMA:()=>Dt,STAKE_CONFIG_ID:()=>wi,STAKE_INSTRUCTION_LAYOUTS:()=>Ai,SYSTEM_INSTRUCTION_LAYOUTS:()=>Ir,SYSVAR_CLOCK_PUBKEY:()=>ar,SYSVAR_EPOCH_SCHEDULE_PUBKEY:()=>cr,SYSVAR_INSTRUCTIONS_PUBKEY:()=>ur,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:()=>lr,SYSVAR_RENT_PUBKEY:()=>hr,SYSVAR_REWARDS_PUBKEY:()=>dr,SYSVAR_SLOT_HASHES_PUBKEY:()=>fr,SYSVAR_SLOT_HISTORY_PUBKEY:()=>pr,SYSVAR_STAKE_HISTORY_PUBKEY:()=>gr,Secp256k1Program:()=>Bi,SendTransactionError:()=>Kr,StakeAuthorizationLayout:()=>Ii,StakeInstruction:()=>Si,StakeProgram:()=>Ei,Struct:()=>Wt,SystemInstruction:()=>Ar,SystemProgram:()=>Er,Transaction:()=>or,TransactionInstruction:()=>sr,VALIDATOR_INFO_KEY:()=>Oi,VOTE_PROGRAM_ID:()=>Ci,ValidatorInfo:()=>Ti,VoteAccount:()=>zi,VoteAuthorizationLayout:()=>ji,VoteInit:()=>Di,VoteInstruction:()=>qi,VoteProgram:()=>Fi,clusterApiUrl:()=>Zi,sendAndConfirmRawTransaction:()=>Gi,sendAndConfirmTransaction:()=>mr});var n=r(44967),i=r.n(n),s=r(97429),o=r(48744),a=r.n(o),c=r(68532),u=r.n(c),l=r(21215),h=r(25047),d=r(54338),f=r(85606),p=r(32908),g=r.n(p),m=r(91747),y=r.n(m),b=r(16348),k=r.n(b);const w=e=>s.Buffer.isBuffer(e)?e:e instanceof Uint8Array?s.Buffer.from(e.buffer,e.byteOffset,e.byteLength):s.Buffer.from(e);var v="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self?self:{};function _(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var S={},A={},I=E;function E(e,t){if(!e)throw new Error(t||"Assertion failed")}E.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var P={exports:{}};"function"===typeof Object.create?P.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:P.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var x=I,R=P.exports;function B(e,t){return 55296===(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320===(64512&e.charCodeAt(t+1)))}function O(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function N(e){return 1===e.length?"0"+e:e}function T(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}A.inherits=R,A.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"===typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):B(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},A.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=N(e[r].toString(16));return t},A.htonl=O,A.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=O(i)),r+=T(i.toString(16))}return r},A.zero2=N,A.zero8=T,A.join32=function(e,t,r,n){var i=r-t;x(i%4===0);for(var s=new Array(i/4),o=0,a=t;o<s.length;o++,a+=4){var c;c="big"===n?e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3]:e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a],s[o]=c>>>0}return s},A.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];"big"===t?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},A.rotr32=function(e,t){return e>>>t|e<<32-t},A.rotl32=function(e,t){return e<<t|e>>>32-t},A.sum32=function(e,t){return e+t>>>0},A.sum32_3=function(e,t,r){return e+t+r>>>0},A.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},A.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},A.sum64=function(e,t,r,n){var i=e[t],s=n+e[t+1]>>>0,o=(s<n?1:0)+r+i;e[t]=o>>>0,e[t+1]=s},A.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},A.sum64_lo=function(e,t,r,n){return t+n>>>0},A.sum64_4_hi=function(e,t,r,n,i,s,o,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+s>>>0)<s?1:0,e+r+i+o+(c+=(u=u+a>>>0)<a?1:0)>>>0},A.sum64_4_lo=function(e,t,r,n,i,s,o,a){return t+n+s+a>>>0},A.sum64_5_hi=function(e,t,r,n,i,s,o,a,c,u){var l=0,h=t;return l+=(h=h+n>>>0)<t?1:0,l+=(h=h+s>>>0)<s?1:0,l+=(h=h+a>>>0)<a?1:0,e+r+i+o+c+(l+=(h=h+u>>>0)<u?1:0)>>>0},A.sum64_5_lo=function(e,t,r,n,i,s,o,a,c,u){return t+n+s+a+u>>>0},A.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},A.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},A.shr64_hi=function(e,t,r){return e>>>r},A.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0};var C={},U=A,z=I;function L(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}C.BlockHash=L,L.prototype.update=function(e,t){if(e=U.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=U.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},L.prototype.digest=function(e){return this.update(this._pad()),z(null===this.pending),this._digest(e)},L.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n};var W={},M={},D=A.rotr32;function q(e,t,r){return e&t^~e&r}function K(e,t,r){return e&t^e&r^t&r}function j(e,t,r){return e^t^r}M.ft_1=function(e,t,r,n){return 0===e?q(t,r,n):1===e||3===e?j(t,r,n):2===e?K(t,r,n):void 0},M.ch32=q,M.maj32=K,M.p32=j,M.s0_256=function(e){return D(e,2)^D(e,13)^D(e,22)},M.s1_256=function(e){return D(e,6)^D(e,11)^D(e,25)},M.g0_256=function(e){return D(e,7)^D(e,18)^e>>>3},M.g1_256=function(e){return D(e,17)^D(e,19)^e>>>10};var F=A,G=C,H=M,Z=F.rotl32,V=F.sum32,$=F.sum32_5,J=H.ft_1,X=G.BlockHash,Y=[1518500249,1859775393,2400959708,3395469782];function Q(){if(!(this instanceof Q))return new Q;X.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}F.inherits(Q,X);var ee=Q;Q.blockSize=512,Q.outSize=160,Q.hmacStrength=80,Q.padLength=64,Q.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=Z(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4];for(n=0;n<r.length;n++){var u=~~(n/20),l=$(Z(i,5),J(u,s,o,a),c,r[n],Y[u]);c=a,a=o,o=Z(s,30),s=i,i=l}this.h[0]=V(this.h[0],i),this.h[1]=V(this.h[1],s),this.h[2]=V(this.h[2],o),this.h[3]=V(this.h[3],a),this.h[4]=V(this.h[4],c)},Q.prototype._digest=function(e){return"hex"===e?F.toHex32(this.h,"big"):F.split32(this.h,"big")};var te=A,re=C,ne=M,ie=I,se=te.sum32,oe=te.sum32_4,ae=te.sum32_5,ce=ne.ch32,ue=ne.maj32,le=ne.s0_256,he=ne.s1_256,de=ne.g0_256,fe=ne.g1_256,pe=re.BlockHash,ge=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function me(){if(!(this instanceof me))return new me;pe.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=ge,this.W=new Array(64)}te.inherits(me,pe);var ye=me;me.blockSize=512,me.outSize=256,me.hmacStrength=192,me.padLength=64,me.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=oe(fe(r[n-2]),r[n-7],de(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],l=this.h[6],h=this.h[7];for(ie(this.k.length===r.length),n=0;n<r.length;n++){var d=ae(h,he(c),ce(c,u,l),this.k[n],r[n]),f=se(le(i),ue(i,s,o));h=l,l=u,u=c,c=se(a,d),a=o,o=s,s=i,i=se(d,f)}this.h[0]=se(this.h[0],i),this.h[1]=se(this.h[1],s),this.h[2]=se(this.h[2],o),this.h[3]=se(this.h[3],a),this.h[4]=se(this.h[4],c),this.h[5]=se(this.h[5],u),this.h[6]=se(this.h[6],l),this.h[7]=se(this.h[7],h)},me.prototype._digest=function(e){return"hex"===e?te.toHex32(this.h,"big"):te.split32(this.h,"big")};var be=A,ke=ye;function we(){if(!(this instanceof we))return new we;ke.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}be.inherits(we,ke);var ve=we;we.blockSize=512,we.outSize=224,we.hmacStrength=192,we.padLength=64,we.prototype._digest=function(e){return"hex"===e?be.toHex32(this.h.slice(0,7),"big"):be.split32(this.h.slice(0,7),"big")};var _e=A,Se=C,Ae=I,Ie=_e.rotr64_hi,Ee=_e.rotr64_lo,Pe=_e.shr64_hi,xe=_e.shr64_lo,Re=_e.sum64,Be=_e.sum64_hi,Oe=_e.sum64_lo,Ne=_e.sum64_4_hi,Te=_e.sum64_4_lo,Ce=_e.sum64_5_hi,Ue=_e.sum64_5_lo,ze=Se.BlockHash,Le=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function We(){if(!(this instanceof We))return new We;ze.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Le,this.W=new Array(160)}_e.inherits(We,ze);var Me=We;function De(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function qe(e,t,r,n,i,s){var o=t&n^~t&s;return o<0&&(o+=4294967296),o}function Ke(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function je(e,t,r,n,i,s){var o=t&n^t&s^n&s;return o<0&&(o+=4294967296),o}function Fe(e,t){var r=Ie(e,t,28)^Ie(t,e,2)^Ie(t,e,7);return r<0&&(r+=4294967296),r}function Ge(e,t){var r=Ee(e,t,28)^Ee(t,e,2)^Ee(t,e,7);return r<0&&(r+=4294967296),r}function He(e,t){var r=Ie(e,t,14)^Ie(e,t,18)^Ie(t,e,9);return r<0&&(r+=4294967296),r}function Ze(e,t){var r=Ee(e,t,14)^Ee(e,t,18)^Ee(t,e,9);return r<0&&(r+=4294967296),r}function Ve(e,t){var r=Ie(e,t,1)^Ie(e,t,8)^Pe(e,t,7);return r<0&&(r+=4294967296),r}function $e(e,t){var r=Ee(e,t,1)^Ee(e,t,8)^xe(e,t,7);return r<0&&(r+=4294967296),r}function Je(e,t){var r=Ie(e,t,19)^Ie(t,e,29)^Pe(e,t,6);return r<0&&(r+=4294967296),r}function Xe(e,t){var r=Ee(e,t,19)^Ee(t,e,29)^xe(e,t,6);return r<0&&(r+=4294967296),r}We.blockSize=1024,We.outSize=512,We.hmacStrength=192,We.padLength=128,We.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=Je(r[n-4],r[n-3]),s=Xe(r[n-4],r[n-3]),o=r[n-14],a=r[n-13],c=Ve(r[n-30],r[n-29]),u=$e(r[n-30],r[n-29]),l=r[n-32],h=r[n-31];r[n]=Ne(i,s,o,a,c,u,l,h),r[n+1]=Te(i,s,o,a,c,u,l,h)}},We.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=this.h[5],u=this.h[6],l=this.h[7],h=this.h[8],d=this.h[9],f=this.h[10],p=this.h[11],g=this.h[12],m=this.h[13],y=this.h[14],b=this.h[15];Ae(this.k.length===r.length);for(var k=0;k<r.length;k+=2){var w=y,v=b,_=He(h,d),S=Ze(h,d),A=De(h,d,f,p,g),I=qe(h,d,f,p,g,m),E=this.k[k],P=this.k[k+1],x=r[k],R=r[k+1],B=Ce(w,v,_,S,A,I,E,P,x,R),O=Ue(w,v,_,S,A,I,E,P,x,R);w=Fe(n,i),v=Ge(n,i),_=Ke(n,i,s,o,a),S=je(n,i,s,o,a,c);var N=Be(w,v,_,S),T=Oe(w,v,_,S);y=g,b=m,g=f,m=p,f=h,p=d,h=Be(u,l,B,O),d=Oe(l,l,B,O),u=a,l=c,a=s,c=o,s=n,o=i,n=Be(B,O,N,T),i=Oe(B,O,N,T)}Re(this.h,0,n,i),Re(this.h,2,s,o),Re(this.h,4,a,c),Re(this.h,6,u,l),Re(this.h,8,h,d),Re(this.h,10,f,p),Re(this.h,12,g,m),Re(this.h,14,y,b)},We.prototype._digest=function(e){return"hex"===e?_e.toHex32(this.h,"big"):_e.split32(this.h,"big")};var Ye=A,Qe=Me;function et(){if(!(this instanceof et))return new et;Qe.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Ye.inherits(et,Qe);var tt=et;et.blockSize=1024,et.outSize=384,et.hmacStrength=192,et.padLength=128,et.prototype._digest=function(e){return"hex"===e?Ye.toHex32(this.h.slice(0,12),"big"):Ye.split32(this.h.slice(0,12),"big")},W.sha1=ee,W.sha224=ve,W.sha256=ye,W.sha384=tt,W.sha512=Me;var rt={},nt=A,it=C,st=nt.rotl32,ot=nt.sum32,at=nt.sum32_3,ct=nt.sum32_4,ut=it.BlockHash;function lt(){if(!(this instanceof lt))return new lt;ut.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function ht(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function dt(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function ft(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}nt.inherits(lt,ut),rt.ripemd160=lt,lt.blockSize=512,lt.outSize=160,lt.hmacStrength=192,lt.padLength=64,lt.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],s=this.h[3],o=this.h[4],a=r,c=n,u=i,l=s,h=o,d=0;d<80;d++){var f=ot(st(ct(r,ht(d,n,i,s),e[pt[d]+t],dt(d)),mt[d]),o);r=o,o=s,s=st(i,10),i=n,n=f,f=ot(st(ct(a,ht(79-d,c,u,l),e[gt[d]+t],ft(d)),yt[d]),h),a=h,h=l,l=st(u,10),u=c,c=f}f=at(this.h[1],i,l),this.h[1]=at(this.h[2],s,h),this.h[2]=at(this.h[3],o,a),this.h[3]=at(this.h[4],r,c),this.h[4]=at(this.h[0],n,u),this.h[0]=f},lt.prototype._digest=function(e){return"hex"===e?nt.toHex32(this.h,"little"):nt.split32(this.h,"little")};var pt=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],gt=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],mt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],yt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],bt=A,kt=I;function wt(e,t,r){if(!(this instanceof wt))return new wt(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(bt.toArray(t,r))}var vt=wt;wt.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),kt(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},wt.prototype.update=function(e,t){return this.inner.update(e,t),this},wt.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=A,t.common=C,t.sha=W,t.ripemd=rt,t.hmac=vt,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(S);var _t=S;let St=!1,At=!1;const It={debug:1,default:2,info:2,warning:3,error:4,off:5};let Et=It.default,Pt=null;const xt=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Rt,Bt;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Rt||(Rt={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(Bt||(Bt={}));const Ot="0123456789abcdef";class Nt{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==It[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Et>It[r]||console.log.apply(console,t)}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._log(Nt.levels.DEBUG,t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._log(Nt.levels.INFO,t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._log(Nt.levels.WARNING,t)}makeError(e,t,r){if(At)return this.makeError("censored error",t,{});t||(t=Nt.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Ot[t[e]>>4],r+=Ot[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(o){n.push(e+"="+JSON.stringify(r[e].toString()))}})),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let s="";switch(t){case Bt.NUMERIC_FAULT:{s="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break}case Bt.CALL_EXCEPTION:case Bt.INSUFFICIENT_FUNDS:case Bt.MISSING_NEW:case Bt.NONCE_EXPIRED:case Bt.REPLACEMENT_UNDERPRICED:case Bt.TRANSACTION_REPLACED:case Bt.UNPREDICTABLE_GAS_LIMIT:s=t}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const o=new Error(e);return o.reason=i,o.code=t,Object.keys(r).forEach((function(e){o[e]=r[e]})),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Nt.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){xt&&this.throwError("platform missing String.prototype.normalize",Nt.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:xt})}checkSafeUint53(e,t){"number"===typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Nt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Nt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Nt.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Nt.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Nt.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Nt.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Nt.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Pt||(Pt=new Nt("logger/5.6.0")),Pt}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Nt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),St){if(!e)return;this.globalLogger().throwError("error censorship permanent",Nt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}At=!!e,St=!!t}static setLogLevel(e){const t=It[e.toLowerCase()];null!=t?Et=t:Nt.globalLogger().warn("invalid log level - "+e)}static from(e){return new Nt(e)}}Nt.errors=Bt,Nt.levels=Rt;const Tt=new Nt("bytes/5.6.0");function Ct(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Ct(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Ut(e){return"number"===typeof e&&e==e&&e%1===0}function zt(e,t){if(t||(t={}),"number"===typeof e){Tt.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Ct(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),function(e){return!!e.toHexString}(e)&&(e=e.toHexString()),function(e,t){if("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))return!1;if(t&&e.length!==2+2*t)return!1;return!0}(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0x0"+r.substring(2):"right"===t.hexPad?r+="0":Tt.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Ct(new Uint8Array(n))}return function(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!Ut(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Ut(r)||r<0||r>=256)return!1}return!0}(e)?Ct(new Uint8Array(e)):Tt.throwArgumentError("invalid arrayify value","value",e)}function Lt(e){return"0x"+_t.sha256().update(zt(e)).digest("hex")}new Nt("sha2/5.6.0");class Wt{constructor(e){Object.assign(this,e)}encode(){return s.Buffer.from((0,l.serialize)(Dt,this))}static decode(e){return(0,l.deserialize)(Dt,this,e)}static decodeUnchecked(e){return(0,l.deserializeUnchecked)(Dt,this,e)}}class Mt extends Wt{constructor(e){if(super(e),this.enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");Object.keys(e).map((e=>{this.enum=e}))}}const Dt=new Map,qt=32;class Kt extends Wt{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"===typeof e){const t=u().decode(e);if(32!=t.length)throw new Error("Invalid public key input");this._bn=new(a())(t)}else this._bn=new(a())(e);if(this._bn.byteLength()>32)throw new Error("Invalid public key input")}}equals(e){return this._bn.eq(e._bn)}toBase58(){return u().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){return this.toBuffer()}toBuffer(){const e=this._bn.toArrayLike(s.Buffer);if(32===e.length)return e;const t=s.Buffer.alloc(32);return e.copy(t,32-e.length),t}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const n=s.Buffer.concat([e.toBuffer(),s.Buffer.from(t),r.toBuffer()]),i=Lt(new Uint8Array(n)).slice(2);return new Kt(s.Buffer.from(i,"hex"))}static createProgramAddressSync(e,t){let r=s.Buffer.alloc(0);e.forEach((function(e){if(e.length>qt)throw new TypeError("Max seed length exceeded");r=s.Buffer.concat([r,w(e)])})),r=s.Buffer.concat([r,t.toBuffer(),s.Buffer.from("ProgramDerivedAddress")]);let n=Lt(new Uint8Array(r)).slice(2),i=new(a())(n,16).toArray(void 0,32);if(Ft(i))throw new Error("Invalid seeds, address must fall off the curve");return new Kt(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,n=255;for(;0!=n;){try{const i=e.concat(s.Buffer.from([n]));r=this.createProgramAddressSync(i,t)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return 1==Ft(new Kt(e).toBytes())}}Kt.default=new Kt("11111111111111111111111111111111"),Dt.set(Kt,{kind:"struct",fields:[["_bn","u256"]]});let jt=i().lowlevel;function Ft(e){var t=[jt.gf(),jt.gf(),jt.gf(),jt.gf()],r=jt.gf(),n=jt.gf(),i=jt.gf(),s=jt.gf(),o=jt.gf(),a=jt.gf(),c=jt.gf();return jt.set25519(t[2],Gt),jt.unpack25519(t[1],e),jt.S(i,t[1]),jt.M(s,i,jt.D),jt.Z(i,i,t[2]),jt.A(s,t[2],s),jt.S(o,s),jt.S(a,o),jt.M(c,a,o),jt.M(r,c,i),jt.M(r,r,s),jt.pow2523(r,r),jt.M(r,r,i),jt.M(r,r,s),jt.M(r,r,s),jt.M(t[0],r,s),jt.S(n,t[0]),jt.M(n,n,s),Zt(n,i)&&jt.M(t[0],t[0],Ht),jt.S(n,t[0]),jt.M(n,n,s),Zt(n,i)?0:1}let Gt=jt.gf([1]),Ht=jt.gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Zt(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return jt.pack25519(r,e),jt.pack25519(n,t),jt.crypto_verify_32(r,0,n,0)}class Vt{constructor(e){this._keypair=void 0,this._keypair=e?i().sign.keyPair.fromSecretKey(w(e)):i().sign.keyPair()}get publicKey(){return new Kt(this._keypair.publicKey)}get secretKey(){return w(this._keypair.secretKey)}}const $t=new Kt("BPFLoader1111111111111111111111111111111111"),Jt=1232,Xt=64,Yt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return h.Ik(32,e)},Qt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string";const t=h.n_([h.Jq("length"),h.Jq("lengthPadding"),h.Ik(h.cv(h.Jq(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(e,t)=>r(e,t).chars.toString(),i.encode=(e,t,r)=>{const i={chars:s.Buffer.from(e,"utf8")};return n(i,t,r)},i.alloc=e=>h.Jq().span+h.Jq().span+s.Buffer.from(e,"utf8").length,i};function er(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,0===(128&n))break}return t}function tr(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}class rr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new Kt(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){return e<this.header.numRequiredSignatures-this.header.numReadonlySignedAccounts||e>=this.header.numRequiredSignatures&&e<this.accountKeys.length-this.header.numReadonlyUnsignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];tr(t,e);const r=this.instructions.map((e=>{const{accounts:t,programIdIndex:r}=e,n=Array.from(u().decode(e.data));let i=[];tr(i,t.length);let o=[];return tr(o,n.length),{programIdIndex:r,keyIndicesCount:s.Buffer.from(i),keyIndices:t,dataLength:s.Buffer.from(o),data:n}}));let n=[];tr(n,r.length);let i=s.Buffer.alloc(Jt);s.Buffer.from(n).copy(i);let o=n.length;r.forEach((e=>{const t=h.n_([h.u8("programIdIndex"),h.Ik(e.keyIndicesCount.length,"keyIndicesCount"),h.A9(h.u8("keyIndex"),e.keyIndices.length,"keyIndices"),h.Ik(e.dataLength.length,"dataLength"),h.A9(h.u8("userdatum"),e.data.length,"data")]).encode(e,i,o);o+=t})),i=i.slice(0,o);const a=h.n_([h.Ik(1,"numRequiredSignatures"),h.Ik(1,"numReadonlySignedAccounts"),h.Ik(1,"numReadonlyUnsignedAccounts"),h.Ik(t.length,"keyCount"),h.A9(Yt("key"),e,"keys"),Yt("recentBlockhash")]),c={numRequiredSignatures:s.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:s.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:s.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:s.Buffer.from(t),keys:this.accountKeys.map((e=>w(e.toBytes()))),recentBlockhash:u().decode(this.recentBlockhash)};let l=s.Buffer.alloc(2048);const d=a.encode(c,l);return i.copy(l,d),l.slice(0,d+i.length)}static from(e){let t=[...e];const r=t.shift(),n=t.shift(),i=t.shift(),o=er(t);let a=[];for(let f=0;f<o;f++){const e=t.slice(0,32);t=t.slice(32),a.push(u().encode(s.Buffer.from(e)))}const c=t.slice(0,32);t=t.slice(32);const l=er(t);let h=[];for(let f=0;f<l;f++){const e=t.shift(),r=er(t),n=t.slice(0,r);t=t.slice(r);const i=er(t),o=t.slice(0,i),a=u().encode(s.Buffer.from(o));t=t.slice(i),h.push({programIdIndex:e,accounts:n,data:a})}const d={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:u().encode(s.Buffer.from(c)),accountKeys:a,instructions:h};return new rr(d)}}function nr(e,t){if(!e)throw new Error(t||"Assertion failed")}const ir=s.Buffer.alloc(Xt).fill(0);class sr{constructor(e){this.keys=void 0,this.programId=void 0,this.data=s.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((e=>{let{pubkey:t,isSigner:r,isWritable:n}=e;return{pubkey:t.toJSON(),isSigner:r,isWritable:n}})),programId:this.programId.toJSON(),data:[...this.data]}}}class or{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.nonceInfo=void 0,this._message=void 0,this._json=void 0,e&&Object.assign(this,e)}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((e=>{let{publicKey:t}=e;return t.toJSON()}))}}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No instructions");return t.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new sr(e))})),this}compileMessage(){if(this._message){if(JSON.stringify(this.toJSON())!==JSON.stringify(this._json))throw new Error("Transaction message mutated after being populated from Message");return this._message}const{nonceInfo:e}=this;e&&this.instructions[0]!=e.nonceInstruction&&(this.recentBlockhash=e.nonce,this.instructions.unshift(e.nonceInstruction));const{recentBlockhash:t}=this;if(!t)throw new Error("Transaction recentBlockhash required");let r;if(this.instructions.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let u=0;u<this.instructions.length;u++)if(void 0===this.instructions[u].programId)throw new Error(`Transaction instruction index ${u} has undefined program id`);const n=[],i=[];this.instructions.forEach((e=>{e.keys.forEach((e=>{i.push({...e})}));const t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((e=>{i.push({pubkey:new Kt(e),isSigner:!1,isWritable:!1})})),i.sort((function(e,t){const r=e.pubkey.toBase58().localeCompare(t.pubkey.toBase58()),n=e.isSigner===t.isSigner?0:e.isSigner?-1:1,i=e.isWritable===t.isWritable?r:e.isWritable?-1:1;return n||i}));const s=[];i.forEach((e=>{const t=e.pubkey.toString(),r=s.findIndex((e=>e.pubkey.toString()===t));r>-1?s[r].isWritable=s[r].isWritable||e.isWritable:s.push(e)}));const o=s.findIndex((e=>e.pubkey.equals(r)));if(o>-1){const[e]=s.splice(o,1);e.isSigner=!0,e.isWritable=!0,s.unshift(e)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const u of this.signatures){const e=s.findIndex((e=>e.pubkey.equals(u.publicKey)));if(!(e>-1))throw new Error(`unknown signer: ${u.publicKey.toString()}`);s[e].isSigner||(s[e].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,c=0,l=0;const h=[],d=[];s.forEach((e=>{let{pubkey:t,isSigner:r,isWritable:n}=e;r?(h.push(t.toString()),a+=1,n||(c+=1)):(d.push(t.toString()),n||(l+=1))}));const f=h.concat(d),p=this.instructions.map((e=>{const{data:t,programId:r}=e;return{programIdIndex:f.indexOf(r.toString()),accounts:e.keys.map((e=>f.indexOf(e.pubkey.toString()))),data:u().encode(t)}}));return p.forEach((e=>{nr(e.programIdIndex>=0),e.accounts.forEach((e=>nr(e>=0)))})),new rr({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:l},accountKeys:f,recentBlockhash:t,instructions:p})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length){if(this.signatures.every(((e,r)=>t[r].equals(e.publicKey))))return e}return this.signatures=t.map((e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");const n=new Set;this.signatures=t.filter((e=>{const t=e.toString();return!n.has(t)&&(n.add(t),!0)})).map((e=>({signature:null,publicKey:e})))}sign(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");const n=new Set,i=[];for(const o of t){const e=o.publicKey.toString();n.has(e)||(n.add(e),i.push(o))}this.signatures=i.map((e=>({signature:null,publicKey:e.publicKey})));const s=this._compile();this._partialSign(s,...i),this._verifySignatures(s.serialize(),!0)}partialSign(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)throw new Error("No signers");const n=new Set,i=[];for(const o of t){const e=o.publicKey.toString();n.has(e)||(n.add(e),i.push(o))}const s=this._compile();this._partialSign(s,...i)}_partialSign(e){const t=e.serialize();for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];n.forEach((e=>{const r=i().sign.detached(t,e.secretKey);this._addSignature(e.publicKey,w(r))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){nr(64===t.length);const r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=s.Buffer.from(t)}verifySignatures(){return this._verifySignatures(this.serializeMessage(),!0)}_verifySignatures(e,t){for(const{signature:r,publicKey:n}of this.signatures)if(null===r){if(t)return!1}else if(!i().sign.detached.verify(e,r,n.toBuffer()))return!1;return!0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r&&!this._verifySignatures(n,t))throw new Error("Signature verification failed");return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];tr(r,t.length);const n=r.length+64*t.length+e.length,i=s.Buffer.alloc(n);return nr(t.length<256),s.Buffer.from(r).copy(i,0),t.forEach(((e,t)=>{let{signature:n}=e;null!==n&&(nr(64===n.length,"signature has invalid length"),s.Buffer.from(n).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),nr(i.length<=Jt,`Transaction too large: ${i.length} > ${Jt}`),i}get keys(){return nr(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return nr(1===this.instructions.length),this.instructions[0].programId}get data(){return nr(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=er(t);let n=[];for(let i=0;i<r;i++){const e=t.slice(0,Xt);t=t.slice(Xt),n.push(u().encode(s.Buffer.from(e)))}return or.populate(rr.from(t),n)}static populate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=new or;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach(((t,n)=>{const i={signature:t==u().encode(ir)?null:u().decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));r.instructions.push(new sr({keys:n,programId:e.accountKeys[t.programIdIndex],data:u().decode(t.data)}))})),r._message=e,r._json=r.toJSON(),r}}const ar=new Kt("SysvarC1ock11111111111111111111111111111111"),cr=new Kt("SysvarEpochSchedu1e111111111111111111111111"),ur=new Kt("Sysvar1nstructions1111111111111111111111111"),lr=new Kt("SysvarRecentB1ockHashes11111111111111111111"),hr=new Kt("SysvarRent111111111111111111111111111111111"),dr=new Kt("SysvarRewards111111111111111111111111111111"),fr=new Kt("SysvarS1otHashes111111111111111111111111111"),pr=new Kt("SysvarS1otHistory11111111111111111111111111"),gr=new Kt("SysvarStakeHistory1111111111111111111111111");async function mr(e,t,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries},s=await e.sendTransaction(t,r,i),o=(await e.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function yr(e){return new Promise((t=>setTimeout(t,e)))}function br(e,t){const r=e.layout.span>=0?e.layout.span:function(e,t){let r=0;return e.layout.fields.forEach((e=>{e.span>=0?r+=e.span:"function"===typeof e.alloc&&(r+=e.alloc(t[e.property]))})),r}(e,t),n=s.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}function kr(e,t){let r;try{r=e.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==e.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}const wr=h._O("lamportsPerSignature"),vr=h.n_([h.Jq("version"),h.Jq("state"),Yt("authorizedPubkey"),Yt("nonce"),h.n_([wr],"feeCalculator")]),_r=vr.span;class Sr{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=vr.decode(w(e),0);return new Sr({authorizedPubkey:new Kt(t.authorizedPubkey),nonce:new Kt(t.nonce).toString(),feeCalculator:t.feeCalculator})}}class Ar{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.Jq("instruction").decode(e.data);let r;for(const[n,i]of Object.entries(Ir))if(i.index==t){r=n;break}if(!r)throw new Error("Instruction type incorrect; not a SystemInstruction");return r}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:r,programId:n}=kr(Ir.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new Kt(n)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=kr(Ir.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:r,programId:n}=kr(Ir.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new Kt(n)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=kr(Ir.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,space:n,programId:i}=kr(Ir.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Kt(t),seed:r,space:n,programId:new Kt(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=kr(Ir.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new Kt(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:r,programId:n}=kr(Ir.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Kt(t),seed:r,programId:new Kt(n)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:r,lamports:n,space:i,programId:s}=kr(Ir.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Kt(t),seed:r,lamports:n,space:i,programId:new Kt(s)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=kr(Ir.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Kt(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),kr(Ir.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=kr(Ir.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=kr(Ir.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Kt(t)}}static checkProgramId(e){if(!e.equals(Er.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ir=Object.freeze({Create:{index:0,layout:h.n_([h.Jq("instruction"),h.gM("lamports"),h.gM("space"),Yt("programId")])},Assign:{index:1,layout:h.n_([h.Jq("instruction"),Yt("programId")])},Transfer:{index:2,layout:h.n_([h.Jq("instruction"),h.gM("lamports")])},CreateWithSeed:{index:3,layout:h.n_([h.Jq("instruction"),Yt("base"),Qt("seed"),h.gM("lamports"),h.gM("space"),Yt("programId")])},AdvanceNonceAccount:{index:4,layout:h.n_([h.Jq("instruction")])},WithdrawNonceAccount:{index:5,layout:h.n_([h.Jq("instruction"),h.gM("lamports")])},InitializeNonceAccount:{index:6,layout:h.n_([h.Jq("instruction"),Yt("authorized")])},AuthorizeNonceAccount:{index:7,layout:h.n_([h.Jq("instruction"),Yt("authorized")])},Allocate:{index:8,layout:h.n_([h.Jq("instruction"),h.gM("space")])},AllocateWithSeed:{index:9,layout:h.n_([h.Jq("instruction"),Yt("base"),Qt("seed"),h.gM("space"),Yt("programId")])},AssignWithSeed:{index:10,layout:h.n_([h.Jq("instruction"),Yt("base"),Qt("seed"),Yt("programId")])},TransferWithSeed:{index:11,layout:h.n_([h.Jq("instruction"),h.gM("lamports"),Qt("seed"),Yt("programId")])}});class Er{constructor(){}static createAccount(e){const t=br(Ir.Create,{lamports:e.lamports,space:e.space,programId:w(e.programId.toBuffer())});return new sr({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;if("basePubkey"in e){t=br(Ir.TransferWithSeed,{lamports:e.lamports,seed:e.seed,programId:w(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{t=br(Ir.Transfer,{lamports:e.lamports}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new sr({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){t=br(Ir.AssignWithSeed,{base:w(e.basePubkey.toBuffer()),seed:e.seed,programId:w(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=br(Ir.Assign,{programId:w(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new sr({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=br(Ir.CreateWithSeed,{base:w(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:w(e.programId.toBuffer())});let r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new sr({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){const t=new or;"basePubkey"in e&&"seed"in e?t.add(Er.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:_r,programId:this.programId})):t.add(Er.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:_r,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=br(Ir.InitializeNonceAccount,{authorized:w(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:lr,isSigner:!1,isWritable:!1},{pubkey:hr,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new sr(r)}static nonceAdvance(e){const t=br(Ir.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:lr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new sr(r)}static nonceWithdraw(e){const t=br(Ir.WithdrawNonceAccount,{lamports:e.lamports});return new sr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:lr,isSigner:!1,isWritable:!1},{pubkey:hr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){const t=br(Ir.AuthorizeNonceAccount,{authorized:w(e.newAuthorizedPubkey.toBuffer())});return new sr({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;if("basePubkey"in e){t=br(Ir.AllocateWithSeed,{base:w(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:w(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{t=br(Ir.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new sr({keys:r,programId:this.programId,data:t})}}Er.programId=new Kt("11111111111111111111111111111111");const Pr=Jt-300;class xr{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/xr.chunkSize)+1+1)}static async load(e,t,r,n,i){{const s=await e.getMinimumBalanceForRentExemption(i.length),o=await e.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==i.length&&(a=a||new or,a.add(Er.allocate({accountPubkey:r.publicKey,space:i.length}))),o.owner.equals(n)||(a=a||new or,a.add(Er.assign({accountPubkey:r.publicKey,programId:n}))),o.lamports<s&&(a=a||new or,a.add(Er.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:s-o.lamports})))}else a=(new or).add(Er.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:s>0?s:1,space:i.length,programId:n}));null!==a&&await mr(e,a,[t,r],{commitment:"confirmed"})}const o=h.n_([h.Jq("instruction"),h.Jq("offset"),h.Jq("bytesLength"),h.Jq("bytesLengthPadding"),h.A9(h.u8("byte"),h.cv(h.Jq(),-8),"bytes")]),a=xr.chunkSize;let c=0,u=i,l=[];for(;u.length>0;){const i=u.slice(0,a),h=s.Buffer.alloc(a+16);o.encode({instruction:0,offset:c,bytes:i,bytesLength:0,bytesLengthPadding:0},h);const d=(new or).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:h});if(l.push(mr(e,d,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await yr(1e3/e)}c+=a,u=u.slice(a)}await Promise.all(l);{const i=h.n_([h.Jq("instruction")]),o=s.Buffer.alloc(i.span);i.encode({instruction:1},o);const a=(new or).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:hr,isSigner:!1,isWritable:!1}],programId:n,data:o});await mr(e,a,[t,r],{commitment:"confirmed"})}return!0}}xr.chunkSize=Pr;const Rr=new Kt("BPFLoader2111111111111111111111111111111111");class Br{static getMinNumSignatures(e){return xr.getMinNumSignatures(e)}static load(e,t,r,n,i){return xr.load(e,t,r,i,n)}}class Or{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.u8("instruction").decode(e.data);let r;for(const[n,i]of Object.entries(Nr))if(i.index==t){r=n;break}if(!r)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return r}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:r}=kr(Nr.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=kr(Nr.RequestHeapFrame,e.data);return{bytes:t}}static checkProgramId(e){if(!e.equals(Tr.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Nr=Object.freeze({RequestUnits:{index:0,layout:h.n_([h.u8("instruction"),h.Jq("units"),h.Jq("additionalFee")])},RequestHeapFrame:{index:1,layout:h.n_([h.u8("instruction"),h.Jq("bytes")])}});class Tr{constructor(){}static requestUnits(e){const t=br(Nr.RequestUnits,e);return new sr({keys:[],programId:this.programId,data:t})}static requestHeapFrame(e){const t=br(Nr.RequestHeapFrame,e);return new sr({keys:[],programId:this.programId,data:t})}}Tr.programId=new Kt("ComputeBudget111111111111111111111111111111");var Cr={exports:{}};!function(e,t){var r="undefined"!==typeof self?self:v,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!==typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function g(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=p(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=u(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},d.prototype.delete=function(e){delete this.map[u(e)]},d.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},d.prototype.set=function(e,t){this.map[u(e)]=l(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(e,t){var r=(t=t||{}).body;if(e instanceof k){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=function(e){var t=e.toUpperCase();return b.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function v(e){var t=new d;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},y.call(k.prototype),y.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];_.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(I){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function A(e,r){return new Promise((function(n,s){var o=new k(e,r);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:v(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new _(t,e))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",c)}),a.send("undefined"===typeof o._bodyInit?null:o._bodyInit)}))}A.polyfill=!0,e.fetch||(e.fetch=A,e.Headers=d,e.Request=k,e.Response=_),t.Headers=d,t.Request=k,t.Response=_,t.fetch=A,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t}(Cr,Cr.exports);var Ur=_(Cr.exports),zr=Object.prototype.toString,Lr=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function Wr(e,t){var r,n,i,s,o,a,c;if(!0===e)return"true";if(!1===e)return"false";switch(typeof e){case"object":if(null===e)return null;if(e.toJSON&&"function"===typeof e.toJSON)return Wr(e.toJSON(),t);if("[object Array]"===(c=zr.call(e))){for(i="[",n=e.length-1,r=0;r<n;r++)i+=Wr(e[r],!0)+",";return n>-1&&(i+=Wr(e[r],!0)),i+"]"}if("[object Object]"===c){for(n=(s=Lr(e).sort()).length,i="",r=0;r<n;)void 0!==(a=Wr(e[o=s[r]],!1))&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),r++;return"{"+i+"}"}return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}var Mr=function(e){var t=Wr(e,!1);if(void 0!==t)return""+t};function Dr(e){let t=0;for(;e>1;)e/=2,t++;return t}class qr{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const r=Dr(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,1+(t|=t>>32)))-Dr(32)-1;return[r,e-(this.getSlotsInEpoch(r)-32)]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}var t}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Dr(32)):this.slotsPerEpoch}}class Kr extends Error{constructor(e,t){super(e),this.logs=void 0,this.logs=t}}const jr=(0,d.oQ)((0,d.eE)(Kt),(0,d.Z_)(),(e=>new Kt(e))),Fr=(0,d.bc)([(0,d.Z_)(),(0,d.i0)("base64")]),Gr=(0,d.oQ)((0,d.eE)(s.Buffer),Fr,(e=>s.Buffer.from(e[0],"base64"))),Hr=3e4;function Zr(e){return(0,d.G0)([(0,d.dt)({jsonrpc:(0,d.i0)("2.0"),id:(0,d.Z_)(),result:e}),(0,d.dt)({jsonrpc:(0,d.i0)("2.0"),id:(0,d.Z_)(),error:(0,d.dt)({code:(0,d._4)(),message:(0,d.Z_)(),data:(0,d.jt)((0,d.Yj)())})})])}const Vr=Zr((0,d._4)());function $r(e){return(0,d.oQ)(Zr(e),Vr,(t=>"error"in t?t:{...t,result:(0,d.Ue)(t.result,e)}))}function Jr(e){return $r((0,d.dt)({context:(0,d.dt)({slot:(0,d.Rx)()}),value:e}))}function Xr(e){return(0,d.dt)({context:(0,d.dt)({slot:(0,d.Rx)()}),value:e})}const Yr=(0,d.dt)({foundation:(0,d.Rx)(),foundationTerm:(0,d.Rx)(),initial:(0,d.Rx)(),taper:(0,d.Rx)(),terminal:(0,d.Rx)()}),Qr=$r((0,d.IX)((0,d.AG)((0,d.dt)({epoch:(0,d.Rx)(),effectiveSlot:(0,d.Rx)(),amount:(0,d.Rx)(),postBalance:(0,d.Rx)()})))),en=(0,d.dt)({epoch:(0,d.Rx)(),slotIndex:(0,d.Rx)(),slotsInEpoch:(0,d.Rx)(),absoluteSlot:(0,d.Rx)(),blockHeight:(0,d.jt)((0,d.Rx)()),transactionCount:(0,d.jt)((0,d.Rx)())}),tn=(0,d.dt)({slotsPerEpoch:(0,d.Rx)(),leaderScheduleSlotOffset:(0,d.Rx)(),warmup:(0,d.O7)(),firstNormalEpoch:(0,d.Rx)(),firstNormalSlot:(0,d.Rx)()}),rn=(0,d.IM)((0,d.Z_)(),(0,d.IX)((0,d.Rx)())),nn=(0,d.AG)((0,d.G0)([(0,d.dt)({}),(0,d.Z_)()])),sn=(0,d.dt)({err:nn}),on=(0,d.i0)("receivedSignature"),an=(0,d.dt)({"solana-core":(0,d.Z_)(),"feature-set":(0,d.jt)((0,d.Rx)())}),cn=Jr((0,d.dt)({err:(0,d.AG)((0,d.G0)([(0,d.dt)({}),(0,d.Z_)()])),logs:(0,d.AG)((0,d.IX)((0,d.Z_)())),accounts:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.AG)((0,d.dt)({executable:(0,d.O7)(),owner:(0,d.Z_)(),lamports:(0,d.Rx)(),data:(0,d.IX)((0,d.Z_)()),rentEpoch:(0,d.jt)((0,d.Rx)())}))))),unitsConsumed:(0,d.jt)((0,d.Rx)())})),un=Jr((0,d.dt)({byIdentity:(0,d.IM)((0,d.Z_)(),(0,d.IX)((0,d.Rx)())),range:(0,d.dt)({firstSlot:(0,d.Rx)(),lastSlot:(0,d.Rx)()})}));const ln=$r(Yr),hn=$r(en),dn=$r(tn),fn=$r(rn),pn=$r((0,d.Rx)()),gn=Jr((0,d.dt)({total:(0,d.Rx)(),circulating:(0,d.Rx)(),nonCirculating:(0,d.Rx)(),nonCirculatingAccounts:(0,d.IX)(jr)})),mn=(0,d.dt)({amount:(0,d.Z_)(),uiAmount:(0,d.AG)((0,d.Rx)()),decimals:(0,d.Rx)(),uiAmountString:(0,d.jt)((0,d.Z_)())}),yn=Jr((0,d.IX)((0,d.dt)({address:jr,amount:(0,d.Z_)(),uiAmount:(0,d.AG)((0,d.Rx)()),decimals:(0,d.Rx)(),uiAmountString:(0,d.jt)((0,d.Z_)())}))),bn=Jr((0,d.IX)((0,d.dt)({pubkey:jr,account:(0,d.dt)({executable:(0,d.O7)(),owner:jr,lamports:(0,d.Rx)(),data:Gr,rentEpoch:(0,d.Rx)()})}))),kn=(0,d.dt)({program:(0,d.Z_)(),parsed:(0,d._4)(),space:(0,d.Rx)()}),wn=Jr((0,d.IX)((0,d.dt)({pubkey:jr,account:(0,d.dt)({executable:(0,d.O7)(),owner:jr,lamports:(0,d.Rx)(),data:kn,rentEpoch:(0,d.Rx)()})}))),vn=Jr((0,d.IX)((0,d.dt)({lamports:(0,d.Rx)(),address:jr}))),_n=(0,d.dt)({executable:(0,d.O7)(),owner:jr,lamports:(0,d.Rx)(),data:Gr,rentEpoch:(0,d.Rx)()}),Sn=(0,d.dt)({pubkey:jr,account:_n}),An=(0,d.oQ)((0,d.G0)([(0,d.eE)(s.Buffer),kn]),(0,d.G0)([Fr,kn]),(e=>Array.isArray(e)?(0,d.Ue)(e,Gr):e)),In=(0,d.dt)({executable:(0,d.O7)(),owner:jr,lamports:(0,d.Rx)(),data:An,rentEpoch:(0,d.Rx)()}),En=(0,d.dt)({pubkey:jr,account:In}),Pn=(0,d.dt)({state:(0,d.G0)([(0,d.i0)("active"),(0,d.i0)("inactive"),(0,d.i0)("activating"),(0,d.i0)("deactivating")]),active:(0,d.Rx)(),inactive:(0,d.Rx)()}),xn=$r((0,d.IX)((0,d.dt)({signature:(0,d.Z_)(),slot:(0,d.Rx)(),err:nn,memo:(0,d.AG)((0,d.Z_)()),blockTime:(0,d.jt)((0,d.AG)((0,d.Rx)()))}))),Rn=$r((0,d.IX)((0,d.dt)({signature:(0,d.Z_)(),slot:(0,d.Rx)(),err:nn,memo:(0,d.AG)((0,d.Z_)()),blockTime:(0,d.jt)((0,d.AG)((0,d.Rx)()))}))),Bn=(0,d.dt)({subscription:(0,d.Rx)(),result:Xr(_n)}),On=(0,d.dt)({pubkey:jr,account:_n}),Nn=(0,d.dt)({subscription:(0,d.Rx)(),result:Xr(On)}),Tn=(0,d.dt)({parent:(0,d.Rx)(),slot:(0,d.Rx)(),root:(0,d.Rx)()}),Cn=(0,d.dt)({subscription:(0,d.Rx)(),result:Tn}),Un=(0,d.G0)([(0,d.dt)({type:(0,d.G0)([(0,d.i0)("firstShredReceived"),(0,d.i0)("completed"),(0,d.i0)("optimisticConfirmation"),(0,d.i0)("root")]),slot:(0,d.Rx)(),timestamp:(0,d.Rx)()}),(0,d.dt)({type:(0,d.i0)("createdBank"),parent:(0,d.Rx)(),slot:(0,d.Rx)(),timestamp:(0,d.Rx)()}),(0,d.dt)({type:(0,d.i0)("frozen"),slot:(0,d.Rx)(),timestamp:(0,d.Rx)(),stats:(0,d.dt)({numTransactionEntries:(0,d.Rx)(),numSuccessfulTransactions:(0,d.Rx)(),numFailedTransactions:(0,d.Rx)(),maxTransactionsPerEntry:(0,d.Rx)()})}),(0,d.dt)({type:(0,d.i0)("dead"),slot:(0,d.Rx)(),timestamp:(0,d.Rx)(),err:(0,d.Z_)()})]),zn=(0,d.dt)({subscription:(0,d.Rx)(),result:Un}),Ln=(0,d.dt)({subscription:(0,d.Rx)(),result:Xr((0,d.G0)([sn,on]))}),Wn=(0,d.dt)({subscription:(0,d.Rx)(),result:(0,d.Rx)()}),Mn=(0,d.dt)({pubkey:(0,d.Z_)(),gossip:(0,d.AG)((0,d.Z_)()),tpu:(0,d.AG)((0,d.Z_)()),rpc:(0,d.AG)((0,d.Z_)()),version:(0,d.AG)((0,d.Z_)())}),Dn=(0,d.dt)({votePubkey:(0,d.Z_)(),nodePubkey:(0,d.Z_)(),activatedStake:(0,d.Rx)(),epochVoteAccount:(0,d.O7)(),epochCredits:(0,d.IX)((0,d.bc)([(0,d.Rx)(),(0,d.Rx)(),(0,d.Rx)()])),commission:(0,d.Rx)(),lastVote:(0,d.Rx)(),rootSlot:(0,d.AG)((0,d.Rx)())}),qn=$r((0,d.dt)({current:(0,d.IX)(Dn),delinquent:(0,d.IX)(Dn)})),Kn=(0,d.G0)([(0,d.i0)("processed"),(0,d.i0)("confirmed"),(0,d.i0)("finalized")]),jn=(0,d.dt)({slot:(0,d.Rx)(),confirmations:(0,d.AG)((0,d.Rx)()),err:nn,confirmationStatus:(0,d.jt)(Kn)}),Fn=Jr((0,d.IX)((0,d.AG)(jn))),Gn=$r((0,d.Rx)()),Hn=(0,d.dt)({signatures:(0,d.IX)((0,d.Z_)()),message:(0,d.dt)({accountKeys:(0,d.IX)((0,d.Z_)()),header:(0,d.dt)({numRequiredSignatures:(0,d.Rx)(),numReadonlySignedAccounts:(0,d.Rx)(),numReadonlyUnsignedAccounts:(0,d.Rx)()}),instructions:(0,d.IX)((0,d.dt)({accounts:(0,d.IX)((0,d.Rx)()),data:(0,d.Z_)(),programIdIndex:(0,d.Rx)()})),recentBlockhash:(0,d.Z_)()})}),Zn=(0,d.dt)({parsed:(0,d._4)(),program:(0,d.Z_)(),programId:jr}),Vn=(0,d.dt)({accounts:(0,d.IX)(jr),data:(0,d.Z_)(),programId:jr}),$n=(0,d.G0)([Vn,Zn]),Jn=(0,d.G0)([(0,d.dt)({parsed:(0,d._4)(),program:(0,d.Z_)(),programId:(0,d.Z_)()}),(0,d.dt)({accounts:(0,d.IX)((0,d.Z_)()),data:(0,d.Z_)(),programId:(0,d.Z_)()})]),Xn=(0,d.oQ)($n,Jn,(e=>"accounts"in e?(0,d.Ue)(e,Vn):(0,d.Ue)(e,Zn))),Yn=(0,d.dt)({signatures:(0,d.IX)((0,d.Z_)()),message:(0,d.dt)({accountKeys:(0,d.IX)((0,d.dt)({pubkey:jr,signer:(0,d.O7)(),writable:(0,d.O7)()})),instructions:(0,d.IX)(Xn),recentBlockhash:(0,d.Z_)()})}),Qn=(0,d.dt)({accountIndex:(0,d.Rx)(),mint:(0,d.Z_)(),owner:(0,d.jt)((0,d.Z_)()),uiTokenAmount:mn}),ei=(0,d.dt)({err:nn,fee:(0,d.Rx)(),innerInstructions:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.dt)({index:(0,d.Rx)(),instructions:(0,d.IX)((0,d.dt)({accounts:(0,d.IX)((0,d.Rx)()),data:(0,d.Z_)(),programIdIndex:(0,d.Rx)()}))})))),preBalances:(0,d.IX)((0,d.Rx)()),postBalances:(0,d.IX)((0,d.Rx)()),logMessages:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.Z_)()))),preTokenBalances:(0,d.jt)((0,d.AG)((0,d.IX)(Qn))),postTokenBalances:(0,d.jt)((0,d.AG)((0,d.IX)(Qn)))}),ti=(0,d.dt)({err:nn,fee:(0,d.Rx)(),innerInstructions:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.dt)({index:(0,d.Rx)(),instructions:(0,d.IX)(Xn)})))),preBalances:(0,d.IX)((0,d.Rx)()),postBalances:(0,d.IX)((0,d.Rx)()),logMessages:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.Z_)()))),preTokenBalances:(0,d.jt)((0,d.AG)((0,d.IX)(Qn))),postTokenBalances:(0,d.jt)((0,d.AG)((0,d.IX)(Qn)))}),ri=$r((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),transactions:(0,d.IX)((0,d.dt)({transaction:Hn,meta:(0,d.AG)(ei)})),rewards:(0,d.jt)((0,d.IX)((0,d.dt)({pubkey:(0,d.Z_)(),lamports:(0,d.Rx)(),postBalance:(0,d.AG)((0,d.Rx)()),rewardType:(0,d.AG)((0,d.Z_)())}))),blockTime:(0,d.AG)((0,d.Rx)()),blockHeight:(0,d.AG)((0,d.Rx)())}))),ni=$r((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),transactions:(0,d.IX)((0,d.dt)({transaction:Hn,meta:(0,d.AG)(ei)})),rewards:(0,d.jt)((0,d.IX)((0,d.dt)({pubkey:(0,d.Z_)(),lamports:(0,d.Rx)(),postBalance:(0,d.AG)((0,d.Rx)()),rewardType:(0,d.AG)((0,d.Z_)())}))),blockTime:(0,d.AG)((0,d.Rx)())}))),ii=$r((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),signatures:(0,d.IX)((0,d.Z_)()),blockTime:(0,d.AG)((0,d.Rx)())}))),si=$r((0,d.AG)((0,d.dt)({slot:(0,d.Rx)(),meta:ei,blockTime:(0,d.jt)((0,d.AG)((0,d.Rx)())),transaction:Hn}))),oi=$r((0,d.AG)((0,d.dt)({slot:(0,d.Rx)(),transaction:Yn,meta:(0,d.AG)(ti),blockTime:(0,d.jt)((0,d.AG)((0,d.Rx)()))}))),ai=Jr((0,d.dt)({blockhash:(0,d.Z_)(),feeCalculator:(0,d.dt)({lamportsPerSignature:(0,d.Rx)()})})),ci=Jr((0,d.dt)({blockhash:(0,d.Z_)(),lastValidBlockHeight:(0,d.Rx)()})),ui=(0,d.dt)({slot:(0,d.Rx)(),numTransactions:(0,d.Rx)(),numSlots:(0,d.Rx)(),samplePeriodSecs:(0,d.Rx)()}),li=$r((0,d.IX)(ui)),hi=Jr((0,d.AG)((0,d.dt)({feeCalculator:(0,d.dt)({lamportsPerSignature:(0,d.Rx)()})}))),di=$r((0,d.Z_)()),fi=$r((0,d.Z_)()),pi=(0,d.dt)({err:nn,logs:(0,d.IX)((0,d.Z_)()),signature:(0,d.Z_)()}),gi=(0,d.dt)({result:Xr(pi),subscription:(0,d.Rx)()});class mi{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={recentBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set;let r=new URL(e);r.protocol;let n,i,s,o,a;var c;t&&"string"===typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit),this._rpcEndpoint=e,this._rpcWsEndpoint=n||function(e){let t=new URL(e);const r="https:"===t.protocol;return t.protocol=r?"wss:":"ws:",t.host="",""!==t.port&&(t.port=String(Number(t.port)+1)),t.toString()}(e),this._rpcClient=function(e,t,r,n,i,s){const o=n||Ur;let a;return i&&(a=async(e,t)=>{const r=await new Promise(((r,n)=>{try{i(e,t,((e,t)=>r([e,t])))}catch(s){n(s)}}));return await o(...r)}),new(g())((async(t,n)=>{const i={method:"POST",body:t,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},r||{})};try{let t,r=5,c=500;for(;t=a?await a(e,i):await o(e,i),429===t.status&&!0!==s&&(r-=1,0!==r);)console.log(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${c}ms delay...`),await yr(c),c*=2;const u=await t.text();t.ok?n(null,u):n(new Error(`${t.status} ${t.statusText}: ${u}`))}catch(c){c instanceof Error&&n(c)}}),{})}(r.toString(),0,i,s,o,a),this._rpcRequest=(c=this._rpcClient,(e,t)=>new Promise(((r,n)=>{c.request(e,t,((e,t)=>{e?n(e):r(t)}))}))),this._rpcBatchRequest=function(e){return t=>new Promise(((r,n)=>{0===t.length&&r([]);const i=t.map((t=>e.request(t.methodName,t.args)));e.request(i,((e,t)=>{e?n(e):r(t)}))}))}(this._rpcClient),this._rpcWebSocket=new f.K(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getBalance",r),i=(0,d.Ue)(n,Jr((0,d.Rx)()));if("error"in i)throw new Error("failed to get balance for "+e.toBase58()+": "+i.error.message);return i.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)}))}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=(0,d.Ue)(t,$r((0,d.AG)((0,d.Rx)())));if("error"in r)throw new Error("failed to get block time for slot "+e+": "+r.error.message);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=(0,d.Ue)(e,$r((0,d.Rx)()));if("error"in t)throw new Error("failed to get minimum ledger slot: "+t.error.message);return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=(0,d.Ue)(e,pn);if("error"in t)throw new Error("failed to get first available block: "+t.error.message);return t.result}async getSupply(e){let t={};t="string"===typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),n=(0,d.Ue)(r,gn);if("error"in n)throw new Error("failed to get supply: "+n.error.message);return n.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenSupply",r),i=(0,d.Ue)(n,Jr(mn));if("error"in i)throw new Error("failed to get token supply: "+i.error.message);return i.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenAccountBalance",r),i=(0,d.Ue)(n,Jr(mn));if("error"in i)throw new Error("failed to get token account balance: "+i.error.message);return i.result}async getTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});const i=this._buildArgs(n,r,"base64"),s=await this._rpcRequest("getTokenAccountsByOwner",i),o=(0,d.Ue)(s,bn);if("error"in o)throw new Error("failed to get token accounts owned by account "+e.toBase58()+": "+o.error.message);return o.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",i),o=(0,d.Ue)(s,wn);if("error"in o)throw new Error("failed to get token accounts owned by account "+e.toBase58()+": "+o.error.message);return o.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=await this._rpcRequest("getLargestAccounts",r),i=(0,d.Ue)(n,vn);if("error"in i)throw new Error("failed to get largest accounts: "+i.error.message);return i.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),n=await this._rpcRequest("getTokenLargestAccounts",r),i=(0,d.Ue)(n,yn);if("error"in i)throw new Error("failed to get token largest accounts: "+i.error.message);return i.result}async getAccountInfoAndContext(e,t){const r=this._buildArgs([e.toBase58()],t,"base64"),n=await this._rpcRequest("getAccountInfo",r),i=(0,d.Ue)(n,Jr((0,d.AG)(_n)));if("error"in i)throw new Error("failed to get info about account "+e.toBase58()+": "+i.error.message);return i.result}async getParsedAccountInfo(e,t){const r=this._buildArgs([e.toBase58()],t,"jsonParsed"),n=await this._rpcRequest("getAccountInfo",r),i=(0,d.Ue)(n,Jr((0,d.AG)(In)));if("error"in i)throw new Error("failed to get info about account "+e.toBase58()+": "+i.error.message);return i.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleAccountsInfoAndContext(e,t){const r=e.map((e=>e.toBase58())),n=this._buildArgs([r],t,"base64"),i=await this._rpcRequest("getMultipleAccounts",n),s=(0,d.Ue)(i,Jr((0,d.IX)((0,d.AG)(_n))));if("error"in s)throw new Error("failed to get info for accounts "+r+": "+s.error.message);return s.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const n=this._buildArgs([e.toBase58()],t,void 0,void 0!==r?{epoch:r}:void 0),i=await this._rpcRequest("getStakeActivation",n),s=(0,d.Ue)(i,$r(Pn));if("error"in s)throw new Error(`failed to get Stake Activation ${e.toBase58()}: ${s.error.message}`);return s.result}async getProgramAccounts(e,t){const r={};let n,i;t&&("string"===typeof t?n=t:(n=t.commitment,i=t.encoding,t.dataSlice&&(r.dataSlice=t.dataSlice),t.filters&&(r.filters=t.filters)));const s=this._buildArgs([e.toBase58()],n,i||"base64",r),o=await this._rpcRequest("getProgramAccounts",s),a=(0,d.Ue)(o,$r((0,d.IX)(Sn)));if("error"in a)throw new Error("failed to get accounts owned by program "+e.toBase58()+": "+a.error.message);return a.result}async getParsedProgramAccounts(e,t){const r={};let n;t&&("string"===typeof t?n=t:(n=t.commitment,t.filters&&(r.filters=t.filters)));const i=this._buildArgs([e.toBase58()],n,"jsonParsed",r),s=await this._rpcRequest("getProgramAccounts",i),o=(0,d.Ue)(s,$r((0,d.IX)(En)));if("error"in o)throw new Error("failed to get accounts owned by program "+e.toBase58()+": "+o.error.message);return o.result}async confirmTransaction(e,t){let r;try{r=u().decode(e)}catch(l){throw new Error("signature must be base58 encoded: "+e)}nr(64===r.length,"signature has invalid length");const n=Date.now(),i=t||this.commitment;let s,o=null;const a=new Promise(((t,r)=>{try{s=this.onSignature(e,((e,r)=>{s=void 0,o={context:r,value:e},t(null)}),i)}catch(l){r(l)}}));let c=this._confirmTransactionInitialTimeout||6e4;switch(i){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":c=this._confirmTransactionInitialTimeout||3e4}try{await function(e,t){let r;const n=new Promise((e=>{r=setTimeout((()=>e(null)),t)}));return Promise.race([e,n]).then((e=>(clearTimeout(r),e)))}(a,c)}finally{s&&this.removeSignatureListener(s)}if(null===o){const t=(Date.now()-n)/1e3;throw new Error(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`)}return o}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=(0,d.Ue)(e,$r((0,d.IX)(Mn)));if("error"in t)throw new Error("failed to get cluster nodes: "+t.error.message);return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),n=(0,d.Ue)(r,qn);if("error"in n)throw new Error("failed to get vote accounts: "+n.error.message);return n.result}async getSlot(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getSlot",t),n=(0,d.Ue)(r,$r((0,d.Rx)()));if("error"in n)throw new Error("failed to get slot: "+n.error.message);return n.result}async getSlotLeader(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getSlotLeader",t),n=(0,d.Ue)(r,$r((0,d.Z_)()));if("error"in n)throw new Error("failed to get slot leader: "+n.error.message);return n.result}async getSlotLeaders(e,t){const r=[e,t],n=await this._rpcRequest("getSlotLeaders",r),i=(0,d.Ue)(n,$r((0,d.IX)(jr)));if("error"in i)throw new Error("failed to get slot leaders: "+i.error.message);return i.result}async getSignatureStatus(e,t){const{context:r,value:n}=await this.getSignatureStatuses([e],t);nr(1===n.length);return{context:r,value:n[0]}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const n=await this._rpcRequest("getSignatureStatuses",r),i=(0,d.Ue)(n,Fn);if("error"in i)throw new Error("failed to get signature status: "+i.error.message);return i.result}async getTransactionCount(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getTransactionCount",t),n=(0,d.Ue)(r,$r((0,d.Rx)()));if("error"in n)throw new Error("failed to get transaction count: "+n.error.message);return n.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),n=(0,d.Ue)(r,ln);if("error"in n)throw new Error("failed to get inflation: "+n.error.message);return n.result}async getInflationReward(e,t,r){const n=this._buildArgs([e.map((e=>e.toBase58()))],r,void 0,{epoch:t}),i=await this._rpcRequest("getInflationReward",n),s=(0,d.Ue)(i,Qr);if("error"in s)throw new Error("failed to get inflation reward: "+s.error.message);return s.result}async getEpochInfo(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getEpochInfo",t),n=(0,d.Ue)(r,hn);if("error"in n)throw new Error("failed to get epoch info: "+n.error.message);return n.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=(0,d.Ue)(e,dn);if("error"in t)throw new Error("failed to get epoch schedule: "+t.error.message);const r=t.result;return new qr(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=(0,d.Ue)(e,fn);if("error"in t)throw new Error("failed to get leader schedule: "+t.error.message);return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),n=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=(0,d.Ue)(n,Gn);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getRecentBlockhash",t),n=(0,d.Ue)(r,ai);if("error"in n)throw new Error("failed to get recent blockhash: "+n.error.message);return n.result}async getRecentPerformanceSamples(e){const t=this._buildArgs(e?[e]:[]),r=await this._rpcRequest("getRecentPerformanceSamples",t),n=(0,d.Ue)(r,li);if("error"in n)throw new Error("failed to get recent performance samples: "+n.error.message);return n.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),n=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=(0,d.Ue)(n,hi);if("error"in i)throw new Error("failed to get fee calculator: "+i.error.message);const{context:s,value:o}=i.result;return{context:s,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(e,t){const r=e.serialize().toString("base64"),n=this._buildArgs([r],t),i=await this._rpcRequest("getFeeForMessage",n),s=(0,d.Ue)(i,Jr((0,d.AG)((0,d.Rx)())));if("error"in s)throw new Error("failed to get slot: "+s.error.message);if(null===s.result)throw new Error("invalid blockhash");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getLatestBlockhash",t),n=(0,d.Ue)(r,ci);if("error"in n)throw new Error("failed to get latest blockhash: "+n.error.message);return n.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=(0,d.Ue)(e,$r(an));if("error"in t)throw new Error("failed to get version: "+t.error.message);return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=(0,d.Ue)(e,$r((0,d.Z_)()));if("error"in t)throw new Error("failed to get genesis hash: "+t.error.message);return t.result}async getBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t&&t.commitment),n=await this._rpcRequest("getBlock",r),i=(0,d.Ue)(n,ri);if("error"in i)throw new Error("failed to get confirmed block: "+i.error.message);const s=i.result;return s?{...s,transactions:s.transactions.map((e=>{let{transaction:t,meta:r}=e;const n=new rr(t.message);return{meta:r,transaction:{...t,message:n}}}))}:s}async getBlockHeight(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getBlockHeight",t),n=(0,d.Ue)(r,$r((0,d.Rx)()));if("error"in n)throw new Error("failed to get block height information: "+n.error.message);return n.result}async getBlockProduction(e){let t,r;if("string"===typeof e)r=e;else if(e){const{commitment:n,...i}=e;r=n,t=i}const n=this._buildArgs([],r,"base64",t),i=await this._rpcRequest("getBlockProduction",n),s=(0,d.Ue)(i,un);if("error"in s)throw new Error("failed to get block production information: "+s.error.message);return s.result}async getTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t&&t.commitment),n=await this._rpcRequest("getTransaction",r),i=(0,d.Ue)(n,si);if("error"in i)throw new Error("failed to get transaction: "+i.error.message);const s=i.result;return s?{...s,transaction:{...s.transaction,message:new rr(s.transaction.message)}}:s}async getParsedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=await this._rpcRequest("getTransaction",r),i=(0,d.Ue)(n,oi);if("error"in i)throw new Error("failed to get transaction: "+i.error.message);return i.result}async getParsedTransactions(e,t){const r=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")})));return(await this._rpcBatchRequest(r)).map((e=>{const t=(0,d.Ue)(e,oi);if("error"in t)throw new Error("failed to get transactions: "+t.error.message);return t.result}))}async getTransactions(e,t){const r=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t)})));return(await this._rpcBatchRequest(r)).map((e=>{const t=(0,d.Ue)(e,si);if("error"in t)throw new Error("failed to get transactions: "+t.error.message);return t.result}))}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=await this._rpcRequest("getConfirmedBlock",r),i=(0,d.Ue)(n,ni);if("error"in i)throw new Error("failed to get confirmed block: "+i.error.message);const s=i.result;if(!s)throw new Error("Confirmed block "+e+" not found");const o={...s,transactions:s.transactions.map((e=>{let{transaction:t,meta:r}=e;const n=new rr(t.message);return{meta:r,transaction:{...t,message:n}}}))};return{...o,transactions:o.transactions.map((e=>{let{transaction:t,meta:r}=e;return{meta:r,transaction:or.populate(t.message,t.signatures)}}))}}async getBlocks(e,t,r){const n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=await this._rpcRequest("getBlocks",n),s=(0,d.Ue)(i,$r((0,d.IX)((0,d.Rx)())));if("error"in s)throw new Error("failed to get blocks: "+s.error.message);return s.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getBlock",r),i=(0,d.Ue)(n,ii);if("error"in i)throw new Error("failed to get block: "+i.error.message);const s=i.result;if(!s)throw new Error("Block "+e+" not found");return s}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=await this._rpcRequest("getConfirmedBlock",r),i=(0,d.Ue)(n,ii);if("error"in i)throw new Error("failed to get confirmed block: "+i.error.message);const s=i.result;if(!s)throw new Error("Confirmed block "+e+" not found");return s}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=await this._rpcRequest("getConfirmedTransaction",r),i=(0,d.Ue)(n,si);if("error"in i)throw new Error("failed to get transaction: "+i.error.message);const s=i.result;if(!s)return s;const o=new rr(s.transaction.message),a=s.transaction.signatures;return{...s,transaction:or.populate(o,a)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=await this._rpcRequest("getConfirmedTransaction",r),i=(0,d.Ue)(n,oi);if("error"in i)throw new Error("failed to get confirmed transaction: "+i.error.message);return i.result}async getParsedConfirmedTransactions(e,t){const r=e.map((e=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")})));return(await this._rpcBatchRequest(r)).map((e=>{const t=(0,d.Ue)(e,oi);if("error"in t)throw new Error("failed to get confirmed transactions: "+t.error.message);return t.result}))}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0||t<i);)try{const e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(o){if(o instanceof Error&&o.message.includes("skipped"))continue;throw o}let s=await this.getSlot("finalized");for(;!("before"in n)&&!(++r>s);)try{const e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(o){if(o instanceof Error&&o.message.includes("skipped"))continue;throw o}return(await this.getConfirmedSignaturesForAddress2(e,n)).map((e=>e.signature))}async getConfirmedSignaturesForAddress2(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",n),s=(0,d.Ue)(i,xn);if("error"in s)throw new Error("failed to get confirmed signatures for address: "+s.error.message);return s.result}async getSignaturesForAddress(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=await this._rpcRequest("getSignaturesForAddress",n),s=(0,d.Ue)(i,Rn);if("error"in s)throw new Error("failed to get signatures for address: "+s.error.message);return s.result}async getNonceAndContext(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=Sr.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)}))}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),n=(0,d.Ue)(r,di);if("error"in n)throw new Error("airdrop to "+e.toBase58()+" failed: "+n.error.message);return n.result}async _recentBlockhash(e){if(!e){for(;this._pollingBlockhash;)await yr(100);const e=Date.now()-this._blockhashInfo.lastFetch>=Hr;if(null!==this._blockhashInfo.recentBlockhash&&!e)return this._blockhashInfo.recentBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now();for(let t=0;t<50;t++){const{blockhash:e}=await this.getRecentBlockhash("finalized");if(this._blockhashInfo.recentBlockhash!=e)return this._blockhashInfo={recentBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await yr(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async simulateTransaction(e,t,r){let n;if(e instanceof or){let t=e;n=new or({recentBlockhash:t.recentBlockhash,nonceInfo:t.nonceInfo,feePayer:t.feePayer,signatures:[...t.signatures]}),n.instructions=e.instructions}else n=or.populate(e),n._message=n._json=void 0;if(n.nonceInfo&&t)n.sign(...t);else{let e=this._disableBlockhashCaching;for(;n.recentBlockhash=await this._recentBlockhash(e),t;){if(n.sign(...t),!n.signature)throw new Error("!signature");const r=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}e=!0}}const i=n._compile(),s=i.serialize(),o=n._serialize(s).toString("base64"),a={encoding:"base64",commitment:this.commitment};if(r){const e=(Array.isArray(r)?r:i.nonProgramIds()).map((e=>e.toBase58()));a.accounts={encoding:"base64",addresses:e}}t&&(a.sigVerify=!0);const c=[o,a],u=await this._rpcRequest("simulateTransaction",c),l=(0,d.Ue)(u,cn);if("error"in l){let e;if("data"in l.error&&(e=l.error.data.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(l.error.message,r)}throw new Kr("failed to simulate transaction: "+l.error.message,e)}return l.result}async sendTransaction(e,t,r){if(e.nonceInfo)e.sign(...t);else{let r=this._disableBlockhashCaching;for(;;){if(e.recentBlockhash=await this._recentBlockhash(r),e.sign(...t),!e.signature)throw new Error("!signature");const n=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(n)){this._blockhashInfo.transactionSignatures.push(n);break}r=!0}}const n=e.serialize();return await this.sendRawTransaction(n,r)}async sendRawTransaction(e,t){const r=w(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},n=t&&t.skipPreflight,i=t&&t.preflightCommitment||this.commitment;t&&t.maxRetries&&(r.maxRetries=t.maxRetries),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[e,r],o=await this._rpcRequest("sendTransaction",s),a=(0,d.Ue)(o,fi);if("error"in a){let e;throw"data"in a.error&&(e=a.error.data.logs),new Kr("failed to send transaction: "+a.error.message,e)}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{this._rpcWebSocket.notify("ping").catch((()=>{}))}),5e3),this._updateSubscriptions()}_wsOnError(e){console.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketGeneration++,this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((e=>{let[t,r]=e;this._subscriptionsByHash[t]={...r,state:"pending"}}))):this._updateSubscriptions()}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async e=>{const r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._subscriptionsByHash[e]={...r,state:"subscribing"};const t=await this._rpcWebSocket.call(i,n);this._subscriptionsByHash[e]={...r,serverSubscriptionId:t,state:"subscribed"},this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(s){if(s instanceof Error&&console.error(`${i} error for argument`,n,s.message),!t())return;this._subscriptionsByHash[e]={...r,state:"pending"},await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._subscriptionsByHash[e]={...r,state:"unsubscribing"};try{await this._rpcWebSocket.call(i,[n])}catch(s){if(s instanceof Error&&console.error(`${i} error:`,s.message),!t())return;return this._subscriptionsByHash[e]={...r,state:"subscribed"},void await this._updateSubscriptions()}}this._subscriptionsByHash[e]={...r,state:"unsubscribed"},await this._updateSubscriptions()})()}})))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((e=>{try{e(...t)}catch(r){console.error(r)}}))}_wsOnAccountNotification(e){const{result:t,subscription:r}=(0,d.Ue)(e,Bn);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,n=Mr([e.method,t],!0),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r];const t=this._subscriptionsByHash[n];nr(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const n=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=(0,d.Ue)(e,Nn);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){const i=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",n?{filters:n}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const n=this._buildArgs(["object"===typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=(0,d.Ue)(e,gi);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=(0,d.Ue)(e,Cn);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=(0,d.Ue)(e,zn);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){const i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=(0,d.Ue)(e,Ln);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([e],n,void 0,i),o=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(o)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=(0,d.Ue)(e,Wn);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class yi{constructor(e){this._keypair=void 0,this._keypair=e||i().sign.keyPair()}static generate(){return new yi(i().sign.keyPair())}static fromSecretKey(e,t){const r=i().sign.keyPair.fromSecretKey(e);if(!t||!t.skipValidation){const e=(new TextEncoder).encode("@solana/web3.js-validation-v1"),t=i().sign.detached(e,r.secretKey);if(!i().sign.detached.verify(e,t,r.publicKey))throw new Error("provided secretKey is invalid")}return new yi(r)}static fromSeed(e){return new yi(i().sign.keyPair.fromSeed(e))}get publicKey(){return new Kt(this._keypair.publicKey)}get secretKey(){return this._keypair.secretKey}}const bi=h.n_([h.u8("numSignatures"),h.u8("padding"),h.KB("signatureOffset"),h.KB("signatureInstructionIndex"),h.KB("publicKeyOffset"),h.KB("publicKeyInstructionIndex"),h.KB("messageDataOffset"),h.KB("messageDataSize"),h.KB("messageInstructionIndex")]);class ki{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,instructionIndex:i}=e;nr(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),nr(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);const o=bi.span,a=o+t.length,c=a+n.length,u=s.Buffer.alloc(c+r.length),l=null==i?65535:i;return bi.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:l,publicKeyOffset:o,publicKeyInstructionIndex:l,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:l},u),u.fill(t,o),u.fill(n,a),u.fill(r,c),new sr({keys:[],programId:ki.programId,data:u})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;nr(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{const e=yi.fromSecretKey(t),s=e.publicKey.toBytes(),o=i().sign.detached(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:r,signature:o,instructionIndex:n})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}ki.programId=new Kt("Ed25519SigVerify111111111111111111111111111");const wi=new Kt("StakeConfig11111111111111111111111111111111");class vi{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class _i{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}_i.default=new _i(0,0,Kt.default);class Si{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.Jq("instruction").decode(e.data);let r;for(const[n,i]of Object.entries(Ai))if(i.index==t){r=n;break}if(!r)throw new Error("Instruction type incorrect; not a StakeInstruction");return r}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:r}=kr(Ai.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new vi(new Kt(t.staker),new Kt(t.withdrawer)),lockup:new _i(r.unixTimestamp,r.epoch,new Kt(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),kr(Ai.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:r}=kr(Ai.Authorize,e.data),n={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Kt(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(n.custodianPubkey=e.keys[3].pubkey),n}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=kr(Ai.AuthorizeWithSeed,e.data),s={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:n,authorityOwner:new Kt(i),newAuthorizedPubkey:new Kt(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=kr(Ai.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),kr(Ai.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=kr(Ai.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),kr(Ai.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Ei.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ai=Object.freeze({Initialize:{index:0,layout:h.n_([h.Jq("instruction"),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return h.n_([Yt("staker"),Yt("withdrawer")],e)}(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return h.n_([h.gM("unixTimestamp"),h.gM("epoch"),Yt("custodian")],e)}()])},Authorize:{index:1,layout:h.n_([h.Jq("instruction"),Yt("newAuthorized"),h.Jq("stakeAuthorizationType")])},Delegate:{index:2,layout:h.n_([h.Jq("instruction")])},Split:{index:3,layout:h.n_([h.Jq("instruction"),h.gM("lamports")])},Withdraw:{index:4,layout:h.n_([h.Jq("instruction"),h.gM("lamports")])},Deactivate:{index:5,layout:h.n_([h.Jq("instruction")])},Merge:{index:7,layout:h.n_([h.Jq("instruction")])},AuthorizeWithSeed:{index:8,layout:h.n_([h.Jq("instruction"),Yt("newAuthorized"),h.Jq("stakeAuthorizationType"),Qt("authoritySeed"),Yt("authorityOwner")])}}),Ii=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Ei{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:n}=e,i=n||_i.default,s=br(Ai.Initialize,{authorized:{staker:w(r.staker.toBuffer()),withdrawer:w(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:w(i.custodian.toBuffer())}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:hr,isSigner:!1,isWritable:!1}],programId:this.programId,data:s};return new sr(o)}static createAccountWithSeed(e){const t=new or;t.add(Er.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){const t=new or;t.add(Er.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=br(Ai.Delegate);return(new or).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:ar,isSigner:!1,isWritable:!1},{pubkey:gr,isSigner:!1,isWritable:!1},{pubkey:wi,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=e,o=br(Ai.Authorize,{newAuthorized:w(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ar,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!1,isWritable:!1}),(new or).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=e,c=br(Ai.AuthorizeWithSeed,{newAuthorized:w(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:w(i.toBuffer())}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:ar,isSigner:!1,isWritable:!1}];return a&&u.push({pubkey:a,isSigner:!1,isWritable:!1}),(new or).add({keys:u,programId:this.programId,data:c})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,s=br(Ai.Split,{lamports:i});return new sr({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static split(e){const t=new or;return t.add(Er.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}static splitWithSeed(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,basePubkey:i,seed:s,lamports:o}=e,a=new or;return a.add(Er.allocate({accountPubkey:n,basePubkey:i,seed:s,space:this.space,programId:this.programId})),a.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:o}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=br(Ai.Merge);return(new or).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ar,isSigner:!1,isWritable:!1},{pubkey:gr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=e,o=br(Ai.Withdraw,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ar,isSigner:!1,isWritable:!1},{pubkey:gr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!1,isWritable:!1}),(new or).add({keys:a,programId:this.programId,data:o})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,n=br(Ai.Deactivate);return(new or).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ar,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}Ei.programId=new Kt("Stake11111111111111111111111111111111111111"),Ei.space=200;const{publicKeyCreate:Pi,ecdsaSign:xi}=y(),Ri=h.n_([h.u8("numSignatures"),h.KB("signatureOffset"),h.u8("signatureInstructionIndex"),h.KB("ethAddressOffset"),h.u8("ethAddressInstructionIndex"),h.KB("messageDataOffset"),h.KB("messageDataSize"),h.u8("messageInstructionIndex"),h.Ik(20,"ethAddress"),h.Ik(64,"signature"),h.u8("recoveryId")]);class Bi{constructor(){}static publicKeyToEthAddress(e){nr(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return s.Buffer.from(k().keccak_256.update(w(e)).digest()).slice(-20)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:s}=e;return Bi.createInstructionWithEthAddress({ethAddress:Bi.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:n,recoveryId:i,instructionIndex:o=0}=e;let a;a="string"===typeof t?t.startsWith("0x")?s.Buffer.from(t.substr(2),"hex"):s.Buffer.from(t,"hex"):t,nr(20===a.length,`Address must be 20 bytes but received ${a.length} bytes`);const c=12+a.length,u=c+n.length+1,l=s.Buffer.alloc(Ri.span+r.length);return Ri.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:o,ethAddressOffset:12,ethAddressInstructionIndex:o,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:o,signature:w(n),ethAddress:w(a),recoveryId:i},l),l.fill(w(r),Ri.span),new sr({keys:[],programId:Bi.programId,data:l})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;nr(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{const e=w(t),i=Pi(e,!1).slice(1),o=s.Buffer.from(k().keccak_256.update(w(r)).digest()),{signature:a,recid:c}=xi(o,e);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:a,recoveryId:c,instructionIndex:n})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Bi.programId=new Kt("KeccakSecp256k11111111111111111111111111111");const Oi=new Kt("Va1idator1nfo111111111111111111111111111111"),Ni=(0,d.dt)({name:(0,d.Z_)(),website:(0,d.jt)((0,d.Z_)()),details:(0,d.jt)((0,d.Z_)()),keybaseUsername:(0,d.jt)((0,d.Z_)())});class Ti{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(2!==er(t))return null;const r=[];for(let n=0;n<2;n++){const e=new Kt(t.slice(0,32));t=t.slice(32);const n=1===t.slice(0,1)[0];t=t.slice(1),r.push({publicKey:e,isSigner:n})}if(r[0].publicKey.equals(Oi)&&r[1].isSigner){const e=Qt().decode(s.Buffer.from(t)),n=JSON.parse(e);return(0,d.hu)(n,Ni),new Ti(r[1].publicKey,n)}return null}}const Ci=new Kt("Vote111111111111111111111111111111111111111"),Ui=h.n_([Yt("nodePubkey"),Yt("authorizedWithdrawer"),h.u8("commission"),h._O(),h.A9(h.n_([h._O("slot"),h.Jq("confirmationCount")]),h.cv(h.Jq(),-8),"votes"),h.u8("rootSlotValid"),h._O("rootSlot"),h._O(),h.A9(h.n_([h._O("epoch"),Yt("authorizedVoter")]),h.cv(h.Jq(),-8),"authorizedVoters"),h.n_([h.A9(h.n_([Yt("authorizedPubkey"),h._O("epochOfLastAuthorizedSwitch"),h._O("targetEpoch")]),32,"buf"),h._O("idx"),h.u8("isEmpty")],"priorVoters"),h._O(),h.A9(h.n_([h._O("epoch"),h._O("credits"),h._O("prevCredits")]),h.cv(h.Jq(),-8),"epochCredits"),h.n_([h._O("slot"),h._O("timestamp")],"lastTimestamp")]);class zi{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const t=Ui.decode(w(e),4);let r=t.rootSlot;return t.rootSlotValid||(r=null),new zi({nodePubkey:new Kt(t.nodePubkey),authorizedWithdrawer:new Kt(t.authorizedWithdrawer),commission:t.commission,votes:t.votes,rootSlot:r,authorizedVoters:t.authorizedVoters.map(Li),priorVoters:Mi(t.priorVoters),epochCredits:t.epochCredits,lastTimestamp:t.lastTimestamp})}}function Li(e){let{authorizedVoter:t,epoch:r}=e;return{epoch:r,authorizedVoter:new Kt(t)}}function Wi(e){let{authorizedPubkey:t,epochOfLastAuthorizedSwitch:r,targetEpoch:n}=e;return{authorizedPubkey:new Kt(t),epochOfLastAuthorizedSwitch:r,targetEpoch:n}}function Mi(e){let{buf:t,idx:r,isEmpty:n}=e;return n?[]:[...t.slice(r+1).map(Wi),...t.slice(0,r).map(Wi)]}class Di{constructor(e,t,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=n}}class qi{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const t=h.Jq("instruction").decode(e.data);let r;for(const[n,i]of Object.entries(Ki))if(i.index==t){r=n;break}if(!r)throw new Error("Instruction type incorrect; not a VoteInstruction");return r}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=kr(Ki.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Di(new Kt(t.nodePubkey),new Kt(t.authorizedVoter),new Kt(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:r}=kr(Ki.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Kt(t),voteAuthorizationType:{index:r}}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=kr(Ki.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Fi.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Ki=Object.freeze({InitializeAccount:{index:0,layout:h.n_([h.Jq("instruction"),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteInit";return h.n_([Yt("nodePubkey"),Yt("authorizedVoter"),Yt("authorizedWithdrawer"),h.u8("commission")],e)}()])},Authorize:{index:1,layout:h.n_([h.Jq("instruction"),Yt("newAuthorized"),h.Jq("voteAuthorizationType")])},Withdraw:{index:3,layout:h.n_([h.Jq("instruction"),h.gM("lamports")])}}),ji=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Fi{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=br(Ki.InitializeAccount,{voteInit:{nodePubkey:w(n.nodePubkey.toBuffer()),authorizedVoter:w(n.authorizedVoter.toBuffer()),authorizedWithdrawer:w(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),s={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:hr,isSigner:!1,isWritable:!1},{pubkey:ar,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new sr(s)}static createAccount(e){const t=new or;return t.add(Er.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,s=br(Ki.Authorize,{newAuthorized:w(n.toBuffer()),voteAuthorizationType:i.index}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ar,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new or).add({keys:o,programId:this.programId,data:s})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,s=br(Ki.Withdraw,{lamports:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new or).add({keys:o,programId:this.programId,data:s})}}async function Gi(e,t,r){const n=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment},i=await e.sendRawTransaction(t,n),s=(await e.confirmTransaction(i,r&&r.commitment)).value;if(s.err)throw new Error(`Raw transaction ${i} failed (${JSON.stringify(s)})`);return i}Fi.programId=new Kt("Vote111111111111111111111111111111111111111"),Fi.space=3731;const Hi={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Zi(e,t){const r=!1===t?"http":"https";if(!e)return Hi[r].devnet;const n=Hi[r][e];if(!n)throw new Error(`Unknown ${r} cluster: ${e}`);return n}const Vi=1e9},16200:e=>{e.exports=function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[o]={exports:{}};t[o][0].call(u.exports,(function(e){return i(t[o][1][e]||e)}),u,u.exports,e,t,r,n)}return r[o].exports}for(var s=void 0,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){!function(e){"use strict";var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,s=Math.ceil,o=Math.floor,a="[BigNumber Error] ",c=a+"Number primitive has more than 15 significant digits: ",u=1e14,l=14,h=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,p=1e9;function g(e){var t=0|e;return 0<e||e===t?t:t-1}function m(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=l-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function y(e,t){var r,n,i=e.c,s=t.c,o=e.s,a=t.s,c=e.e,u=t.e;if(!o||!a)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=c==u,!i||!s)return n?0:!i^r?1:-1;if(!n)return u<c^r?1:-1;for(a=(c=i.length)<(u=s.length)?c:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==u?0:u<c^r?1:-1}function b(e,t,r,n){if(e<t||r<e||e!==o(e))throw Error(a+(n||"Argument")+("number"==typeof e?e<t||r<e?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function k(e){var t=e.c.length-1;return g(e.e/l)==t&&e.c[t]%2!=0}function w(e,t){return(1<e.length?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function v(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(r=function e(t){var r,_,S,A,I,E,P,x,R,B,O,N=G.prototype={constructor:G,toString:null,valueOf:null},T=new G(1),C=20,U=4,z=-7,L=21,W=-1e7,M=1e7,D=!1,q=1,K=0,j={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz";function G(e,t){var r,i,s,a,u,d,f,p,g=this;if(!(g instanceof G))return new G(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>M?g.c=g.e=null:e.e<W?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,u=e;10<=u;u/=10,a++);return void(M<a?g.c=g.e=null:(g.e=a,g.c=[e]))}p=String(e)}else{if(!n.test(p=String(e)))return S(g,p,d);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}-1<(a=p.indexOf("."))&&(p=p.replace(".","")),0<(u=p.search(/e/i))?(a<0&&(a=u),a+=+p.slice(u+1),p=p.substring(0,u)):a<0&&(a=p.length)}else{if(b(t,2,F.length,"Base"),10==t)return Q(g=new G(e),C+g.e+1,U);if(p=String(e),d="number"==typeof e){if(0*e!=0)return S(g,p,d,t);if(g.s=1/e<0?(p=p.slice(1),-1):1,G.DEBUG&&15<p.replace(/^0\.0*|\./,"").length)throw Error(c+e)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=F.slice(0,t),a=u=0,f=p.length;u<f;u++)if(r.indexOf(i=p.charAt(u))<0){if("."==i){if(a<u){a=f;continue}}else if(!s&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){s=!0,u=-1,a=0;continue}return S(g,String(e),d,t)}d=!1,-1<(a=(p=_(p,t,10,g.s)).indexOf("."))?p=p.replace(".",""):a=p.length}for(u=0;48===p.charCodeAt(u);u++);for(f=p.length;48===p.charCodeAt(--f););if(p=p.slice(u,++f)){if(f-=u,d&&G.DEBUG&&15<f&&(h<e||e!==o(e)))throw Error(c+g.s*e);if((a=a-u-1)>M)g.c=g.e=null;else if(a<W)g.c=[g.e=0];else{if(g.e=a,g.c=[],u=(a+1)%l,a<0&&(u+=l),u<f){for(u&&g.c.push(+p.slice(0,u)),f-=l;u<f;)g.c.push(+p.slice(u,u+=l));u=l-(p=p.slice(u)).length}else u-=f;for(;u--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function H(e,t,r,n){for(var i,s,o=[0],a=0,c=e.length;a<c;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(a++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}function Z(e,t,r){var n,i,s,o,a=0,c=e.length,u=t%f,l=t/f|0;for(e=e.slice();c--;)a=((i=u*(s=e[c]%f)+(n=l*s+(o=e[c]/f|0)*u)%f*f+a)/r|0)+(n/f|0)+l*o,e[c]=i%r;return a&&(e=[a].concat(e)),e}function V(e,t,r,n){var i,s;if(r!=n)s=n<r?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function $(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&1<e.length;e.splice(0,1));}function J(e,t,r,n){var i,s,o,a,c;if(null==r?r=U:b(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)c=m(e.c),c=1==n||2==n&&(o<=z||L<=o)?w(c,o):v(c,o,"0");else if(s=(e=Q(new G(e),t,r)).e,a=(c=m(e.c)).length,1==n||2==n&&(t<=s||s<=z)){for(;a<t;c+="0",a++);c=w(c,s)}else if(t-=o,c=v(c,s,"0"),a<s+1){if(0<--t)for(c+=".";t--;c+="0");}else if(0<(t+=s-a))for(s+1==a&&(c+=".");t--;c+="0");return e.s<0&&i?"-"+c:c}function X(e,t){for(var r,n=1,i=new G(e[0]);n<e.length;n++){if(!(r=new G(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function Y(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];10<=i;i/=10,n++);return(r=n+r*l-1)>M?e.c=e.e=null:r<W?e.c=[e.e=0]:(e.e=r,e.c=t),e}function Q(e,t,r,n){var i,a,c,h,f,p,g,m=e.c,y=d;if(m){e:{for(i=1,h=m[0];10<=h;h/=10,i++);if((a=t-i)<0)a+=l,c=t,g=(f=m[p=0])/y[i-c-1]%10|0;else if((p=s((a+1)/l))>=m.length){if(!n)break e;for(;m.length<=p;m.push(0));f=g=0,c=(a%=l)-l+(i=1)}else{for(f=h=m[p],i=1;10<=h;h/=10,i++);g=(c=(a%=l)-l+i)<0?0:f/y[i-c-1]%10|0}if(n=n||t<0||null!=m[p+1]||(c<0?f:f%y[i-c-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):5<g||5==g&&(4==r||n||6==r&&(0<a?0<c?f/y[i-c]:0:m[p-1])%10&1||r==(e.s<0?8:7)),t<1||!m[0])return m.length=0,n?(t-=e.e+1,m[0]=y[(l-t%l)%l],e.e=-t||0):m[0]=e.e=0,e;if(0==a?(m.length=p,h=1,p--):(m.length=p+1,h=y[l-a],m[p]=0<c?o(f/y[i-c]%y[c])*h:0),n)for(;;){if(0==p){for(a=1,c=m[0];10<=c;c/=10,a++);for(c=m[0]+=h,h=1;10<=c;c/=10,h++);a!=h&&(e.e++,m[0]==u&&(m[0]=1));break}if(m[p]+=h,m[p]!=u)break;m[p--]=0,h=1}for(a=m.length;0===m[--a];m.pop());}e.e>M?e.c=e.e=null:e.e<W&&(e.c=[e.e=0])}return e}function ee(e){var t,r=e.e;return null===r?e.toString():(t=m(e.c),t=r<=z||L<=r?w(t,r):v(t,r,"0"),e.s<0?"-"+t:t)}return G.clone=e,G.ROUND_UP=0,G.ROUND_DOWN=1,G.ROUND_CEIL=2,G.ROUND_FLOOR=3,G.ROUND_HALF_UP=4,G.ROUND_HALF_DOWN=5,G.ROUND_HALF_EVEN=6,G.ROUND_HALF_CEIL=7,G.ROUND_HALF_FLOOR=8,G.EUCLID=9,G.config=G.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(b(r=e[t],0,p,t),C=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(b(r=e[t],0,8,t),U=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(b(r[0],-p,0,t),b(r[1],0,p,t),z=r[0],L=r[1]):(b(r,-p,p,t),z=-(L=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)b(r[0],-p,-1,t),b(r[1],1,p,t),W=r[0],M=r[1];else{if(b(r,-p,p,t),!r)throw Error(a+t+" cannot be zero: "+r);W=-(M=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(a+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw D=!r,Error(a+"crypto unavailable");D=r}else D=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(b(r=e[t],0,9,t),q=r),e.hasOwnProperty(t="POW_PRECISION")&&(b(r=e[t],0,p,t),K=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(a+t+" not an object: "+r);j=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(a+t+" invalid: "+r);F=r}}return{DECIMAL_PLACES:C,ROUNDING_MODE:U,EXPONENTIAL_AT:[z,L],RANGE:[W,M],CRYPTO:D,MODULO_MODE:q,POW_PRECISION:K,FORMAT:j,ALPHABET:F}},G.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!G.DEBUG)return!0;var t,r,n=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&-p<=i&&i<=p&&i===o(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%l)<1&&(t+=l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||u<=r||r!==o(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(a+"Invalid BigNumber: "+e)},G.maximum=G.max=function(){return X(arguments,N.lt)},G.minimum=G.min=function(){return X(arguments,N.gt)},G.random=(A=9007199254740992,I=Math.random()*A&2097151?function(){return o(Math.random()*A)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,c,u=0,h=[],f=new G(T);if(null==e?e=C:b(e,0,p),i=s(e/l),D)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));u<i;)9e15<=(c=131072*t[u]+(t[u+1]>>>11))?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(h.push(c%1e14),u+=2);u=i/2}else{if(!crypto.randomBytes)throw D=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(i*=7);u<i;)9e15<=(c=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])?crypto.randomBytes(7).copy(t,u):(h.push(c%1e14),u+=7);u=i/7}if(!D)for(;u<i;)(c=I())<9e15&&(h[u++]=c%1e14);for(i=h[--u],e%=l,i&&e&&(c=d[l-e],h[u]=o(i/c)*c);0===h[u];h.pop(),u--);if(u<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=l);for(u=1,c=h[0];10<=c;c/=10,u++);u<l&&(n-=l-u)}return f.e=n,f.c=h,f}),G.sum=function(){for(var e=1,t=arguments,r=new G(t[0]);e<t.length;)r=r.plus(t[e++]);return r},E="0123456789",_=function(e,t,n,i,s){var o,a,c,u,l,h,d,f,p=e.indexOf("."),g=C,y=U;for(0<=p&&(u=K,K=0,e=e.replace(".",""),h=(f=new G(t)).pow(e.length-p),K=u,f.c=H(v(m(h.c),h.e,"0"),10,n,E),f.e=f.c.length),c=u=(d=H(e,t,n,s?(o=F,E):(o=E,F))).length;0==d[--u];d.pop());if(!d[0])return o.charAt(0);if(p<0?--c:(h.c=d,h.e=c,h.s=i,d=(h=r(h,f,g,y,n)).c,l=h.r,c=h.e),p=d[a=c+g+1],u=n/2,l=l||a<0||null!=d[a+1],l=y<4?(null!=p||l)&&(0==y||y==(h.s<0?3:2)):u<p||p==u&&(4==y||l||6==y&&1&d[a-1]||y==(h.s<0?8:7)),a<1||!d[0])e=l?v(o.charAt(1),-g,o.charAt(0)):o.charAt(0);else{if(d.length=a,l)for(--n;++d[--a]>n;)d[a]=0,a||(++c,d=[1].concat(d));for(u=d.length;!d[--u];);for(p=0,e="";p<=u;e+=o.charAt(d[p++]));e=v(e,c,o.charAt(0))}return e},r=function(e,t,r,n,i){var s,a,c,h,d,f,p,m,y,b,k,w,v,_,S,A,I,E=e.s==t.s?1:-1,P=e.c,x=t.c;if(!(P&&P[0]&&x&&x[0]))return new G(e.s&&t.s&&(P?!x||P[0]!=x[0]:x)?P&&0==P[0]||!x?0*E:E/0:NaN);for(y=(m=new G(E)).c=[],E=r+(a=e.e-t.e)+1,i||(i=u,a=g(e.e/l)-g(t.e/l),E=E/l|0),c=0;x[c]==(P[c]||0);c++);if(x[c]>(P[c]||0)&&a--,E<0)y.push(1),h=!0;else{for(_=P.length,A=x.length,E+=2,1<(d=o(i/(x[c=0]+1)))&&(x=Z(x,d,i),P=Z(P,d,i),A=x.length,_=P.length),v=A,k=(b=P.slice(0,A)).length;k<A;b[k++]=0);I=x.slice(),I=[0].concat(I),S=x[0],x[1]>=i/2&&S++;do{if(d=0,(s=V(x,b,A,k))<0){if(w=b[0],A!=k&&(w=w*i+(b[1]||0)),1<(d=o(w/S)))for(i<=d&&(d=i-1),p=(f=Z(x,d,i)).length,k=b.length;1==V(f,b,p,k);)d--,$(f,A<p?I:x,p,i),p=f.length,s=1;else 0==d&&(s=d=1),p=(f=x.slice()).length;if(p<k&&(f=[0].concat(f)),$(b,f,k,i),k=b.length,-1==s)for(;V(x,b,A,k)<1;)d++,$(b,A<k?I:x,k,i),k=b.length}else 0===s&&(d++,b=[0]);y[c++]=d,b[0]?b[k++]=P[v]||0:(b=[P[v]],k=1)}while((v++<_||null!=b[0])&&E--);h=null!=b[0],y[0]||y.splice(0,1)}if(i==u){for(c=1,E=y[0];10<=E;E/=10,c++);Q(m,r+(m.e=c+a*l-1)+1,n,h)}else m.e=a,m.r=+h;return m},P=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,R=/^\.([^.]+)$/,B=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g,S=function(e,t,r,n){var i,s=r?t:t.replace(O,"");if(B.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(P,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(x,"$1").replace(R,"0.$1")),t!=s))return new G(s,i);if(G.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},N.absoluteValue=N.abs=function(){var e=new G(this);return e.s<0&&(e.s=1),e},N.comparedTo=function(e,t){return y(this,new G(e,t))},N.decimalPlaces=N.dp=function(e,t){var r,n,i;if(null!=e)return b(e,0,p),null==t?t=U:b(t,0,8),Q(new G(this),e+this.e+1,t);if(!(r=this.c))return null;if(n=((i=r.length-1)-g(this.e/l))*l,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},N.dividedBy=N.div=function(e,t){return r(this,new G(e,t),C,U)},N.dividedToIntegerBy=N.idiv=function(e,t){return r(this,new G(e,t),0,1)},N.exponentiatedBy=N.pow=function(e,t){var r,n,i,c,u,h,d,f,p=this;if((e=new G(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+ee(e));if(null!=t&&(t=new G(t)),u=14<e.e,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return f=new G(Math.pow(+ee(p),u?2-k(e):+ee(e))),t?f.mod(t):f;if(h=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new G(NaN);(n=!h&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(9<e.e&&(0<p.e||p.e<-1||(0==p.e?1<p.c[0]||u&&24e7<=p.c[1]:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return c=p.s<0&&k(e)?-0:0,-1<p.e&&(c=1/c),new G(h?1/c:c);K&&(c=s(K/l+2))}for(d=u?(r=new G(.5),h&&(e.s=1),k(e)):(i=Math.abs(+ee(e)))%2,f=new G(T);;){if(d){if(!(f=f.times(p)).c)break;c?f.c.length>c&&(f.c.length=c):n&&(f=f.mod(t))}if(i){if(0===(i=o(i/2)))break;d=i%2}else if(Q(e=e.times(r),e.e+1,1),14<e.e)d=k(e);else{if(0==(i=+ee(e)))break;d=i%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):n&&(p=p.mod(t))}return n?f:(h&&(f=T.div(f)),t?f.mod(t):c?Q(f,K,U,void 0):f)},N.integerValue=function(e){var t=new G(this);return null==e?e=U:b(e,0,8),Q(t,t.e+1,e)},N.isEqualTo=N.eq=function(e,t){return 0===y(this,new G(e,t))},N.isFinite=function(){return!!this.c},N.isGreaterThan=N.gt=function(e,t){return 0<y(this,new G(e,t))},N.isGreaterThanOrEqualTo=N.gte=function(e,t){return 1===(t=y(this,new G(e,t)))||0===t},N.isInteger=function(){return!!this.c&&g(this.e/l)>this.c.length-2},N.isLessThan=N.lt=function(e,t){return y(this,new G(e,t))<0},N.isLessThanOrEqualTo=N.lte=function(e,t){return-1===(t=y(this,new G(e,t)))||0===t},N.isNaN=function(){return!this.s},N.isNegative=function(){return this.s<0},N.isPositive=function(){return 0<this.s},N.isZero=function(){return!!this.c&&0==this.c[0]},N.minus=function(e,t){var r,n,i,s,o=this,a=o.s;if(t=(e=new G(e,t)).s,!a||!t)return new G(NaN);if(a!=t)return e.s=-t,o.plus(e);var c=o.e/l,h=e.e/l,d=o.c,f=e.c;if(!c||!h){if(!d||!f)return d?(e.s=-t,e):new G(f?o:NaN);if(!d[0]||!f[0])return f[0]?(e.s=-t,e):new G(d[0]?o:3==U?-0:0)}if(c=g(c),h=g(h),d=d.slice(),a=c-h){for((i=(s=a<0)?(a=-a,d):(h=c,f)).reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(s=(a=d.length)<(t=f.length))?a:t,a=t=0;t<n;t++)if(d[t]!=f[t]){s=d[t]<f[t];break}if(s&&(i=d,d=f,f=i,e.s=-e.s),0<(t=(n=f.length)-(r=d.length)))for(;t--;d[r++]=0);for(t=u-1;a<n;){if(d[--n]<f[n]){for(r=n;r&&!d[--r];d[r]=t);--d[r],d[n]+=u}d[n]-=f[n]}for(;0==d[0];d.splice(0,1),--h);return d[0]?Y(e,d,h):(e.s=3==U?-1:1,e.c=[e.e=0],e)},N.modulo=N.mod=function(e,t){var n,i,s=this;return e=new G(e,t),!s.c||!e.s||e.c&&!e.c[0]?new G(NaN):!e.c||s.c&&!s.c[0]?new G(s):(9==q?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,q),(e=s.minus(n.times(e))).c[0]||1!=q||(e.s=s.s),e)},N.multipliedBy=N.times=function(e,t){var r,n,i,s,o,a,c,h,d,p,m,y,b,k,w,v=this,_=v.c,S=(e=new G(e,t)).c;if(!(_&&S&&_[0]&&S[0]))return!v.s||!e.s||_&&!_[0]&&!S||S&&!S[0]&&!_?e.c=e.e=e.s=null:(e.s*=v.s,_&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=g(v.e/l)+g(e.e/l),e.s*=v.s,(c=_.length)<(p=S.length)&&(b=_,_=S,S=b,i=c,c=p,p=i),i=c+p,b=[];i--;b.push(0));for(k=u,w=f,i=p;0<=--i;){for(r=0,m=S[i]%w,y=S[i]/w|0,s=i+(o=c);i<s;)r=((h=m*(h=_[--o]%w)+(a=y*h+(d=_[o]/w|0)*m)%w*w+b[s]+r)/k|0)+(a/w|0)+y*d,b[s--]=h%k;b[s]=r}return r?++n:b.splice(0,1),Y(e,b,n)},N.negated=function(){var e=new G(this);return e.s=-e.s||null,e},N.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new G(e,t)).s,!i||!t)return new G(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/l,o=e.e/l,a=n.c,c=e.c;if(!s||!o){if(!a||!c)return new G(i/0);if(!a[0]||!c[0])return c[0]?e:new G(a[0]?n:0*i)}if(s=g(s),o=g(o),a=a.slice(),i=s-o){for((r=0<i?(o=s,c):(i=-i,a)).reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+c[t]+i)/u|0,a[t]=u===a[t]?0:a[t]%u;return i&&(a=[i].concat(a),++o),Y(e,a,o)},N.precision=N.sd=function(e,t){var r,n,i;if(null!=e&&e!==!!e)return b(e,1,p),null==t?t=U:b(t,0,8),Q(new G(this),e,t);if(!(r=this.c))return null;if(n=(i=r.length-1)*l+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];10<=i;i/=10,n++);}return e&&this.e+1>n&&(n=this.e+1),n},N.shiftedBy=function(e){return b(e,-h,h),this.times("1e"+e)},N.squareRoot=N.sqrt=function(){var e,t,n,i,s,o=this,a=o.c,c=o.s,u=o.e,l=C+4,h=new G("0.5");if(1!==c||!a||!a[0])return new G(!c||c<0&&(!a||a[0])?NaN:a?o:1/0);if((n=0==(c=Math.sqrt(+ee(o)))||c==1/0?(((t=m(a)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=g((u+1)/2)-(u<0||u%2),new G(t=c==1/0?"1e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):new G(c+"")).c[0])for((c=(u=n.e)+l)<3&&(c=0);;)if(s=n,n=h.times(s.plus(r(o,s,l,1))),m(s.c).slice(0,c)===(t=m(n.c)).slice(0,c)){if(n.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Q(n,n.e+C+2,1),e=!n.times(n).eq(o));break}if(!i&&(Q(s,s.e+C+2,0),s.times(s).eq(o))){n=s;break}l+=4,c+=4,i=1}return Q(n,n.e+C+1,U,e)},N.toExponential=function(e,t){return null!=e&&(b(e,0,p),e++),J(this,e,t,1)},N.toFixed=function(e,t){return null!=e&&(b(e,0,p),e=e+this.e+1),J(this,e,t)},N.toFormat=function(e,t,r){var n;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=j;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(n=this.toFixed(e,t),this.c){var i,s=n.split("."),o=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",l=s[0],h=s[1],d=this.s<0,f=d?l.slice(1):l,p=f.length;if(c&&(i=o,o=c,p-=c=i),0<o&&0<p){for(i=p%o||o,l=f.substr(0,i);i<p;i+=o)l+=u+f.substr(i,o);0<c&&(l+=u+f.slice(i)),d&&(l="-"+l)}n=h?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):l}return(r.prefix||"")+n+(r.suffix||"")},N.toFraction=function(e){var t,n,i,s,o,c,u,h,f,p,g,y,b=this,k=b.c;if(null!=e&&(!(u=new G(e)).isInteger()&&(u.c||1!==u.s)||u.lt(T)))throw Error(a+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+ee(u));if(!k)return new G(b);for(t=new G(T),f=n=new G(T),i=h=new G(T),y=m(k),o=t.e=y.length-b.e-1,t.c[0]=d[(c=o%l)<0?l+c:c],e=!e||0<u.comparedTo(t)?0<o?t:f:u,c=M,M=1/0,u=new G(y),h.c[0]=0;p=r(u,t,0,1),1!=(s=n.plus(p.times(i))).comparedTo(e);)n=i,i=s,f=h.plus(p.times(s=f)),h=s,t=u.minus(p.times(s=t)),u=s;return s=r(e.minus(n),i,0,1),h=h.plus(s.times(f)),n=n.plus(s.times(i)),h.s=f.s=b.s,g=r(f,i,o*=2,U).minus(b).abs().comparedTo(r(h,n,o,U).minus(b).abs())<1?[f,i]:[h,n],M=c,g},N.toNumber=function(){return+ee(this)},N.toPrecision=function(e,t){return null!=e&&b(e,1,p),J(this,e,t,2)},N.toString=function(e){var t,r=this,n=r.s,i=r.e;return null===i?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(t=null==e?i<=z||L<=i?w(m(r.c),i):v(m(r.c),i,"0"):10===e?v(m((r=Q(new G(r),C+i+1,U)).c),r.e,"0"):(b(e,2,F.length,"Base"),_(v(m(r.c),i,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},N.valueOf=N.toJSON=function(){return ee(this)},N._isBigNumber=!0,i&&(N[Symbol.toStringTag]="BigNumber",N[Symbol.for("nodejs.util.inspect.custom")]=N.valueOf),null!=t&&G.set(t),G}()).default=r.BigNumber=r,void 0!==t&&t.exports?t.exports=r:(e=e||("undefined"!=typeof self&&self?self:window)).BigNumber=r}(this)},{}],2:[function(e,t,r){"use strict";t.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th"},bytes:{binarySuffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],decimalSuffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0,spaceSeparatedCurrency:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw s}}return r}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=e("./globalState"),s=e("./validating"),o=e("./parsing"),a=e("bignumber.js"),c={trillion:Math.pow(10,12),billion:Math.pow(10,9),million:Math.pow(10,6),thousand:Math.pow(10,3)},u={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1,roundingFunction:Math.round,spaceSeparatedAbbreviation:!1},l=i.currentBytes(),h=l.binarySuffixes,d=l.decimalSuffixes,f={general:{scale:1024,suffixes:d,marker:"bd"},binary:{scale:1024,suffixes:h,marker:"b"},decimal:{scale:1e3,suffixes:d,marker:"d"}};function p(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if("string"==typeof t&&(t=o.parseFormat(t)),!s.validateFormat(t))return"ERROR: invalid format";var n=t.prefix||"",a=t.postfix||"",c=function(e,t,r){switch(t.output){case"currency":return function(e,t,r){var n=r.currentCurrency(),i=Object.assign({},t),s=Object.assign({},u,i),o=void 0,a="",c=!!s.totalLength||!!s.forceAverage||s.average,l=i.currencyPosition||n.position,h=i.currencySymbol||n.symbol,d=void 0!==s.spaceSeparatedCurrency?s.spaceSeparatedCurrency:s.spaceSeparated;void 0===i.lowPrecision&&(i.lowPrecision=!1),d&&(a=" "),"infix"===l&&(o=a+h+a);var f=k({instance:e,providedFormat:i,state:r,decimalSeparator:o});return"prefix"===l&&(f=e._value<0&&"sign"===s.negative?"-".concat(a).concat(h).concat(f.slice(1)):0<e._value&&s.forceSign?"+".concat(a).concat(h).concat(f.slice(1)):h+a+f),l&&"postfix"!==l||(f=f+(a=!s.spaceSeparatedAbbreviation&&c?"":a)+h),f}(e,t=w(t,i.currentCurrencyDefaultFormat()),i);case"percent":return function(e,t,r,n){var i=t.prefixSymbol,s=k({instance:n(100*e._value),providedFormat:t,state:r}),o=Object.assign({},u,t);return i?"%".concat(o.spaceSeparated?" ":"").concat(s):"".concat(s).concat(o.spaceSeparated?" ":"","%")}(e,t=w(t,i.currentPercentageDefaultFormat()),i,r);case"byte":return function(e,t,r,n){var i=t.base||"binary",s=Object.assign({},u,t),o=r.currentBytes(),a=o.binarySuffixes,c=o.decimalSuffixes,l={general:{scale:1024,suffixes:c||d,marker:"bd"},binary:{scale:1024,suffixes:a||h,marker:"b"},decimal:{scale:1e3,suffixes:c||d,marker:"d"}}[i],f=g(e._value,l.suffixes,l.scale),p=f.value,m=f.suffix,y=k({instance:n(p),providedFormat:t,state:r,defaults:r.currentByteDefaultFormat()});return"".concat(y).concat(s.spaceSeparated?" ":"").concat(m)}(e,t=w(t,i.currentByteDefaultFormat()),i,r);case"time":return t=w(t,i.currentTimeDefaultFormat()),function(e){var t=Math.floor(e._value/60/60),r=Math.floor((e._value-60*t*60)/60),n=Math.round(e._value-60*t*60-60*r);return"".concat(t,":").concat(r<10?"0":"").concat(r,":").concat(n<10?"0":"").concat(n)}(e);case"ordinal":return function(e,t,r){var n=r.currentOrdinal(),i=Object.assign({},u,t),s=k({instance:e,providedFormat:t,state:r}),o=n(e._value);return"".concat(s).concat(i.spaceSeparated?" ":"").concat(o)}(e,t=w(t,i.currentOrdinalDefaultFormat()),i);default:return k({instance:e,providedFormat:t,numbro:r})}}(e,t,r);return(c=n+c)+a}function g(e,t,r){var n=t[0],i=Math.abs(e);if(r<=i){for(var s=1;s<t.length;++s){var o=Math.pow(r,s),a=Math.pow(r,s+1);if(o<=i&&i<a){n=t[s],e/=o;break}}n===t[0]&&(e/=Math.pow(r,t.length-1),n=t[t.length-1])}return{value:e,suffix:n}}function m(e){for(var t="",r=0;r<e;r++)t+="0";return t}function y(e,t,r){var i=2<arguments.length&&void 0!==r?r:Math.round;return-1!==e.toString().indexOf("e")?function(e,t){var r=e.toString(),i=n(r.split("e"),2),s=i[0],o=i[1],a=n(s.split("."),2),c=a[0],u=a[1],l=void 0===u?"":u;if(0<+o)r=c+l+m(o-l.length);else{var h=".";h=+c<0?"-0".concat(h):"0".concat(h);var d=(m(-o-1)+Math.abs(c)+l).substr(0,t);d.length<t&&(d+=m(t-d.length)),r=h+d}return 0<+o&&0<t&&(r+=".".concat(m(t))),r}(e,t):new a(i(+"".concat(e,"e+").concat(t))/Math.pow(10,t)).toFixed(t)}function b(e,t,r,n,i){var s=n.currentDelimiters(),o=s.thousands;i=i||s.decimal;var a=s.thousandsSize||3,c=e.toString(),u=c.split(".")[0],l=c.split(".")[1],h=t<0&&0===u.indexOf("-");return r&&(h&&(u=u.slice(1)),function(e,t){for(var r=[],n=0,i=e;0<i;i--)n===t&&(r.unshift(i),n=0),n++;return r}(u.length,a).forEach((function(e,t){u=u.slice(0,e+t)+o+u.slice(e+t)})),h&&(u="-".concat(u))),l?u+i+l:u}function k(e){var t=e.instance,r=e.providedFormat,s=e.state,o=void 0===s?i:s,a=e.decimalSeparator,l=e.defaults,h=void 0===l?o.currentDefaults():l,d=t._value;if(0===d&&o.hasZeroFormat())return o.getZeroFormat();if(!isFinite(d))return d.toString();var f,p,g,m,k,w,v,_,S=Object.assign({},u,h,r),A=S.totalLength,I=A?0:S.characteristic,E=S.optionalCharacteristic,P=S.forceAverage,x=S.lowPrecision,R=!!A||!!P||S.average,B=A?-1:R&&void 0===r.mantissa?0:S.mantissa,O=!A&&(void 0===r.optionalMantissa?-1===B:S.optionalMantissa),N=S.trimMantissa,T=S.thousandSeparated,C=S.spaceSeparated,U=S.negative,z=S.forceSign,L=S.exponential,W=S.roundingFunction,M="";if(R){var D=function(e){var t=e.value,r=e.forceAverage,n=e.lowPrecision,i=void 0===n||n,s=e.abbreviations,o=e.spaceSeparated,a=void 0!==o&&o,u=e.totalLength,l=void 0===u?0:u,h=e.roundingFunction,d=void 0===h?Math.round:h,f="",p=Math.abs(t),g=-1;if(r&&s[r]&&c[r]?(f=s[r],t/=c[r]):p>=c.trillion||i&&1===d(p/c.trillion)?(f=s.trillion,t/=c.trillion):p<c.trillion&&p>=c.billion||i&&1===d(p/c.billion)?(f=s.billion,t/=c.billion):p<c.billion&&p>=c.million||i&&1===d(p/c.million)?(f=s.million,t/=c.million):(p<c.million&&p>=c.thousand||i&&1===d(p/c.thousand))&&(f=s.thousand,t/=c.thousand),f=f&&(a?" ":"")+f,l){var m=t<0,y=t.toString().split(".")[0],b=m?y.length-1:y.length;g=Math.max(l-b,0)}return{value:t,abbreviation:f,mantissaPrecision:g}}({value:d,forceAverage:P,lowPrecision:x,abbreviations:o.currentAbbreviations(),spaceSeparated:C,roundingFunction:W,totalLength:A});d=D.value,M+=D.abbreviation,A&&(B=D.mantissaPrecision)}if(L){var q=(p=(f={value:d,characteristicPrecision:I}).value,m=void 0===(g=f.characteristicPrecision)?0:g,w=(k=n(p.toExponential().split("e"),2))[0],v=k[1],_=+w,m&&1<m&&(_*=Math.pow(10,m-1),v=0<=(v-=m-1)?"+".concat(v):v),{value:_,abbreviation:"e".concat(v)});d=q.value,M=q.abbreviation+M}var K,j,F,G=function(e,t,r,i,s,o){if(-1===i)return e;var a=y(t,i,o),c=n(a.toString().split("."),2),u=c[0],l=c[1],h=void 0===l?"":l;if(h.match(/^0+$/)&&(r||s))return u;var d=h.match(/0+$/);return s&&d?"".concat(u,".").concat(h.toString().slice(0,d.index)):a.toString()}(d.toString(),d,O,B,N,W);return G=b(G=function(e,t,r,i){var s=e,o=n(s.toString().split("."),2),a=o[0],c=o[1];if(a.match(/^-?0$/)&&r)return c?"".concat(a.replace("0",""),".").concat(c):a.replace("0","");var u=t<0&&0===a.indexOf("-");if(u&&(a=a.slice(1),s=s.slice(1)),a.length<i)for(var l=i-a.length,h=0;h<l;h++)s="0".concat(s);return u&&(s="-".concat(s)),s.toString()}(G,d,E,I),d,T,o,a),(R||L)&&(G+=M),(z||d<0)&&(K=G,F=U,G=0===(j=d)?K:0==+K?K.replace("-",""):0<j?"+".concat(K):"sign"===F?K:"(".concat(K.replace("-",""),")")),G}function w(e,t){if(!e)return t;var r=Object.keys(e);return 1===r.length&&"output"===r[0]?t:e}t.exports=function(e){return{format:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return p.apply(void 0,r.concat([e]))},getByteUnit:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=f.general;return g(e._value,t.suffixes,t.scale).suffix}.apply(void 0,r.concat([e]))},getBinaryByteUnit:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=f.binary;return g(e._value,t.suffixes,t.scale).suffix}.apply(void 0,r.concat([e]))},getDecimalByteUnit:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(e){var t=f.decimal;return g(e._value,t.suffixes,t.scale).suffix}.apply(void 0,r.concat([e]))},formatOrDefault:w}}},{"./globalState":4,"./parsing":8,"./validating":10,"bignumber.js":1}],4:[function(e,t,r){"use strict";var n=e("./en-US"),i=e("./validating"),s=e("./parsing"),o={},a=void 0,c={},u=null,l={};function h(e){a=e}function d(){return c[a]}o.languages=function(){return Object.assign({},c)},o.currentLanguage=function(){return a},o.currentBytes=function(){return d().bytes||{}},o.currentCurrency=function(){return d().currency},o.currentAbbreviations=function(){return d().abbreviations},o.currentDelimiters=function(){return d().delimiters},o.currentOrdinal=function(){return d().ordinal},o.currentDefaults=function(){return Object.assign({},d().defaults,l)},o.currentOrdinalDefaultFormat=function(){return Object.assign({},o.currentDefaults(),d().ordinalFormat)},o.currentByteDefaultFormat=function(){return Object.assign({},o.currentDefaults(),d().byteFormat)},o.currentPercentageDefaultFormat=function(){return Object.assign({},o.currentDefaults(),d().percentageFormat)},o.currentCurrencyDefaultFormat=function(){return Object.assign({},o.currentDefaults(),d().currencyFormat)},o.currentTimeDefaultFormat=function(){return Object.assign({},o.currentDefaults(),d().timeFormat)},o.setDefaults=function(e){e=s.parseFormat(e),i.validateFormat(e)&&(l=e)},o.getZeroFormat=function(){return u},o.setZeroFormat=function(e){return u="string"==typeof e?e:null},o.hasZeroFormat=function(){return null!==u},o.languageData=function(e){if(e){if(c[e])return c[e];throw new Error('Unknown tag "'.concat(e,'"'))}return d()},o.registerLanguage=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!i.validateLanguage(e))throw new Error("Invalid language data");c[e.languageTag]=e,t&&h(e.languageTag)},o.setLanguage=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.languageTag;if(!c[e]){var r=e.split("-")[0],i=Object.keys(c).find((function(e){return e.split("-")[0]===r}));return c[i]?void h(i):void h(t)}h(e)},o.registerLanguage(n),a=n.languageTag,t.exports=o},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(e,t,r){"use strict";t.exports=function(t){return{loadLanguagesInNode:function(r){return n=t,void r.forEach((function(t){var r=void 0;try{r=e("../languages/".concat(t))}catch(r){console.error('Unable to load "'.concat(t,'". No matching language file found.'))}r&&n.registerLanguage(r)}));var n}}}},{}],6:[function(e,t,r){"use strict";var n=e("bignumber.js");function i(e,t,r){var i=new n(e._value),s=t;return r.isNumbro(t)&&(s=t._value),s=new n(s),e._value=i.minus(s).toNumber(),e}t.exports=function(e){return{add:function(t,r){return s=r,o=e,a=new n((i=t)._value),c=s,o.isNumbro(s)&&(c=s._value),c=new n(c),i._value=a.plus(c).toNumber(),i;var i,s,o,a,c},subtract:function(t,r){return i(t,r,e)},multiply:function(t,r){return s=r,o=e,a=new n((i=t)._value),c=s,o.isNumbro(s)&&(c=s._value),c=new n(c),i._value=a.times(c).toNumber(),i;var i,s,o,a,c},divide:function(t,r){return s=r,o=e,a=new n((i=t)._value),c=s,o.isNumbro(s)&&(c=s._value),c=new n(c),i._value=a.dividedBy(c).toNumber(),i;var i,s,o,a,c},set:function(t,r){return n=t,s=i=r,e.isNumbro(i)&&(s=i._value),n._value=s,n;var n,i,s},difference:function(t,r){return n=r,i(o=(s=e)(t._value),n,s),Math.abs(o._value);var n,s,o},BigNumber:n}}},{"bignumber.js":1}],7:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=e("./globalState"),s=e("./validating"),o=e("./loading")(f),a=e("./unformatting"),c=e("./formatting")(f),u=e("./manipulating")(f),l=e("./parsing"),h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._value=t}var t,r,s;return t=e,(r=[{key:"clone",value:function(){return f(this._value)}},{key:"format",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};return c.format(this,t)}},{key:"formatCurrency",value:function(e){return"string"==typeof e&&(e=l.parseFormat(e)),(e=c.formatOrDefault(e,i.currentCurrencyDefaultFormat())).output="currency",c.format(this,e)}},{key:"formatTime",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};return t.output="time",c.format(this,t)}},{key:"binaryByteUnits",value:function(){return c.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return c.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return c.getByteUnit(this)}},{key:"difference",value:function(e){return u.difference(this,e)}},{key:"add",value:function(e){return u.add(this,e)}},{key:"subtract",value:function(e){return u.subtract(this,e)}},{key:"multiply",value:function(e){return u.multiply(this,e)}},{key:"divide",value:function(e){return u.divide(this,e)}},{key:"set",value:function(e){return u.set(this,d(e))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}])&&n(t.prototype,r),s&&n(t,s),e}();function d(e){var t=e;return f.isNumbro(e)?t=e._value:"string"==typeof e?t=f.unformat(e):isNaN(e)&&(t=NaN),t}function f(e){return new h(d(e))}f.version="2.3.6",f.isNumbro=function(e){return e instanceof h},f.language=i.currentLanguage,f.registerLanguage=i.registerLanguage,f.setLanguage=i.setLanguage,f.languages=i.languages,f.languageData=i.languageData,f.zeroFormat=i.setZeroFormat,f.defaultFormat=i.currentDefaults,f.setDefaults=i.setDefaults,f.defaultCurrencyFormat=i.currentCurrencyDefaultFormat,f.validate=s.validate,f.loadLanguagesInNode=o.loadLanguagesInNode,f.unformat=a.unformat,f.BigNumber=u.BigNumber,t.exports=f},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(e,t,r){"use strict";t.exports={parseFormat:function(e){var t,r,n,i,s,o,a,c,u,l,h,d,f,p,g,m,y,b,k,w,v,_,S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"string"!=typeof e?e:(r=S,s=S,function(e,t){if(-1===e.indexOf("$")){if(-1===e.indexOf("%"))return-1!==e.indexOf("bd")?(t.output="byte",t.base="general"):-1!==e.indexOf("b")?(t.output="byte",t.base="binary"):-1!==e.indexOf("d")?(t.output="byte",t.base="decimal"):-1===e.indexOf(":")?-1!==e.indexOf("o")&&(t.output="ordinal"):t.output="time";t.output="percent"}else t.output="currency"}(e=(o=(i=e=(n=(t=e).match(/^{([^}]*)}/))?(r.prefix=n[1],t.slice(n[0].length)):t).match(/{([^}]*)}$/))?(s.postfix=o[1],i.slice(0,-o[0].length)):i,S),a=S,(c=e.match(/[1-9]+[0-9]*/))&&(a.totalLength=+c[0]),u=S,(l=e.split(".")[0].match(/0+/))&&(u.characteristic=l[0].length),function(e,t){if(-1!==e.indexOf(".")){var r=e.split(".")[0];t.optionalCharacteristic=-1===r.indexOf("0")}}(e,S),h=S,-1!==e.indexOf("a")&&(h.average=!0),f=S,-1!==(d=e).indexOf("K")?f.forceAverage="thousand":-1!==d.indexOf("M")?f.forceAverage="million":-1!==d.indexOf("B")?f.forceAverage="billion":-1!==d.indexOf("T")&&(f.forceAverage="trillion"),function(e,t){var r=e.split(".")[1];if(r){var n=r.match(/0+/);n&&(t.mantissa=n[0].length)}}(e,S),g=S,(p=e).match(/\[\.]/)?g.optionalMantissa=!0:p.match(/\./)&&(g.optionalMantissa=!1),m=S,(y=e.split(".")[1])&&(m.trimMantissa=-1!==y.indexOf("[")),b=S,-1!==e.indexOf(",")&&(b.thousandSeparated=!0),k=S,-1!==e.indexOf(" ")&&(k.spaceSeparated=!0,k.spaceSeparatedCurrency=!0,(k.average||k.forceAverage)&&(k.spaceSeparatedAbbreviation=!0)),v=S,(w=e).match(/^\+?\([^)]*\)$/)&&(v.negative="parenthesis"),w.match(/^\+?-/)&&(v.negative="sign"),_=S,e.match(/^\+/)&&(_.forceSign=!0),S)}}},{}],9:[function(e,t,r){"use strict";var n=[{key:"ZiB",factor:Math.pow(1024,7)},{key:"ZB",factor:Math.pow(1e3,7)},{key:"YiB",factor:Math.pow(1024,8)},{key:"YB",factor:Math.pow(1e3,8)},{key:"TiB",factor:Math.pow(1024,4)},{key:"TB",factor:Math.pow(1e3,4)},{key:"PiB",factor:Math.pow(1024,5)},{key:"PB",factor:Math.pow(1e3,5)},{key:"MiB",factor:Math.pow(1024,2)},{key:"MB",factor:Math.pow(1e3,2)},{key:"KiB",factor:Math.pow(1024,1)},{key:"KB",factor:Math.pow(1e3,1)},{key:"GiB",factor:Math.pow(1024,3)},{key:"GB",factor:Math.pow(1e3,3)},{key:"EiB",factor:Math.pow(1024,6)},{key:"EB",factor:Math.pow(1e3,6)},{key:"B",factor:1}];function i(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(e,t,r,s,o,a,c){var u=2<arguments.length&&void 0!==r?r:"",l=3<arguments.length?s:void 0,h=4<arguments.length?o:void 0,d=5<arguments.length?a:void 0,f=6<arguments.length?c:void 0;if(""!==e)return e===h?0:function e(t,r,s,o,a,c,u){var l=2<arguments.length&&void 0!==s?s:"",h=3<arguments.length?o:void 0,d=4<arguments.length?a:void 0,f=5<arguments.length?c:void 0,p=6<arguments.length?u:void 0;if(!isNaN(+t))return+t;var g="",m=t.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(m!==t)return-1*e(m,r,l,h,d,f,p);for(var y=0;y<n.length;y++){var b=n[y];if((g=t.replace(RegExp("([0-9 ])(".concat(b.key,")$")),"$1"))!==t)return e(g,r,l,h,d,f,p)*b.factor}if((g=t.replace("%",""))!==t)return e(g,r,l,h,d,f,p)/100;var k=parseFloat(t);if(!isNaN(k)){var w=h(k);if(w&&"."!==w&&(g=t.replace(new RegExp("".concat(i(w),"$")),""))!==t)return e(g,r,l,h,d,f,p);var v={};Object.keys(f).forEach((function(e){v[f[e]]=e}));for(var _=Object.keys(v).sort().reverse(),S=_.length,A=0;A<S;A++){var I=_[A],E=v[I];if((g=t.replace(I,""))!==t){var P=void 0;switch(E){case"thousand":P=Math.pow(10,3);break;case"million":P=Math.pow(10,6);break;case"billion":P=Math.pow(10,9);break;case"trillion":P=Math.pow(10,12)}return e(g,r,l,h,d,f,p)*P}}}}(function(e,t,r){var n=2<arguments.length&&void 0!==r?r:"",s=e.replace(n,"");return(s=s.replace(new RegExp("([0-9])".concat(i(t.thousands),"([0-9])"),"g"),"$1$2")).replace(t.decimal,".")}(e,t,u),t,u,l,h,d,f)}t.exports={unformat:function(t,r){var n,i,o,a=e("./globalState"),c=a.currentDelimiters(),u=a.currentCurrency().symbol,l=a.currentOrdinal(),h=a.getZeroFormat(),d=a.currentAbbreviations(),f=void 0;if("string"==typeof t)f=function(e,t){if(e.indexOf(":")&&":"!==t.thousands){var r=e.split(":");if(3===r.length){var n=+r[0],i=+r[1],s=+r[2];return!isNaN(n)&&!isNaN(i)&&!isNaN(s)}}}(t,c)?(i=+(n=t.split(":"))[0],o=+n[1],+n[2]+60*o+3600*i):s(t,c,u,l,h,d,r);else{if("number"!=typeof t)return;f=t}if(void 0!==f)return f}}},{"./globalState":4}],10:[function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=e("./unformatting"),o=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,a={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(e,t){return"byte"===t.output},message:"`base` must be provided only when the output is `byte`",mandatory:function(e){return"byte"===e.output}},characteristic:{type:"number",restriction:function(e){return 0<=e},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",lowPrecision:{type:"boolean",restriction:function(e,t){return!0===t.average},message:"`lowPrecision` must be provided only when the option `average` is set"},currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(e){return 0<=e},message:"value must be positive"},{restriction:function(e,t){return!t.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(e){return 0<=e},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",roundingFunction:"function",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",spaceSeparatedCurrency:"boolean",spaceSeparatedAbbreviation:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(e,t){return"percent"===t.output},message:"`prefixSymbol` can be provided only when the output is `percent`"}},c={languageTag:{type:"string",mandatory:!0,restriction:function(e){return e.match(o)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",spaceSeparatedCurrency:"boolean",ordinal:{type:"function",mandatory:!0},bytes:{type:"object",children:{binarySuffixes:"object",decimalSuffixes:"object"}},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function u(e){return void 0!==s.unformat(e)}function l(e,t,r,s){var o=3<arguments.length&&void 0!==s&&s,c=Object.keys(e).map((function(n){if(!t[n])return console.error("".concat(r," Invalid key: ").concat(n)),!1;var s=e[n],o=t[n];if("string"==typeof o&&(o={type:o}),"format"===o.type){if(!l(s,a,"[Validate ".concat(n,"]"),!0))return!1}else if(i(s)!==o.type)return console.error("".concat(r," ").concat(n,' type mismatched: "').concat(o.type,'" expected, "').concat(i(s),'" provided')),!1;if(o.restrictions&&o.restrictions.length)for(var c=o.restrictions.length,u=0;u<c;u++){var h=o.restrictions[u],d=h.restriction,f=h.message;if(!d(s,e))return console.error("".concat(r," ").concat(n," invalid value: ").concat(f)),!1}return o.restriction&&!o.restriction(s,e)?(console.error("".concat(r," ").concat(n," invalid value: ").concat(o.message)),!1):o.validValues&&-1===o.validValues.indexOf(s)?(console.error("".concat(r," ").concat(n," invalid value: must be among ").concat(JSON.stringify(o.validValues),', "').concat(s,'" provided')),!1):!(o.children&&!l(s,o.children,"[Validate ".concat(n,"]")))}));return o||c.push.apply(c,n(Object.keys(t).map((function(n){var i=t[n];if("string"==typeof i&&(i={type:i}),i.mandatory){var s=i.mandatory;if("function"==typeof s&&(s=s(e)),s&&void 0===e[n])return console.error("".concat(r,' Missing mandatory key "').concat(n,'"')),!1}return!0})))),c.reduce((function(e,t){return e&&t}),!0)}function h(e){return l(e,a,"[Validate format]")}t.exports={validate:function(e,t){var r=u(e),n=h(t);return r&&n},validateFormat:h,validateInput:u,validateLanguage:function(e){return l(e,c,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)}}]);
//# sourceMappingURL=267.5620705b.chunk.js.map