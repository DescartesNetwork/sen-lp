(globalThis.webpackChunksen_lp=globalThis.webpackChunksen_lp||[]).push([[902],{89838:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Page:()=>at,Widget:()=>lt,widgetConfig:()=>it});var n=t(55754),o=t(49142),r=t(78589),a=t(92950),i=t(45055),l=t(95418);const d={"logo-telegram":t.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"};var c=t(45263);const u=(0,a.forwardRef)((({name:e,className:s,...t},n)=>{const o=s?"anticon "+s:"anticon";return(0,c.jsx)("span",{className:o,...t,children:d[e]?(0,c.jsx)("ion-icon",{ref:n,src:d[e]}):(0,c.jsx)("ion-icon",{ref:n,name:e})})}));var p=t(36498);const h=({pools:e,onChange:s})=>{const[t,n]=(0,a.useState)(""),{tokenProvider:i}=(0,o.useMint)(),d=(0,a.useCallback)((async()=>{if(!t||t.length<3)return s(void 0);if(l.account.isAddress(t)){const n=e.find((({address:e})=>e===t));return s(n?[n]:[])}const n=await i.find(t);if(!n)return s(void 0);const o=n.map((({address:e})=>e)),r=e.filter((e=>{const{mint_a:s,mint_b:t}=e;return!!o.includes(s)||!!o.includes(t)}));return s(r)}),[e,t,s,i]);return(0,a.useEffect)((()=>{d()}),[d]),(0,c.jsx)(r.Card,{bodyStyle:{padding:8},bordered:!1,children:(0,c.jsx)(r.Input,{placeholder:"Search",value:t,size:"small",bordered:!1,prefix:(0,c.jsx)(r.Button,{type:"text",style:{marginLeft:-7},size:"small",onClick:t?()=>n(""):()=>{},icon:(0,c.jsx)(u,{name:t?"close-outline":"search-outline"})}),onChange:e=>n(e.target.value)})})};var m=t(31633);const x={ttl:3e4},y={limit:{calls:10,time:1e3},cache:x};class g{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,s){this.resolveQueue.push(e),this.rejectQueue.push(s)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class j{static set(e,s,t=x){this.mapCache.set(e,s),setTimeout((()=>{this.mapCache.delete(e)}),t.ttl)}static get(e){return this.mapCache.get(e)}}j.mapCache=new Map;class f{static getSingleFlight(e){const s=JSON.stringify(e);if(this.mapInstance.has(s)){const e=this.mapInstance.get(s);if(e)return e}let t=new w(e);return this.mapInstance.set(s,t),t}static async load(e,s,t={}){"object"===typeof e&&(e=JSON.stringify(e));let n=f.getSingleFlight(t);f.mapInstance.set(e,n);const o=new g(e);return n.load(o,s)}}f.mapInstance=new Map;class w{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(y,e)}async load(e,s){const t=j.get(e.key);if(t)return Promise.resolve(t);let n=!1,o=this.mapRequestCalling.get(e.key);return o||(o=e,n=!0,this.mapRequestCalling.set(o.key,o)),new Promise(((e,t)=>{if(!o)return t("Not found request!");o.add(e,t),n&&this.fetch(o,s)}))}fetch(e,s){if(!this.validateLimit())return this.addRequestQueue(e,s);this.createTimeLogs(),s().then((s=>{j.set(e.key,s,this.config.cache),e.resolves(s)})).catch((s=>{e.rejects(s)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(s)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const s=this.requestQueue.shift();s&&this.load(s,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,s){var t;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(s)}),null===(t=this.config.limit)||void 0===t?void 0:t.time)}validateLimit(){if(!this.config.limit)return!1;const e=this.timeLogs[0]||0,s=(new Date).getTime();if(this.timeLogs.length<this.config.limit.calls)return!0;return s-e>this.config.limit.time}createTimeLogs(){var e;if(!this.config.limit)return;const s=(new Date).getTime();this.timeLogs.push(s),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}const v=(e,s)=>{const{mint_a:t,mint_b:n,reserve_a:o,reserve_b:r}=s;return e===t?o:e===n?r:BigInt(0)},b=async()=>{const{sol:{senPoolAddress:e,senAddress:s}}=m.Z,t={icon:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png",symbol:"SEN",name:"Sen",address:s,rank:0,price:0,priceChange:0,totalVolume:0};try{var n,o;const r=await(null===(n=window.sentre)||void 0===n||null===(o=n.swap)||void 0===o?void 0:o.getPoolData(e)),{mint_a:a,mint_b:i}=r,d=v(s===a?i:a,r),c=v(s,r);return t.price=Number(l.utils.undecimalize(d,9))/Number(l.utils.undecimalize(c,9)),t}catch(r){return t}},C=async(e="")=>f.load("fetchCGK"+e,"sen"===e?b:()=>l.utils.parseCGK(e));var T=t(16200),S=t.n(T),k=t(63805);const A=(e,s=4,t="...")=>e.substring(0,s)+t+e.substring(e.length-s,e.length),P=e=>l.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${k.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${k.ef}`,I=e=>e?S()(e):S()("0"),R=({poolAddress:e})=>{const{tokenProvider:s}=(0,o.useMint)(),{pools:t}=(0,o.usePool)(),[n,r]=(0,a.useState)(0),i=(0,a.useCallback)((async()=>{try{const{reserve_a:n,reserve_b:o,mint_a:a,mint_b:i}=t[e],d=[a,i],c=await Promise.all(d.map((e=>l.account.isAddress(e)?s.findByAddress(e):{}))),u=[n,o],p=c.map((({decimals:e})=>e)),h=(await Promise.all(c.map((({extensions:e})=>null!==e&&void 0!==e&&e.coingeckoId?C(null===e||void 0===e?void 0:e.coingeckoId):{})))).map((({price:e})=>e));let m=0;return[0,1,2].forEach((e=>{u[e]&&p[e]&&h[e]&&(m+=Number(l.utils.undecimalize(u[e],p[e]))*h[e])})),r(m)}catch(n){return r(0)}}),[t,e,s]);return(0,a.useEffect)((()=>{i()}),[i]),(0,c.jsxs)("span",{children:["$",I(n).format("0,0.[00]a")]})};let B;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(B||(B={}));const z=({poolAddress:e})=>{const{pools:s}=(0,o.usePool)(),t=s[e]||{},{wallet:{address:n}}=(0,o.useWallet)(),a=t.state===B.Frozen,i=n===t.owner;return(0,c.jsxs)(r.Space,{children:[a&&(0,c.jsx)(u,{name:"snow-outline",style:{fontSize:16}}),i&&(0,c.jsx)(u,{name:"person-outline",style:{fontSize:16}})]})};var L=t(19289);const D={appId:"sen_lp",url:"https://descartesnetwork.github.io/sen-lp/index.js",senhub:"senhub@https://descartesnetwork.github.io/senhub/index.js"},M={development:{...D},staging:{...D},production:{...D}},E={spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},_={devnet:{node:"https://api.devnet.solana.com",chainId:103,cluster:"devnet",senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",...E,swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9",blackPoolAddresses:["FaHQpdp87S7d7PBJZjaty514rrEtmStaf1FcDst9GPY4","5V7sDTzYmjkyg7zXLTTcY8Ls6AAusLRX27CpWEJiqriE","G8BEKsiKPiazG623piXynTSr89TXLTgWycByvDR9bPii"],senPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",senOwner:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"]},testnet:{node:"https://api.devnet.solana.com",cluster:"devnet",chainId:103,senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",...E,swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9",blackPoolAddresses:["FaHQpdp87S7d7PBJZjaty514rrEtmStaf1FcDst9GPY4","5V7sDTzYmjkyg7zXLTTcY8Ls6AAusLRX27CpWEJiqriE","G8BEKsiKPiazG623piXynTSr89TXLTgWycByvDR9bPii"],senPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",senOwner:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"]},mainnet:{node:"https://api.mainnet-beta.solana.com",cluster:"mainnet",chainId:101,senAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",...E,swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e",blackPoolAddresses:[],senPoolAddress:"",senOwner:["Cs6jYywHTAgdvjxn8xG4VkJJH8DXXy7zbtatzMUWoCMG"]}},N={devnet:{baseURL:"https://stat-dev.sentre.io"},testnet:{baseURL:"https://stat-dev.sentre.io"},mainnet:{baseURL:"https://stat.sentre.io"}},F={development:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},staging:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},production:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)}},O={development:{swapRoute:"/app/sen_swap"},staging:{swapRoute:"/app/sen_swap"},production:{swapRoute:"/app/sen_swap"}},q={manifest:M[k.OB],sol:_[k.ef],stat:N[k.ef],fee:F[k.OB],swapRoute:O[k.OB]};var Y=t(21995),U=t.n(Y);const V={auth:async(e=!1)=>{if("object"===typeof e)return e;if(!e)return null;const s=window.sentre.wallet;if(!s)throw new Error("Wallet is not connected");const t=(Number(new Date)+1e4).toString()+Math.floor(Math.random()*10**16),n=await s.signMessage(t);return{Authorization:JSON.stringify(n)}},post:async(e,s=null,t=!1)=>{const n=await V.auth(t);try{const{data:t}=await U()({method:"post",url:e,data:s,headers:n});if("ERROR"===t.status)throw new Error(t.error);return t}catch(o){if(!o.response)throw new Error(o.message);const{response:{data:{error:e}}}=o;throw new Error(e)}},get:async(e,s=null,t=!1)=>{const n=await V.auth(t);try{const{data:t}=await U()({method:"get",url:e,params:s,headers:n});if("ERROR"===t.status)throw new Error(t.error);return t}catch(o){if(!o.response)throw new Error(o.message);const{response:{data:{error:e}}}=o;throw new Error(e)}},put:async(e,s=null,t=!1)=>{const n=await V.auth(t);try{const{data:t}=await U()({method:"put",url:e,data:s,headers:n});if("ERROR"===t.status)throw new Error(t.error);return t}catch(o){if(!o.response)throw new Error(o.message);const{response:{data:{error:e}}}=o;throw new Error(e)}},delete:async(e,s=null,t=!1)=>{const n=await V.auth(t);try{const{data:t}=await U()({method:"delete",url:e,data:s,headers:n});if("ERROR"===t.status)throw new Error(t.error);return t}catch(o){if(!o.response)throw new Error(o.message);const{response:{data:{error:e}}}=o;throw new Error(e)}}},H=V;let W;!function(e){e.endpointDetail="public/api/v1/detail/pools",e.endpointDaily="public/api/v1/daily/pools"}(W||(W={}));const{stat:{baseURL:Z}}=q,G="stat",K=(0,L.createAsyncThunk)("stat/fetchStatPoolData",(async({address:e},{getState:s})=>{try{const t=s().stat[e];if(t)return{[e]:t};const n=H.get(`${Z}/${W.endpointDetail}/${e}`),o=H.get(`${Z}/${W.endpointDaily}/${e}`),[r,a]=await Promise.all([n,o]);return{[e]:{details:r,daily:a}}}catch(t){return{}}})),Q=(0,L.createSlice)({name:G,initialState:{},reducers:{},extraReducers:e=>{e.addCase(K.fulfilled,((e,{payload:s})=>{Object.assign(e,s)}))}}).reducer,J=e=>{const{tokenProvider:s}=(0,o.useMint)(),{pools:t}=(0,o.usePool)(),[n,r]=(0,a.useState)([]),i=(0,a.useCallback)((async()=>{const n=await s.findByAddress(e);if(n)return r([n]);const o=Object.values(t).find((({mint_lpt:s})=>s===e));if(!o)return r([void 0]);const{mint_a:a,mint_b:i}=o,l=await s.findByAddress(a),d=await s.findByAddress(i);return r([l,d])}),[e,t,s]);return(0,a.useEffect)((()=>{i()}),[i]),n},X=({mintAddress:e,size:s=24,icon:t=(0,c.jsx)(u,{name:"diamond-outline"}),isReserve:n=!1})=>{const o=J(e),i=(0,a.useMemo)((()=>{const e=JSON.parse(JSON.stringify(o));return n?e.reverse():e}),[n,o]);return(0,c.jsx)(r.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},children:i.map(((e,n)=>(0,c.jsx)(r.Avatar,{src:null===e||void 0===e?void 0:e.logoURI,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:t},(null===e||void 0===e?void 0:e.address)||n)))})},$=({mintAddress:e,separator:s=" \u2022 ",isReverse:t=!1})=>{const n=J(e),o=(0,a.useMemo)((()=>{let o=n.map((s=>{if(!s)return A(e);const{name:t,address:o,symbol:r}=s;return 1===n.length&&t?t:r||A(o)}));return t&&o.reverse(),o.join(s),1===n.length?o:`${o} LPT`}),[t,e,s,n]);return(0,c.jsx)("span",{children:o})},ee=({mintAddress:e,separator:s=" \u2022 ",isReverse:t=!1})=>{const n=J(e),o=(0,a.useMemo)((()=>{const o=n.map((s=>{const t=`${null===e||void 0===e?void 0:e.substr(0,3)}...`;return s?s.symbol:t}));return t||o.reverse(),o.join(s)}),[t,e,s,n]);return(0,c.jsx)("span",{children:o})},se=({poolAddress:e,onClick:s=(()=>{}),action:t=(0,c.jsx)(a.Fragment,{}),selected:i=!1})=>{var l;const d=(0,n.useDispatch)(),{pools:u}=(0,o.usePool)(),p=(0,n.useSelector)((s=>{var t;return null===(t=s.stat[e])||void 0===t?void 0:t.details})),h=(null===u||void 0===u?void 0:u[e])||{},{state:m}=h,x=null===u||void 0===u||null===(l=u[e])||void 0===l?void 0:l.mint_lpt,y=(0,a.useMemo)((()=>{if(!p)return 0;const e=p.roi;return Math.pow(1+Number(e||0)/100,365)-1}),[p]);(0,a.useEffect)((()=>{e&&d(K({address:e}))}),[d,e]);const g=m===B.Frozen,j=i?"card-active":"";return(0,c.jsx)(r.Card,{className:j,bodyStyle:{padding:12,height:78},onClick:s,bordered:i,hoverable:!0,children:(0,c.jsxs)(r.Row,{gutter:[12,12],wrap:!1,align:"middle",children:[(0,c.jsx)(r.Col,{span:24,flex:"auto",children:(0,c.jsxs)(r.Space,{direction:"vertical",children:[(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(X,{mintAddress:x,size:24}),(0,c.jsx)(r.Typography.Text,{type:g?"secondary":void 0,children:(0,c.jsx)(ee,{mintAddress:x})})]}),(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(r.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,c.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,c.jsx)(r.Typography.Text,{children:(0,c.jsx)(R,{poolAddress:e})}),(0,c.jsx)(r.Divider,{type:"vertical",style:{margin:0}}),(0,c.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,c.jsx)(r.Typography.Text,{children:I(y).format("0,0.[00]%")})]})]})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Space,{size:2,children:[(0,c.jsx)(z,{poolAddress:e}),t]})})]})})},te=({onInit:e=(()=>{}),onClick:s=(()=>{}),selectedPoolAddress:t,action:n=(()=>(0,c.jsx)(a.Fragment,{}))})=>{const[i,l]=(0,a.useState)(),{pools:d}=(0,o.usePool)(),u=(0,a.useMemo)((()=>Object.keys(d).map((e=>({address:e,...d[e]}))).sort((({reserve_a:e,reserve_b:s},{reserve_a:t,reserve_b:n})=>{const o=e*s,r=t*n;return o>r?-1:o<r?1:0}))),[d]);return(0,a.useEffect)((()=>{var s;u.length&&!t&&e(null===(s=u[0])||void 0===s?void 0:s.address)}),[e,t,u]),(0,c.jsxs)(r.Row,{gutter:[12,12],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(h,{onChange:l,pools:u})}),(i||u).map(((e,o)=>(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(se,{poolAddress:e.address,action:n(e.address),onClick:()=>s(e.address),selected:t===e.address})})},e.address+o)))]})},ne="main",oe=(0,L.createAsyncThunk)("main/selectPool",(async e=>({selectedPoolAddress:e,selectedLptAddress:""}))),re=(0,L.createAsyncThunk)("main/selectCategoryPool",(async e=>({selectedCategoryPool:e}))),ae=(0,L.createAsyncThunk)("main/handleOpenDrawer",(async e=>({visible:e}))),ie=(0,L.createSlice)({name:ne,initialState:{selectedPoolAddress:"",visible:!1,selectedCategoryPool:""},reducers:{},extraReducers:e=>{e.addCase(oe.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(ae.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(re.fulfilled,((e,{payload:s})=>{Object.assign(e,s)}))}}).reducer,le=()=>{const e=(0,n.useDispatch)(),{selectedPoolAddress:s}=(0,n.useSelector)((e=>e.main)),t=new URLSearchParams((0,i.useLocation)().search).get("poolAddress")||"",o=(0,a.useCallback)((s=>{const n=l.account.isAddress(t)?t:s;return e(oe(n))}),[e,t]),d=(0,a.useCallback)((s=>{e(oe(s)),e(ae(!1))}),[e]),p=(0,a.useCallback)((e=>(0,c.jsx)(r.Button,{type:"text",onClick:()=>d(e),icon:(0,c.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[d]);return(0,c.jsx)(r.Row,{gutter:[12,12],children:(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(te,{action:p,selectedPoolAddress:s,onInit:o,onClick:d})})})},de=({data:e,onClick:s=(()=>{}),action:t=(0,c.jsx)(a.Fragment,{}),selected:n=!1})=>{var i;const{pool:d,amount:u}=e,p=l.utils.undecimalize(u,9),h=n?"card-active":"",m=e.state===B.Frozen,{pools:x}=(0,o.usePool)(),y=(null===x||void 0===x||null===(i=x[d])||void 0===i?void 0:i.mint_lpt)||"";return(0,c.jsx)(r.Card,{className:h,bodyStyle:{padding:12,height:78},onClick:s,bordered:n,hoverable:!0,children:(0,c.jsxs)(r.Row,{gutter:[12,12],align:"middle",wrap:!1,children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsxs)(r.Space,{direction:"vertical",children:[(0,c.jsxs)(r.Space,{size:"middle",children:[(0,c.jsx)(X,{mintAddress:y,size:24}),(0,c.jsx)(r.Typography.Text,{type:m?"secondary":void 0,children:(0,c.jsx)(ee,{mintAddress:y})})]}),(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(r.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,c.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,c.jsx)(r.Typography.Text,{children:(0,c.jsx)(R,{poolAddress:d})}),(0,c.jsx)(r.Divider,{type:"vertical",style:{margin:0}}),(0,c.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"My LPT:"}),(0,c.jsx)(r.Typography.Text,{children:I(p).format("0,0.[00]")})]})]})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Space,{size:2,children:[(0,c.jsx)(z,{poolAddress:d})," ",t]})})]})})},ce=({onInit:e=(()=>{}),onClick:s=(()=>{}),selectedPoolAddress:t,action:i=(()=>(0,c.jsx)(a.Fragment,{}))})=>{const l=(0,n.useSelector)((e=>e.lpts)),{pools:d}=(0,o.usePool)(),{wallet:{address:u}}=(0,o.useWallet)(),h=(0,a.useMemo)((()=>Object.keys(l).filter((e=>{const{pool:s}=l[e];return d[s].owner===u?null===d||void 0===d?void 0:d[s]:null}))),[l,d,u]);return(0,a.useEffect)((()=>{h.length&&e(h[0])}),[e,h,l]),(0,c.jsx)(r.Row,{gutter:[12,12],children:h.map(((e,n)=>{const{pool:o}=l[e];return(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(de,{data:l[e],action:i(e,o),onClick:()=>s(e,o),selected:t===o})})},e+n)}))})},ue=()=>{const e=(0,n.useDispatch)(),{selectedPoolAddress:s}=(0,n.useSelector)((e=>e.main)),t=(0,a.useCallback)(((s,t)=>{e(oe(t)),e(ae(!1))}),[e]),o=(0,a.useCallback)(((e,s)=>(0,c.jsx)(r.Button,{type:"text",onClick:()=>t(e,s),size:"small",icon:(0,c.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[t]);return(0,c.jsx)(r.Row,{gutter:[12,12],children:(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(ce,{action:o,selectedPoolAddress:s,onClick:t})})})};let pe;const he=(0,a.forwardRef)((({max:e,onValue:s=(()=>{}),onChange:t=(()=>{}),onBlur:n=(()=>{}),...o},i)=>{var l;const[d,p]=(0,a.useState)(""),[h,m]=(0,a.useState)(null),x=(0,a.useRef)(i),y=(0,a.useCallback)((t=>{const n=e=>{pe&&(clearTimeout(pe),pe=void 0),p(e),pe=setTimeout((()=>p("")),500)};return/^\d*(\.\d*)?$/.test(t)?e&&parseFloat(t)>parseFloat(e.toString())?n("Not enough balance"):s(t):n("Invalid character")}),[e,s]);return null===x||void 0===x||null===(l=x.current)||void 0===l||l.setSelectionRange(h,h),(0,c.jsx)(r.Tooltip,{title:(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(u,{name:"warning"}),d]}),visible:!!d,children:(0,c.jsx)(r.Input,{...o,onBlur:e=>{n(e);const s=Number(e.target.value);e.target.value&&y(s?s.toString():"")},onChange:e=>{t(e),m(e.target.selectionStart),y(e.target.value||"")},ref:x})})})),me=e=>{const[s,t]=(0,a.useState)(0),{tokenProvider:n,getMint:r}=(0,o.useMint)(),i=(0,a.useCallback)((async()=>{if(!e)return t(0);const s=await n.findByAddress(e);if(s)return t(s.decimals);try{const s=await r({address:e});return t(s[e].decimals)}catch(o){}return t(0)}),[r,e,n]);return(0,a.useEffect)((()=>{i()}),[i]),s},xe=({mintAddresses:e,activeMintAddress:s,onSelect:t})=>(0,c.jsxs)(r.Select,{onChange:t,value:s||"",bordered:!1,suffixIcon:(0,c.jsx)(r.Divider,{type:"vertical",style:{margin:0}}),style:{marginLeft:-7},children:[(0,c.jsx)(r.Select.Option,{value:"Select",children:(0,c.jsxs)(r.Space,{size:4,children:[(0,c.jsx)(X,{mintAddress:"Select",icon:(0,c.jsx)(u,{name:"help-outline"})}),(0,c.jsx)(r.Typography.Text,{children:"Select"})]})}),e.map(((e,s)=>(0,c.jsx)(r.Select.Option,{value:e,children:(0,c.jsxs)(r.Space,{size:4,children:[(0,c.jsx)(X,{mintAddress:e}),(0,c.jsx)(ee,{mintAddress:e})]})},e+s)))]}),ye=({mintAddresses:e,onChange:s,suggestInfo:t})=>{const[n,i]=(0,a.useState)(""),[d,u]=(0,a.useState)("Select"),[p,h]=(0,a.useState)(""),{accounts:m}=(0,o.useAccount)(),x=J(d),y=me(d),{wallet:{address:g}}=(0,o.useWallet)(),j=null===m||void 0===m?void 0:m[p],{symbol:f}=x[0]||{},w=(0,a.useMemo)((()=>{const{amount:e}=j||{};return e&&y&&l.utils.undecimalize(e,y)||"0"}),[j,y]),v=(0,a.useCallback)((async()=>{const{splt:e}=window.sentre;let s="";try{s=await(null===l.account||void 0===l.account?void 0:l.account.deriveAssociatedAddress(g,d,e.spltProgramId.toBase58(),e.splataProgramId.toBase58()))}catch(t){}h(s)}),[d,g]),b=(0,a.useCallback)((async e=>{if(await i(e),l.account.isAddress(d))return s(y?{amount:l.utils.decimalize(e,y),mintAddress:d}:{amount:BigInt(0),mintAddress:d})}),[s,y,d]),C=(0,a.useCallback)((async e=>(await u(e),y&&parseFloat(n)?s({amount:l.utils.decimalize(n,y),mintAddress:e}):s({amount:BigInt(0),mintAddress:e}))),[s,y,n]);(0,a.useEffect)((()=>{v()}),[v]);const{symbol:T,amount:S,address:k}=t||{},A=d===k;return(0,c.jsxs)(r.Row,{gutter:[4,4],children:[(0,c.jsx)(he,{placeholder:`Amount of ${f||"TOKEN"}`,value:n,onValue:b,prefix:(0,c.jsx)(xe,{mintAddresses:e,activeMintAddress:d,onSelect:C}),size:"large",suffix:(0,c.jsx)(r.Button,{type:"text",style:{marginRight:-7},onClick:()=>b(w),children:"MAX"}),max:w}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Row,{gutter:[4,4],children:[(0,c.jsx)(r.Col,{span:24,flex:"auto",children:A&&S?(0,c.jsxs)(r.Space,{size:4,children:[(0,c.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"Recommend:"}),(0,c.jsx)(r.Typography.Text,{type:"danger",style:{fontSize:12,cursor:"pointer"},onClick:()=>b((null===S||void 0===S?void 0:S.toString())||"0"),children:I(S).format("0,0.[00000]a")}),(0,c.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:T||"TOKEN"})]}):null}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Typography.Text,{type:"secondary",className:"caption",children:["Available: ",I(w).format("0,0.[0000]")," ",f||"TOKEN"]})})]})})]})},ge=e=>window.notify({type:"error",description:e.message}),je={calculateAmount:(e,s,t)=>{if(!e||!s||!t)return 0;const{price:n}=t,{decimals:o,price:r}=s;return Number(l.utils.undecimalize(e,o))*r/n}},{sol:{taxmanAddress:fe}}=q,{fee:{exoticFee:we,exoticTax:ve}}=q,be=()=>{const[e,s]=(0,a.useState)(!1),[t,i]=(0,a.useState)(BigInt(0)),[d,p]=(0,a.useState)(""),[h,m]=(0,a.useState)(BigInt(0)),[x,y]=(0,a.useState)(""),[g,j]=(0,a.useState)(new Map),[f,w]=(0,a.useState)(),[v,b]=(0,a.useState)(!1),{accounts:T}=(0,o.useAccount)(),S=(0,n.useSelector)((e=>e.lpts)),{wallet:{address:k}}=(0,o.useWallet)(),{pools:A}=(0,o.usePool)(),{tokenProvider:I}=(0,o.useMint)(),R=(0,a.useMemo)((()=>Object.keys(S).map((e=>{var s;const{pool:t}=S[e];return null===A||void 0===A||null===(s=A[t])||void 0===s?void 0:s.mint_lpt}))),[A,S]),B=()=>{const e=[];for(const s of Object.keys(T)){const{mint:t}=T[s];R.includes(t)||e.push(t)}return e},z=(0,a.useMemo)((()=>{const e=[];return d&&e.push(d),x&&e.push(x),e}),[d,x]),L=t&&h&&l.account.isAddress(d)&&l.account.isAddress(x),D=`${d}${x}`,M=`${x}${d}`,E=g.has(D)||g.has(M),_=(0,a.useMemo)((()=>{if(!f)return;const e=f.get(d),s=f.get(x);if(!e||!s)return;const{address:n,symbol:o}=e,{address:r,symbol:a}=s;let i=0,l="",c="";return v?(i=je.calculateAmount(t,e,s),l=a,c=r):(i=je.calculateAmount(h,s,e),l=o,c=n),{symbol:l,amount:i,address:c}}),[v,d,x,f,t,h]),N=(0,a.useCallback)((()=>{for(let e in A){const s=A[e],{mint_a:t,mint_b:n}=s,o=`${t}${n}`;g.set(o,e)}j(g)}),[g,A]);(0,a.useEffect)((()=>{N()}),[N]);const F=(0,a.useCallback)((async e=>{let s=e.map((async e=>{var s;const t={},n=await I.findByAddress(e),o=null===n||void 0===n||null===(s=n.extensions)||void 0===s?void 0:s.coingeckoId;let r=0;return o&&(r=(await C(o)).price),n&&(t.symbol=n.symbol,t.decimals=n.decimals,t.address=n.address,t.price=r),t}));const t=await Promise.all(s),n=new Map;return t.forEach((e=>{n.set(e.address,e)})),n}),[I]);return(0,a.useEffect)((()=>{z&&(async()=>{const e=await F(z);w(e)})()}),[z,F]),(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(r.Button,{type:"primary",size:"small",icon:(0,c.jsx)(u,{name:"add-outline"}),onClick:()=>s(!e)}),(0,c.jsx)(r.Modal,{visible:e,onCancel:()=>{s(!e),p(""),y("")},title:(0,c.jsx)(r.Typography.Title,{level:4,children:"New Pool"}),footer:(0,c.jsx)(r.Button,{type:"primary",size:"large",onClick:async()=>{const{swap:e,splt:n,wallet:o}=window.sentre,r=[d,x],a=await Promise.all(r.map((e=>n.deriveAssociatedAddress(k,e))));if(o)try{const{txId:n}=await e.initializePool(t,h,we,ve,k,a[0],a[1],fe,o);return s(!1),((e,s)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(P(s),"_blank")}))("Create a new pool",n)}catch(i){return ge(i)}},disabled:!L,block:!0,children:"Supply"}),destroyOnClose:!0,centered:!0,children:(0,c.jsxs)(r.Row,{gutter:[16,12],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Typography.Text,{type:"secondary",children:"This is your first time adding liquidity. It is the rate you add that sets the price for that LP token pair. If you feel satisfied with the rate please press the Supply button."})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Typography.Text,{type:"secondary",children:[(0,c.jsx)("strong",{className:"content",children:"Liquidity provider incentive."})," ","Liquidity providers earn a 0.25% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(ye,{mintAddresses:B(),onChange:({amount:e,mintAddress:s})=>{i(e),p(s),b(!0)},suggestInfo:_})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(ye,{mintAddresses:B(),onChange:async({amount:e,mintAddress:s})=>{m(e),y(s),b(!1)},suggestInfo:_})}),E&&(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Typography.Text,{className:"caption",type:"danger",children:"The pool you want to create with selected mints already exists. We hightly recomment to deposit your liquidity to the pool instead."})})]})})]})},Ce=()=>{const e=(0,n.useDispatch)(),{selectedPoolAddress:s}=(0,n.useSelector)((e=>e.main)),{pools:t}=(0,o.usePool)(),d=new URLSearchParams((0,i.useLocation)().search).get("poolAddress")||"",p=q.sol.senOwner,h=Object.keys(t).filter((e=>{const s=null===t||void 0===t?void 0:t[e],{owner:n}=s;return p.includes(n)})),m=(0,a.useCallback)((s=>{e(oe(s)),e(ae(!1))}),[e]),x=(0,a.useCallback)((e=>(0,c.jsx)(r.Button,{type:"text",onClick:()=>m(e),icon:(0,c.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[m]),y=(0,a.useCallback)((s=>{const t=l.account.isAddress(d)?d:s;return e(oe(t))}),[e,d]);return(0,a.useEffect)((()=>{h.length&&!s&&y(h[0])}),[h,y,s]),(0,c.jsx)(r.Row,{gutter:[16,16],children:h.map(((e,t)=>(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(se,{poolAddress:e,action:x(e),onClick:()=>m(e),selected:s===e})},e+t)))})},Te=()=>{const e=(0,n.useDispatch)(),s=(0,n.useSelector)((e=>e.lpts)),{selectedPoolAddress:t}=(0,n.useSelector)((e=>e.main)),{pools:i}=(0,o.usePool)(),l=(0,a.useMemo)((()=>Object.keys(s).filter((e=>{const{pool:t,amount:n}=s[e];return n!==BigInt(0)?null===i||void 0===i?void 0:i[t]:null}))),[i,s]),d=(0,a.useCallback)((s=>{e(oe(s)),e(ae(!1))}),[e]),h=(0,a.useCallback)((e=>(0,c.jsx)(r.Button,{type:"text",onClick:()=>d(e),icon:(0,c.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[d]);return(0,c.jsx)(r.Row,{gutter:[12,12],children:l.map(((e,n)=>{const{pool:o}=s[e];return(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(de,{data:s[e],action:h(o),onClick:()=>d(o),selected:t===o})})},e+n)}))})},Se=()=>(0,c.jsxs)(r.Tabs,{defaultActiveKey:"sentre-pools",tabBarExtraContent:(0,c.jsx)(be,{}),style:{padding:16},children:[(0,c.jsx)(r.Tabs.TabPane,{tab:"Sentre Pools",children:(0,c.jsx)(Ce,{})},"sentre-pools"),(0,c.jsx)(r.Tabs.TabPane,{tab:"Community pools",children:(0,c.jsx)(le,{})},"all-pools"),(0,c.jsx)(r.Tabs.TabPane,{tab:"Deposited",children:(0,c.jsx)(Te,{})},"deposited"),(0,c.jsx)(r.Tabs.TabPane,{tab:"Your pools",children:(0,c.jsx)(ue,{})},"your-pools")]}),ke={address:"",chainId:0,decimals:0,name:"",symbol:"TOKEN",extensions:void 0,logoURI:"",tags:[]},Ae=({poolAddress:e})=>{const{pools:s}=(0,o.usePool)(),{tokenProvider:t}=(0,o.useMint)(),[n,i]=(0,a.useState)(!1),[d,p]=(0,a.useState)(),h=(0,a.useMemo)((()=>(null===s||void 0===s?void 0:s[e])||{}),[e,s]),m=(0,a.useCallback)((async()=>{if(!h)return;const{mint_a:e,mint_b:s}=h,n=[e,s].map((async e=>{let s=await t.findByAddress(e);return s||(s=ke),s})),o=await Promise.all(n);p(o)}),[h,t]);function x(e){if(!e||!h)return 0;const{address:s,decimals:t}=e,n=((e,s)=>{const{mint_a:t,mint_b:n,reserve_a:o,reserve_b:r}=s;return e===t?o:e===n?r:BigInt(0)})(s,h);return Number(l.utils.undecimalize(n,t))}return(0,a.useEffect)((()=>{m()}),[m]),(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(X,{mintAddress:null===h||void 0===h?void 0:h.mint_lpt,isReserve:n}),(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(r.Typography.Text,{children:I(function(){if(!d)return 0;const e=d[0],s=d[1],t=x(e),o=x(s);if(!t||!o)return 0;const r=t/o;return n?1/r:r}()).format("0,0.[0000]")}),(0,c.jsx)(ee,{mintAddress:null===h||void 0===h?void 0:h.mint_lpt,isReverse:n,separator:"/"})]}),(0,c.jsx)(r.Button,{type:"text",onClick:()=>i(!n),icon:(0,c.jsx)(u,{name:"swap-horizontal-outline"})})]})},Pe=({mintAddress:e,onChange:s,value:t})=>{const[n,i]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),{wallet:{address:p}}=(0,o.useWallet)(),{accounts:h}=(0,o.useAccount)(),m=J(e),x=me(e),y=m.map((e=>null===e||void 0===e?void 0:e.symbol)).join("/"),g=null===h||void 0===h?void 0:h[d],j=(0,a.useMemo)((()=>{const{amount:e}=g||{};return e&&x&&l.utils.undecimalize(e,x)||"0"}),[g,x]),f=(0,a.useCallback)((async e=>(await i(e),x&&parseFloat(e)?s(l.utils.decimalize(e,x)):s(BigInt(0)))),[x,s]),w=(0,a.useCallback)((()=>{const e=l.utils.undecimalize(t,x||0);Number(e)!==Number(n)&&i(e)}),[x,t]),v=(0,a.useCallback)((async()=>{const{splt:s}=window.sentre;try{const t=await l.account.deriveAssociatedAddress(p,e,s.spltProgramId.toBase58(),s.splataProgramId.toBase58());u(t)}catch(t){}}),[e,p]);(0,a.useEffect)((()=>{v()}),[v]),(0,a.useEffect)((()=>{w()}),[w]);const b=Number(n)>Number(j);return(0,c.jsxs)(r.Row,{gutter:[4,4],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Card,{style:{borderRadius:8},bodyStyle:{padding:8},bordered:!1,children:(0,c.jsx)(he,{placeholder:`Amount of ${y||"TOKEN"}`,value:n,onValue:f,size:"small",bordered:!1,prefix:(0,c.jsxs)(r.Space,{style:{marginLeft:-4,marginRight:7,lineHeight:1},children:[(0,c.jsx)(X,{mintAddress:e}),(0,c.jsx)(r.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,c.jsx)(r.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>f(j),children:"MAX"}),max:j})})}),(0,c.jsx)(r.Col,{flex:"auto",children:b&&(0,c.jsx)(r.Typography.Text,{style:{fontSize:12},type:"danger",children:"Not enough balance."})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",I(j).format("0,0.[0000]")," ",y||"TOKEN"]})})]})},Ie={icon:"",symbol:"",name:"",address:"",rank:"",price:0,priceChange:0,totalVolume:0,decimals:0},Re=({value:e="0",poolAddress:s})=>{const[t,i]=(0,a.useState)(!1),[d,p]=(0,a.useState)("0"),[h,m]=(0,a.useState)([]),[x,y]=(0,a.useState)(0),g=(0,n.useSelector)((e=>e.lpts)),{getMint:j}=(0,o.useMint)(),{pools:f}=(0,o.usePool)(),w=null===f||void 0===f?void 0:f[s],{reserve_a:v,mint_a:b,reserve_b:T,mint_b:S,mint_lpt:k}=w,A=J(k),P=Object.keys(g).find((e=>g[e].pool===s))||"",{amount:R}=g[P]||{},B=Number(l.utils.undecimalize(R||BigInt(0),9)),z=(0,a.useMemo)((async()=>{const{[b]:{decimals:e}}=await j({address:b});return Number(l.utils.undecimalize(v,e))}),[j,b,v]),L=(0,a.useMemo)((async()=>{const{[S]:{decimals:e}}=await j({address:S});return Number(l.utils.undecimalize(T,e))}),[j,S,T]),D=(0,a.useMemo)((()=>{const e=A.map((e=>e?e.symbol:"UNKN"));return t&&e.reverse(),e.join("/")}),[t,A]),M=e=>{if(!e||!w)return 0;const{address:s,decimals:t}=e,n=((e,s)=>{const{mint_a:t,mint_b:n,reserve_a:o,reserve_b:r}=s;return e===t?o:e===n?r:BigInt(0)})(s,w);return Number(l.utils.undecimalize(n,t))};(0,a.useEffect)((()=>{(async()=>{const e=t?await L/await z:await z/await L;y(e)})()}),[t,z,L]),(0,a.useEffect)((()=>{(async()=>{const{[k]:{supply:e,decimals:s}}=await j({address:k});p(l.utils.undecimalize(e,s))})()}),[k,j]);const E=(0,a.useCallback)((async()=>{if(!A)return;const e=A.map((async e=>{var s;const t=null===e||void 0===e||null===(s=e.extensions)||void 0===s?void 0:s.coingeckoId;if(!t)return Ie;return{...await C(t),decimals:e.decimals,address:e.address}})),s=await Promise.all(e);m(s)}),[A]);return(0,a.useEffect)((()=>{E()}),[E]),(0,c.jsx)(r.Card,{bordered:!1,children:(0,c.jsxs)(r.Row,{gutter:[12,12],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Row,{gutter:[12,12],children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsx)(r.Typography.Text,{type:"secondary",children:"In - Pool Price"})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(r.Button,{type:"text",style:{width:"auto",height:"auto"},icon:(0,c.jsx)(u,{name:"swap-horizontal-outline"}),onClick:()=>i(!t)}),(0,c.jsx)(r.Typography.Text,{children:I(x).format("0,0.[0000]")}),(0,c.jsx)(r.Typography.Text,{children:D})]})})]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Row,{gutter:[12,12],children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsx)(r.Typography.Text,{type:"secondary",children:"Pool Share Composition"})}),(0,c.jsx)(r.Col,{children:(0,c.jsx)(r.Space,{size:4,children:h.map(((e,s)=>{const t=M(e);return(0,c.jsxs)(a.Fragment,{children:[(0,c.jsxs)(r.Typography.Text,{children:[I(t).format("0,0.[00]a"),e.symbol]}),h.length>s+1&&(0,c.jsx)(r.Typography.Text,{children:"+"})]},t+s)}))})})]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Row,{gutter:[12,12],children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsx)(r.Typography.Text,{type:"secondary",children:"Your LPT"})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Typography.Text,{children:[I(B).format("0,0.[0000]"),"LPT"]})})]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Row,{gutter:[8,8],children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsx)(r.Typography.Text,{type:"secondary",children:"Total LPT"})}),(0,c.jsx)(r.Col,{children:(0,c.jsx)(r.Typography.Text,{children:I(d).format("0,0.[0000]")})})]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Row,{gutter:[12,12],children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsx)(r.Typography.Text,{type:"secondary",children:"You will reveice"})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Space,{size:4,children:[(0,c.jsx)(r.Typography.Title,{level:5,children:I(e).format("0,0.[0000]")}),(0,c.jsx)(r.Typography.Title,{level:5,children:"LPT"})]})})]})})]})})},Be=({poolAddress:e,onClose:s=(()=>{})})=>{const[t,n]=(0,a.useState)(!1),[i,d]=(0,a.useState)(""),[u,p]=(0,a.useState)([BigInt(0),BigInt(0)]),[h,m]=(0,a.useState)("all"),[x,y]=(0,a.useState)(!0),{pools:g}=(0,o.usePool)(),{wallet:{address:j}}=(0,o.useWallet)(),{getMint:f}=(0,o.useMint)(),{accounts:w}=(0,o.useAccount)(),{mint_a:v,mint_b:b,reserve_a:C,reserve_b:T,mint_lpt:S,fee_ratio:k,tax_ratio:A}=g[e],I=[v,b],R=me(v),B=me(b),z=(0,a.useMemo)((()=>[R,B]),[R,B]),L=(0,a.useMemo)((()=>Number(l.utils.undecimalize(C,R))/Number(l.utils.undecimalize(T,B))),[R,B,C,T]),D=(0,a.useCallback)(((e,s)=>{if(!z)return BigInt(0);const t=0===s?z[1]:z[0],n=Number(l.utils.undecimalize(e,z[s]));let o=n*L;return 0===s&&(o=n/L),l.utils.decimalize(o,t)}),[z,L]),M=(0,a.useCallback)((async()=>{if(!l.account.isAddress(j))return d("");try{const{[S]:{supply:e}}=await f({address:S}),{lpt:s}=l.Swap.oracle.sided_deposit(u[0],u[1],C,T,e,k,A);return d(l.utils.undecimalize(s,9))}catch(e){window.notify({type:"error",description:e.message})}}),[u,k,f,S,C,T,A,j]);(0,a.useEffect)((()=>{M()}),[M]),(0,a.useEffect)((()=>{p([BigInt(0),BigInt(0)])}),[h]);const E=(0,a.useCallback)((async()=>{const{splt:e}=window.sentre,s=await e.deriveAssociatedAddress(j,v),t=w[s],n=await e.deriveAssociatedAddress(j,b),o=w[n];if(!t||!o)return y(!0);const r=u[0]>t.amount||u[1]>o.amount;y(r)}),[w,u,v,b,j]);return(0,a.useEffect)((()=>{E()}),[E]),(0,c.jsxs)(r.Row,{gutter:[16,16],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Radio.Group,{onChange:e=>m(e.target.value),value:h,children:[(0,c.jsx)(r.Radio,{value:"all",children:(0,c.jsxs)(r.Space,{size:4,children:[(0,c.jsx)(ee,{mintAddress:S,separator:"+"}),(0,c.jsx)(r.Tag,{className:"deposit-tag",children:"0 Fee"})]})}),I.map(((e,s)=>(0,c.jsx)(r.Radio,{value:e,children:(0,c.jsx)(ee,{mintAddress:e})},e+s)))]})}),I.map(((e,s)=>(e===h||"all"===h)&&(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(Pe,{mintAddress:e,value:u[s],onChange:s=>((e,s)=>{if(!l.account.isAddress(e)||!s)return p([BigInt(0),BigInt(0)]);const t=I.findIndex((s=>s===e));if(-1===t)return;let n=[...u];"all"===h&&(n[0]=n[1]=D(s,t)),n[t]=s,p(n)})(e,s)})},e+s))),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(Re,{value:i,poolAddress:e})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Button,{type:"primary",onClick:async()=>{n(!0);const{splt:t,swap:o,wallet:r}=window.sentre,[a,i]=await Promise.all(I.map((e=>t.deriveAssociatedAddress(j,e))));if(r)try{const{txId:t}=await o.addSidedLiquidity(u[0],u[1],e,a,i,r);return s(),window.notify({type:"success",description:"Deposit liquidity successfully. Click to view details.",onClick:()=>window.open(P(t),"_blank")})}catch(l){return window.notify({type:"error",description:l.message})}finally{n(!1)}},disabled:!Number(i)||x,block:!0,loading:t,children:"Deposit"})})]})},ze=({poolAddress:e,onClose:s=(()=>{})})=>{const{pools:t}=(0,o.usePool)(),{fee_ratio:n,tax_ratio:a}=t[e]||{},i=n||BigInt(0),d=a||BigInt(0),u=l.utils.undecimalize(i+d,7);return(0,c.jsxs)(r.Row,{gutter:[16,16],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Typography.Title,{level:5,children:"Deposit Liquidity"})}),(0,c.jsxs)(r.Col,{span:24,children:[(0,c.jsxs)(r.Typography.Paragraph,{type:"secondary",children:[(0,c.jsx)("strong",{children:"Liquidity provider incentive."})," Liquidity providers earn a ",u,"%% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]}),(0,c.jsxs)(r.Typography.Paragraph,{type:"secondary",children:[(0,c.jsx)("strong",{children:"Asymmetric Deposit."})," Instead of depositing amounts of tokens proportionally, Asymmetric Deposit allows you to deposit even one side of token. The pool will automatically re-balance itself."]})]}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(Be,{poolAddress:e,onClose:s})})]})},Le=({lptAddress:e,onChange:s})=>{const[t,i]=(0,a.useState)(""),d=(0,n.useSelector)((e=>e.lpts)),{pools:u}=(0,o.usePool)(),{amount:p,pool:h}=(null===d||void 0===d?void 0:d[e])||{},{mint_lpt:m}=(null===u||void 0===u?void 0:u[h])||{},x=(0,a.useMemo)((()=>p&&l.utils.undecimalize(p,9)||"0"),[p]),y=(0,a.useCallback)((async e=>(await i(e),parseFloat(e)?s(l.utils.decimalize(e,9)):s(BigInt(0)))),[s]);return(0,c.jsxs)(r.Row,{gutter:[4,4],justify:"end",children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Card,{bodyStyle:{padding:8},bordered:!1,children:(0,c.jsx)(he,{placeholder:"Amount of LPT",value:t,onValue:y,size:"small",bordered:!1,prefix:(0,c.jsxs)(r.Space,{style:{marginLeft:-7,marginRight:7,fontSize:12,lineHeight:1},children:[(0,c.jsx)(X,{mintAddress:m,size:24}),(0,c.jsx)(r.Typography.Text,{children:(0,c.jsx)($,{mintAddress:m})}),(0,c.jsx)(r.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,c.jsx)(r.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>y(x),children:"MAX"}),max:x})})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",I(x).format("0,0.[0000]")," LPT"]})})]})},De=({mintAddresses:e,amounts:s})=>(0,c.jsx)(r.Card,{bordered:!1,children:(0,c.jsxs)(r.Row,{gutter:[16,16],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Typography.Text,{children:"You will receive"})}),e.map(((e,t)=>(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Row,{gutter:[8,8],justify:"space-between",children:[(0,c.jsx)(r.Col,{children:(0,c.jsx)(X,{mintAddress:e,size:32})}),(0,c.jsx)(r.Col,{children:(0,c.jsx)(r.Typography.Title,{level:5,style:{margin:0},children:I(s[t]||0).format("0,0.[0000]")})})]})},t)))]})}),Me=({poolAddress:e,onClose:s=(()=>{})})=>{var t;const[i,d]=(0,a.useState)(BigInt(0)),[u,p]=(0,a.useState)(),[h,m]=(0,a.useState)([]),[x,y]=(0,a.useState)([0,0]),[g,j]=(0,a.useState)(!1),f=(0,n.useSelector)((e=>e.lpts)),w=Object.keys(f).find((s=>f[s].pool===e))||"",v=null===f||void 0===f||null===(t=f[w])||void 0===t?void 0:t.pool,{wallet:{address:b}}=(0,o.useWallet)(),{pools:C}=(0,o.usePool)(),{getMint:T}=(0,o.useMint)(),{mint_a:S,mint_b:k,mint_lpt:A,reserve_a:I,reserve_b:R}=(null===C||void 0===C?void 0:C[v])||{},B=[S,k],z=(0,a.useCallback)((async()=>{try{const{[A]:{supply:e}}=await T({address:A});p(e)}catch(e){}try{const{[S]:{decimals:e}}=await T({address:S}),{[k]:{decimals:s}}=await T({address:k});y([e,s])}catch(e){}}),[S,k,A,T]);return(0,a.useEffect)((()=>{if(u){const{deltaA:e,deltaB:s}=l.Swap.oracle.withdraw(i,u,I,R),t=[e,s].map(((e,s)=>l.utils.undecimalize(e,x[s])));m(t)}else m([])}),[I,R,i,u,x]),(0,a.useEffect)((()=>{z()}),[z]),(0,c.jsxs)(r.Row,{gutter:[16,16],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Typography.Title,{level:5,children:"Withdraw Liquidity"})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(Le,{lptAddress:w,onChange:d})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(De,{mintAddresses:B,amounts:h})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Button,{type:"primary",onClick:async()=>{if(!i)return;j(!0);const{swap:t,wallet:n,splt:o}=window.sentre,r=await Promise.all(B.map((e=>o.deriveAssociatedAddress(b,e))));if(n)try{const{txId:o}=await t.removeLiquidity(i,e,r[0],r[1],n);return s(),window.notify({type:"success",description:"Withdraw liquidity successfully. Click to view details.",onClick:()=>window.open(P(o),"_blank")})}catch(a){return window.notify({type:"error",description:a.message})}finally{j(!1)}},disabled:!i,block:!0,loading:g,children:"Withdraw"})})]})},Ee=({poolAddress:e,lpt:s})=>{const[t,n]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!1);return(0,c.jsxs)(r.Row,{gutter:[12,12],children:[(0,c.jsx)(r.Col,{span:12,children:(0,c.jsx)(r.Button,{onClick:()=>i(!0),icon:(0,c.jsx)(u,{name:"log-out-outline"}),disabled:!s,block:!0,children:"Withdraw"})}),(0,c.jsx)(r.Col,{span:12,children:(0,c.jsx)(r.Button,{onClick:()=>n(!0),type:"primary",icon:(0,c.jsx)(u,{name:"log-in-outline"}),block:!0,children:"Deposit"})}),(0,c.jsx)(r.Modal,{visible:t,onCancel:()=>n(!1),closeIcon:(0,c.jsx)(u,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,c.jsx)(ze,{poolAddress:e,onClose:()=>n(!1)})}),(0,c.jsx)(r.Modal,{visible:o,onCancel:()=>i(!1),closeIcon:(0,c.jsx)(u,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,c.jsx)(Me,{poolAddress:e,onClose:()=>i(!1)})})]})},_e={icon:"",symbol:"",name:"",address:"",rank:"",price:0,priceChange:0,totalVolume:0,decimals:0},Ne=({label:e="label",title:s="",subTitle:t=null})=>(0,c.jsxs)(r.Space,{direction:"vertical",size:4,children:[(0,c.jsx)(r.Typography.Text,{className:"caption",type:"secondary",children:e}),(0,c.jsx)("span",{children:s}),t&&(0,c.jsx)(r.Typography.Text,{type:"secondary",children:t})]}),Fe=({value:e=0,sub:s="",format:t=""})=>(0,c.jsxs)(r.Space,{size:4,align:"baseline",children:[(0,c.jsx)(r.Typography.Title,{level:4,children:I(e).format(t)}),s&&(0,c.jsx)(r.Typography.Text,{className:"caption",type:"secondary",children:s})]}),Oe=({poolAddress:e})=>{const[s,t]=(0,a.useState)([]),i=(0,n.useSelector)((s=>{var t,n,o;return null===(t=s.stat)||void 0===t||null===(n=t[e])||void 0===n||null===(o=n.details)||void 0===o?void 0:o.roi})),[d,u]=(0,a.useState)(0),p=(0,n.useSelector)((e=>e.lpts)),{getMint:h}=(0,o.useMint)(),{pools:m}=(0,o.usePool)(),x=(null===m||void 0===m?void 0:m[e])||{},{mint_lpt:y}=x,g=J(y),j=Object.keys(p).find((s=>p[s].pool===e))||"",{amount:f}=p[j]||{},w=Number(l.utils.undecimalize(f||BigInt(0),9)),v=(0,a.useCallback)((e=>i&&e?Math.pow(i/100+1,e)-1:0),[i]),b=(0,a.useCallback)((async()=>{if(!l.account.isAddress(y))return 0;const{[y]:{decimals:e,supply:s}}=await h({address:y});u(Number(l.utils.undecimalize(s,e)))}),[h,y]);(0,a.useEffect)((()=>{b()}),[b]);const T=e=>{if(!e||!x)return 0;const{address:s,decimals:t}=e,n=((e,s)=>{const{mint_a:t,mint_b:n,reserve_a:o,reserve_b:r}=s;return e===t?o:e===n?r:BigInt(0)})(s,x);return Number(l.utils.undecimalize(n,t))},S=(0,a.useCallback)((async()=>{if(!g)return;const e=g.map((async e=>{var s;const t=null===e||void 0===e||null===(s=e.extensions)||void 0===s?void 0:s.coingeckoId;if(!t)return _e;return{...await C(t),decimals:e.decimals,address:e.address}})),s=await Promise.all(e);t(s)}),[g]);return(0,a.useEffect)((()=>{S()}),[S]),(0,c.jsx)(r.Card,{bordered:!1,children:(0,c.jsxs)(r.Row,{gutter:[24,24],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Typography.Title,{level:4,children:"Liquidity Position"})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Row,{gutter:[20,20],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(Ne,{label:"APY",title:(0,c.jsx)(Fe,{value:v(365),format:"0,0.[00]%"})})}),(0,c.jsx)(r.Col,{xs:7,sm:12,children:(0,c.jsx)(Ne,{label:"Your LPT",title:(0,c.jsx)(Fe,{value:w,sub:"LPT",format:"0,0.[0000]a"})})}),(0,c.jsx)(r.Col,{xs:17,sm:12,children:(0,c.jsx)(Ne,{label:"Pool Share Composition",title:(0,c.jsx)(r.Space,{size:4,align:"baseline",children:s.map(((e,t)=>{const n=T(e);return(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(Fe,{value:n,sub:e.symbol,format:"0,0.[00]a"}),s.length>t+1&&(0,c.jsx)(r.Typography.Title,{level:5,children:"+"})]},n+t)}))})})}),(0,c.jsx)(r.Col,{xs:7,sm:12,children:(0,c.jsx)(Ne,{label:"My Portion",title:(0,c.jsx)(Fe,{value:w/d,format:"0,0.[00]%"}),subTitle:I(d).format("0,0.[0000]a")})}),(0,c.jsx)(r.Col,{xs:17,sm:12,children:(0,c.jsx)(Ne,{label:"In - Pool Price",title:(0,c.jsx)(Ae,{poolAddress:e})})})]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(Ee,{lpt:w,poolAddress:e})})]})})};let qe;const Ye=(0,a.forwardRef)((({max:e,onChange:s,...t},n)=>{var o;const[i,l]=(0,a.useState)(""),[d,p]=(0,a.useState)(null),h=(0,a.useRef)(n),m=(0,a.useCallback)((t=>{const n=e=>{qe&&(clearTimeout(qe),qe=void 0),l(e),qe=setTimeout((()=>l("")),500)};return/^\d*(\.\d*)?$/.test(t)?e&&parseFloat(t)>parseFloat(e)?n("Not enough balance"):s(t):n("Invalid character")}),[e,s]);return null===h||void 0===h||null===(o=h.current)||void 0===o||o.setSelectionRange(d,d),(0,c.jsx)(r.Tooltip,{title:(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(u,{name:"warning"}),i]}),visible:!!i,children:(0,c.jsx)(r.Input,{...t,onChange:e=>{p(e.target.selectionStart),m(e.target.value||"")},ref:h})})})),Ue=({title:e,label:s,ratio:t,currentRatio:n="0",onChange:o=(()=>{})})=>(0,c.jsxs)(r.Row,{gutter:[4,4],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Typography.Text,{type:"secondary",children:e})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Card,{bodyStyle:{padding:4},bordered:!1,children:(0,c.jsx)(Ye,{placeholder:0,value:t,onChange:o,bordered:!1})})}),(0,c.jsx)(r.Col,{span:24,style:{fontSize:12},children:(0,c.jsxs)(r.Space,{size:4,children:[(0,c.jsxs)(r.Typography.Text,{type:"secondary",children:[s,":"]}),(0,c.jsxs)(r.Typography.Text,{children:[n,"%"]})]})})]}),Ve=({address:e})=>{const{pools:s}=(0,o.usePool)(),{wallet:{address:t}}=(0,o.useWallet)(),[n,i]=(0,a.useState)(""),[d,p]=(0,a.useState)(""),[h,m]=(0,a.useState)(!1),x=s[e],{fee_ratio:y,tax_ratio:g}=x||{},j=(0,a.useMemo)((()=>y?l.utils.undecimalize(y,7):"0"),[y]),f=(0,a.useMemo)((()=>g?l.utils.undecimalize(g,7):"0"),[g]);return x&&t===x.owner?(0,c.jsxs)(r.Row,{gutter:[16,24],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Row,{gutter:[4,4],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(Ue,{title:"Fee (%)",label:"Current fee",ratio:n,currentRatio:j,onChange:i})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(Ue,{title:"Tax (%)",label:"Current tax",ratio:d,currentRatio:f,onChange:p})})]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Button,{onClick:async()=>{m(!0);const s=l.utils.decimalize(n||j,7),t=l.utils.decimalize(d||f,7),{swap:o,wallet:r}=window.sentre;if(!r)return;const{txId:a}=await o.updateFee(s,t,e,r);return m(!1),a?(i(""),p(""),window.notify({type:"success",description:"Update fee successfully. Click to view details",onClick:()=>window.open(P(a),"_blank")})):window.notify({type:"error",description:"Update fee make failure."})},icon:(0,c.jsx)(u,{name:"cash-outline"}),block:!0,loading:h,disabled:!d&&!n,children:"Update Fee"})})]}):null};var He;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(He||(He={}));const We=({poolStatus:e,description:s})=>{const t=e===He.Active;return(0,c.jsxs)(r.Row,{gutter:[16,16],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Space,{size:0,children:[(0,c.jsx)(r.Badge,{status:t?"success":"error"}),(0,c.jsxs)(r.Typography.Text,{children:["Current status: ",t?"Active":"Frozen"]})]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Card,{bordered:!1,bodyStyle:{padding:16},children:(0,c.jsxs)(r.Space,{size:4,align:"start",children:[(0,c.jsx)(u,{name:"information-circle-outline"}),(0,c.jsx)(r.Space,{direction:"vertical",size:0,children:(0,c.jsx)(r.Typography.Text,{children:s})})]})})})]})},Ze=({address:e})=>{const{pools:s}=(0,o.usePool)(),{wallet:{address:t}}=(0,o.useWallet)(),[n,i]=(0,a.useState)(!1),l=s[e],d=(0,a.useMemo)((()=>{const e=null===l||void 0===l?void 0:l.state;return e===He.Active?(0,c.jsx)(We,{poolStatus:e,description:"Freezing a pool will prevent all actions until the pool has been thawed."}):e===He.Frozen?(0,c.jsx)(We,{poolStatus:e,description:"Thaw a pool will active all actions"}):"Pool is closed"}),[null===l||void 0===l?void 0:l.state]);return l&&t===l.owner?(0,c.jsxs)(r.Row,{gutter:[24,24],children:[(0,c.jsx)(r.Col,{span:24,children:d}),(0,c.jsx)(r.Col,{span:24,children:(null===l||void 0===l?void 0:l.state)===He.Active?(0,c.jsx)(r.Button,{style:{background:"#40A9FF",color:"#fff"},onClick:async()=>{i(!0);const{swap:s,wallet:t}=window.sentre;if(!t)return;const{txId:n}=await s.freezePool(e,t);return i(!1),n?window.notify({type:"success",description:"Freeze the pool successfully. Click to view details",onClick:()=>window.open(P(n),"_blank")}):window.notify({type:"error",description:"Freeze the pool make failure."})},icon:(0,c.jsx)(u,{name:"snow-outline"}),block:!0,loading:n,children:"Freeze Pool"}):(0,c.jsx)(r.Button,{type:"primary",onClick:async()=>{i(!0);const{swap:s,wallet:t}=window.sentre;if(!t)return;const{txId:n}=await s.thawPool(e,t);return i(!1),n?window.notify({type:"success",description:"Thaw the pool successfully. Click to view details",onClick:()=>window.open(P(n),"_blank")}):window.notify({type:"error",description:"Thaw the pool make failure."})},icon:(0,c.jsx)(u,{name:"sunny-outline"}),block:!0,loading:n,children:"Thaw Pool"})})]}):null},Ge=({address:e})=>{const{pools:s}=(0,o.usePool)(),{wallet:{address:t}}=(0,o.useWallet)(),[n,i]=(0,a.useState)(""),[d,p]=(0,a.useState)(!1),h=s[e];return h&&t===h.owner?(0,c.jsxs)(r.Row,{gutter:[16,16],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Space,{align:"start",children:[(0,c.jsx)(u,{name:"information-circle-outline"}),(0,c.jsx)(r.Typography.Text,{children:"Your current account will lose the pool control when you transfer ownership."})]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Card,{bodyStyle:{padding:8},bordered:!1,children:(0,c.jsxs)(r.Row,{gutter:[0,0],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Typography.Text,{style:{marginLeft:12,fontSize:12},type:"secondary",children:"Transfer to Owner"})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Input,{placeholder:"E.g. AgTMC...",value:n,onChange:e=>i(e.target.value),bordered:!1})})]})})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(r.Button,{onClick:async()=>{const{swap:s,wallet:t}=window.sentre;if(!t)return;p(!0);const{txId:o}=await s.transferPoolOwnership(e,n,t);return p(!1),o?window.notify({type:"success",description:"Transfer successfully. Click to view details",onClick:()=>window.open(P(o),"_blank")}):window.notify({type:"error",description:"Transfer make failure."})},icon:(0,c.jsx)(u,{name:"airplane-outline"}),disabled:!l.account.isAddress(n),loading:d,block:!0,children:"Transfer"})})]}):null};function Ke({poolAddress:e}){const{wallet:{address:s}}=(0,o.useWallet)(),{pools:t}=(0,o.usePool)(),n=null===t||void 0===t?void 0:t[e];return n&&s===n.owner?(0,c.jsx)(r.Col,{xs:24,lg:12,children:(0,c.jsx)(r.Card,{style:{minHeight:285},bodyStyle:{padding:0},bordered:!1,children:(0,c.jsxs)(r.Tabs,{style:{padding:24},children:[(0,c.jsx)(r.Tabs.TabPane,{tab:"Freeze/Thaw",children:(0,c.jsx)(Ze,{address:e})},"freeze-thaw"),(0,c.jsx)(r.Tabs.TabPane,{tab:"Fee",children:(0,c.jsx)(Ve,{address:e})},"fee"),(0,c.jsx)(r.Tabs.TabPane,{tab:"Transfer Owner",children:(0,c.jsx)(Ge,{address:e})},"transfer-owner")]})})}):null}var Qe=t(4550),Je=t.n(Qe),Xe=t(76907),$e=t.n(Xe),es=t(21111),ss=t.n(es);const ts=({chartData:e=[],labels:s=[],type:t="line",configs:n,disableAxe:o=!1,chartId:r="sen_chart"})=>{const{backgroundColor:i}=n||{},[l,d]=(0,a.useState)(!1),u=(0,a.useCallback)(((e,s,t)=>({labels:s,datasets:[{...n,data:e,backgroundColor:t}]})),[n]),p=(0,a.useRef)(null),h=(0,a.useCallback)((()=>{var e,s;if(!p||!i)return"#dadada";const n=null===p||void 0===p||null===(e=p.current)||void 0===e||null===(s=e.canvas)||void 0===s?void 0:s.getContext("2d"),o=null===n||void 0===n?void 0:n.createLinearGradient(0,0,0,270);null===o||void 0===o||o.addColorStop(0,i),null===o||void 0===o||o.addColorStop(1,`${i}00`);return"line"===t?o:i}),[i,t]);return(0,a.useEffect)((()=>{var t;const n=p.current,o=null===n||void 0===n||null===(t=n.data.datasets)||void 0===t?void 0:t.find((({data:e})=>e)),r=ss()(null===o||void 0===o?void 0:o.data,e);n&&!r&&(n.data=u(e,s,h()),null===n||void 0===n||n.update())}),[e,u,h,s]),(0,c.jsx)("canvas",{id:r,height:"270",ref:e=>{if(!e)return;const s=e.getContext("2d");s&&!l&&(p.current=new($e())(s,{type:t,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o,beginAtZero:!1,maxTicksLimit:8,callback:function(e,s,t){return I(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,s)=>{const t=document.getElementById(r);t&&(t.style.cursor=s[0]?"pointer":"default")}}}}),d(!0))}})};var ns=t(20418);const os=1e3;let rs;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(rs||(rs={}));class as{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const s=new as,t=e*os;return s.setMilliSeconds(t),s}static fromYmd(e){const s=new as,t=Je()(e,rs.YMD).valueOf();return s.setMilliSeconds(t),s}static getListDate(e,s){const t=[];let n=as.fromYmd(e);const o=as.fromYmd(s);for(;n.ymd()<=o.ymd();)t.push(n.ymd()),n=n.addDay();return t}format(e){const s=new Date(this.milliSeconds);return Je()(s).format(e)}subtractDay(e=1){const s=Je()(this.milliSeconds).subtract(e,"days").valueOf();return as.fromSeconds(s/os)}addDay(e=1){const s=Je()(this.milliSeconds).add(e,"days").valueOf();return as.fromSeconds(s/os)}seconds(){return(this.milliSeconds-this.milliSeconds%os)/os}ymd(){return Number(this.format(rs.YMD))}static today(e=rs.YMD){return Je()().format(e)}}class is{constructor(){this.programId="",this.time=0,this.address="",this.mint="",this.actionType="",this.amountIn=BigInt(0),this.amountOut=BigInt(0),this.totalTrans=0}}class ls{parserDailyReport(e){let s=new Array;for(const t of e)s=s.concat(this.parseDailyReport(t));return this.mergeDailyReport(s)}parseDailyReport(e){const s=new Array,{programId:t,time:n,actionType:o,actionTransfers:r}=e;for(const a of r){const{source:e,destination:r,amount:i}=a,l=new is;if(l.programId=t,l.time=n,l.actionType=o,e){const{mint:t,address:n}=e;s.push({...l,mint:t,address:n,amountOut:BigInt(i)})}if(r){const{mint:e,address:t}=r;s.push({...l,mint:e,address:t,amountIn:BigInt(i)})}}return s}mergeDailyReport(e){const s=new Map;for(const n of e){const e=`${n.time}^${n.address}^${n.mint}^${n.actionType}`;if(s.has(e)){const t=s.get(e);void 0!==t&&(n.amountIn+=t.amountIn,n.amountOut+=t.amountOut,n.totalTrans+=t.totalTrans)}s.set(e,n)}const t=new Array;return s.forEach((e=>t.push(e))),t}}var ds=t(74370),cs=t(70320);class us{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class ps{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class hs{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}var ms=t(71256);const xs=700;class ys{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,s,t=700){t>xs&&(t=xs);const n={limit:t,before:s};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let s=[];const t=[];for(let o=0;o<=e.length/200;o++){const s=200*o,n=e.slice(s,s+200);t.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(t);for(const o of n)s=s.concat(o);return s}async fetchTransactions(e,s){const t=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:o,lastSignature:r,limit:a}=s;n=Math.floor(n||0),o=Math.floor(o||t);const i=new ms.PublicKey(e);let l=[],d=!1;for(;!d;){const e=await this.fetchSignatures(i,r,a);if(null===e||void 0===e||!e.length||d)break;for(const s of e){const e=s.blockTime;if(e&&!(e>o)){if(e<n){d=!0;break}r=s.signature,l.push(s.signature)}}if(a&&l.length>=a)break;if((null===e||void 0===e?void 0:e.length)<xs)break}return await this.fetchConfirmTransaction(l)}}let gs;!function(e){e.Transfer="transfer"}(gs||(gs={}));var js=t(97429).Buffer;const fs={key:"code",type:"u8"};let ws;!function(e){e.InitPool="INITIALIZE_POOL",e.AddLiquidity="ADD_LIQUIDITY",e.RemoveLiquidity="REMOVE_LIQUIDITY",e.Swap="SWAP",e.Route="SWAP"}(ws||(ws={}));const vs={0:ws.InitPool,1:ws.AddLiquidity,2:ws.RemoveLiquidity,3:ws.Swap,8:ws.Route};class bs extends class{constructor(){this.parseAction=e=>""}async collect(e,s,t){let{lastSignature:n,limit:o}=s;const r=new ys;let a=[],i=n,l=!1,d=100;for(;!l;){const n=await r.fetchTransactions(e,{...s,lastSignature:i,limit:d});for(const e of n){i=e.transaction.signatures[0];const s=this.parseTransLog(e);if(s){if(t){if(!await t(s))continue}if(a.push(s),o&&a.length>=o){l=!0;break}}}if(o&&(d=d*o/(a.length||1)),!n.length)break;if(l)break}return a}parseTransLog(e){var s,t;const{blockTime:n,meta:o,transaction:r}=e;if(!n||!o)return;const{postTokenBalances:a,preTokenBalances:i,postBalances:l,preBalances:d}=o,{signatures:c,message:u}=r,p=(null===(s=o.innerInstructions)||void 0===s||null===(t=s[0])||void 0===t?void 0:t.instructions)||[],h=u.instructions[0]||[],m=new us;m.signature=c[0],m.blockTime=n,m.time=as.fromSeconds(n).ymd(),m.programId=h.programId.toString();const x=this.parseAccountInfo(u.accountKeys,a||[],i||[],l,d);return this.isParsedInstruction(h)?(m.programTransfer=this.parseListActionTransfer([h],x),m):(m.actionTransfers=this.parseListActionTransfer(p,x),m.programInfo={programId:h.programId.toString(),data:h.data},m.actionType="",m.actionType=this.parseAction(m),m)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,s){const t=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===gs.Transfer){const n=e.info,o=this.parseActionTransfer(n,s);o&&t.push(o)}}return t}parseActionTransfer(e,s){const{source:t,destination:n,amount:o,lamports:r}=e,a=o||r.toString();if(!a||!s.has(t)||!s.has(n))return;const i=new hs;return i.source=s.get(t),i.destination=s.get(n),i.amount=a,i}parseAccountInfo(e,s,t,n,o){const r=new Map;for(const a of s){const{accountIndex:s,mint:t,uiTokenAmount:n}=a,o=new ps;o.address=e[s].pubkey.toString(),o.postBalance=n.amount,o.mint=t,o.decimals=n.decimals,r.set(o.address,o)}for(const a of t){const{accountIndex:s,uiTokenAmount:t}=a,n=e[s].pubkey.toString(),o=r.get(n)||new ps;o.preBalance=t.amount,r.set(o.address,o)}return e.forEach(((e,s)=>{const t=e.pubkey.toString();if(!l.account.isAssociatedAddress(t)){const e=r.get(t)||new ps;e.address=t,e.mint="11111111111111111111111111111111",e.postBalance=String(n[s]||0),e.preBalance=String(o[s]||0),e.decimals=9,r.set(e.address,e)}})),r}}{constructor(...e){super(...e),this.parseAction=e=>{var s;const t=null===(s=e.programInfo)||void 0===s?void 0:s.data,n=(0,ds.base58_to_binary)(t),o=new cs.struct([fs]).fromBuffer(js.from(n));return vs[o.code]||""}}}class Cs{constructor(e){this.poolAddress=void 0,this.poolData=void 0,this.poolTransLogService=new bs,this.dailyReportService=new ls,this.tokenProvider=new ns.Z,this.getPoolData=async()=>{if(!this.poolData){const e=window.sentre.swap;this.poolData=await e.getPoolData(this.poolAddress)}return this.poolData},this.getUsd=async(e,s)=>{const t=await this.tokenProvider.findByAddress(e);if(!t)return 0;const{decimals:n,extensions:o}=t;try{const e=await C(null===o||void 0===o?void 0:o.coingeckoId);if(null===e||void 0===e||!e.price)return 0;const t=l.utils.undecimalize(s,n);return Number(t)*e.price}catch(r){return 0}},this.getDailyInfo=async()=>{let e=new as;const s=(new as).subtractDay(11),{mint_a:t,mint_b:n,treasury_a:o,treasury_b:r,reserve_a:a,reserve_b:i,fee_ratio:d,tax_ratio:c}=await this.getPoolData(),u=await this.poolTransLogService.collect(this.poolAddress,{secondFrom:s.seconds(),secondTo:e.seconds()}),p=this.dailyReportService.parserDailyReport(u),h={};for(const l of p){const{time:e,address:s}=l;s!==o&&s!==r||(h[e]||(h[e]=[]),h[e].push(l))}const m=await this.getUsd(t,a),x=await this.getUsd(n,i),y={};for(y[e.ymd()]={tvl:m+x,fee:0,volume:0};e.ymd()>s.ymd();){const t=h[e.ymd()]||[],n=y[e.ymd()],o=e.subtractDay(1);!y[o.ymd()]&&o.ymd()>=s.ymd()&&(y[o.ymd()]={tvl:n.tvl,fee:0,volume:0});for(const s of t){const t=await this.getUsd(s.mint,s.amountOut),n=await this.getUsd(s.mint,s.amountIn);if(y[o.ymd()]&&(y[o.ymd()].tvl+=t-n,y[o.ymd()].tvl<0&&(y[o.ymd()].tvl=0)),s.actionType===ws.Swap){y[e.ymd()].volume+=n+t;const s=Number(l.utils.undecimalize(d+c,9))*t;y[e.ymd()].fee+=s}}e=e.subtractDay(1)}return y},this.poolAddress=e}}const Ts="#40A9FF",Ss=0,ks=14,As="TVL",Ps="transparent",Is=()=>{var e;const{selectedPoolAddress:s}=(0,n.useSelector)((e=>e.main)),[t,o]=(0,a.useState)([]),[i,l]=(0,a.useState)(!1),d={borderColor:Ps,borderRadius:Ss,pointRadius:Ss,tooltip:As,pointHitRadius:ks,pointHoverRadius:Ss,backgroundColor:Ts},u=(0,a.useCallback)((async()=>{if(s)try{l(!0);const e=new Cs(s),t=await f.load("getDailyInfo"+s,e.getDailyInfo,{cache:{ttl:3e5}}),n=Object.keys(t).map((e=>({data:t[e].tvl,label:Je()(e,"YYYYMMDD").format("DD/MM")})));o(n)}catch(e){}finally{l(!1)}}),[s]);return(0,a.useEffect)((()=>{u()}),[u]),(0,c.jsx)(r.Card,{bordered:!1,style:{height:"auto"},children:(0,c.jsx)(r.Spin,{tip:"Loading...",spinning:i,children:(0,c.jsxs)(r.Row,{gutter:[24,24],children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsx)(r.Typography.Title,{level:4,children:"Total Value Locked"})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Typography.Title,{level:2,children:["$",I(null===(e=t.at(-1))||void 0===e?void 0:e.data).format("0,0.[0]a")]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(ts,{chartData:t.map((e=>e.data)),labels:t.map((e=>e.label)),configs:d})})]})})})},Rs="#40A9FF",Bs=0,zs=14,Ls="TVL",Ds="transparent",Ms=()=>{const{selectedPoolAddress:e}=(0,n.useSelector)((e=>e.main)),[s,t]=(0,a.useState)([]),[o,i]=(0,a.useState)(!1),l={borderColor:Ds,borderRadius:Bs,pointRadius:Bs,tooltip:Ls,pointHitRadius:zs,pointHoverRadius:Bs,backgroundColor:Rs},d=(0,a.useCallback)((async()=>{if(e)try{i(!0);const s=new Cs(e),n=await f.load("getDailyInfo"+e,s.getDailyInfo,{cache:{ttl:3e5}}),o=Object.keys(n).map((e=>({data:n[e].volume,label:Je()(e,"YYYYMMDD").format("DD/MM")})));t(o)}catch(s){}finally{i(!1)}}),[e]);(0,a.useEffect)((()=>{d()}),[d]);const u=(0,a.useMemo)((()=>{var e,t;const n=(null===(e=s.at(-1))||void 0===e?void 0:e.data)||0,o=(null===(t=s.at(-2))||void 0===t?void 0:t.data)||0;return n+(new Date).getHours()*o/24}),[s]);return(0,c.jsx)(r.Card,{bordered:!1,style:{height:384},children:(0,c.jsx)(r.Spin,{tip:"Loading...",spinning:o,children:(0,c.jsxs)(r.Row,{gutter:[24,24],children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsx)(r.Typography.Title,{level:4,children:"24h Volume"})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Typography.Title,{level:2,children:["$",I(u).format("0,0.[0]a")]})}),(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(ts,{type:"bar",chartData:s.map((e=>e.data)),labels:s.map((e=>e.label)),configs:l})})]})})})};var Es=t(51518),_s=t.n(Es);const Ns=({poolAddress:e})=>{const[s,t]=(0,a.useState)(!1),n=(0,i.useHistory)(),{pools:l}=(0,o.usePool)(),{mint_lpt:d}=(null===l||void 0===l?void 0:l[e])||{},p=(0,a.useCallback)((()=>n.push(`/app/sen_farming?mintAddress=${d}`)),[n,d]);return(0,c.jsxs)(r.Row,{gutter:[16,16],children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(X,{mintAddress:d,size:32}),(0,c.jsx)(ee,{mintAddress:d})]})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(r.Popover,{placement:"left",content:(0,c.jsxs)(r.Space,{children:[(0,c.jsxs)(r.Typography.Text,{children:["PoolAddress: ",e]}),(0,c.jsx)(r.Tooltip,{title:"Copied",visible:s,arrowPointAtCenter:!0,children:(0,c.jsx)(_s(),{text:e,children:(0,c.jsx)(r.Button,{type:"text",size:"small",icon:(0,c.jsx)(u,{name:"copy-outline"}),onClick:async()=>{var e;t(!0),await(e=1500,new Promise((s=>setTimeout(s,e)))),t(!1)}})})})]}),children:(0,c.jsx)(u,{name:"alert-circle-outline"})}),(0,c.jsx)(r.Button,{onClick:p,children:"Go Farming"})]})})]})},Fs=()=>{const{selectedPoolAddress:e}=(0,n.useSelector)((e=>e.main));return(0,c.jsxs)(r.Row,{gutter:[24,24],children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(Ns,{poolAddress:e})}),(0,c.jsx)(r.Col,{xs:24,lg:12,children:(0,c.jsx)(Is,{})}),(0,c.jsx)(r.Col,{xs:24,lg:12,children:(0,c.jsx)(Ms,{})}),(0,c.jsx)(r.Col,{xs:24,lg:12,children:(0,c.jsx)(Oe,{poolAddress:e})}),(0,c.jsx)(Ke,{poolAddress:e})]})},Os=({width:e})=>{const s=(0,n.useDispatch)();return e>1200?null:(0,c.jsx)(r.Affix,{style:{position:"fixed",bottom:80,right:16},children:(0,c.jsx)(r.Button,{type:"primary",onClick:()=>s(ae(!0)),icon:(0,c.jsx)(u,{name:"list-outline"}),children:"Pools"})})},qs="lpts",Ys=(0,L.createAsyncThunk)("lpts/getLPTs",(async({accounts:e})=>{const{splt:s,swap:t}=window.sentre,n=e.map((({mint:e})=>e)).map((e=>l.account.fromAddress(e))),o=(await l.utils.wrappedGetMultipleAccountsInfo(s.connection,n)).map((e=>null!==e&&void 0!==e&&e.data?s.parseMintData(e.data):null));if(null===o||void 0===o||!o.length)return{};const r=await Promise.all(o.map((async e=>{try{const{mint_authority:s,freeze_authority:n}=e||{};if(!l.account.isAddress(s)||!l.account.isAddress(n))return;return await t.derivePoolAddress(s,n)}catch(s){return}})));let a={};return e.forEach((({address:e,...s},t)=>{const n=r[t];l.account.isAddress(n)&&(a[e]={...s,pool:n})})),a})),Us=(0,L.createAsyncThunk)("lpts/getLPT",(async({address:e},{getState:s})=>{if(!l.account.isAddress(e))throw new Error("Invalid account address");const{lpts:{[e]:t}}=s();if(t)return{[e]:t};const{swap:n}=window.sentre;return{[e]:await n.getLPTData(e)}})),Vs=(0,L.createAsyncThunk)("lpts/upsetLPT",(async({address:e,data:s},{getState:t})=>{if(!l.account.isAddress(e))throw new Error("Invalid address");if(!s)throw new Error("Data is empty");const{lpts:{[e]:n}}=t(),{pool:o}=n||{};if(l.account.isAddress(o))return{[e]:{...s,pool:o}};const{swap:r}=window.sentre;return{[e]:await r.getLPTData(e)}})),Hs=(0,L.createAsyncThunk)("lpts/deleteLPT",(async({address:e})=>{if(!l.account.isAddress(e))throw new Error("Invalid address");return{address:e}})),Ws=(0,L.createSlice)({name:qs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ys.fulfilled,((e,{payload:s})=>s)).addCase(Us.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(Vs.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(Hs.fulfilled,((e,{payload:s})=>{delete e[s.address]}))}}).reducer;let Zs=0;const Gs=()=>{const e=(0,n.useDispatch)(),{accounts:s}=(0,o.useAccount)(),{wallet:{address:t}}=(0,o.useWallet)(),r=(0,a.useMemo)((()=>Object.keys(s).map((e=>({address:e,...s[e]})))),[s]),i=(0,a.useCallback)((async()=>{try{await e(Ys({accounts:r})).unwrap()}catch(s){await ge(s)}}),[e,r]),l=(0,a.useCallback)((async()=>{if(Zs)return console.warn("Already watched");const s=[{memcmp:{bytes:t,offset:32}}];Zs=window.sentre.splt.watch(((s,t)=>{if(s)return console.error(s);const{address:n,data:o}=t;return e(Vs({address:n,data:o}))}),s)}),[e,t]);return(0,a.useEffect)((()=>(i(),l(),()=>{(async()=>{try{await window.sentre.splt.unwatch(Zs)}catch(e){}})(),Zs=0})),[i,l]),(0,c.jsx)(a.Fragment,{})},Ks=()=>{const{ui:{width:e}}=(0,o.useUI)(),s=e<1200,t=(0,n.useDispatch)(),a=(0,n.useSelector)((e=>{var s;return null===(s=e.main)||void 0===s?void 0:s.visible}));return(0,c.jsxs)(r.Row,{gutter:[24,24],style:{paddingBottom:12},children:[s?(0,c.jsx)(r.Modal,{visible:a,onCancel:()=>t(ae(!1)),footer:null,centered:!0,forceRender:!0,title:(0,c.jsx)(r.Typography.Title,{level:4,children:"Pool Selection"}),bodyStyle:{maxHeight:400,overflow:"auto",padding:0},children:(0,c.jsx)(Se,{})}):(0,c.jsx)(r.Col,{lg:8,xl:6,children:(0,c.jsx)(r.Card,{className:"side-bar",bodyStyle:{padding:0},bordered:!1,children:(0,c.jsx)(Se,{})})}),(0,c.jsx)(r.Col,{xs:24,lg:24,xl:18,children:(0,c.jsx)(Fs,{})}),(0,c.jsx)(Os,{width:e}),(0,c.jsx)(Gs,{})]})},Qs=()=>{const e=(0,n.useDispatch)();return(0,a.useEffect)((()=>{e(re("sentre"))}),[e]),(0,c.jsxs)(r.Row,{gutter:24,align:"middle",className:"header-widget",children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsx)(r.Typography.Text,{style:{color:"#e9e9eb "},children:"Pools list by"})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Select,{defaultValue:"sentre",onChange:s=>{e(re(s))},className:"header-select",children:[(0,c.jsx)(r.Select.Option,{value:"sentre",children:"Sentre"}),(0,c.jsx)(r.Select.Option,{value:"community",children:"Community"}),(0,c.jsx)(r.Select.Option,{value:"deposited",children:"Deposited"}),(0,c.jsx)(r.Select.Option,{value:"your-pools",children:"Your pools"})]})})]})},Js=({poolAddress:e,isDisabled:s})=>{const t=(0,i.useHistory)(),{swapRoute:{swapRoute:n}}=q,o=s=>{t.push({pathname:n,state:{poolAddress:e,originalRoute:s}})};return(0,c.jsxs)(r.Row,{gutter:[24,12],style:{width:260},children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsxs)(r.Space,{direction:"vertical",size:0,children:[(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(u,{style:{color:"#FA8C16"},name:"alert-circle-outline"}),(0,c.jsx)(r.Typography.Title,{level:5,children:"Choose the route?"})]}),(0,c.jsx)(r.Typography.Text,{type:"secondary",children:"We recommend choosing the best route to optimize the price."})]})}),(0,c.jsx)(r.Col,{style:{textAlign:"right"},span:24,children:(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(r.Button,{size:"small",disabled:s,onClick:()=>o(!0),children:"Original route"}),(0,c.jsx)(r.Button,{size:"small",onClick:()=>o(!1),type:"primary",children:"Best route"})]})})]})},Xs=({data:e,onClick:s=(()=>{}),action:t=(0,c.jsx)(a.Fragment,{}),keyExpand:n})=>{var i;const{pool:d,amount:p}=e,[h,m]=(0,a.useState)(!1),x=l.utils.undecimalize(p,9),{pools:y}=(0,o.usePool)(),g=(null===y||void 0===y?void 0:y[d].state)===B.Frozen,j=(null===y||void 0===y||null===(i=y[d])||void 0===i?void 0:i.mint_lpt)||"",f=h?"":"expandHidden",w=n.toString();return(0,c.jsxs)(r.Card,{bodyStyle:{padding:12,minHeight:78},hoverable:!0,children:[(0,c.jsxs)(r.Row,{gutter:[12,12],align:"top",children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsxs)(r.Space,{direction:"vertical",children:[(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(X,{mintAddress:j,size:24}),(0,c.jsx)(r.Typography.Text,{type:g?"secondary":void 0,children:(0,c.jsx)(ee,{mintAddress:j})})]}),(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(r.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,c.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,c.jsx)(r.Typography.Text,{children:(0,c.jsx)(R,{poolAddress:d})}),(0,c.jsx)(r.Divider,{type:"vertical",style:{margin:0}}),(0,c.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"Your LPT:"}),(0,c.jsx)(r.Typography.Text,{children:I(x).format("0,0.[00]")})]})]})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Space,{size:2,children:[(0,c.jsx)(z,{poolAddress:d}),t,(0,c.jsx)(r.Button,{size:"small",type:"text",icon:(0,c.jsx)(u,{name:h?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>m(!h)})]})})]}),(0,c.jsx)(r.Collapse,{className:f,style:{marginTop:16},ghost:!0,activeKey:w,bordered:!1,children:(0,c.jsx)(r.Collapse.Panel,{header:"",children:(0,c.jsxs)(r.Row,{gutter:[16,16],children:[(0,c.jsx)(r.Col,{span:12,children:(0,c.jsx)(r.Popover,{trigger:"click",placement:"bottomLeft",content:(0,c.jsx)(Js,{isDisabled:g,poolAddress:d}),children:(0,c.jsx)(r.Button,{block:!0,children:"Swap"})})}),(0,c.jsx)(r.Col,{span:12,children:(0,c.jsx)(r.Button,{onClick:s,block:!0,type:"primary",children:"Detail"})})]})},w)})]})},$s=({onInit:e=(()=>{}),onClick:s=(()=>{}),action:t=(()=>(0,c.jsx)(a.Fragment,{}))})=>{const i=(0,n.useSelector)((e=>e.lpts)),l=(0,n.useSelector)((e=>e.main.selectedCategoryPool)),{pools:d}=(0,o.usePool)(),{wallet:{address:u}}=(0,o.useWallet)(),h=(0,a.useMemo)((()=>Object.keys(i).filter((e=>{const{pool:s,amount:t}=i[e];return"deposited"===l&&t!==BigInt(0)||"your-pools"===l&&d[s].owner===u?d[s]:null}))),[d,i,u,l]);return(0,a.useEffect)((()=>{h.length&&e(h[0])}),[e,h,i]),(0,c.jsx)(r.Row,{gutter:[12,12],children:h.map(((e,n)=>{const{pool:o}=i[e];return(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(Xs,{keyExpand:n+1,data:i[e],action:t(e,o),onClick:()=>s(o)})})},e+n)}))})},et=({poolAddress:e,onClick:s=(()=>{}),action:t=(0,c.jsx)(a.Fragment,{}),keyExpand:i})=>{const l=(0,n.useDispatch)(),[d,p]=(0,a.useState)(!1),{pools:h}=(0,o.usePool)(),m=(0,n.useSelector)((s=>{var t;return null===(t=s.stat[e])||void 0===t?void 0:t.details})),x=(null===h||void 0===h?void 0:h[e])||{},{mint_lpt:y,state:g}=x,j=(0,a.useMemo)((()=>{if(!m||!m.roi)return 0;const e=m.roi;return Math.pow(1+Number(e)/100,365)-1}),[m]);(0,a.useEffect)((()=>{e&&l(K({address:e}))}),[l,e]);const f=g===B.Frozen,w=d?"":"expandHidden",v=i.toString();return(0,c.jsxs)(r.Card,{bodyStyle:{padding:12,minHeight:78},hoverable:!0,children:[(0,c.jsxs)(r.Row,{gutter:[12,12],align:"top",children:[(0,c.jsx)(r.Col,{flex:"auto",children:(0,c.jsxs)(r.Space,{direction:"vertical",children:[(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(X,{mintAddress:y,size:24}),(0,c.jsx)(r.Typography.Text,{type:f?"secondary":void 0,children:(0,c.jsx)(ee,{mintAddress:y})})]}),(0,c.jsxs)(r.Space,{children:[(0,c.jsx)(r.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,c.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,c.jsx)(r.Typography.Text,{children:(0,c.jsx)(R,{poolAddress:e})}),(0,c.jsx)(r.Divider,{type:"vertical",style:{margin:0}}),(0,c.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,c.jsx)(r.Typography.Text,{children:I(j).format("0,0.[00]%")})]})]})}),(0,c.jsx)(r.Col,{children:(0,c.jsxs)(r.Space,{size:2,children:[(0,c.jsx)(z,{poolAddress:e}),t,(0,c.jsx)(r.Button,{size:"small",type:"text",icon:(0,c.jsx)(u,{name:d?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>p(!d)})]})})]}),(0,c.jsx)(r.Collapse,{className:w,style:{marginTop:16},ghost:!0,activeKey:v,bordered:!1,children:(0,c.jsx)(r.Collapse.Panel,{header:"",children:(0,c.jsxs)(r.Row,{gutter:[16,16],children:[(0,c.jsx)(r.Col,{span:12,children:(0,c.jsx)(r.Popover,{trigger:"click",placement:"bottomLeft",content:(0,c.jsx)(Js,{isDisabled:f,poolAddress:e}),children:(0,c.jsx)(r.Button,{block:!0,children:"Swap"})})}),(0,c.jsx)(r.Col,{span:12,children:(0,c.jsx)(r.Button,{onClick:s,block:!0,type:"primary",children:"Detail"})})]})},v)})]})},st=({onInit:e=(()=>{}),onClick:s=(()=>{}),action:t=(()=>(0,c.jsx)(a.Fragment,{}))})=>{const{pools:i}=(0,o.usePool)(),l=(0,n.useSelector)((e=>e.main.selectedCategoryPool)),d=q.sol.senOwner,u=(0,a.useMemo)((()=>Object.keys(i).map((e=>({address:e,...i[e]}))).sort((({reserve_a:e,reserve_b:s},{reserve_a:t,reserve_b:n})=>{const o=e*s,r=t*n;return o>r?-1:o<r?1:0}))),[i]),h=Object.keys(i).filter((e=>{const s=null===i||void 0===i?void 0:i[e],{owner:t}=s;return d.includes(t)}));(0,a.useEffect)((()=>{var s;u.length&&e(null===(s=u[0])||void 0===s?void 0:s.address)}),[e,u]);const m=()=>(0,c.jsx)(a.Fragment,{children:u.map(((e,n)=>(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(et,{poolAddress:e.address,action:t(e.address),onClick:()=>s(e.address),keyExpand:n+1})})},e.address+n)))}),x=()=>(0,c.jsx)(a.Fragment,{children:h.map(((e,n)=>(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(p.ZP,{height:78,overflow:!0,children:(0,c.jsx)(et,{poolAddress:e,action:t(e),onClick:()=>s(e),keyExpand:n+1})})},e+n)))});return(0,c.jsx)(r.Row,{gutter:[12,12],children:"sentre"===l?(0,c.jsx)(x,{}):(0,c.jsx)(m,{})})},tt=()=>{const e=(0,n.useDispatch)(),s=(0,n.useSelector)((e=>e.main.selectedCategoryPool)),t=(0,i.useHistory)(),{manifest:{appId:o}}=q,l=(0,a.useCallback)((s=>{e(oe(s)),e(ae(!1)),t.push(`app/${o}`)}),[e,t,o]);return(0,c.jsxs)(r.Row,{children:[(0,c.jsx)(r.Col,{span:24,children:(0,c.jsx)(Qs,{})}),(0,c.jsx)(r.Col,{span:24,className:"body-widget",children:"sentre"===s||"community"===s?(0,c.jsx)(st,{onClick:l}):(0,c.jsx)($s,{onClick:l})}),(0,c.jsx)(r.Col,{span:24,style:{height:16}}),(0,c.jsx)(Gs,{})]})};BigInt.prototype.toJSON=function(){return this.toString()};const nt={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const s=Object.getPrototypeOf(e);return null!==s&&null===Object.getPrototypeOf(s)})(e)||"bigint"===typeof e}},ot=(0,L.configureStore)({middleware:e=>e(nt),devTools:!1,reducer:{main:ie,stat:Q,lpts:Ws}}),{manifest:{appId:rt}}=q,at=()=>(0,c.jsx)(o.UIProvider,{appId:rt,antd:!0,children:(0,c.jsx)(o.MintProvider,{children:(0,c.jsx)(o.PoolProvider,{children:(0,c.jsx)(o.AccountProvider,{children:(0,c.jsx)(o.WalletProvider,{children:(0,c.jsx)(n.Provider,{store:ot,children:(0,c.jsx)(Ks,{})})})})})})}),it={size:"small",type:"solid"},lt=()=>(0,c.jsx)(o.MintProvider,{children:(0,c.jsx)(o.UIProvider,{appId:rt,antd:!0,children:(0,c.jsx)(o.PoolProvider,{children:(0,c.jsx)(o.AccountProvider,{children:(0,c.jsx)(o.WalletProvider,{children:(0,c.jsx)(n.Provider,{store:ot,children:(0,c.jsx)(tt,{})})})})})})})},31633:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var n=t(63805),o=t(77566),r=t(77330);const a={sol:o.Z[n.ef],register:r.Z[n.OB]}},77330:(e,s,t)=>{"use strict";t.d(s,{Z:()=>o});const n={sen_lp:{url:"https://descartesnetwork.github.io/sen-lp/index.js",appId:"sen_lp",name:"Sen LP",author:{name:"Sentre",email:"hi@sentre.io"},supportedViews:"page,widget".split(",").map((e=>e.trim())).filter((e=>["page","widget"].includes(e))),tags:"solana,dapps,liquidity".split(",").map((e=>e.trim())),description:"Liquidity Provision to pools in the Sentre ecosystem",verified:!1}},o={development:{extra:n,senreg:"https://descartesnetwork.github.io/senreg/register.json"},staging:{extra:n,senreg:"https://descartesnetwork.github.io/senreg/register.json"},production:{extra:{},senreg:"https://descartesnetwork.github.io/senreg/register.json"}}},77566:(e,s,t)=>{"use strict";t.d(s,{Z:()=>o});const n={spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},o={devnet:{...n,node:"https://api.devnet.solana.com",chainId:103,senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",senPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9"},testnet:{...n,node:"https://api.testnet.solana.com",chainId:102,senAddress:"",senPoolAddress:"",swapAddress:"",taxmanAddress:""},mainnet:{...n,node:"https://api.mainnet-beta.solana.com",chainId:101,senAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",senPoolAddress:"",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}}},20418:(e,s,t)=>{"use strict";t.d(s,{Z:()=>m});var n=t(11796),o=t(67845),r=t(63805),a=t(31633);const i=e=>({symbol:"SOL",name:"Solana",address:"11111111111111111111111111111111",decimals:9,chainId:e,extensions:{coingeckoId:"solana"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"}),l=e=>({symbol:"SEN",name:"Sen",address:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",decimals:9,chainId:e,extensions:{coingeckoId:"sen"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png"}),d=[i(103),l(103),{symbol:"wBTC",name:"Wrapped Bitcoin",address:"8jk4eJymMfNZV9mkRNxJEt2VJ3pRvdJvD5FE94GXGBPM",decimals:9,chainId:103,extensions:{coingeckoId:"bitcoin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/qfnqNqs3nCAHjnyCgLRDbBtq4p2MtHZxw8YjSyYhPoL/logo.png"},{symbol:"wETH",name:"Ethereum",address:"27hdcZv7RtuMp75vupThR3T4KLsL61t476eosMdoec4c",decimals:9,chainId:103,extensions:{coingeckoId:"ethereum"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf/logo.png"},{symbol:"UNI",name:"Uniswap",address:"FVZFSXu3yn17YdcxLD72TFDUqkdE5xZvcW18EUpRQEbe",decimals:9,chainId:103,extensions:{coingeckoId:"uniswap"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/3MVa4e32PaKmPxYUQ6n8vFkWtCma68Ld7e7fTktWDueQ/logo.png"},{symbol:"USDC",name:"USD Coin",address:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",decimals:9,chainId:103,extensions:{coingeckoId:"usd-coin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"}],{sol:{chainId:c}}=a.Z,u=/[\W_]+/g,p={tokenize:"full",context:!0,minlength:3},h={document:{id:"address",index:[{field:"symbol",...p},{field:"name",...p}]}};const m=class{constructor(){this.tokenMap=void 0,this.engine=void 0,this.chainId=void 0,this.cluster=void 0,this.loading=void 0,this.queue=void 0,this._init=async()=>this.tokenMap.size?[this.tokenMap,this.engine]:new Promise((async e=>{if(this.loading)return this.queue.push(e);this.loading=!0;let s=await(await(new o.DK).resolve()).filterByChainId(this.chainId).getList();for("devnet"===this.cluster&&(s=s.concat(d)),s="testnet"===this.cluster?s.concat([l(102),i(102)]):s.concat([i(101)]),s.forEach((e=>this.tokenMap.set(e.address,e))),this.engine=new n.Document(h),this.tokenMap.forEach((({address:e,...s})=>this.engine.add(e,s))),e([this.tokenMap,this.engine]);this.queue.length;)this.queue.shift()([this.tokenMap,this.engine]);this.loading=!1})),this.all=async()=>{const[e]=await this._init();return Array.from(e.values())},this.findByAddress=async e=>{const[s]=await this._init();return s.get(e)},this.find=async(e,s)=>{const[t,n]=await this._init();let o=[];return e.split(u).forEach((e=>n.search(e,s).forEach((({result:e})=>e.forEach((e=>{if(o.findIndex((({address:s})=>s===e))<0){const s=t.get(e);s&&o.push(s)}})))))),o},this.tokenMap=new Map,this.engine=void 0,this.chainId=c,this.cluster=r.ef,this.loading=!1,this.queue=[],this._init()}}},63805:(e,s,t)=>{"use strict";t.d(s,{OB:()=>o,ef:()=>r});var n=t(53933);const o="production",r=(()=>{switch(n.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},53933:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});const n="sentre",o=window.localStorage,r=e=>{if(!e)return null;try{return JSON.parse(e)}catch(s){return null}},a={set:(e,s)=>{let t=r(o.getItem(n));t&&"object"===typeof t||(t={}),t[e]=s,o.setItem(n,JSON.stringify(t))},get:e=>{let s=r(o.getItem(n));return s&&"object"===typeof s?s[e]:null},clear:e=>{a.set(e,null)}},i=a},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=902.9e1cf85c.chunk.js.map