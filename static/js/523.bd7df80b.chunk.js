(globalThis.webpackChunksen_lp=globalThis.webpackChunksen_lp||[]).push([[523],{58155:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Page:()=>cn,Widget:()=>un,widgetConfig:()=>dn});var n=t(55754),r=t(98846),o=t(92950),a=t(45055),i=t(95418),l=t(99019);const c={"logo-telegram":t.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"};var d=t(45263);const u=(0,o.forwardRef)((({name:e,className:s,...t},n)=>{const r=s?"anticon "+s:"anticon";return(0,d.jsx)("span",{className:r,...t,children:c[e]?(0,d.jsx)("ion-icon",{ref:n,src:c[e]}):(0,d.jsx)("ion-icon",{ref:n,name:e})})}));var h=t(44891),p=t(34559);const x=e=>{const{pools:s}=(0,r.usePool)(),[t,n]=(0,o.useState)(0),{getMintTotalValue:a}=(()=>{const{tokenProvider:e,getMint:s}=(0,r.useMint)(),{pools:t}=(0,r.usePool)(),n=(0,o.useCallback)((async(s,t)=>{try{var n;const r=await e.findByAddress(s),o=null===r||void 0===r||null===(n=r.extensions)||void 0===n?void 0:n.coingeckoId;if(!o)throw new Error("Cant not find coingeckoId");const a=await(0,p.l$)(o);return Number(i.utils.undecimalize(t,r.decimals))*a.price}catch(r){return 0}}),[e]),a=(0,o.useCallback)((async({mintAddress:r,amount:o})=>{if(await e.findByAddress(r))return n(r,o);const l=Object.values(t).find((e=>e.mint_lpt===r));if(!l)return 0;const{reserve_a:c,reserve_b:d,mint_a:u,mint_b:h}=l;if(c*d===BigInt(0))return 0;const{[r]:{supply:p}}=await s({address:r}),{deltaA:x,deltaB:m}=i.Swap.oracle.withdraw(o,p,c,d);return await a({mintAddress:u,amount:x})+await a({mintAddress:h,amount:m})}),[s,n,e,t]);return{getMintTotalValue:a}})(),l=(0,o.useCallback)((async e=>{const t=s[e];if(!t)return 0;const{reserve_a:n,reserve_b:r,mint_a:o,mint_b:i}=t;return await a({mintAddress:o,amount:n})+await a({mintAddress:i,amount:r})}),[a,s]),c=(0,o.useCallback)((async e=>{if(!e)return n(0);const s=await l(e);n(s)}),[l]);return(0,o.useEffect)((()=>{c(e)}),[c,e]),{tvl:t,getTvl:l}},m=({poolAddress:e})=>{const{tvl:s}=x(e);return(0,d.jsxs)("span",{children:["$",(0,p.uR)(s).format("0,0.[00]a")]})};let y,j,g,f;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(y||(y={})),function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Open=1]="Open",e[e.Approved=2]="Approved",e[e.Done=3]="Done",e[e.Rejected=4]="Rejected",e[e.Canceled=5]="Canceled"}(j||(j={})),function(e){e.Sentre="sentre-pools",e.Deposited="deposited-pools",e.YourPools="your-pools",e.Community="community-pools"}(g||(g={})),function(e){e.address="poolAddress",e.category="category"}(f||(f={}));const w=[{locktime:7,discount:.05},{locktime:30,discount:.25},{locktime:60,discount:.35},{locktime:90,discount:.4}],v=({poolAddress:e})=>{const{pools:s}=(0,r.usePool)(),t=s[e]||{},{wallet:{address:n}}=(0,r.useWallet)(),o=t.state===y.Frozen,a=n===(null===t||void 0===t?void 0:t.owner);return(0,d.jsxs)(l.Space,{children:[o&&(0,d.jsx)(u,{name:"snow-outline",style:{fontSize:16}}),a&&(0,d.jsx)(u,{name:"person-outline",style:{fontSize:16}})]})},b=[void 0],C=({mintAddress:e,size:s=24,icon:t=(0,d.jsx)(u,{name:"diamond-outline"}),reversed:n=!1,...a})=>{const[c,h]=(0,o.useState)(b),{tokenProvider:p}=(0,r.useMint)(),{pools:x}=(0,r.usePool)(),m=(0,o.useCallback)((async e=>{const s=await p.findByAddress(e);if(null!==s&&void 0!==s&&s.logoURI)return s.logoURI}),[p]),y=(0,o.useCallback)((async()=>{if(!i.account.isAddress(e))return h(b);const s=Object.values(x).find((({mint_lpt:s})=>s===e));if(s){const{mint_a:e,mint_b:t}=s,r=await Promise.all([e,t].map(m));return n&&r.reverse(),h(r)}const t=await m(e);return h([t])}),[e,n,m,x]);return(0,o.useEffect)((()=>{y()}),[y]),1===c.length?(0,d.jsx)(l.Avatar,{src:c[0],size:s,style:{backgroundColor:"#2D3355",border:"none"},...a,children:t}):(0,d.jsx)(l.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...a,children:c.map(((e,n)=>(0,d.jsx)(l.Avatar,{src:e,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:t},n)))})},A="Unknown Token",T=({mintAddress:e,separator:s=" \u2022 ",reversed:t=!1})=>{const[n,a]=(0,o.useState)(A),{tokenProvider:l}=(0,r.useMint)(),{pools:c}=(0,r.usePool)(),u=(0,o.useCallback)((async e=>{const s=await l.findByAddress(e);return null!==s&&void 0!==s&&s.name?s.name:A}),[l]),h=(0,o.useCallback)((async()=>{if(!i.account.isAddress(e))return a(A);const n=Object.values(c).find((({mint_lpt:s})=>s===e));if(n){const{mint_a:e,mint_b:r}=n,o=await Promise.all([e,r].map(u));return t&&o.reverse(),a(`${o.join(s)} LP`)}const r=await u(e);return a(r)}),[e,t,u,c,s]);return(0,o.useEffect)((()=>{h()}),[h]),(0,d.jsx)("span",{children:n})},k="TOKN",S=({mintAddress:e,separator:s=" \u2022 ",reversed:t=!1})=>{const[n,a]=(0,o.useState)(k),{tokenProvider:l}=(0,r.useMint)(),{pools:c}=(0,r.usePool)(),u=(0,o.useCallback)((async e=>{const s=await l.findByAddress(e);return null!==s&&void 0!==s&&s.symbol?s.symbol:e.substring(0,4)}),[l]),h=(0,o.useCallback)((async()=>{if(!i.account.isAddress(e))return a(k);const n=Object.values(c).find((({mint_lpt:s})=>s===e));if(n){const{mint_a:e,mint_b:r}=n,o=await Promise.all([e,r].map(u));return t&&o.reverse(),a(o.join(s))}const r=await u(e);return a(r)}),[e,t,u,c,s]);return(0,o.useEffect)((()=>{h()}),[h]),(0,d.jsx)("span",{children:n})};var P=t(19289),R=t(15190);const I={appId:"sen_lp",url:"https://descartesnetwork.github.io/sen-lp/index.js"},z={development:{...I},staging:{...I},production:{...I}},B={devnet:{swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9",senOwners:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"],sntrAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",purchasingAddress:"FHeonxeZFH76K57KGRWgsmE97tiupcHDjvWNKMQDmdVd",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:"https://api.devnet.solana.com",get purchasing(){return new i.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}},testnet:{swapAddress:"",taxmanAddress:"",senOwners:[],sntrAddress:"",purchasingAddress:"",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:"https://api.testnet.solana.com",get purchasing(){return new i.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}},mainnet:{swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e",senOwners:["Cs6jYywHTAgdvjxn8xG4VkJJH8DXXy7zbtatzMUWoCMG"],sntrAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",purchasingAddress:"Ecw8Vh3cwwwwMsaU63mW6knKMsuaiSakVDvKxB5nyhFC",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:"https://api.mainnet-beta.solana.com",get purchasing(){return new i.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}}},D={devnet:{baseURL:"https://stat-dev.sentre.io"},testnet:{baseURL:"https://stat-dev.sentre.io"},mainnet:{baseURL:"https://stat.sentre.io"}},_={development:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},staging:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},production:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)}},E={development:{myRoute:"/app/senhub",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"},staging:{myRoute:"/app/sen_lp",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"},production:{myRoute:"/app/sen_lp",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"}},L={manifest:z[R.OB],sol:B[R.ef],stat:D[R.ef],fee:_[R.OB],route:E[R.OB]};var M=t(21995),N=t.n(M);const O={auth:async(e=!1)=>{if("object"===typeof e)return e;if(!e)return null;const s=window.sentre.wallet;if(!s)throw new Error("Wallet is not connected");const t=(Number(new Date)+1e4).toString()+Math.floor(Math.random()*10**16),n=await s.signMessage(t);return{Authorization:JSON.stringify(n)}},post:async(e,s=null,t=!1)=>{const n=await O.auth(t);try{const{data:t}=await N()({method:"post",url:e,data:s,headers:n});if("ERROR"===t.status)throw new Error(t.error);return t}catch(r){if(!r.response)throw new Error(r.message);const{response:{data:{error:e}}}=r;throw new Error(e)}},get:async(e,s=null,t=!1)=>{const n=await O.auth(t);try{const{data:t}=await N()({method:"get",url:e,params:s,headers:n});if("ERROR"===t.status)throw new Error(t.error);return t}catch(r){if(!r.response)throw new Error(r.message);const{response:{data:{error:e}}}=r;throw new Error(e)}},put:async(e,s=null,t=!1)=>{const n=await O.auth(t);try{const{data:t}=await N()({method:"put",url:e,data:s,headers:n});if("ERROR"===t.status)throw new Error(t.error);return t}catch(r){if(!r.response)throw new Error(r.message);const{response:{data:{error:e}}}=r;throw new Error(e)}},delete:async(e,s=null,t=!1)=>{const n=await O.auth(t);try{const{data:t}=await N()({method:"delete",url:e,data:s,headers:n});if("ERROR"===t.status)throw new Error(t.error);return t}catch(r){if(!r.response)throw new Error(r.message);const{response:{data:{error:e}}}=r;throw new Error(e)}}},F=O;let U;!function(e){e.endpointDetail="public/api/v1/detail/pools"}(U||(U={}));const{stat:{baseURL:W}}=L,Y="stat",q=(0,P.createAsyncThunk)("stat/fetchStatPoolData",(async({address:e},{getState:s})=>{try{const t=s().stat[e];if(t)return{[e]:t};return{[e]:{details:await F.get(`${W}/${U.endpointDetail}/${e}`)}}}catch(t){return{}}})),V=(0,P.createSlice)({name:Y,initialState:{},reducers:{},extraReducers:e=>{e.addCase(q.fulfilled,((e,{payload:s})=>{Object.assign(e,s)}))}}).reducer,H=({poolAddress:e,onClick:s=(()=>{}),action:t=(0,d.jsx)(o.Fragment,{}),selected:a=!1,apy:c,myLp:u})=>{const h=(0,n.useDispatch)(),x=(0,n.useSelector)((s=>{var t;return null===(t=s.stat[e])||void 0===t?void 0:t.details})),{pools:{[e]:j}}=(0,r.usePool)(),g=(e=>{const{lpts:s}=(0,n.useSelector)((e=>e)),{amount:t,balance:r}=(0,o.useMemo)((()=>{var t;const n=Object.keys(s).find((t=>s[t].pool===e))||"",r=(null===(t=s[n])||void 0===t?void 0:t.amount)||BigInt(0);return{amount:r,balance:Number(i.utils.undecimalize(r,9))}}),[s,e]);return{amount:t,balance:r}})(e),f=(0,o.useMemo)((()=>{if(!x)return 0;const e=x.roi||0;return Math.pow(1+e/100,365)-1}),[x]);(0,o.useEffect)((()=>{i.account.isAddress(e)&&h(q({address:e}))}),[h,e]);const w=(null===j||void 0===j?void 0:j.state)===y.Frozen,b=a?"card-active lp-card":"lp-card";return(0,d.jsx)(l.Card,{className:b,bodyStyle:{padding:12,height:78},onClick:()=>s(e),bordered:a,hoverable:!0,children:(0,d.jsxs)(l.Row,{gutter:[12,12],wrap:!1,align:"middle",children:[(0,d.jsx)(l.Col,{span:24,flex:"auto",children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(C,{mintAddress:null===j||void 0===j?void 0:j.mint_lpt,size:24}),(0,d.jsx)(l.Typography.Text,{type:w?"secondary":void 0,children:(0,d.jsx)(S,{mintAddress:null===j||void 0===j?void 0:j.mint_lpt})})]}),(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(l.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,d.jsx)(l.Typography.Text,{children:(0,d.jsx)(m,{poolAddress:e})}),c&&(0,d.jsxs)(o.Fragment,{children:[(0,d.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,d.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,d.jsx)(l.Typography.Text,{children:(0,p.uR)(f).format("0,0.[00]%")})]}),u&&(0,d.jsxs)(o.Fragment,{children:[(0,d.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,d.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"My LP:"}),(0,d.jsx)(l.Typography.Text,{children:(0,p.uR)(g.balance).format("0,0.[00]")})]})]})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{size:2,children:[(0,d.jsx)(v,{poolAddress:e}),t]})})]})})},$="main",Z=(0,P.createAsyncThunk)("main/selectPool",(async e=>({selectedPoolAddress:e,selectedLptAddress:""}))),G=(0,P.createAsyncThunk)("main/selectCategoryPool",(async e=>({selectedCategoryPool:e}))),Q=(0,P.createAsyncThunk)("main/handleOpenDrawer",(async e=>({visible:e}))),K=(0,P.createAsyncThunk)("main/checkPrevSelectedPool",(async e=>({prevSelectedPool:e}))),J=(0,P.createAsyncThunk)("main/onSearch",(async e=>({search:e}))),X=(0,P.createSlice)({name:$,initialState:{selectedPoolAddress:"",visible:!1,selectedCategoryPool:"",search:"",prevSelectedPool:!1},reducers:{},extraReducers:e=>{e.addCase(Z.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(Q.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(G.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(J.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(K.fulfilled,((e,{payload:s})=>{Object.assign(e,s)}))}}).reducer,{sol:{senOwners:ee}}=L,se=()=>{const[e,s]=(0,o.useState)({}),{pools:t}=(0,r.usePool)(),n=(0,o.useCallback)((e=>ee.includes(t[e].owner)),[t]),a=(0,o.useCallback)((e=>{const t={};for(const s in e)n(s)&&(t[s]=e[s]);return s(t)}),[n]);return(0,o.useEffect)((()=>{a(t)}),[t,a]),{sentrePools:e,filterSentrePools:a,checkSentrePools:n}},te=()=>{const[e,s]=(0,o.useState)({}),{pools:t}=(0,r.usePool)(),{checkSentrePools:n}=se(),a=(0,o.useCallback)((e=>!n(e)),[n]),i=(0,o.useCallback)((e=>{const t={};for(const s in e)a(s)&&(t[s]=e[s]);return s(t)}),[a]);return(0,o.useEffect)((()=>{i(t)}),[t,i]),{communityPools:e,filterCommunityPools:i,checkCommunityPools:a}};let ne;const re=e=>{const{filteredPools:s}=(e=>{const[s,t]=(0,o.useState)({}),{settings:{showArchived:r}}=(0,n.useSelector)((e=>e)),a=(0,o.useCallback)((s=>{const{reserve_a:t,reserve_b:n}=e[s]||{};return!t||!n}),[e]),i=(0,o.useCallback)((e=>{const s={};for(const t in e)!r&&a(t)||(s[t]=e[t]);return t(s)}),[a,r]);return(0,o.useEffect)((()=>{i(e)}),[e,i]),{filteredPools:s}})(e),{searchedPools:t}=(e=>{const{tokenProvider:s}=(0,r.useMint)(),[t,a]=(0,o.useState)({}),{main:{search:l}}=(0,n.useSelector)((e=>e)),c=(0,o.useCallback)((async t=>{if(i.account.isAddress(l)&&l===t)return!0;const n=await s.find(l);if(!n)return!1;const{mint_a:r,mint_b:o}=e[t],a=n.map((({address:e})=>e));return!!a.includes(r)||!!a.includes(o)}),[e,l,s]),d=(0,o.useCallback)((async e=>{if(!l||l.length<3)return a(e);const s={};for(const t in e)await c(t)&&(s[t]=e[t]);return a(s)}),[c,l]);return(0,o.useEffect)((()=>{d(e),ne&&clearTimeout(ne),ne=setTimeout(h.be,500)}),[e,d]),{searchedPools:t}})(s),{sortedPools:a}=(e=>{const[s,t]=(0,o.useState)({}),{getTvl:n}=x(),r=(0,o.useCallback)((async e=>{let s=Object.keys(e);const r={},o={};await Promise.all(s.map((async e=>o[e]=await n(e))));const a=s.sort(((e,s)=>o[s]-o[e]));for(const t of a)r[t]=e[t];return t(r)}),[n]);return(0,o.useEffect)((()=>{r(e)}),[e,r]),{sortedPools:s}})(t);return{listPoolAddress:(0,o.useMemo)((()=>Object.keys(a)),[a])}},{route:{myRoute:oe}}=L,ae=({poolAddress:e,category:s})=>{const t=(0,n.useDispatch)(),r=(0,a.useHistory)(),i=(0,o.useCallback)((async e=>(await t(Z(e)),await t(Q(!1)),r.push(`${oe}?${f.address}=${e}&${f.category}=${s}`))),[s,t,r]);return(0,d.jsx)(l.Button,{type:"text",onClick:s=>{s.stopPropagation(),i(e)},icon:(0,d.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})},{route:{myRoute:ie}}=L,le=()=>{const e=(0,a.useHistory)(),s=(0,n.useDispatch)(),{selectedPoolAddress:t}=(0,n.useSelector)((e=>e.main)),{communityPools:r}=te(),{listPoolAddress:i}=re(r),c=(0,o.useCallback)((async t=>(await s(Z(t)),await s(Q(!1)),e.push(`${ie}?${f.address}=${t}&${f.category}=${g.Community}`))),[s,e]);return(0,d.jsx)(l.Row,{gutter:[12,12],justify:"center",children:i.length?i.map((e=>(e===t&&s(K(!0)),(0,d.jsx)(l.Col,{id:e,span:24,children:(0,d.jsx)(h.ZP,{height:78,overflow:!0,children:(0,d.jsx)(H,{poolAddress:e,action:(0,d.jsx)(ae,{poolAddress:e,category:g.Community}),onClick:c,selected:t===e,apy:!0})})},e)))):(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Empty,{})})})},ce=({onClick:e=(()=>{}),selectedPoolAddress:s,action:t=(()=>(0,d.jsx)(o.Fragment,{}))})=>{const{yourPools:a}=(()=>{const[e,s]=(0,o.useState)({}),t=(0,n.useSelector)((e=>e.lpts)),{wallet:a}=(0,r.useWallet)(),{pools:i}=(0,r.usePool)(),l=(0,o.useCallback)((()=>{const e={};for(const s in t){const{pool:n}=t[s],r=i[n];r&&r.owner===a.address&&(e[n]=r)}return s(e)}),[t,i,a.address]);return(0,o.useEffect)((()=>{l()}),[l]),{yourPools:e}})(),{listPoolAddress:i}=re(a);return(0,d.jsxs)(l.Row,{gutter:[12,12],justify:"center",children:[!i.length&&(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Empty,{})}),i.map((n=>(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(h.ZP,{height:78,overflow:!0,children:(0,d.jsx)(H,{poolAddress:n,action:t(n),onClick:()=>e(n),selected:s===n,myLp:!0})})},n)))]})},{route:{myRoute:de}}=L,ue=()=>{const e=(0,n.useDispatch)(),{main:{selectedPoolAddress:s}}=(0,n.useSelector)((e=>e)),t=(0,a.useHistory)(),r=(0,o.useCallback)((s=>(e(Z(s)),e(Q(!1)),t.push(`${de}?${f.address}=${s}&${f.category}=${g.YourPools}`))),[e,t]),i=(0,o.useCallback)((e=>(0,d.jsx)(l.Button,{type:"text",onClick:()=>r(e),size:"small",icon:(0,d.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[r]);return(0,d.jsx)(l.Row,{gutter:[12,12],children:(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(ce,{action:i,selectedPoolAddress:s,onClick:r})})})};let he;const pe=(0,o.forwardRef)((({max:e,onValue:s=(()=>{}),onChange:t=(()=>{}),...n},r)=>{var a;const[i,c]=(0,o.useState)(""),[h,p]=(0,o.useState)(null),x=(0,o.useRef)(r),m=(0,o.useCallback)((t=>{const n=e=>{he&&(clearTimeout(he),he=void 0),c(e),he=setTimeout((()=>c("")),500)};return/^\d*(\.\d*)?$/.test(t)?e&&parseFloat(t)>parseFloat(e.toString())?n("Not enough balance"):s(t):n("Invalid character")}),[e,s]);return null!==h&&(null===x||void 0===x||null===(a=x.current)||void 0===a||a.setSelectionRange(h,h)),(0,d.jsx)(l.Tooltip,{title:(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(u,{name:"warning"}),i]}),visible:!!i,children:(0,d.jsx)(l.Input,{...n,onChange:e=>{t(e),p(e.target.selectionStart),m(e.target.value||"")},ref:x})})}));var xe=t(67642);const me="Select",ye=({mintAddresses:e,activeMintAddress:s,onSelect:t})=>(0,d.jsxs)(l.Select,{onChange:t,value:s||me,bordered:!1,suffixIcon:(0,d.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),style:{marginLeft:-7},children:[(0,d.jsx)(l.Select.Option,{value:me,children:(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(xe.Z,{children:(0,d.jsx)(u,{name:"help-outline"})}),(0,d.jsx)(l.Typography.Text,{children:me})]})}),e.map(((e,s)=>(0,d.jsx)(l.Select.Option,{value:e,children:(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(C,{mintAddress:e}),(0,d.jsx)(S,{mintAddress:e})]})},s)))]}),je=e=>{const[s,t]=(0,o.useState)(void 0),{getDecimals:n}=(0,r.useMint)(),a=(0,o.useCallback)((async()=>{try{const s=await n(e);return t(s)}catch(s){return t(void 0)}}),[e,n]);return(0,o.useEffect)((()=>{a()}),[a]),s},ge=({mintAddresses:e,onChange:s,suggestion:t})=>{const[n,a]=(0,o.useState)(""),[c,u]=(0,o.useState)("Select"),[h,x]=(0,o.useState)(""),{accounts:m}=(0,r.useAccount)(),y=je(c)||0,{wallet:{address:j}}=(0,r.useWallet)(),{amount:g}=m[h]||{amount:"0"},f=i.utils.undecimalize(g,y)||"0",w=(0,o.useCallback)((async()=>{const{splt:e}=window.sentre;if(!i.account.isAddress(c))return;const s=await e.deriveAssociatedAddress(j,c);return x(s)}),[c,j]),v=(0,o.useCallback)((async e=>{if(await a(e),i.account.isAddress(c))return s(y?{amount:i.utils.decimalize(e,y),mintAddress:c}:{amount:BigInt(0),mintAddress:c})}),[s,y,c]),b=(0,o.useCallback)((async e=>(await u(e),y&&parseFloat(n)?s({amount:i.utils.decimalize(n,y),mintAddress:e}):s({amount:BigInt(0),mintAddress:e}))),[s,y,n]);return(0,o.useEffect)((()=>{w()}),[w]),(0,d.jsxs)(l.Row,{gutter:[4,4],children:[(0,d.jsx)(pe,{placeholder:"0",value:n,onValue:v,prefix:(0,d.jsx)(ye,{mintAddresses:e,activeMintAddress:c,onSelect:b}),size:"large",suffix:(0,d.jsx)(l.Button,{type:"text",style:{marginRight:-7},onClick:()=>v(f),children:"MAX"}),max:f}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[4,4],children:[(0,d.jsx)(l.Col,{span:24,flex:"auto",children:t?(0,d.jsxs)(l.Space,{size:4,children:[(0,d.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"Recommend:"}),(0,d.jsx)(l.Typography.Text,{type:"danger",className:"caption",onClick:()=>v((t||0).toString()),children:(0,p.uR)(t).format("0,0.[0000]a")}),(0,d.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:(0,d.jsx)(S,{mintAddress:c})})]}):null}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Typography.Text,{type:"secondary",className:"caption",children:["Available: ",(0,p.uR)(f).format("0,0.[0000]")," ",(0,d.jsx)(S,{mintAddress:c})]})})]})})]})},fe=(e,s)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open((0,p.kU)(s),"_blank")}),we=e=>window.notify({type:"error",description:e.message}),ve=(e,s)=>{const{tokenProvider:t,getMint:n,getDecimals:a}=(0,r.useMint)(),{pools:l}=(0,r.usePool)(),[c,d]=(0,o.useState)(0),u=(0,o.useCallback)((async e=>{var n;const r=await t.findByAddress(e),o=null===r||void 0===r||null===(n=r.extensions)||void 0===n?void 0:n.coingeckoId;if(!o){if(s)throw new Error("Unknown Token");return 0}const a=(await(0,p.l$)(o)).price;if(!a){if(s)throw new Error("Not find on Cgk");return 0}return a}),[s,t]),h=(0,o.useCallback)((async(e,s)=>{const t=await u(e),n=await a(e);return Number(i.utils.undecimalize(s,n))*t}),[a,u]),x=(0,o.useCallback)((async e=>{const s=Object.values(l).find((s=>s.mint_lpt===e));if(!s)return 0;const{reserve_a:t,reserve_b:r,mint_a:o,mint_b:a}=s;if(t*r===BigInt(0))return 0;const{[e]:{supply:c}}=await n({address:e});return(await h(o,t)+await h(a,r))/Number(i.utils.undecimalize(c,9))}),[n,h,l]),m=(0,o.useCallback)((async e=>{try{var s;const n=await t.findByAddress(e);if(!n){const s=await x(e);return d(s)}const r=null===(s=n.extensions)||void 0===s?void 0:s.coingeckoId;if(!r)return d(0);const o=await(0,p.l$)(r);return d(o.price)}catch(n){return 0}}),[x,t]);return(0,o.useEffect)((()=>{m(e)}),[m,e]),c},{sol:{taxmanAddress:be},fee:{exoticFee:Ce,exoticTax:Ae}}=L,Te=()=>{const[e,s]=(0,o.useState)(!1),[t,a]=(0,o.useState)(BigInt(0)),[c,h]=(0,o.useState)(""),[p,x]=(0,o.useState)(BigInt(0)),[m,y]=(0,o.useState)(""),[j,g]=(0,o.useState)(!1),[f,w]=(0,o.useState)([0,0]),{lpts:v}=(0,n.useSelector)((e=>e)),{wallet:{address:b}}=(0,r.useWallet)(),{accounts:C}=(0,r.useAccount)(),{pools:A}=(0,r.usePool)(),T=Object.values(A).map((({mint_a:e,mint_b:s})=>`${e}${s}`)),k=T.includes(`${c}${m}`)||T.includes(`${m}${c}`),S=Object.values(v).map((({pool:e})=>{var s;return null===(s=A[e])||void 0===s?void 0:s.mint_lpt})).filter((e=>i.account.isAddress(e))),P=Object.values(C).map((({mint:e})=>e)).filter((e=>!S.includes(e))),R=ve(c),I=je(c)||0,z=ve(m),B=je(m)||0,D=t&&p&&i.account.isAddress(c)&&i.account.isAddress(m);return(0,o.useEffect)((()=>{if(j&&z){const e=Number(i.utils.undecimalize(t,I))*R/z;return w([0,e])}if(!j&&R){const e=Number(i.utils.undecimalize(p,B))*z/R;return w([e,0])}return w([0,0])}),[j,t,R,I,p,z,B]),(0,d.jsxs)(o.Fragment,{children:[(0,d.jsx)(l.Button,{type:"primary",icon:(0,d.jsx)(u,{name:"add-outline"}),onClick:()=>s(!e),children:"New"}),(0,d.jsx)(l.Modal,{visible:e,onCancel:()=>{s(!1),h(""),y(""),w([0,0])},closeIcon:(0,d.jsx)(u,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,d.jsxs)(l.Row,{gutter:[24,24],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Typography.Title,{level:4,children:"New Pool"})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Typography.Text,{type:"secondary",children:[(0,d.jsx)("strong",{className:"content",children:"Liquidity Provider Incentive."})," ","Liquidity providers earn a 0.25% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(ge,{mintAddresses:P,onChange:({amount:e,mintAddress:s})=>{a(e),h(s),g(!0)},suggestion:f[0]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(ge,{mintAddresses:P,onChange:({amount:e,mintAddress:s})=>{x(e),y(s),g(!1)},suggestion:f[1]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Button,{type:"primary",onClick:async()=>{try{const{swap:e,splt:n,wallet:r}=window.sentre;if(!r||!i.account.isAddress(b))throw new Error("Wallet is not connected");if(!i.account.isAddress(c)||!i.account.isAddress(m))throw new Error("Please select both tokens");const o=[c,m],a=await Promise.all(o.map((e=>n.deriveAssociatedAddress(b,e)))),{txId:l}=await e.initializePool(t,p,Ce,Ae,b,a[0],a[1],be,r);return s(!1),fe("Create a new pool",l)}catch(e){return we(e)}},disabled:!D,block:!0,children:"Supply"})}),k&&(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Space,{align:"start",children:[(0,d.jsx)(l.Typography.Text,{className:"caption",type:"danger",children:(0,d.jsx)(u,{name:"warning-outline"})}),(0,d.jsx)(l.Typography.Text,{className:"caption",type:"danger",children:"A pool of the desired pair of tokens had already created. We highly recommend to deposit your liquidity to the pool instead."})]})})]})})]})})]})},{route:{myRoute:ke}}=L,Se=()=>{const e=(0,a.useHistory)(),s=(0,n.useDispatch)(),{main:{selectedPoolAddress:t}}=(0,n.useSelector)((e=>e)),r=(0,a.useLocation)(),{sentrePools:c}=se(),{listPoolAddress:h}=re(c),p=(0,o.useMemo)((()=>new URLSearchParams(r.search)),[r.search]),x=(0,o.useCallback)((async t=>(await s(Z(t)),await s(Q(!1)),p.set(f.address,t),p.set(f.category,g.Sentre),e.push(`${ke}?${p.toString()}`))),[s,e,p]),m=(0,o.useCallback)((()=>{const e=p.get(f.address)||"";if(!h.length||t)return;const s=i.account.isAddress(e)?e:h[0];x(s)}),[h,p,t,x]);return(0,o.useEffect)((()=>{m()}),[m]),(0,d.jsxs)(l.Row,{gutter:[12,12],justify:"center",children:[!h.length&&(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Empty,{})}),h.map(((e,s)=>(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(H,{poolAddress:e,action:(0,d.jsx)(l.Button,{type:"text",onClick:s=>{s.stopPropagation(),x(e)},icon:(0,d.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})}),onClick:()=>x(e),selected:t===e,apy:!0})},e+s)))]})},{route:{myRoute:Pe}}=L,Re=()=>{const e=(0,n.useDispatch)(),s=(0,a.useHistory)(),t=(0,a.useLocation)(),i=(0,o.useMemo)((()=>new URLSearchParams(t.search)),[t]),{main:{selectedPoolAddress:c}}=(0,n.useSelector)((e=>e)),{depositedPools:p}=(()=>{const[e,s]=(0,o.useState)({}),t=(0,n.useSelector)((e=>e.lpts)),{pools:a}=(0,r.usePool)(),i=(0,o.useCallback)((()=>{const e={};for(const s in t){const{pool:n,amount:r}=t[s];r>BigInt(0)&&(e[n]=a[n])}return s(e)}),[t,a]);return(0,o.useEffect)((()=>{i()}),[i]),{depositedPools:e}})(),{listPoolAddress:x}=re(p),m=(0,o.useCallback)((t=>(e(Z(t)),e(Q(!1)),i.set(f.address,t),i.set(f.category,g.Sentre),s.push(`${Pe}?${i.toString()}`))),[e,s,i]),y=(0,o.useCallback)((e=>(0,d.jsx)(l.Button,{type:"text",onClick:()=>m(e),icon:(0,d.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[m]);return(0,d.jsx)(l.Row,{gutter:[12,12],justify:"center",children:x.length?x.map(((e,s)=>(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(h.ZP,{height:78,overflow:!0,children:(0,d.jsx)(H,{poolAddress:e,action:y(e),onClick:()=>m(e),selected:c===e,myLp:!0})})},e))):(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Empty,{})})})},Ie="settings",ze=(0,P.createAsyncThunk)("settings/setShowArchived",(async e=>({showArchived:e}))),Be=(0,P.createSlice)({name:Ie,initialState:{showArchived:!1},reducers:{},extraReducers:e=>{e.addCase(ze.fulfilled,((e,{payload:s})=>{Object.assign(e,s)}))}}).reducer,De=()=>{const e=(0,n.useDispatch)(),{settings:{showArchived:s}}=(0,n.useSelector)((e=>e));return(0,d.jsx)(l.Popover,{zIndex:1e3,content:(0,d.jsx)(l.Row,{gutter:[8,8],style:{maxWidth:224},children:(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Space,{size:"large",children:[(0,d.jsx)(l.Switch,{size:"small",checked:s,onChange:s=>e(ze(s))}),(0,d.jsx)(l.Typography.Text,{children:"Show archived pools"})]})})}),trigger:"click",placement:"topRight",children:(0,d.jsx)(l.Button,{type:"text",icon:(0,d.jsx)(u,{name:"cog-outline"})})})},_e=()=>{const{main:{search:e}}=(0,n.useSelector)((e=>e)),s=(0,n.useDispatch)();return(0,d.jsx)(l.Card,{bodyStyle:{padding:8},bordered:!1,className:"lp-card",children:(0,d.jsx)(l.Input,{placeholder:"Search",value:e,size:"small",bordered:!1,prefix:(0,d.jsx)(l.Button,{type:"text",style:{marginLeft:-7},size:"small",onClick:e?()=>s(J("")):()=>{},icon:(0,d.jsx)(u,{name:e?"close-outline":"search-outline"})}),onChange:e=>s(J(e.target.value))})})},Ee=()=>{const[e,s]=(0,o.useState)(g.Sentre),{selectedPoolAddress:t,prevSelectedPool:r}=(0,n.useSelector)((e=>e.main)),c=new URLSearchParams((0,a.useLocation)().search).get(f.category)||"",u=(0,o.useMemo)((()=>e===g.Sentre?(0,d.jsx)(Se,{}):e===g.Community?(0,d.jsx)(le,{}):e===g.Deposited?(0,d.jsx)(Re,{}):(0,d.jsx)(ue,{})),[e]);return(0,o.useEffect)((()=>{if(!r||!i.account.isAddress(t))return;const e=document.getElementById(t);if((e=>{if(!e)return;const s=e.getBoundingClientRect();return s.top>=0&&s.left>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&s.right<=(window.innerWidth||document.documentElement.clientWidth)})(e)||!e)return;const s=document.getElementById("scroll-container");s&&null!==e&&void 0!==e&&e.offsetTop&&(s.scrollTop=e.offsetTop)}),[r,t]),(0,o.useEffect)((()=>{if(c)return s(c)}),[c]),(0,d.jsxs)(l.Row,{gutter:[12,24],className:"side-bar",children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[8,8],wrap:!1,children:[(0,d.jsx)(l.Col,{children:(0,d.jsx)(De,{})}),(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsxs)(l.Select,{value:e,onChange:e=>{s(e)},className:"header-sidebar",children:[(0,d.jsx)(l.Select.Option,{value:g.Sentre,children:"Sentre pools"}),(0,d.jsx)(l.Select.Option,{value:g.Deposited,children:"Deposited pools"}),(0,d.jsx)(l.Select.Option,{value:g.YourPools,children:"Your pools"}),(0,d.jsx)(l.Select.Option,{value:g.Community,children:"Community pools"})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsx)(Te,{})})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(_e,{})}),(0,d.jsx)(l.Col,{span:24,className:"body-sidebar scrollbar",id:"scroll-container",children:u})]})};var Le=t(51518),Me=t.n(Le);const{route:{swapRoute:Ne}}=L,Oe=({poolAddress:e})=>{const s=(0,a.useHistory)(),{pools:t}=(0,r.usePool)(),n=(null===t||void 0===t?void 0:t[e].state)===y.Frozen,o=t=>s.push({pathname:Ne,state:{poolAddress:e,originalRoute:t}});return(0,d.jsxs)(l.Row,{gutter:[24,12],style:{width:256},children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Space,{direction:"vertical",size:0,children:[(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(u,{style:{color:"#FA8C16"},name:"alert-circle-outline"}),(0,d.jsx)(l.Typography.Title,{level:5,children:"Choose the route"})]}),(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"We recommend choosing the best route to optimize the price."})]})}),(0,d.jsx)(l.Col,{style:{textAlign:"right"},span:24,children:(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(l.Button,{size:"small",disabled:n,onClick:()=>o(!0),children:"Original route"}),(0,d.jsx)(l.Button,{size:"small",onClick:()=>o(!1),type:"primary",children:"Best route"})]})})]})},Fe=({poolAddress:e})=>(0,d.jsx)(l.Popover,{trigger:"click",placement:"bottomLeft",content:(0,d.jsx)(Oe,{poolAddress:e}),children:(0,d.jsx)(l.Button,{block:!0,children:"Swap"})}),{route:{farmRoute:Ue}}=L,We=({poolAddress:e})=>{const[s,t]=(0,o.useState)(!1),n=(0,a.useHistory)(),{pools:i}=(0,r.usePool)(),{mint_lpt:c}=(null===i||void 0===i?void 0:i[e])||{},h=(0,o.useCallback)((()=>n.push(`${Ue}?search=${e}`)),[n,e]);return(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsxs)(l.Space,{children:[(0,d.jsxs)(l.Space,{size:4,children:[(0,d.jsx)(C,{mintAddress:c,size:32}),(0,d.jsx)(l.Typography.Title,{level:5,children:(0,d.jsx)(S,{mintAddress:c})})]}),(0,d.jsx)(l.Popover,{placement:"bottom",content:(0,d.jsxs)(l.Space,{align:"center",children:[(0,d.jsx)(l.Tooltip,{title:"Copied",visible:s,arrowPointAtCenter:!0,children:(0,d.jsx)(Me(),{text:e,children:(0,d.jsx)(l.Button,{type:"text",size:"small",icon:(0,d.jsx)(u,{name:"copy-outline"}),onClick:async()=>{t(!0),await(0,p.sA)(1500),t(!1)}})})}),(0,d.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"PoolAddress"}),(0,d.jsx)(l.Typography.Text,{style:{wordBreak:"break-all"},children:e})]})]}),children:(0,d.jsx)(l.Button,{type:"text",icon:(0,d.jsx)(u,{name:"alert-circle-outline"})})})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(Fe,{poolAddress:e}),(0,d.jsx)(l.Button,{onClick:h,children:"Go Farming"})]})})]})},Ye=({poolAddress:e,reversed:s=!1})=>{const{pools:t}=(0,r.usePool)(),{mint_a:n,mint_b:o,reserve_a:a,reserve_b:c,mint_lpt:u}=t[e]||{},h=je(n)||0,x=je(o)||0,m=Number(i.utils.undecimalize(a,h)),y=Number(i.utils.undecimalize(c,x)),j=y?m/y:0,g=m?y/m:0;return(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(l.Typography.Text,{children:(0,p.uR)(s?g:j).format("0,0.[0000]")}),(0,d.jsx)(S,{mintAddress:u,reversed:s,separator:" / "})]})},qe=({poolAddress:e})=>{const{pools:s}=(0,r.usePool)(),[t,n]=(0,o.useState)(!0),{mint_lpt:a}=s[e]||{};return(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(C,{mintAddress:a,reversed:t}),(0,d.jsx)(Ye,{poolAddress:e,reversed:t}),(0,d.jsx)(l.Button,{type:"text",onClick:()=>n(!t),icon:(0,d.jsx)(u,{name:"swap-horizontal-outline"})})]})},Ve=({value:e="0",poolAddress:s})=>{const[t,a]=(0,o.useState)(!1),[c,h]=(0,o.useState)("0"),{lpts:x}=(0,n.useSelector)((e=>e)),{getMint:m}=(0,r.useMint)(),{pools:y}=(0,r.usePool)(),{mint_a:j,mint_b:g,reserve_a:f,reserve_b:w,mint_lpt:v}=y[s]||{},b=je(j)||0,C=je(g)||0,A=i.utils.undecimalize(f,b),T=i.utils.undecimalize(w,C),k=Object.keys(x).find((e=>x[e].pool===s))||"",{amount:P}=x[k]||{},R=Number(i.utils.undecimalize(P||BigInt(0),9));return(0,o.useEffect)((()=>{(async()=>{const{[v]:{supply:e,decimals:s}}=await m({address:v});h(i.utils.undecimalize(e,s))})()}),[v,m]),(0,d.jsx)(l.Card,{bordered:!1,className:"deposit-card",children:(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"In-Pool Price"})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(l.Button,{type:"text",style:{width:"auto",height:"auto"},icon:(0,d.jsx)(u,{name:"swap-horizontal-outline"}),onClick:()=>a(!t)}),(0,d.jsx)(Ye,{poolAddress:s,reversed:t})]})})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"Pool Composition"})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{size:4,children:[(0,d.jsxs)(l.Typography.Text,{children:[(0,p.uR)(A).format("0,0.[00]a")," ",(0,d.jsx)(S,{mintAddress:j})]}),(0,d.jsx)(l.Typography.Title,{level:5,children:" + "}),(0,d.jsxs)(l.Typography.Text,{children:[(0,p.uR)(T).format("0,0.[00]a")," ",(0,d.jsx)(S,{mintAddress:g})]})]})})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"My Current LP"})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Typography.Text,{children:[(0,p.uR)(R).format("0,0.[0000]")," LP"]})})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[8,8],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"Total LP"})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Typography.Text,{children:[(0,p.uR)(c).format("0,0.[0000]")," LP"]})})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"You will reveice"})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{size:4,children:[(0,d.jsx)(l.Typography.Title,{level:5,children:(0,p.uR)(e).format("0,0.[0000]")}),(0,d.jsx)(l.Typography.Title,{level:5,children:"LP"})]})})]})})]})})},He=({mintAddress:e,onChange:s,value:t})=>{const[n,a]=(0,o.useState)(""),[c,u]=(0,o.useState)(""),{wallet:{address:h}}=(0,r.useWallet)(),{accounts:x}=(0,r.useAccount)(),m=je(e)||0,y=null===x||void 0===x?void 0:x[c],j=(0,o.useMemo)((()=>{const{amount:e}=y||{};return e&&m&&i.utils.undecimalize(e,m)||"0"}),[y,m]),g=(0,o.useCallback)((async e=>(await a(e),m&&parseFloat(e)?s(i.utils.decimalize(e,m)):s(BigInt(0)))),[m,s]),f=(0,o.useCallback)((()=>{const e=i.utils.undecimalize(t,m||0);Number(e)!==Number(n)&&a(e)}),[m,t]),w=(0,o.useCallback)((async()=>{const{splt:s}=window.sentre;try{const t=await i.account.deriveAssociatedAddress(h,e,s.spltProgramId.toBase58(),s.splataProgramId.toBase58());u(t)}catch(t){}}),[e,h]);(0,o.useEffect)((()=>{w()}),[w]),(0,o.useEffect)((()=>{f()}),[f]);const v=Number(n)>Number(j);return(0,d.jsxs)(l.Row,{gutter:[4,4],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(pe,{placeholder:"0",value:n,onValue:g,size:"large",prefix:(0,d.jsxs)(l.Space,{style:{marginLeft:-4,marginRight:7,lineHeight:1},children:[(0,d.jsx)(C,{mintAddress:e}),(0,d.jsx)(l.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,d.jsx)(l.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>g(j),children:"MAX"}),max:j})}),(0,d.jsx)(l.Col,{flex:"auto",children:v&&(0,d.jsx)(l.Typography.Text,{style:{fontSize:12},type:"danger",children:"Not enough balance."})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",(0,p.uR)(j).format("0,0.[0000]")," ",(0,d.jsx)(S,{mintAddress:e})]})})]})},$e=({poolAddress:e,onClose:s=(()=>{}),onChange:t=(()=>{})})=>{const[n,a]=(0,o.useState)(!1),[c,u]=(0,o.useState)(""),[h,x]=(0,o.useState)([BigInt(0),BigInt(0)]),[m,y]=(0,o.useState)("all"),[j,g]=(0,o.useState)(!0),{pools:f}=(0,r.usePool)(),{wallet:{address:w}}=(0,r.useWallet)(),{getMint:v}=(0,r.useMint)(),{accounts:b}=(0,r.useAccount)(),{mint_a:C,mint_b:A,reserve_a:T,reserve_b:k,mint_lpt:P,fee_ratio:R,tax_ratio:I}=f[e],z=[C,A],B=je(C)||0,D=je(A)||0,_=(0,o.useMemo)((()=>[B,D]),[B,D]),E=(0,o.useMemo)((()=>Number(i.utils.undecimalize(T,B))/Number(i.utils.undecimalize(k,D))),[B,D,T,k]),L=(0,o.useCallback)(((e,s)=>{if(!_)return BigInt(0);const t=0===s?_[1]:_[0],n=Number(i.utils.undecimalize(e,_[s]));let r=n*E;return 0===s&&(r=n/E),i.utils.decimalize(r,t)}),[_,E]),M=(0,o.useCallback)((async()=>{if(!i.account.isAddress(w))return u("");try{const{[P]:{supply:e}}=await v({address:P}),{lpt:s}=i.Swap.oracle.sided_deposit(h[0],h[1],T,k,e,R,I);return u(i.utils.undecimalize(s,9))}catch(e){window.notify({type:"error",description:e.message})}}),[h,R,v,P,T,k,I,w]);(0,o.useEffect)((()=>{M()}),[M]),(0,o.useEffect)((()=>{x([BigInt(0),BigInt(0)])}),[m]);const N=(0,o.useCallback)((async()=>{const{splt:e}=window.sentre,s=await e.deriveAssociatedAddress(w,C),t=b[s],n=await e.deriveAssociatedAddress(w,A),r=b[n],o=(null===t||void 0===t?void 0:t.amount)||0,a=(null===r||void 0===r?void 0:r.amount)||0,i=h[0]>o||h[1]>a;g(i)}),[b,h,C,A,w]);(0,o.useEffect)((()=>{N()}),[N]);return(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Radio.Group,{onChange:e=>{var s;y((s=e).target.value),t(s.target.value)},value:m,children:[(0,d.jsx)(l.Radio,{value:"all",children:(0,d.jsxs)(l.Space,{size:4,children:[(0,d.jsx)(S,{mintAddress:P,separator:"+"}),(0,d.jsx)(l.Tag,{className:"deposit-tag",children:"0 Fee"})]})}),z.map(((e,s)=>(0,d.jsx)(l.Radio,{value:e,children:(0,d.jsx)(S,{mintAddress:e})},e+s)))]})}),z.map(((e,s)=>(e===m||"all"===m)&&(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(He,{mintAddress:e,value:h[s],onChange:s=>((e,s)=>{if(!i.account.isAddress(e)||!s)return x([BigInt(0),BigInt(0)]);const t=z.findIndex((s=>s===e));if(-1===t)return;let n=[...h];"all"===m&&(n[0]=n[1]=L(s,t)),n[t]=s,x(n)})(e,s)})},e+s))),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(Ve,{value:c,poolAddress:e})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Button,{type:"primary",onClick:async()=>{a(!0);const{splt:t,swap:n,wallet:r}=window.sentre,[o,i]=await Promise.all(z.map((e=>t.deriveAssociatedAddress(w,e))));if(r)try{const{txId:t}=await n.addSidedLiquidity(h[0],h[1],e,o,i,r);return s(),window.notify({type:"success",description:"Deposit liquidity successfully. Click to view details.",onClick:()=>window.open((0,p.kU)(t),"_blank")})}catch(l){return window.notify({type:"error",description:l.message})}finally{a(!1)}},disabled:!Number(c)||j,block:!0,loading:n,children:"Deposit"})})]})},Ze=({poolAddress:e,onClose:s=(()=>{})})=>{const{pools:t}=(0,r.usePool)(),[n,a]=(0,o.useState)("all"),{fee_ratio:c,tax_ratio:u}=t[e]||{},h=c||BigInt(0),p=u||BigInt(0),x=i.utils.undecimalize(h+p,7),m="all"!==n,y=m?"#F9575E":"inherit",j=m?void 0:"secondary";return(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Typography.Title,{level:5,children:"Deposit Liquidity"})}),(0,d.jsxs)(l.Col,{span:24,children:[(0,d.jsxs)(l.Typography.Paragraph,{type:"secondary",children:[(0,d.jsx)("strong",{children:"Liquidity provider incentive."})," Liquidity providers earn a ",x,"% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]}),(0,d.jsxs)(l.Typography.Paragraph,{type:j,children:[(0,d.jsx)("strong",{style:{color:y},children:"Asymmetric Deposit."})," ","Instead of depositing amounts of tokens proportionally, Asymmetric Deposit allows you to deposit even one side of token. The pool will automatically re-balance itself."]})]}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)($e,{poolAddress:e,onClose:s,onChange:a})})]})},Ge=({lptAddress:e,onChange:s})=>{const[t,a]=(0,o.useState)(""),c=(0,n.useSelector)((e=>e.lpts)),{pools:u}=(0,r.usePool)(),{amount:h,pool:x}=(null===c||void 0===c?void 0:c[e])||{},{mint_lpt:m}=(null===u||void 0===u?void 0:u[x])||{},y=(0,o.useMemo)((()=>h&&i.utils.undecimalize(h,9)||"0"),[h]),j=(0,o.useCallback)((async e=>(await a(e),parseFloat(e)?s(i.utils.decimalize(e,9)):s(BigInt(0)))),[s]);return(0,d.jsxs)(l.Row,{gutter:[4,4],justify:"end",children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(pe,{placeholder:"Amount of LP",value:t,onValue:j,size:"large",prefix:(0,d.jsxs)(l.Space,{style:{marginLeft:-7,marginRight:7,fontSize:12,lineHeight:1},children:[(0,d.jsx)(C,{mintAddress:m,size:24}),(0,d.jsx)(l.Typography.Text,{children:(0,d.jsx)(T,{mintAddress:m})}),(0,d.jsx)(l.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,d.jsx)(l.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>j(y),children:"MAX"}),max:y})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",(0,p.uR)(y).format("0,0.[0000]")," LPT"]})})]})},Qe=({mintAddresses:e,amounts:s})=>(0,d.jsx)(l.Card,{bordered:!1,className:"deposit-card",children:(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Typography.Text,{children:"You will receive"})}),e.map(((e,t)=>(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[8,8],justify:"space-between",align:"middle",children:[(0,d.jsx)(l.Col,{children:(0,d.jsx)(C,{mintAddress:e,size:32})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Typography.Title,{level:5,style:{margin:0},children:[(0,p.uR)(s[t]||0).format("0,0.[0000]")," ",(0,d.jsx)(S,{mintAddress:e})]})})]})},t)))]})}),Ke=({poolAddress:e,onClose:s=(()=>{})})=>{var t;const[a,c]=(0,o.useState)(BigInt(0)),[u,h]=(0,o.useState)(),[x,m]=(0,o.useState)([]),[y,j]=(0,o.useState)([0,0]),[g,f]=(0,o.useState)(!1),w=(0,n.useSelector)((e=>e.lpts)),v=Object.keys(w).find((s=>w[s].pool===e))||"",b=null===w||void 0===w||null===(t=w[v])||void 0===t?void 0:t.pool,{wallet:{address:C}}=(0,r.useWallet)(),{pools:A}=(0,r.usePool)(),{getMint:T}=(0,r.useMint)(),{mint_a:k,mint_b:S,mint_lpt:P,reserve_a:R,reserve_b:I}=(null===A||void 0===A?void 0:A[b])||{},z=[k,S],B=(0,o.useCallback)((async()=>{try{const{[P]:{supply:e}}=await T({address:P});h(e)}catch(e){}try{const{[k]:{decimals:e}}=await T({address:k}),{[S]:{decimals:s}}=await T({address:S});j([e,s])}catch(e){}}),[k,S,P,T]);return(0,o.useEffect)((()=>{if(u){const{deltaA:e,deltaB:s}=i.Swap.oracle.withdraw(a,u,R,I),t=[e,s].map(((e,s)=>i.utils.undecimalize(e,y[s])));m(t)}else m([])}),[R,I,a,u,y]),(0,o.useEffect)((()=>{B()}),[B]),(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Typography.Title,{level:5,children:"Withdraw Liquidity"})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(Ge,{lptAddress:v,onChange:c})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(Qe,{mintAddresses:z,amounts:x})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Button,{type:"primary",onClick:async()=>{if(!a)return;f(!0);const{swap:t,wallet:n,splt:r}=window.sentre,o=await Promise.all(z.map((e=>r.deriveAssociatedAddress(C,e))));if(n)try{const{txId:r}=await t.removeLiquidity(a,e,o[0],o[1],n);return s(),window.notify({type:"success",description:"Withdraw liquidity successfully. Click to view details.",onClick:()=>window.open((0,p.kU)(r),"_blank")})}catch(i){return window.notify({type:"error",description:i.message})}finally{f(!1)}},disabled:!a,block:!0,loading:g,children:"Withdraw"})})]})},Je=({poolAddress:e,lpt:s})=>{const[t,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1);return(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{span:12,children:(0,d.jsx)(l.Button,{onClick:()=>a(!0),icon:(0,d.jsx)(u,{name:"log-out-outline"}),disabled:!s,block:!0,children:"Withdraw"})}),(0,d.jsx)(l.Col,{span:12,children:(0,d.jsx)(l.Button,{onClick:()=>n(!0),type:"primary",icon:(0,d.jsx)(u,{name:"log-in-outline"}),block:!0,children:"Deposit"})}),(0,d.jsx)(l.Modal,{visible:t,onCancel:()=>n(!1),closeIcon:(0,d.jsx)(u,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,d.jsx)(Ze,{poolAddress:e,onClose:()=>n(!1)})}),(0,d.jsx)(l.Modal,{visible:r,onCancel:()=>a(!1),closeIcon:(0,d.jsx)(u,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,d.jsx)(Ke,{poolAddress:e,onClose:()=>a(!1)})})]})},Xe=({label:e="label",title:s="",subTitle:t=null})=>(0,d.jsxs)(l.Space,{direction:"vertical",size:4,children:[(0,d.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:e}),(0,d.jsx)("span",{children:s}),t&&(0,d.jsx)(l.Typography.Text,{type:"secondary",children:t})]}),es=({value:e=0,sub:s="",format:t=""})=>(0,d.jsxs)(l.Space,{size:4,align:"baseline",children:[(0,d.jsx)(l.Typography.Title,{level:4,children:(0,p.uR)(e).format(t)}),s&&(0,d.jsx)(l.Typography.Text,{className:"caption",type:"secondary",children:s})]}),ss=({poolAddress:e})=>{const[s,t]=(0,o.useState)(0),a=(0,n.useSelector)((e=>e.lpts)),c=(0,n.useSelector)((s=>{var t,n,r;return null===(t=s.stat)||void 0===t||null===(n=t[e])||void 0===n||null===(r=n.details)||void 0===r?void 0:r.roi})),{getMint:u}=(0,r.useMint)(),{pools:h}=(0,r.usePool)(),{mint_a:x,mint_b:m,reserve_a:y,reserve_b:j,mint_lpt:g}=h[e]||{},f=je(x)||0,w=je(m)||0,v=i.utils.undecimalize(y,f),b=i.utils.undecimalize(j,w),C=Object.keys(a).find((s=>a[s].pool===e))||"",{amount:A}=a[C]||{},T=Number(i.utils.undecimalize(A||BigInt(0),9)),k=(0,o.useCallback)((e=>c&&e?Math.pow(c/100+1,e)-1:0),[c]);return(0,o.useEffect)((()=>{(async()=>{if(!i.account.isAddress(g))return 0;const{[g]:{decimals:e,supply:s}}=await u({address:g});t(Number(i.utils.undecimalize(s,e)))})()}),[u,g]),(0,d.jsx)(l.Card,{bordered:!1,children:(0,d.jsxs)(l.Row,{gutter:[24,24],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Typography.Title,{level:4,children:"Liquidity Position"})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[20,20],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(Xe,{label:"APY",title:(0,d.jsx)(es,{value:k(365),format:"0,0.[00]%"})})}),(0,d.jsx)(l.Col,{xs:8,children:(0,d.jsx)(Xe,{label:"My Contribution",title:(0,d.jsx)(es,{value:T,sub:"LP",format:"0,0.[0000]a"})})}),(0,d.jsx)(l.Col,{xs:16,children:(0,d.jsx)(Xe,{label:"Pool Composition",title:(0,d.jsxs)(l.Space,{size:4,align:"baseline",children:[(0,d.jsx)(es,{value:v,sub:(0,d.jsx)(S,{mintAddress:x}),format:"0,0.[00]a"}),(0,d.jsx)(l.Typography.Title,{level:5,children:"+"}),(0,d.jsx)(es,{value:b,sub:(0,d.jsx)(S,{mintAddress:m}),format:"0,0.[00]a"})]})})}),(0,d.jsx)(l.Col,{xs:8,children:(0,d.jsx)(Xe,{label:"My Portion",title:(0,d.jsx)(es,{value:T/s,format:"0,0.[00]%"}),subTitle:`Over ${(0,p.uR)(s).format("0,0.[0000]a")} LP`})}),(0,d.jsx)(l.Col,{xs:16,children:(0,d.jsx)(Xe,{label:"In-Pool Price",title:(0,d.jsx)(qe,{poolAddress:e})})})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(Je,{lpt:T,poolAddress:e})})]})})},ts=({title:e,label:s,ratio:t,currentRatio:n="0",onChange:r=(()=>{})})=>(0,d.jsxs)(l.Row,{gutter:[4,4],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:e})}),(0,d.jsx)(l.Col,{style:{fontSize:12},children:(0,d.jsxs)(l.Space,{size:4,children:[(0,d.jsxs)(l.Typography.Text,{type:"secondary",children:[s,":"]}),(0,d.jsxs)(l.Typography.Text,{children:[n,"%"]})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(pe,{placeholder:"0",value:t,onValue:r,size:"large"})})]}),ns=({address:e})=>{const{pools:s}=(0,r.usePool)(),[t,n]=(0,o.useState)(""),[a,c]=(0,o.useState)(""),[h,x]=(0,o.useState)(!1),m=s[e],{fee_ratio:y,tax_ratio:j}=m||{},g=(0,o.useMemo)((()=>y?i.utils.undecimalize(y,7):"0"),[y]),f=(0,o.useMemo)((()=>j?i.utils.undecimalize(j,7):"0"),[j]);return(0,d.jsxs)(l.Row,{gutter:[16,24],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(ts,{title:"Fee (%)",label:"Current fee",ratio:t,currentRatio:g,onChange:n})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(ts,{title:"Tax (%)",label:"Current tax",ratio:a,currentRatio:f,onChange:c})})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Button,{onClick:async()=>{x(!0);const s=i.utils.decimalize(t||g,7),r=i.utils.decimalize(a||f,7),{swap:o,wallet:l}=window.sentre;if(!l)return;const{txId:d}=await o.updateFee(s,r,e,l);return x(!1),d?(n(""),c(""),window.notify({type:"success",description:"Update fee successfully. Click to view details",onClick:()=>window.open((0,p.kU)(d),"_blank")})):window.notify({type:"error",description:"Update fee make failure."})},icon:(0,d.jsx)(u,{name:"cash-outline"}),block:!0,loading:h,disabled:!a&&!t,children:"Update Fee"})})]})};var rs;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(rs||(rs={}));const os=({poolStatus:e,description:s})=>{const t=e===rs.Active;return(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Space,{size:0,children:[(0,d.jsx)(l.Badge,{status:t?"success":"error"}),(0,d.jsxs)(l.Typography.Text,{children:["Current status: ",t?"Active":"Frozen"]})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Space,{size:4,align:"start",children:[(0,d.jsx)(u,{name:"information-circle-outline"}),(0,d.jsx)(l.Space,{direction:"vertical",size:0,children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:s})})]})})]})},as=({address:e})=>{const{pools:s}=(0,r.usePool)(),[t,n]=(0,o.useState)(!1),a=s[e],i=(0,o.useMemo)((()=>{const e=null===a||void 0===a?void 0:a.state;return e===rs.Active?(0,d.jsx)(os,{poolStatus:e,description:"Freezing a pool will prevent all actions until the pool has been thawed."}):e===rs.Frozen?(0,d.jsx)(os,{poolStatus:e,description:"Thaw a pool will active all actions"}):"Pool is closed"}),[null===a||void 0===a?void 0:a.state]);return(0,d.jsxs)(l.Row,{gutter:[24,24],children:[(0,d.jsx)(l.Col,{span:24,children:i}),(0,d.jsx)(l.Col,{span:24,children:(null===a||void 0===a?void 0:a.state)===rs.Active?(0,d.jsx)(l.Button,{style:{background:"#40A9FF",color:"#fff"},onClick:async()=>{n(!0);const{swap:s,wallet:t}=window.sentre;if(!t)return;const{txId:r}=await s.freezePool(e,t);return n(!1),r?window.notify({type:"success",description:"Freeze the pool successfully. Click to view details",onClick:()=>window.open((0,p.kU)(r),"_blank")}):window.notify({type:"error",description:"Freeze the pool make failure."})},icon:(0,d.jsx)(u,{name:"snow-outline"}),block:!0,loading:t,children:"Freeze Pool"}):(0,d.jsx)(l.Button,{type:"primary",onClick:async()=>{n(!0);const{swap:s,wallet:t}=window.sentre;if(!t)return;const{txId:r}=await s.thawPool(e,t);return n(!1),r?window.notify({type:"success",description:"Thaw the pool successfully. Click to view details",onClick:()=>window.open((0,p.kU)(r),"_blank")}):window.notify({type:"error",description:"Thaw the pool make failure."})},icon:(0,d.jsx)(u,{name:"sunny-outline"}),block:!0,loading:t,children:"Thaw Pool"})})]})},is=({address:e})=>{const[s,t]=(0,o.useState)(""),[n,r]=(0,o.useState)(!1);return(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Space,{align:"start",children:[(0,d.jsx)(u,{name:"information-circle-outline"}),(0,d.jsx)(l.Typography.Text,{children:"Your current account will lose the pool control when you transfer ownership."})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Card,{bodyStyle:{padding:8},style:{background:"transparent",borderRadius:8,boxShadow:"none"},children:(0,d.jsxs)(l.Row,{gutter:[0,0],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Typography.Text,{style:{marginLeft:12,fontSize:12},type:"secondary",children:"Transfer to Owner"})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Input,{placeholder:"E.g. AgTMC...",value:s,onChange:e=>t(e.target.value),bordered:!1})})]})})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Button,{onClick:async()=>{await r(!0);try{const{swap:t,wallet:n}=window.sentre;if(!n)throw new Error("Wallet is not connected.");const{txId:o}=await t.transferPoolOwnership(e,s,n);return window.notify({type:"success",description:"Transfer successfully. Click to view details.",onClick:()=>window.open((0,p.kU)(o),"_blank")})}catch(t){return window.notify({type:"error",description:t.message})}finally{return r(!1)}},icon:(0,d.jsx)(u,{name:"airplane-outline"}),disabled:!i.account.isAddress(s),loading:n,block:!0,children:"Transfer"})})]})},ls=({poolAddress:e})=>(0,d.jsx)(l.Card,{style:{minHeight:285},bodyStyle:{padding:0},bordered:!1,children:(0,d.jsxs)(l.Tabs,{style:{padding:24},children:[(0,d.jsx)(l.Tabs.TabPane,{tab:"Freeze/Thaw",children:(0,d.jsx)(as,{address:e})},"freeze-thaw"),(0,d.jsx)(l.Tabs.TabPane,{tab:"Fee",children:(0,d.jsx)(ns,{address:e})},"fee"),(0,d.jsx)(l.Tabs.TabPane,{tab:"Transfer Owner",children:(0,d.jsx)(is,{address:e})},"transfer-owner")]})});var cs=t(4550),ds=t.n(cs),us=t(76907),hs=t.n(us),ps=t(21111),xs=t.n(ps);const ms=({chartData:e=[],labels:s=[],type:t="line",configs:n,disableAxe:r=!1,chartId:a="sen_chart"})=>{const{backgroundColor:i}=n||{},[l,c]=(0,o.useState)(!1),u=(0,o.useCallback)(((e,s,t)=>({labels:s,datasets:[{...n,data:e,backgroundColor:t}]})),[n]),h=(0,o.useRef)(null),x=(0,o.useCallback)((()=>{var e,s;if(!h||!i)return"#dadada";const n=null===h||void 0===h||null===(e=h.current)||void 0===e||null===(s=e.canvas)||void 0===s?void 0:s.getContext("2d"),r=null===n||void 0===n?void 0:n.createLinearGradient(0,0,0,270);null===r||void 0===r||r.addColorStop(0,i),null===r||void 0===r||r.addColorStop(1,`${i}00`);return"line"===t?r:i}),[i,t]);return(0,o.useEffect)((()=>{var t;const n=h.current,r=null===n||void 0===n||null===(t=n.data.datasets)||void 0===t?void 0:t.find((({data:e})=>e)),o=xs()(null===r||void 0===r?void 0:r.data,e);n&&!o&&(n.data=u(e,s,x()),null===n||void 0===n||n.update())}),[e,u,x,s]),(0,d.jsx)("canvas",{id:a,height:"270",ref:e=>{if(!e)return;const s=e.getContext("2d");s&&!l&&(h.current=new(hs())(s,{type:t,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!r}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!r,beginAtZero:!1,maxTicksLimit:8,callback:function(e,s,t){return(0,p.uR)(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,s)=>{const t=document.getElementById(a);t&&(t.style.cursor=s[0]?"pointer":"default")}}}}),c(!0))}})};class ys{constructor(){this.programId="",this.time=0,this.address="",this.mint="",this.actionType="",this.amountIn=BigInt(0),this.amountOut=BigInt(0),this.totalTrans=0}}class js{parserDailyReport(e){let s=new Array;for(const t of e)s=s.concat(this.parseDailyReport(t));return this.mergeDailyReport(s)}parseDailyReport(e){const s=new Array,{programId:t,time:n,actionType:r,actionTransfers:o}=e;for(const a of o){const{source:e,destination:o,amount:i}=a,l=new ys;if(l.programId=t,l.time=n,l.actionType=r,e){const{mint:t,address:n}=e;s.push({...l,mint:t,address:n,amountOut:BigInt(i)})}if(o){const{mint:e,address:t}=o;s.push({...l,mint:e,address:t,amountIn:BigInt(i)})}}return s}mergeDailyReport(e){const s=new Map;for(const n of e){const e=`${n.time}^${n.address}^${n.mint}^${n.actionType}`;if(s.has(e)){const t=s.get(e);void 0!==t&&(n.amountIn+=t.amountIn,n.amountOut+=t.amountOut,n.totalTrans+=t.totalTrans)}s.set(e,n)}const t=new Array;return s.forEach((e=>t.push(e))),t}}var gs=t(3007),fs=t(68532),ws=t.n(fs);class vs{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class bs{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class Cs{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}var As=t(71256);const Ts=700;class ks{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,s,t=700){t>Ts&&(t=Ts);const n={limit:t,before:s};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let s=[];const t=[];for(let r=0;r<=e.length/200;r++){const s=200*r,n=e.slice(s,s+200);t.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(t);for(const r of n)s=s.concat(r);return s}async fetchTransactions(e,s){const t=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:r,lastSignature:o,limit:a}=s;n=Math.floor(n||0),r=Math.floor(r||t);const i=new As.PublicKey(e);let l=[],c=!1;for(;!c;){const e=await this.fetchSignatures(i,o,a);if(null===e||void 0===e||!e.length||c)break;for(const s of e){const e=s.blockTime;if(e&&!(e>r)){if(e<n){c=!0;break}o=s.signature,l.push(s.signature)}}if(a&&l.length>=a)break;if((null===e||void 0===e?void 0:e.length)<Ts)break}return await this.fetchConfirmTransaction(l)}}let Ss;!function(e){e.Transfer="transfer"}(Ss||(Ss={}));const Ps=1e3;let Rs;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(Rs||(Rs={}));class Is{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const s=new Is,t=e*Ps;return s.setMilliSeconds(t),s}static fromYmd(e){const s=new Is,t=ds()(e,Rs.YMD).valueOf();return s.setMilliSeconds(t),s}static getListDate(e,s){const t=[];let n=Is.fromYmd(e);const r=Is.fromYmd(s);for(;n.ymd()<=r.ymd();)t.push(n.ymd()),n=n.addDay();return t}format(e){const s=new Date(this.milliSeconds);return ds()(s).format(e)}subtractDay(e=1){const s=ds()(this.milliSeconds).subtract(e,"days").valueOf();return Is.fromSeconds(s/Ps)}addDay(e=1){const s=ds()(this.milliSeconds).add(e,"days").valueOf();return Is.fromSeconds(s/Ps)}seconds(){return(this.milliSeconds-this.milliSeconds%Ps)/Ps}ymd(){return Number(this.format(Rs.YMD))}static today(e=Rs.YMD){return ds()().format(e)}}var zs=t(97429).Buffer;const{struct:Bs}=t(70320),Ds={key:"code",type:"u8"};let _s;!function(e){e.InitPool="INITIALIZE_POOL",e.AddLiquidity="ADD_LIQUIDITY",e.RemoveLiquidity="REMOVE_LIQUIDITY",e.Swap="SWAP",e.Route="SWAP"}(_s||(_s={}));const Es={0:_s.InitPool,1:_s.AddLiquidity,2:_s.RemoveLiquidity,3:_s.Swap,8:_s.Route};class Ls extends class{constructor(){this.parseAction=e=>""}async collect(e,s,t){let{lastSignature:n,limit:r}=s;const o=new ks;let a=[],i=n,l=!1,c=200;for(;!l;){const n=await o.fetchTransactions(e,{...s,lastSignature:i,limit:c});for(const e of n){i=e.transaction.signatures[0];const s=this.parseTransLog(e);if(s){if(t){if(!await t(s))continue}if(a.push(s),r&&a.length>=r){l=!0;break}}}if(r&&(c=c*r/(a.length||1)),!n.length)break;if(l)break}return a}parseTransLog(e){var s,t;const{blockTime:n,meta:r,transaction:o}=e;if(!n||!r)return;const{postTokenBalances:a,preTokenBalances:i,postBalances:l,preBalances:c}=r,{signatures:d,message:u}=o,h=(null===(s=r.innerInstructions)||void 0===s||null===(t=s[0])||void 0===t?void 0:t.instructions)||[],p=u.instructions[0]||[],x=new vs;x.signature=d[0],x.blockTime=n,x.time=Is.fromSeconds(n).ymd(),x.programId=p.programId.toString();const m=this.parseAccountInfo(u.accountKeys,a||[],i||[],l,c);return this.isParsedInstruction(p)?(x.programTransfer=this.parseListActionTransfer([p],m),x):(x.actionTransfers=this.parseListActionTransfer(h,m),x.programInfo={programId:p.programId.toString(),data:p.data},x.actionType="",x.actionType=this.parseAction(x),x)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,s){const t=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===Ss.Transfer){const n=e.info,r=this.parseActionTransfer(n,s);r&&t.push(r)}}return t}parseActionTransfer(e,s){const{source:t,destination:n,amount:r,lamports:o}=e,a=r||o.toString();if(!a||!s.has(t)||!s.has(n))return;const i=new Cs;return i.source=s.get(t),i.destination=s.get(n),i.amount=a,i}parseAccountInfo(e,s,t,n,r){const o=new Map;for(const a of s){const{accountIndex:s,mint:t,uiTokenAmount:n}=a,r=new bs;r.address=e[s].pubkey.toString(),r.postBalance=n.amount,r.mint=t,r.decimals=n.decimals,o.set(r.address,r)}for(const a of t){const{accountIndex:s,uiTokenAmount:t}=a,n=e[s].pubkey.toString(),r=o.get(n)||new bs;r.preBalance=t.amount,o.set(r.address,r)}return e.forEach(((e,s)=>{const t=e.pubkey.toString();if(!i.account.isAssociatedAddress(t)){const e=o.get(t)||new bs;e.address=t,e.mint="11111111111111111111111111111111",e.postBalance=String(n[s]||0),e.preBalance=String(r[s]||0),e.decimals=9,o.set(e.address,e)}})),o}}{constructor(...e){super(...e),this.parseAction=e=>{var s;const t=null===(s=e.programInfo)||void 0===s?void 0:s.data;if(!t)return"";const n=ws().decode(t),r=new Bs([Ds]).fromBuffer(zs.from(n));return Es[r.code]||""}}}var Ms=t(20418);class Ns{constructor(e){this.poolAddress=void 0,this.poolData=void 0,this.poolTransLogService=new Ls,this.dailyReportService=new js,this.tokenProvider=new Ms.Z,this.getPoolData=async()=>{if(!this.poolData){const e=window.sentre.swap;this.poolData=await e.getPoolData(this.poolAddress)}return this.poolData},this.getUsd=async(e,s)=>{const t=await this.tokenProvider.findByAddress(e);if(!t)return 0;const{decimals:n,extensions:r}=t;try{const e=await(0,p.l$)(null===r||void 0===r?void 0:r.coingeckoId);if(null===e||void 0===e||!e.price)return 0;const t=i.utils.undecimalize(s,n);return Number(t)*e.price}catch(o){return 0}},this.fetchTransLog=async(e,s)=>{const t=new gs.Z(this.poolAddress).createInstance("stat");let n=await t.getItem("translogs")||[];n=n.sort(((e,s)=>s.blockTime-e.blockTime));const r=n[0],o=n[n.length-1];if(r&&o){const[t]=await Promise.all([this.poolTransLogService.collect(this.poolAddress,{secondFrom:r.blockTime,secondTo:s})]);n=n.filter((s=>s.blockTime>e)),n=[...t,...n]}else n=await this.poolTransLogService.collect(this.poolAddress,{secondFrom:e,secondTo:s});return await t.setItem("translogs",n),n},this.getDailyInfo=async()=>{let e=new Is;const s=(new Is).subtractDay(11),{mint_a:t,mint_b:n,treasury_a:r,treasury_b:o,reserve_a:a,reserve_b:l,fee_ratio:c,tax_ratio:d}=await this.getPoolData(),u=await this.fetchTransLog(s.seconds(),e.seconds()),h=this.dailyReportService.parserDailyReport(u),p={};for(const i of h){const{time:e,address:s}=i;s!==r&&s!==o||(p[e]||(p[e]=[]),p[e].push(i))}const x=await this.getUsd(t,a),m=await this.getUsd(n,l),y={};for(y[e.ymd()]={tvl:x+m,fee:0,volume:0};e.ymd()>s.ymd();){const t=p[e.ymd()]||[],n=y[e.ymd()],r=e.subtractDay(1);!y[r.ymd()]&&r.ymd()>=s.ymd()&&(y[r.ymd()]={tvl:n.tvl,fee:0,volume:0});for(const s of t){const t=await this.getUsd(s.mint,s.amountOut),n=await this.getUsd(s.mint,s.amountIn);if(y[r.ymd()]&&(y[r.ymd()].tvl+=t-n,y[r.ymd()].tvl<0&&(y[r.ymd()].tvl=0)),s.actionType===_s.Swap){y[e.ymd()].volume+=n+t;const s=Number(i.utils.undecimalize(c+d,9))*t;y[e.ymd()].fee+=s}}e=e.subtractDay(1)}return y},this.poolAddress=e}}var Os=t(57452);const Fs="#40A9FF",Us=0,Ws=14,Ys="TVL",qs="transparent",Vs=()=>{const{selectedPoolAddress:e}=(0,n.useSelector)((e=>e.main)),[s,t]=(0,o.useState)([]),[a,i]=(0,o.useState)(!1),[c,h]=(0,o.useState)(!0),{ui:{width:p}}=(0,r.useUI)(),x={borderColor:qs,borderRadius:Us,pointRadius:Us,tooltip:Ys,pointHitRadius:Ws,pointHoverRadius:Us,backgroundColor:Fs},y=(0,o.useCallback)((async()=>{if(e)try{i(!0);const s=new Ns(e),n=await Os.R.load("getDailyInfo"+e,s.getDailyInfo,{cache:{ttl:3e5}}),r=Object.keys(n).map((e=>({data:n[e].tvl,label:ds()(e,"YYYYMMDD").format("MM/DD")})));t(r)}catch(s){}finally{i(!1)}}),[e]);(0,o.useEffect)((()=>{y()}),[y]);const j=c?"chevron-down-outline":"chevron-forward-outline",g=p<768;return(0,o.useEffect)((()=>h(!g)),[g]),(0,d.jsx)(l.Card,{bordered:!1,style:{height:"auto"},children:(0,d.jsx)(l.Spin,{tip:"Loading...",spinning:a,children:(0,d.jsxs)(l.Row,{gutter:[24,24],align:"middle",children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Title,{level:4,children:"Total Value Locked"})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{size:0,children:[(0,d.jsx)(l.Typography.Title,{level:2,children:(0,d.jsx)(m,{poolAddress:e})}),g&&(0,d.jsx)(l.Button,{type:"text",shape:"circle",icon:(0,d.jsx)(u,{name:j}),onClick:()=>h(!c)})]})}),c&&(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(ms,{chartData:s.map((e=>e.data)),labels:s.map((e=>e.label)),configs:x})})]})})})},Hs="#40A9FF",$s=0,Zs=14,Gs="TVL",Qs="transparent",Ks=()=>{const{selectedPoolAddress:e}=(0,n.useSelector)((e=>e.main)),[s,t]=(0,o.useState)([]),[a,i]=(0,o.useState)(!1),[c,h]=(0,o.useState)(!0),{ui:{width:x}}=(0,r.useUI)(),m={borderColor:Qs,borderRadius:$s,pointRadius:$s,tooltip:Gs,pointHitRadius:Zs,pointHoverRadius:$s,backgroundColor:Hs},y=(0,o.useCallback)((async()=>{if(e)try{i(!0);const s=new Ns(e),n=await Os.R.load("getDailyInfo"+e,s.getDailyInfo,{cache:{ttl:3e5}}),r=Object.keys(n).map((e=>({data:n[e].volume,label:ds()(e,"YYYYMMDD").format("MM/DD")})));t(r)}catch(s){}finally{i(!1)}}),[e]);(0,o.useEffect)((()=>{y()}),[y]);const j=c?"chevron-down-outline":"chevron-forward-outline",g=x<768;(0,o.useEffect)((()=>h(!g)),[g]);const f=(0,o.useMemo)((()=>{var e,t;const n=(null===(e=s[s.length-1])||void 0===e?void 0:e.data)||0,r=(null===(t=s[s.length-2])||void 0===t?void 0:t.data)||0;return n+(new Date).getHours()*r/24}),[s]);return(0,d.jsx)(l.Card,{bordered:!1,children:(0,d.jsx)(l.Spin,{tip:"Loading...",spinning:a,children:(0,d.jsxs)(l.Row,{gutter:[24,24],align:"middle",children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Title,{level:4,children:"24h Volume"})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{children:[(0,d.jsxs)(l.Typography.Title,{level:2,children:["$",(0,p.uR)(f).format("0,0.[0]a")]}),g&&(0,d.jsx)(l.Button,{type:"text",shape:"circle",icon:(0,d.jsx)(u,{name:j}),onClick:()=>h(!c)})]})}),c&&(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(ms,{type:"bar",chartData:s.map((e=>e.data)),labels:s.map((e=>e.label)),configs:m})})]})})})},Js=({orderAddress:e})=>{const[s,t]=(0,o.useState)(!1),{orders:r}=(0,n.useSelector)((e=>e)),{state:a,locked_time:i,updated_at:c}=r[e]||{},h=async()=>{try{const{wallet:s}=window.sentre,{sol:{purchasing:n}}=L;if(!s)throw new Error("Wallet is not connected");await t(!0);const{txId:r}=await n.redeemOrder(e,s);return fe("Redeem the order",r)}catch(s){return we(s)}finally{return t(!1)}};if(a===j.Open)return(0,d.jsx)(l.Button,{type:"text",size:"small",loading:s,onClick:async()=>{try{const{wallet:s}=window.sentre,{sol:{purchasing:n}}=L;if(!s)throw new Error("Wallet is not connected");await t(!0);const{txId:r}=await n.cancelOrder(e,s);return fe("Cancel the order",r)}catch(s){return we(s)}finally{return t(!1)}},children:"Cancel"});if(a===j.Approved){const e=Number(i)>Date.now()/1e3-Number(c);return(0,d.jsx)(l.Button,{type:"primary",size:"small",disabled:e,loading:s,onClick:h,children:"Redeem"})}return(0,d.jsx)(l.Button,{type:"text",size:"small",icon:(0,d.jsx)(u,{name:"open-outline"}),onClick:async()=>window.open((0,p.kU)(e),"_blank"),children:"Detail"})},Xs=({title:e})=>(0,d.jsx)(l.Typography.Text,{type:"secondary",style:{fontSize:12},children:e}),et=e=>(0,d.jsx)(l.Tag,{style:{border:"none"},...e}),st=({state:e})=>e===j.Open?(0,d.jsx)(et,{color:"gold",children:"Pending"}):e===j.Approved?(0,d.jsx)(et,{color:"cyan",children:"Approved"}):e===j.Done?(0,d.jsx)(et,{color:"green",children:"Done"}):e===j.Rejected?(0,d.jsx)(et,{color:"red",children:"Rejected"}):e===j.Canceled?(0,d.jsx)(et,{color:"volcano",children:"Canceled"}):(0,d.jsx)(et,{children:"Unknown"}),tt=({orderAddress:e})=>{const[s,t]=(0,o.useState)(!1),{orders:r,retailers:a}=(0,n.useSelector)((e=>e)),{retailer:c,bid_amount:h,ask_amount:x,locked_time:m,state:y,created_at:j,updated_at:g}=r[e]||{},{mint_bid:f,mint_ask:w}=a[c]||{},v=je(f)||0,b=je(w)||0,C=i.utils.undecimalize(h,v),A=i.utils.undecimalize(x,b);return(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Card,{bordered:!1,bodyStyle:{padding:12},className:"order-card order-card-bg",children:(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsxs)(l.Space,{style:{fontSize:12},children:[(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"Order ID"}),(0,d.jsx)(l.Typography.Text,{children:(0,p.Xn)(e)})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Button,{type:"text",size:"small",icon:(0,d.jsx)(u,{name:s?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>t(!s)})})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[8,8],justify:"space-between",children:[(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsx)(Xs,{title:"Payment"}),(0,d.jsxs)(l.Typography.Text,{ellipsis:!0,children:[(0,p.uR)(C).format("0,0.[0000]")," LP"]})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsx)(Xs,{title:"Receiving"}),(0,d.jsxs)(l.Typography.Text,{style:{fontWeight:700},ellipsis:!0,children:[(0,p.uR)(A).format("0,0.[0000]")," ",(0,d.jsx)(S,{mintAddress:w})]})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsx)(Xs,{title:"Locktime"}),(0,d.jsxs)(l.Typography.Text,{children:[Number(m)/86400," days"]})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsx)(Xs,{title:"Status"}),(0,d.jsx)(st,{state:y})]})})]})})]})})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Collapse,{activeKey:s.toString(),className:"expand-card expand-card-bg",children:(0,d.jsx)(l.Collapse.Panel,{header:null,showArrow:!1,children:(0,d.jsxs)(l.Row,{gutter:[8,8],justify:"space-between",align:"middle",children:[(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsx)(Xs,{title:"Created At"}),(0,d.jsx)(l.Typography.Text,{ellipsis:!0,children:ds()(1e3*Number(j)).format("HH:mm DD/MM/YYYY")})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsx)(Xs,{title:"Updated At"}),(0,d.jsx)(l.Typography.Text,{ellipsis:!0,children:ds()(1e3*Number(g)).format("HH:mm DD/MM/YYYY")})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsx)(Js,{orderAddress:e})})]})},"true")})})]})},nt=({poolAddress:e})=>{const{orders:s,retailers:t}=(0,n.useSelector)((e=>e)),{pools:o}=(0,r.usePool)(),{mint_lpt:a}=o[e]||{},i=Object.keys(s).filter((e=>{const{retailer:n}=s[e]||{},{mint_bid:r}=t[n]||{};return r===a}));return(0,d.jsxs)(l.Row,{gutter:[16,16],style:{height:282},className:"scrollbar",justify:"center",align:"top",children:[!i.length&&(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Empty,{})}),i.map((e=>(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(h.ZP,{height:125,overflow:!0,children:(0,d.jsx)(tt,{orderAddress:e})})},e)))]})},rt=e=>{const[s,t]=(0,o.useState)(0),{orders:a}=(0,n.useSelector)((e=>e)),{wallet:{address:i}}=(0,r.useWallet)(),l=Object.keys(a),c=(0,o.useCallback)((async()=>{try{const{sol:{purchasing:s}}=L;let n=0;for(;n<1e4;){const t=await s.deriveOrderAddress(n,i,e);if(!l.includes(t))break;n+=1}return t(n)}catch(s){return t(0)}}),[e,l,i]);return(0,o.useEffect)((()=>{c()}),[c]),s},ot=({label:e="",avatar:s=(0,d.jsx)(o.Fragment,{}),value:t="",subValue:n="",floatRight:r=!1})=>{const a=r?"right":"left";return(0,d.jsxs)(l.Space,{size:12,direction:"vertical",style:{textAlign:a},children:[(0,d.jsx)(l.Typography.Text,{children:e}),s,(0,d.jsx)(l.Typography.Title,{level:3,children:t}),n&&(0,d.jsx)(l.Typography.Title,{level:5,style:{textDecoration:"line-through"},type:"secondary",children:n})]})},at=({label:e="",value:s=""})=>(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{children:e})}),(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Typography.Title,{level:5,children:s})})]}),it=({retailerAddress:e,amount:s,locktime:t,visible:r=!1,onClose:a=(()=>{})})=>{var c;const[h,x]=(0,o.useState)(!1),{retailers:{[e]:m}}=(0,n.useSelector)((e=>e)),y=rt(e),j=je(m.mint_bid)||0,g=je(m.mint_ask)||0,f=ve(m.mint_bid,!0),v=ve(m.mint_ask,!0),b=BigInt(Math.floor(24*t*60*60)),A=(null===(c=w.find((({locktime:e})=>e===t)))||void 0===c?void 0:c.discount)||0,T=parseFloat(s)*f,k=i.utils.decimalize(s,j),P=v?i.utils.decimalize(T*(1+A)/v,g):BigInt(0);return(0,d.jsx)(l.Modal,{visible:r,footer:!1,closeIcon:(0,d.jsx)(u,{name:"close-outline"}),onCancel:a,children:(0,d.jsxs)(l.Row,{gutter:[24,24],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Typography.Title,{level:5,children:"Confirm"})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(ot,{label:"Payment",avatar:(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(C,{mintAddress:m.mint_bid}),(0,d.jsx)(l.Typography.Title,{level:5,children:(0,d.jsx)(S,{mintAddress:m.mint_bid})})]}),value:`${(0,p.uR)(s).format("0,0.[0000]")} LP`})}),(0,d.jsx)(l.Col,{children:(0,d.jsx)(ot,{label:"Receiving",avatar:(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(C,{mintAddress:m.mint_ask}),(0,d.jsx)(l.Typography.Title,{level:5,children:(0,d.jsx)(S,{mintAddress:m.mint_ask})})]}),value:(0,p.uR)(i.utils.undecimalize(P,g)).format("0,0.[0000]"),subValue:(0,p.uR)(T/v).format("0,0.[0000]"),floatRight:!0})})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Card,{className:"confirm-sub-card",bodyStyle:{padding:16},bordered:!1,children:(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(at,{label:"Created At",value:ds()().format("HH:mm DD/MM/YYYY")})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(at,{label:"Locked Time",value:`${t} Days`})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(at,{label:"Multiplier",value:100*(1+A)+"%"})})]})})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Button,{type:"primary",onClick:async()=>{try{const{sol:{purchasing:s}}=L,{wallet:t}=window.sentre;if(!t)throw new Error("Wallet is not connected");await x(!0);const{txId:n}=await s.placeOrder(y,k,P,b,e,t);return fe("Place a new order",n),a()}catch(s){return we(s)}finally{return x(!1)}},loading:h,block:!0,children:"Confirm"})})]})})},lt=({poolAddress:e,value:s,onChange:t})=>{const o=(0,n.useSelector)((e=>e.lpts)),{pools:a}=(0,r.usePool)(),c=Object.keys(o).find((s=>o[s].pool===e))||"",{amount:u}=o[c]||{},h=Number(i.utils.undecimalize(u||BigInt(0),9)),x=a[e];return(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{children:"I want to pay"})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{size:4,className:"caption",children:[(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"Available:"}),(0,d.jsxs)(l.Typography.Text,{type:"secondary",children:[(0,p.uR)(h).format("0,0.[0000]")," LP"]})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(pe,{value:s,onValue:t,prefix:(0,d.jsxs)(l.Space,{size:4,children:[(0,d.jsx)(S,{mintAddress:null===x||void 0===x?void 0:x.mint_lpt}),(0,d.jsx)(l.Divider,{type:"vertical"})]}),suffix:(0,d.jsx)(l.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>t(h.toString()),children:"MAX"})})})]})},ct=({label:e="",value:s="",discount:t=!1,description:n=null})=>{const r={color:t?"#F9575E":"inherit"};return(0,d.jsxs)(l.Row,{gutter:[8,8],align:"bottom",children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsxs)(l.Space,{size:4,children:[(0,d.jsx)(l.Typography.Text,{style:r,children:e}),n&&(0,d.jsx)(l.Popover,{content:n,placement:"leftTop",arrowPointAtCenter:!0,children:(0,d.jsx)(u,{name:"help-circle"})})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Typography.Title,{style:{...r,textDecoration:t?"unset":"line-through"},level:t?3:5,children:[s,(0,d.jsx)("small",{children:"%"})]})})]})},dt=({locktime:e})=>{var s;const t=(null===(s=w.find((({locktime:s})=>s===e)))||void 0===s?void 0:s.discount)||0;return(0,d.jsxs)(l.Row,{gutter:[5,5],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(ct,{label:"SNTR Buy-back",value:Math.round(100*(t+1)),discount:!0})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(ct,{label:"Market Buy-back",value:"100"})})]})},ut=w.map((({locktime:e})=>e)),ht=({poolAddress:e})=>{const[s,t]=(0,o.useState)(!1),[a,c]=(0,o.useState)(""),[h,p]=(0,o.useState)(ut[0]),{retailers:x}=(0,n.useSelector)((e=>e)),{pools:m}=(0,r.usePool)(),y=m[e],j=Object.values(x).findIndex((({mint_bid:e})=>e===(null===y||void 0===y?void 0:y.mint_lpt))),g=Object.keys(x)[j],f=!i.account.isAddress(g);return(0,d.jsxs)(l.Row,{gutter:[24,24],children:[(0,d.jsx)(l.Col,{xs:24,lg:12,children:(0,d.jsxs)(l.Space,{direction:"vertical",size:10,children:[(0,d.jsxs)(l.Space,{size:4,children:[(0,d.jsx)(l.Typography.Text,{children:"Lock Time (Days)"}),(0,d.jsx)(u,{name:"alert-circle-outline"})]}),(0,d.jsx)(l.Space,{size:16,children:ut.map((e=>(0,d.jsx)(l.Button,{type:h===e?"primary":"default",icon:e,onClick:()=>p(e)},e)))})]})}),(0,d.jsx)(l.Col,{xs:24,lg:12,children:(0,d.jsx)(dt,{locktime:h})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Typography.Text,{children:[(0,d.jsx)("span",{style:{fontWeight:700,color:"inherit"},children:"SNTR Buy-back Offering:"})," ","Selling your LP tokens with juicy profit. No fee, no slippage. The tokens will be unlocked after the selected period."]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(lt,{poolAddress:e,value:a,onChange:c})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Button,{type:"primary",icon:(0,d.jsx)(u,{name:f?"help-circle-outline":"diamond"}),onClick:()=>t(!0),disabled:!parseFloat(a)||f,block:!0,children:f?"There is no campaign on this pool":"Buy SNTR"})}),!f&&(0,d.jsx)(it,{retailerAddress:g,amount:a,locktime:h,visible:s,onClose:()=>t(!1)})]})},pt="retailers",xt=(0,P.createAsyncThunk)("retailers/getRetailers",(async()=>{const{sol:{purchasing:e}}=L,s=await e.connection.getProgramAccounts(e.purchasingProgramId,{filters:[{dataSize:161}]});let t={};return s.forEach((({pubkey:s,account:{data:n}})=>{const r=s.toBase58(),o=e.parseRetailerData(n);t[r]=o})),t})),mt=(0,P.createAsyncThunk)("retailers/getRetailer",(async({address:e},{getState:s})=>{if(!i.account.isAddress(e))throw new Error("Invalid retailer address");const{sol:{purchasing:t}}=L,{retailers:{[e]:n}}=s();if(n)return{[e]:n};return{[e]:await t.getRetailerData(e)}})),yt=(0,P.createAsyncThunk)("retailers/upsetRetailer",(async({address:e,data:s})=>{if(!i.account.isAddress(e))throw new Error("Invalid retailer address");if(!s)throw new Error("Data is empty");return{[e]:s}})),jt=(0,P.createAsyncThunk)("retailers/deleteRetailer",(async({address:e})=>{if(!i.account.isAddress(e))throw new Error("Invalid retailer address");return{address:e}})),gt=(0,P.createSlice)({name:pt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(xt.fulfilled,((e,{payload:s})=>s)).addCase(mt.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(yt.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(jt.fulfilled,((e,{payload:s})=>{delete e[s.address]}))}}).reducer,ft=({poolAddress:e})=>{const s=(0,n.useDispatch)(),{wallet:{address:t}}=(0,r.useWallet)(),{pools:o}=(0,r.usePool)(),a=o[e];return(0,d.jsx)(l.Row,{gutter:[24,24],children:(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Button,{type:"primary",onClick:async()=>{const{wallet:e}=window.sentre,{sol:{purchasing:n,sntrAddress:r}}=L;try{if(!e)throw new Error("Wallet is not connected");if(!i.account.isAddress(null===a||void 0===a?void 0:a.mint_lpt))throw new Error("Invalid bid mint address");if(!i.account.isAddress(r))throw new Error("Invalid ask mint address");const{txId:o,retailerAddress:l}=await n.initializeRetailer(t,a.mint_lpt,r,e);return await s(mt({address:l})).unwrap(),fe("Initialize a new retailer",o)}catch(o){return we(o)}},children:"New Retailer"})})})},wt=({retailerAddress:e})=>{const[s,t]=(0,o.useState)(!1),{retailers:{[e]:r}}=(0,n.useSelector)((e=>e)),a=null===r||void 0===r?void 0:r.state;return(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(l.Typography.Text,{children:"Current State:"}),(0,d.jsx)(u,{name:1===a?"checkmark-circle-sharp":"snow-outline"}),(0,d.jsx)(l.Typography.Text,{style:{fontWeight:700},children:1===a?"Active":"Frozen"}),(0,d.jsx)(l.Button,{size:"small",onClick:1===a?async()=>{try{const{sol:{purchasing:s}}=L,{wallet:n}=window.sentre;if(!n)throw new Error("Wallet is not connected");if(!i.account.isAddress(e))throw new Error("Invalid retailer address");await t(!0);const{txId:r}=await s.freezeRetailer(e,n);return fe(`Freeze the retailer ${e}`,r)}catch(s){return we(s)}finally{return t(!1)}}:async()=>{try{const{sol:{purchasing:s}}=L,{wallet:n}=window.sentre;if(!n)throw new Error("Wallet is not connected");if(!i.account.isAddress(e))throw new Error("Invalid retailer address");await t(!0);const{txId:r}=await s.thawRetailer(e,n);return fe(`Thaw the retailer ${e}`,r)}catch(s){return we(s)}finally{return t(!1)}},loading:s,children:1===a?"Freeze":"Thaw"})]})},vt=({orderAddress:e})=>{const{retailers:s,orders:t}=(0,n.useSelector)((e=>e)),r=t[e],{mint_ask:o}=s[r.retailer]||{},a=je(o)||0,c=i.utils.undecimalize(r.ask_amount,a);return(0,d.jsx)(l.Typography.Text,{style:{fontWeight:700},children:(0,d.jsxs)(l.Space,{size:4,children:[(0,p.uR)(c).format("0,0.[0000]"),(0,d.jsx)(S,{mintAddress:o})]})})},bt=({orderAddress:e})=>{const{retailers:s,orders:t}=(0,n.useSelector)((e=>e)),r=t[e],{mint_bid:o}=s[r.retailer]||{},a=je(o)||0,c=i.utils.undecimalize(r.bid_amount,a);return(0,d.jsxs)(l.Typography.Text,{children:[(0,p.uR)(c).format("0,0.[0000]")," LP"]})},Ct=({orderData:e,onClose:s})=>{var t;const[r,a]=(0,o.useState)(!1),[c,h]=(0,o.useState)(!1),{retailers:x}=(0,n.useSelector)((e=>e)),{mint_bid:m,mint_ask:y}=x[e.retailer]||{},j=je(m)||0,g=je(y)||0,f=i.utils.undecimalize(e.bid_amount,j),v=i.utils.undecimalize(e.ask_amount,g),b=Number(e.locked_time)/86400,A=(null===(t=w.find((({locktime:e})=>e===b)))||void 0===t?void 0:t.discount)||0;return(0,d.jsxs)(l.Row,{gutter:[16,24],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{align:"middle",justify:"space-between",children:[(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsx)(l.Typography.Text,{children:"Pay"}),(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(C,{mintAddress:y}),(0,d.jsx)(l.Typography.Text,{children:(0,d.jsx)(S,{mintAddress:y})})]}),(0,d.jsx)(l.Typography.Title,{level:4,children:v})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsx)(u,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsx)(l.Typography.Text,{children:"Receive"}),(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(C,{mintAddress:m}),(0,d.jsx)(l.Typography.Text,{children:(0,d.jsx)(S,{separator:" + ",mintAddress:m})})]}),(0,d.jsx)(l.Typography.Title,{level:4,children:f})]})})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Card,{bordered:!1,className:"confirm-info",style:{boxShadow:"none",borderRadius:8},bodyStyle:{padding:16},children:(0,d.jsxs)(l.Row,{gutter:[12,12],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"Order ID"})}),(0,d.jsx)(l.Typography.Text,{children:(0,p.Xn)(e.address)})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"Start day"})}),(0,d.jsx)(l.Col,{children:ds()(1e3*Number(e.created_at)).format("DD/MM/YYYY")})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"Locked duration"})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Typography.Text,{children:[b," days"]})})]})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsxs)(l.Row,{children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"Purchase rate"})}),(0,d.jsxs)(l.Col,{children:[Math.round(100*(A+1)),"%"]})]})})]})})}),(0,d.jsx)(l.Col,{span:24,style:{textAlign:"right"},children:(0,d.jsxs)(l.Space,{size:4,children:[(0,d.jsx)(l.Button,{loading:c,onClick:async()=>{try{const{wallet:s}=window.sentre,{sol:{purchasing:t}}=L;if(!s)throw new Error("Wallet is not connected");await h(!0);const{txId:n}=await t.rejectOrder(e.address,s);return fe("Reject the order",n)}catch(s){return we(s)}finally{return h(!1)}},children:"Reject"}),(0,d.jsx)(l.Button,{loading:r,onClick:async()=>{try{const{wallet:t}=window.sentre,{sol:{purchasing:n}}=L;if(!t)throw new Error("Wallet is not connected");await a(!0);const{txId:r}=await n.approveOrder(e.address,t);return fe("Approve the order",r)}catch(t){return we(t)}finally{return s(!1),a(!1)}},type:"primary",children:"Approve"})]})})]})},At=({state:e,orderData:s})=>{const[t,n]=(0,o.useState)(!1);return e===j.Open?(0,d.jsxs)(o.Fragment,{children:[(0,d.jsx)(l.Button,{size:"small",type:"primary",onClick:()=>n(!0),children:"Confirm"}),(0,d.jsx)(l.Modal,{title:(0,d.jsx)(l.Typography.Title,{level:4,children:"Confirm order"}),visible:t,footer:null,onCancel:()=>n(!1),closeIcon:(0,d.jsx)(u,{name:"close"}),children:(0,d.jsx)(Ct,{onClose:n,orderData:s})})]}):(0,d.jsx)(st,{state:e})},Tt=[{title:"PAY",dataIndex:"ask_amount",key:"ask_amount",render:(e,s)=>(0,d.jsx)(h.ZP,{height:52,overflow:!0,children:(0,d.jsx)(vt,{orderAddress:s.address})})},{title:"RECEIVE",dataIndex:"bid_amount",key:"bid_amount",render:(e,s)=>(0,d.jsx)(h.ZP,{height:52,overflow:!0,children:(0,d.jsx)(bt,{orderAddress:s.address})})},{title:"LOCKED",dataIndex:"locked_time",key:"locked_time",width:100,render:e=>(0,d.jsx)(h.ZP,{height:52,overflow:!0,children:(0,d.jsxs)(l.Typography.Text,{children:[Number(e)/86400," days"]})})},{title:"ACTIONS",key:"state",dataIndex:"state",width:100,render:(e,s)=>(0,d.jsx)(h.ZP,{height:52,overflow:!0,children:(0,d.jsx)(At,{state:e,orderData:s})})}],kt="orders",St=(0,P.createAsyncThunk)("orders/getOrders",(async({owner:e,retailer:s})=>{const{sol:{purchasing:t}}=L;let n={},r=[];i.account.isAddress(e)&&r.push({memcmp:{bytes:e,offset:0}}),i.account.isAddress(s)&&r.push({memcmp:{bytes:s,offset:33}});return(await t.connection.getProgramAccounts(t.purchasingProgramId,{filters:[{dataSize:105},...r]})).forEach((({pubkey:e,account:{data:s}})=>{const r=e.toBase58(),o=t.parseOrderData(s);n[r]=o})),n})),Pt=(0,P.createAsyncThunk)("orders/getOrder",(async({address:e},{getState:s})=>{if(!i.account.isAddress(e))throw new Error("Invalid order address");const{sol:{purchasing:t}}=L,{retailers:{[e]:n}}=s();if(n)return{[e]:n};return{[e]:await t.getOrderData(e)}})),Rt=(0,P.createAsyncThunk)("orders/upsetOrder",(async({address:e,data:s})=>{if(!i.account.isAddress(e))throw new Error("Invalid order address");if(!s)throw new Error("Data is empty");return{[e]:s}})),It=(0,P.createAsyncThunk)("orders/deleteOrder",(async({address:e})=>{if(!i.account.isAddress(e))throw new Error("Invalid order address");return{address:e}})),zt=(0,P.createSlice)({name:kt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(St.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(Pt.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(Rt.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(It.fulfilled,((e,{payload:s})=>{delete e[s.address]}))}}).reducer,Bt=({poolAddress:e})=>{const[s,t]=(0,o.useState)(!0),[a,c]=(0,o.useState)(6),u=(0,n.useDispatch)(),{retailers:p,orders:x}=(0,n.useSelector)((e=>e)),{pools:m}=(0,r.usePool)(),{wallet:{address:y}}=(0,r.useWallet)(),j=m[e],g=Object.keys(p).filter((e=>{const{owner:s}=p[e];return s===y})),f=g.find((e=>{const{mint_bid:s}=p[e];return s===(null===j||void 0===j?void 0:j.mint_lpt)})),w=(0,o.useMemo)((()=>Object.keys(x).map((e=>({...x[e],address:e})))),[x]),v=(0,o.useCallback)((async()=>{await u(St({retailer:y}))}),[u,y]);return(0,o.useEffect)((()=>{v()}),[v]),(0,o.useEffect)((()=>{setTimeout((()=>{(0,h.be)()}),500)}),[]),(0,d.jsxs)(l.Row,{gutter:[24,12],justify:"center",children:[(0,d.jsx)(l.Col,{span:24,children:i.account.isAddress(f)?(0,d.jsxs)(l.Row,{gutter:[24,24],wrap:!1,children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(wt,{retailerAddress:f})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(l.Typography.Text,{type:"secondary",children:"Filtered?"}),(0,d.jsx)(l.Switch,{checked:s,onChange:t,size:"small"})]})})]}):(0,d.jsx)(ft,{poolAddress:e})}),(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(l.Table,{className:"scrollbar",columns:Tt,dataSource:w.slice(0,a),rowClassName:(e,s)=>s%2?"odd-row":"even-row",pagination:!1,scroll:{y:155,x:500},rowKey:e=>Number(e.created_at)})}),(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Button,{onClick:()=>c(a+6),disabled:a>=w.length,type:"text",children:"View more"})})]})},Dt=({poolAddress:e})=>{var s;const{wallet:{address:t}}=(0,r.useWallet)(),{pools:n}=(0,r.usePool)(),o=t===(null===(s=n[e])||void 0===s?void 0:s.owner);return(0,d.jsx)(l.Card,{bordered:!1,bodyStyle:{padding:0,minHeight:384},children:(0,d.jsxs)(l.Tabs,{style:{padding:"16px 24px 24px 24px"},children:[(0,d.jsx)(l.Tabs.TabPane,{tab:"Reinvestment",children:(0,d.jsx)(ht,{poolAddress:e})},"reinvestmnet"),(0,d.jsx)(l.Tabs.TabPane,{tab:"Redeem",children:(0,d.jsx)(nt,{poolAddress:e})},"redeem"),o?(0,d.jsx)(l.Tabs.TabPane,{tab:"Admin",children:(0,d.jsx)(Bt,{poolAddress:e})},"admin"):null]})})},_t=()=>{const{selectedPoolAddress:e}=(0,n.useSelector)((e=>e.main)),{wallet:{address:s}}=(0,r.useWallet)(),{pools:t}=(0,r.usePool)(),{owner:o}=(null===t||void 0===t?void 0:t[e])||{},a=s===o;return(0,d.jsxs)(l.Row,{gutter:[24,24],children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(We,{poolAddress:e})}),(0,d.jsx)(l.Col,{xs:{span:24,order:1},md:{span:12,order:1},children:(0,d.jsx)(Vs,{})}),(0,d.jsx)(l.Col,{xs:{span:24,order:3},md:{span:12,order:2},children:(0,d.jsx)(ss,{poolAddress:e})}),(0,d.jsx)(l.Col,{xs:{span:24,order:2},md:{span:12,order:3},children:(0,d.jsx)(Ks,{})}),(0,d.jsx)(l.Col,{xs:{span:24,order:4},md:12,children:(0,d.jsx)(Dt,{poolAddress:e})}),a&&(0,d.jsx)(l.Col,{xs:{span:24,order:5},md:12,children:(0,d.jsx)(ls,{poolAddress:e})})]})},Et=()=>{const e=(0,n.useDispatch)(),{ui:{width:s}}=(0,r.useUI)();return s>=1200?null:(0,d.jsx)(l.Affix,{style:{position:"fixed",bottom:16,right:16,zIndex:9999},children:(0,d.jsx)(l.Button,{type:"primary",onClick:()=>e(Q(!0)),icon:(0,d.jsx)(u,{name:"list-outline"}),size:"large",children:"Pools List"})})},Lt="lpts",Mt=(0,P.createAsyncThunk)("lpts/getLPTs",(async({accounts:e})=>{const{splt:s,swap:t}=window.sentre,n=e.map((({mint:e})=>e)).map((e=>i.account.fromAddress(e))),r=(await i.utils.wrappedGetMultipleAccountsInfo(s.connection,n)).map((e=>null!==e&&void 0!==e&&e.data?s.parseMintData(e.data):null));if(null===r||void 0===r||!r.length)return{};const o=await Promise.all(r.map((async e=>{try{const{mint_authority:s,freeze_authority:n}=e||{};if(!i.account.isAddress(s)||!i.account.isAddress(n))return;return await t.derivePoolAddress(s,n)}catch(s){return}})));let a={};return e.forEach((({address:e,...s},t)=>{const n=o[t];i.account.isAddress(n)&&(a[e]={...s,pool:n})})),a})),Nt=(0,P.createAsyncThunk)("lpts/getLPT",(async({address:e},{getState:s})=>{if(!i.account.isAddress(e))throw new Error("Invalid account address");const{lpts:{[e]:t}}=s();if(t)return{[e]:t};const{swap:n}=window.sentre;return{[e]:await n.getLPTData(e)}})),Ot=(0,P.createAsyncThunk)("lpts/upsetLPT",(async({address:e,data:s},{getState:t})=>{if(!i.account.isAddress(e))throw new Error("Invalid address");if(!s)throw new Error("Data is empty");const{lpts:{[e]:n}}=t(),{pool:r}=n||{};if(i.account.isAddress(r))return{[e]:{...s,pool:r}};const{swap:o}=window.sentre;return{[e]:await o.getLPTData(e)}})),Ft=(0,P.createAsyncThunk)("lpts/deleteLPT",(async({address:e})=>{if(!i.account.isAddress(e))throw new Error("Invalid address");return{address:e}})),Ut=(0,P.createSlice)({name:Lt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Mt.fulfilled,((e,{payload:s})=>s)).addCase(Nt.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(Ot.fulfilled,((e,{payload:s})=>{Object.assign(e,s)})).addCase(Ft.fulfilled,((e,{payload:s})=>{delete e[s.address]}))}}).reducer;let Wt=0;const Yt=()=>{const e=(0,n.useDispatch)(),{accounts:s}=(0,r.useAccount)(),{wallet:{address:t}}=(0,r.useWallet)(),a=(0,o.useMemo)((()=>Object.keys(s).map((e=>({address:e,...s[e]})))),[s]),l=(0,o.useCallback)((async()=>{try{if(!i.account.isAddress(t))return;await e(Mt({accounts:a})).unwrap()}catch(s){await we(s)}}),[e,a,t]),c=(0,o.useCallback)((async()=>{if(Wt)return console.warn("Already watched");const s=[{memcmp:{bytes:t,offset:32}}];Wt=window.sentre.splt.watch(((s,t)=>{if(s)return console.error(s);const{address:n,data:r}=t;return e(Ot({address:n,data:r}))}),s)}),[e,t]);return(0,o.useEffect)((()=>(l(),c(),()=>{(async()=>{try{await window.sentre.splt.unwatch(Wt)}catch(e){}})(),Wt=0})),[l,c]),(0,d.jsx)(o.Fragment,{})},{sol:{purchasing:qt}}=L;let Vt=0;const Ht=()=>{const e=(0,n.useDispatch)(),{wallet:{address:s}}=(0,r.useWallet)(),t=(0,o.useCallback)((async()=>{try{if(!i.account.isAddress(s))return;await e(xt()).unwrap()}catch(t){await we(t)}}),[e,s]),a=(0,o.useCallback)((async()=>{if(Vt)return console.warn("Already watched");Vt=qt.watch(((s,t)=>{if(s)return console.error(s);const{address:n,data:r}=t;return e(yt({address:n,data:r}))}),[{dataSize:161}])}),[e]);return(0,o.useEffect)((()=>(t(),a(),()=>{(async()=>{try{await qt.unwatch(Vt)}catch(e){}})(),Vt=0})),[t,a]),(0,d.jsx)(o.Fragment,{})},{sol:{purchasing:$t}}=L;let Zt=0;const Gt=()=>{const e=(0,n.useDispatch)(),{wallet:{address:s}}=(0,r.useWallet)(),t=(0,o.useCallback)((async()=>{try{if(!i.account.isAddress(s))return;await e(St({owner:s})).unwrap()}catch(t){await we(t)}}),[e,s]),a=(0,o.useCallback)((async()=>{if(Zt)return console.warn("Already watched");Zt=$t.watch(((s,t)=>{if(s)return console.error(s);const{address:n,data:r}=t;return e(Rt({address:n,data:r}))}),[{dataSize:105}])}),[e]);return(0,o.useEffect)((()=>(t(),a(),()=>{(async()=>{try{await $t.unwatch(Zt)}catch(e){}})(),Zt=0})),[t,a]),(0,d.jsx)(o.Fragment,{})},Qt=()=>{const e=(0,n.useDispatch)(),{main:{visible:s}}=(0,n.useSelector)((e=>e)),{ui:{width:t}}=(0,r.useUI)(),{pools:c}=(0,r.usePool)(),{selectedPoolAddress:h}=(0,n.useSelector)((e=>e.main)),p=new URLSearchParams((0,a.useLocation)().search).get(f.address)||"",x=L.sol.senOwners,m=Object.keys(c).filter((e=>{const s=null===c||void 0===c?void 0:c[e],{owner:t}=s;return x.includes(t)})),y=(0,o.useMemo)((()=>{if(Object.keys(c).length)return Object.keys(c).map((e=>({address:e,...c[e]}))).sort((({reserve_a:e,reserve_b:s},{reserve_a:t,reserve_b:n})=>{const r=e*s,o=t*n;return r>o?-1:r<o?1:0}))}),[c]),j=(0,o.useCallback)((()=>{var s;if(i.account.isAddress(h))return;if(i.account.isAddress(p))return e(Z(p));const t=null===y||void 0===y||null===(s=y[0])||void 0===s?void 0:s.address,n=null===m||void 0===m?void 0:m[0];if(i.account.isAddress(n))return e(Z(n));i.account.isAddress(t)&&e(Z(t))}),[e,m,p,h,y]);return(0,o.useEffect)((()=>{j()}),[j]),(0,d.jsxs)(l.Row,{gutter:[24,24],style:{paddingBottom:12},children:[t>=1200?(0,d.jsx)(l.Col,{lg:8,xl:6,children:(0,d.jsx)(l.Card,{bodyStyle:{padding:0},bordered:!1,children:(0,d.jsx)(Ee,{})})}):(0,d.jsx)(l.Modal,{visible:s,onCancel:()=>e(Q(!1)),closeIcon:(0,d.jsx)(u,{name:"close-outline"}),footer:null,title:(0,d.jsx)(l.Typography.Title,{level:4,children:"Pool Selection"}),bodyStyle:{padding:0},centered:!0,children:(0,d.jsx)(Ee,{})}),(0,d.jsx)(l.Col,{xs:24,lg:24,xl:18,children:(0,d.jsx)(_t,{})}),(0,d.jsx)(Et,{}),(0,d.jsx)(Yt,{}),(0,d.jsx)(Ht,{}),(0,d.jsx)(Gt,{})]})},Kt=()=>{const e=(0,n.useDispatch)();return(0,o.useEffect)((()=>{e(G(g.Sentre))}),[e]),(0,d.jsxs)(l.Row,{gutter:24,align:"middle",className:"header-widget",children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsx)(l.Typography.Text,{style:{color:"#e9e9eb "},children:"Pools list by"})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Select,{defaultValue:g.Sentre,onChange:s=>{e(G(s))},className:"header-select",children:[(0,d.jsx)(l.Select.Option,{value:g.Sentre,children:"Sentre"}),(0,d.jsx)(l.Select.Option,{value:g.Community,children:"Community"}),(0,d.jsx)(l.Select.Option,{value:g.Deposited,children:"Deposited"}),(0,d.jsx)(l.Select.Option,{value:g.YourPools,children:"Your pools"})]})})]})},Jt=({data:e,onClick:s=(()=>{}),action:t=(0,d.jsx)(o.Fragment,{}),keyExpand:n})=>{var a;const{pool:c,amount:h}=e,[x,j]=(0,o.useState)(!1),g=i.utils.undecimalize(h,9),{pools:f}=(0,r.usePool)(),w=(null===f||void 0===f?void 0:f[c].state)===y.Frozen,b=(null===f||void 0===f||null===(a=f[c])||void 0===a?void 0:a.mint_lpt)||"",A=x?"":"expandHidden",T=n.toString();return(0,d.jsxs)(l.Card,{bodyStyle:{padding:12,minHeight:78},bordered:!1,className:"lp-card",children:[(0,d.jsxs)(l.Row,{gutter:[12,12],align:"top",children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(C,{mintAddress:b,size:24}),(0,d.jsx)(l.Typography.Text,{type:w?"secondary":void 0,children:(0,d.jsx)(S,{mintAddress:b})})]}),(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(l.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,d.jsx)(l.Typography.Text,{children:(0,d.jsx)(m,{poolAddress:c})}),(0,d.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,d.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"My LP:"}),(0,d.jsx)(l.Typography.Text,{children:(0,p.uR)(g).format("0,0.[00]")})]})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{size:2,children:[(0,d.jsx)(v,{poolAddress:c}),t,(0,d.jsx)(l.Button,{size:"small",type:"text",icon:(0,d.jsx)(u,{name:x?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>j(!x)})]})})]}),(0,d.jsx)(l.Collapse,{className:A,style:{marginTop:16},ghost:!0,activeKey:T,bordered:!1,children:(0,d.jsx)(l.Collapse.Panel,{header:"",children:(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{span:12,children:(0,d.jsx)(Fe,{poolAddress:c})}),(0,d.jsx)(l.Col,{span:12,children:(0,d.jsx)(l.Button,{onClick:s,block:!0,type:"primary",children:"Detail"})})]})},T)})]})},Xt=({onInit:e=(()=>{}),onClick:s=(()=>{}),action:t=(()=>(0,d.jsx)(o.Fragment,{}))})=>{const a=(0,n.useSelector)((e=>e.lpts)),i=(0,n.useSelector)((e=>e.main.selectedCategoryPool)),{pools:c}=(0,r.usePool)(),{wallet:{address:u}}=(0,r.useWallet)(),p=(0,o.useMemo)((()=>Object.keys(a).filter((e=>{var s;const{pool:t,amount:n}=a[e];return"deposited"===i&&n!==BigInt(0)||"your-pools"===i&&(null===c||void 0===c||null===(s=c[t])||void 0===s?void 0:s.owner)===u?c[t]:null}))),[c,a,u,i]);return(0,o.useEffect)((()=>{p.length&&e(p[0])}),[e,p,a]),(0,d.jsxs)(l.Row,{gutter:[12,12],justify:"center",children:[!p.length&&(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Empty,{})}),p.map(((e,n)=>{const{pool:r}=a[e];return(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(h.ZP,{height:78,overflow:!0,children:(0,d.jsx)(Jt,{keyExpand:n+1,data:a[e],action:t(e,r),onClick:()=>s(r)})})},e+n)}))]})},en=({poolAddress:e,onClick:s=(()=>{}),action:t=(0,d.jsx)(o.Fragment,{}),keyExpand:a})=>{const i=(0,n.useDispatch)(),[c,h]=(0,o.useState)(!1),{pools:x}=(0,r.usePool)(),j=(0,n.useSelector)((s=>{var t;return null===(t=s.stat[e])||void 0===t?void 0:t.details})),g=(null===x||void 0===x?void 0:x[e])||{},{mint_lpt:f,state:w}=g,b=(0,o.useMemo)((()=>{if(!j||!j.roi)return 0;const e=j.roi;return Math.pow(1+Number(e)/100,365)-1}),[j]);(0,o.useEffect)((()=>{e&&i(q({address:e}))}),[i,e]);const A=w===y.Frozen,T=c?"":"expandHidden",k=a.toString();return(0,d.jsxs)(l.Card,{bodyStyle:{padding:12,minHeight:78},bordered:!1,className:"lp-card",children:[(0,d.jsxs)(l.Row,{gutter:[12,12],align:"top",children:[(0,d.jsx)(l.Col,{flex:"auto",children:(0,d.jsxs)(l.Space,{direction:"vertical",children:[(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(C,{mintAddress:f,size:24}),(0,d.jsx)(l.Typography.Text,{type:A?"secondary":void 0,children:(0,d.jsx)(S,{mintAddress:f})})]}),(0,d.jsxs)(l.Space,{children:[(0,d.jsx)(l.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,d.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,d.jsx)(l.Typography.Text,{children:(0,d.jsx)(m,{poolAddress:e})}),(0,d.jsx)(l.Divider,{type:"vertical",style:{margin:0}}),(0,d.jsx)(l.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,d.jsx)(l.Typography.Text,{children:(0,p.uR)(b).format("0,0.[00]%")})]})]})}),(0,d.jsx)(l.Col,{children:(0,d.jsxs)(l.Space,{size:2,children:[(0,d.jsx)(v,{poolAddress:e}),t,(0,d.jsx)(l.Button,{size:"small",type:"text",icon:(0,d.jsx)(u,{name:c?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>h(!c)})]})})]}),(0,d.jsx)(l.Collapse,{className:T,style:{marginTop:16},ghost:!0,activeKey:k,bordered:!1,children:(0,d.jsx)(l.Collapse.Panel,{header:"",children:(0,d.jsxs)(l.Row,{gutter:[16,16],children:[(0,d.jsx)(l.Col,{span:12,children:(0,d.jsx)(Fe,{poolAddress:e})}),(0,d.jsx)(l.Col,{span:12,children:(0,d.jsx)(l.Button,{onClick:s,block:!0,type:"primary",children:"Detail"})})]})},k)})]})},sn=({onClick:e=(()=>{}),action:s=(()=>(0,d.jsx)(o.Fragment,{}))})=>{const{sentrePools:t}=se(),{listPoolAddress:n}=re(t);return(0,d.jsxs)(o.Fragment,{children:[!n.length&&(0,d.jsx)(l.Col,{children:(0,d.jsx)(l.Empty,{})}),n.map(((t,n)=>(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(h.ZP,{height:78,overflow:!0,children:(0,d.jsx)(en,{poolAddress:t,action:s(t),onClick:()=>e(t),keyExpand:n+1})})},t)))]})},tn=({onInit:e=(()=>{}),onClick:s=(()=>{}),action:t=(()=>(0,d.jsx)(o.Fragment,{}))})=>{const{communityPools:n}=te(),{listPoolAddress:r}=re(n);return(0,o.useEffect)((()=>{r.length&&e(r[0])}),[e,r]),(0,d.jsx)(o.Fragment,{children:r.map(((e,n)=>(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(h.ZP,{height:78,overflow:!0,children:(0,d.jsx)(en,{poolAddress:e,action:t(e),onClick:()=>s(e),keyExpand:n+1})})},e)))})},nn=({onInit:e=(()=>{}),onClick:s=(()=>{}),action:t=(()=>(0,d.jsx)(o.Fragment,{}))})=>{const r=(0,n.useSelector)((e=>e.main.selectedCategoryPool)),a=(0,o.useMemo)((()=>r===g.Sentre),[r]);return(0,d.jsx)(l.Row,{gutter:[12,12],justify:"center",children:a?(0,d.jsx)(sn,{onClick:s,action:t}):(0,d.jsx)(tn,{onInit:e,onClick:s,action:t})})},rn=()=>{const e=(0,n.useDispatch)(),s=(0,n.useSelector)((e=>e.main.selectedCategoryPool)),t=(0,a.useHistory)(),{manifest:{appId:r}}=L,i=(0,o.useCallback)((s=>{e(Z(s)),e(Q(!1)),t.push(`app/${r}`)}),[e,t,r]);return(0,d.jsxs)(l.Row,{className:"widget",children:[(0,d.jsx)(l.Col,{span:24,children:(0,d.jsx)(Kt,{})}),(0,d.jsx)(l.Col,{span:24,className:"body-widget",children:s===g.Sentre||s===g.Community?(0,d.jsx)(nn,{onClick:i}):(0,d.jsx)(Xt,{onClick:i})}),(0,d.jsx)(l.Col,{span:24,style:{height:16}}),(0,d.jsx)(Yt,{}),(0,d.jsx)(Ht,{}),(0,d.jsx)(Gt,{})]})};var on=t(85912);const an=(0,P.configureStore)({middleware:e=>e(on.h),devTools:(0,on.$)("sen_lp"),reducer:{main:X,stat:V,lpts:Ut,retailers:gt,orders:zt,settings:Be}}),{manifest:{appId:ln}}=L,cn=()=>(0,d.jsx)(r.UIProvider,{appId:ln,antd:!0,children:(0,d.jsx)(r.MintProvider,{children:(0,d.jsx)(r.PoolProvider,{children:(0,d.jsx)(r.AccountProvider,{children:(0,d.jsx)(r.WalletProvider,{children:(0,d.jsx)(n.Provider,{store:an,children:(0,d.jsx)(Qt,{})})})})})})}),dn={size:"small",type:"solid"},un=()=>(0,d.jsx)(r.MintProvider,{children:(0,d.jsx)(r.UIProvider,{appId:ln,antd:!0,children:(0,d.jsx)(r.PoolProvider,{children:(0,d.jsx)(r.AccountProvider,{children:(0,d.jsx)(r.WalletProvider,{children:(0,d.jsx)(n.Provider,{store:an,children:(0,d.jsx)(rn,{})})})})})})})},55852:(e,s,t)=>{"use strict";t.d(s,{Z:()=>c});var n=t(15190);const r={spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},o={devnet:{...r,node:"https://api.devnet.solana.com",chainId:103,sntrAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",sntrPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9"},testnet:{...r,node:"https://api.testnet.solana.com",chainId:102,sntrAddress:"",sntrPoolAddress:"",swapAddress:"",taxmanAddress:""},mainnet:{...r,node:"https://api.mainnet-beta.solana.com",chainId:101,sntrAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",sntrPoolAddress:"Aa3WZX7Xunfebp2MuAcz9CNw8TYTDL7mVrmb11rjyVm6",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}};const a="sen_lp",i={[a]:{url:"https://descartesnetwork.github.io/sen-lp/index.js",appId:a,name:"Sen LP",author:{name:"Sentre",email:"hi@sentre.io"},supportedViews:"page,widget".split(",").map((e=>e.trim())).filter((e=>["page","widget"].includes(e))),tags:"solana,dapps,liquidity".split(",").map((e=>e.trim())),description:"Liquidity Provision to pools in the Sentre ecosystem",verified:!1}},l={development:{defaultAppId:a,extra:i,senreg:"https://descartesnetwork.github.io/senreg/register.json"},staging:{defaultAppId:a,extra:i,senreg:"https://descartesnetwork.github.io/senreg/register.json"},production:{defaultAppId:a,extra:{},senreg:"https://descartesnetwork.github.io/senreg/register.json"}},c={sol:o[n.ef],register:l[n.OB]}},20418:(e,s,t)=>{"use strict";t.d(s,{Z:()=>x});var n=t(11796),r=t(67845),o=t(15190),a=t(55852);const i=e=>({symbol:"SOL",name:"Solana",address:"11111111111111111111111111111111",decimals:9,chainId:e,extensions:{coingeckoId:"solana"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"}),l=e=>({symbol:"SNTR",name:"Sentre",address:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",decimals:9,chainId:e,extensions:{coingeckoId:"sentre"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png"}),c=[i(103),l(103),{symbol:"wBTC",name:"Wrapped Bitcoin",address:"8jk4eJymMfNZV9mkRNxJEt2VJ3pRvdJvD5FE94GXGBPM",decimals:9,chainId:103,extensions:{coingeckoId:"bitcoin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/qfnqNqs3nCAHjnyCgLRDbBtq4p2MtHZxw8YjSyYhPoL/logo.png"},{symbol:"wETH",name:"Ethereum",address:"27hdcZv7RtuMp75vupThR3T4KLsL61t476eosMdoec4c",decimals:9,chainId:103,extensions:{coingeckoId:"ethereum"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf/logo.png"},{symbol:"UNI",name:"Uniswap",address:"FVZFSXu3yn17YdcxLD72TFDUqkdE5xZvcW18EUpRQEbe",decimals:9,chainId:103,extensions:{coingeckoId:"uniswap"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/3MVa4e32PaKmPxYUQ6n8vFkWtCma68Ld7e7fTktWDueQ/logo.png"},{symbol:"USDC",name:"USD Coin",address:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",decimals:9,chainId:103,extensions:{coingeckoId:"usd-coin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"}],{sol:{chainId:d}}=a.Z,u=/[\W_]+/g,h={tokenize:"full",context:!0,minlength:3},p={document:{id:"address",index:[{field:"symbol",...h},{field:"name",...h}]}};const x=class{constructor(){this.tokenMap=void 0,this.engine=void 0,this.chainId=void 0,this.cluster=void 0,this.loading=void 0,this.queue=void 0,this._init=async()=>this.tokenMap.size?[this.tokenMap,this.engine]:new Promise((async e=>{if(this.loading)return this.queue.push(e);this.loading=!0;let s=await(await(new r.DK).resolve()).filterByChainId(this.chainId).getList();for("devnet"===this.cluster&&(s=s.concat(c)),s="testnet"===this.cluster?s.concat([l(102),i(102)]):s.concat([i(101)]),s.forEach((e=>this.tokenMap.set(e.address,e))),this.engine=new n.Document(p),this.tokenMap.forEach((({address:e,...s})=>this.engine.add(e,s))),e([this.tokenMap,this.engine]);this.queue.length;)this.queue.shift()([this.tokenMap,this.engine]);this.loading=!1})),this.all=async()=>{const[e]=await this._init();return Array.from(e.values())},this.findByAddress=async e=>{const[s]=await this._init();return s.get(e)},this.find=async(e,s)=>{const[t,n]=await this._init();let r=[];return e.split(u).forEach((e=>n.search(e,s).forEach((({result:e})=>e.forEach((e=>{if(r.findIndex((({address:s})=>s===e))<0){const s=t.get(e);s&&r.push(s)}})))))),r},this.tokenMap=new Map,this.engine=void 0,this.chainId=d,this.cluster=o.ef,this.loading=!1,this.queue=[],this._init()}}},57452:(e,s,t)=>{"use strict";t.d(s,{R:()=>i});const n={ttl:3e4},r={limit:{calls:10,time:1e3},cache:n};class o{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,s){this.resolveQueue.push(e),this.rejectQueue.push(s)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class a{static set(e,s,t=n){this.mapCache.set(e,s),setTimeout((()=>{this.mapCache.delete(e)}),t.ttl)}static get(e){return this.mapCache.get(e)}}a.mapCache=new Map;class i{static getSingleFlight(e){const s=JSON.stringify(e);if(this.mapInstance.has(s)){const e=this.mapInstance.get(s);if(e)return e}let t=new l(e);return this.mapInstance.set(s,t),t}static async load(e,s,t={}){"object"===typeof e&&(e=JSON.stringify(e));let n=i.getSingleFlight(t);i.mapInstance.set(e,n);const r=new o(e);return n.load(r,s)}}i.mapInstance=new Map;class l{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(r,e)}async load(e,s){const t=a.get(e.key);if(t)return Promise.resolve(t);let n=!1,r=this.mapRequestCalling.get(e.key);return r||(r=e,n=!0,this.mapRequestCalling.set(r.key,r)),new Promise(((e,t)=>{if(!r)return t("Not found request!");r.add(e,t),n&&this.fetch(r,s)}))}fetch(e,s){if(!this.validateLimit())return this.addRequestQueue(e,s);this.createTimeLogs(),s().then((s=>{a.set(e.key,s,this.config.cache),e.resolves(s)})).catch((s=>{e.rejects(s)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(s)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const s=this.requestQueue.shift();s&&this.load(s,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,s){var t;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(s)}),null===(t=this.config.limit)||void 0===t?void 0:t.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const s=(new Date).getTime();this.timeLogs.push(s),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}},85912:(e,s,t)=>{"use strict";t.d(s,{$:()=>n,h:()=>r});const n=e=>!1;BigInt.prototype.toJSON=function(){return this.toString()};const r={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const s=Object.getPrototypeOf(e);return null!==s&&null===Object.getPrototypeOf(s)})(e)||"bigint"===typeof e}}},3007:(e,s,t)=>{"use strict";t.d(s,{Z:()=>l});var n=t(15454),r=t.n(n),o=t(95418),a=t(83868);class i{constructor(e){if(this.dbName=void 0,this.driver=void 0,this.ipfs=void 0,this.createInstance=e=>r().createInstance({driver:this.driver,name:this.dbName,storeName:e}),this.dropInstance=async e=>{const s=this.createInstance(e);return await s.clear(),await r().dropInstance({name:this.dbName,storeName:e})},this.all=async()=>{let e={};const s=(await this.createInstance("sentre").getItem("appIds")||[]).flat().concat(["sentre"]);for(const t of s){e[t]={};const s=this.createInstance(t);await s.iterate(((s,n)=>{e[t][n]=s}))}return e},this.fetch=async e=>await this.ipfs.get(e),this.backup=async()=>{const e=await this.all();return await this.ipfs.set(e)},this.restore=async e=>{const s=await this.fetch(e);for(const t in s){const e=await this.createInstance(t);for(const n in s[t]){const r=s[t][n];await e.setItem(n,r)}}return s},!o.account.isAddress(e))throw new Error("Invalid address");this.dbName=e,this.driver=[r().WEBSQL,r().LOCALSTORAGE],this.ipfs=new a.Z}}const l=i},83868:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var n=t(32642),r=t(34559),o=t(97429).Buffer;class a{constructor(){this._ipfs=async()=>{try{return window.ipfs||(window.ipfs=await(0,n.Ue)()),window.ipfs}catch(e){return await(0,r.sA)(500),await this._ipfs()}},this.get=async e=>{if(!a.isCID(e))throw new Error("Invalid CID");const s=await this._ipfs(),t=await s.cat(e);let n="";for await(const r of t)n+=o.from(r).toString();return JSON.parse(n)},this.set=async e=>{if(!e)throw new Error("Empty data");const s=JSON.stringify(e),t=await this._ipfs(),{path:n}=await t.add(s);return n}}}a.isCID=e=>{try{return!!e&&n.bf.multihash(e)}catch(s){return!1}};const i=a},15190:(e,s,t)=>{"use strict";t.d(s,{OB:()=>l,ef:()=>c});const n="sentre",r=window.localStorage,o=e=>{try{return e?JSON.parse(e):null}catch(s){return null}},a={set:(e,s)=>{let t=o(r.getItem(n));t&&"object"===typeof t||(t={}),t[e]=s,r.setItem(n,JSON.stringify(t))},get:e=>{let s=o(r.getItem(n));return s&&"object"===typeof s?s[e]:null},clear:e=>{a.set(e,null)}},i=a,l="production",c=(()=>{switch(i.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},34559:(e,s,t)=>{"use strict";t.d(s,{sA:()=>l,Xn:()=>c,kU:()=>d,uR:()=>u,l$:()=>h});var n=t(95418),r=t(16200),o=t.n(r),a=t(15190),i=t(57452);const l=e=>new Promise((s=>setTimeout(s,e))),c=(e,s=4,t="...")=>e.substring(0,s)+t+e.substring(e.length-s,e.length),d=e=>n.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${a.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${a.ef}`,u=e=>e?o()(e):o()("0"),h=async(e="")=>i.R.load("fetchCGK"+e,(()=>n.utils.parseCGK(e)))},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},88795:()=>{},89408:()=>{},57600:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=523.bd7df80b.chunk.js.map