(globalThis.webpackChunksen_lp=globalThis.webpackChunksen_lp||[]).push([["node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx","node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive"],{90571:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=90571,e.exports=t},98463:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ReactComponent:()=>p,default:()=>h});var r,n,o,a,i,l,d=s(92950);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},c.apply(this,arguments)}function u(e,t){let{title:s,titleId:u,...p}=e;return d.createElement("svg",c({width:64,height:64,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":u},p),s?d.createElement("title",{id:u},s):null,r||(r=d.createElement("path",{d:"M0 16C0 7.16344 7.16344 0 16 0H48C56.8366 0 64 7.16344 64 16V48C64 56.8366 56.8366 64 48 64H16C7.16344 64 0 56.8366 0 48V16Z",fill:"url(#paint0_linear_1802_5773)"})),n||(n=d.createElement("path",{opacity:.5,d:"M30.3716 17.1968L34.5582 20.3846C35.5377 19.094 36.8905 18.1362 38.4329 17.6411C39.9753 17.1459 41.6326 17.1375 43.18 17.617C44.7273 18.0964 46.0897 19.0405 47.0823 20.321C48.0749 21.6016 48.6495 23.1566 48.7283 24.7751C48.8071 26.3936 48.3861 27.9971 47.5226 29.3681C46.659 30.739 45.3947 31.811 43.9012 32.4385C42.4078 33.066 40.7574 33.2187 39.1743 32.8758C37.5911 32.5328 36.1517 31.711 35.0515 30.5216L31.1905 34.0977C33.0241 36.0795 35.4228 37.4491 38.0611 38.0205C40.6995 38.592 43.4497 38.3377 45.9386 37.2921C48.4275 36.2466 50.5346 34.4604 51.974 32.1759C53.4134 29.8915 54.1154 27.2194 53.9847 24.5222C53.854 21.825 52.897 19.2334 51.2435 17.0989C49.59 14.9644 47.3201 13.3904 44.7417 12.5906C42.1634 11.7907 39.4015 11.8036 36.8308 12.6277C34.2601 13.4517 32.005 15.0469 30.3716 17.1968Z",fill:"white"})),o||(o=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.2415 38.3186C20.6225 38.3186 18.0624 37.5468 15.8849 36.1008C13.7074 34.6549 12.0102 32.5997 11.008 30.1951C10.0057 27.7906 9.74351 25.1447 10.2544 22.592C10.7654 20.0394 12.0265 17.6946 13.8783 15.8543C15.7302 14.0139 18.0896 12.7606 20.6582 12.2529C23.2268 11.7451 25.8892 12.0057 28.3087 13.0017C30.7283 13.9977 32.7963 15.6843 34.2513 17.8484C35.7063 20.0124 36.4829 22.5566 36.4829 25.1593C36.4829 28.6493 35.0878 31.9965 32.6046 34.4643C30.1213 36.9321 26.7533 38.3186 23.2415 38.3186Z",fill:"white"})),a||(a=d.createElement("path",{opacity:.5,d:"M49.6002 47.1277C48.6313 47.1277 48.175 47.4017 47.6465 47.7191C47.077 48.0612 46.4317 48.449 45.2012 48.449C43.9704 48.449 43.325 48.0612 42.7554 47.7191C42.2271 47.4017 41.7708 47.1277 40.8016 47.1277C39.8325 47.1277 39.3762 47.4017 38.8479 47.7191C38.2782 48.0612 37.6329 48.449 36.4021 48.449C35.1713 48.449 34.5258 48.0612 33.9561 47.7191C33.4277 47.4019 32.9714 47.1277 32.0021 47.1277C31.0327 47.1277 30.5764 47.4019 30.048 47.7191C29.4784 48.0612 28.8329 48.449 27.6021 48.449C26.3711 48.449 25.7255 48.0612 25.1558 47.7191C24.6274 47.4017 24.171 47.1277 23.2018 47.1277C22.2326 47.1277 21.7762 47.4017 21.2477 47.7191C20.6781 48.0612 20.0325 48.449 18.8015 48.449C17.5705 48.449 16.9249 48.0612 16.3551 47.7191C15.8267 47.4019 15.3702 47.1277 14.4007 47.1277C13.4313 47.1277 12.9748 47.4019 12.4464 47.7191C11.8766 48.0612 11.231 48.449 10 48.449C10 49.6564 10 52.0001 10 52.0001H54C54 52.0001 54 49.6564 54 48.449C52.7692 48.449 52.1237 48.0612 51.5541 47.7191C51.0258 47.4017 50.5693 47.1277 49.6002 47.1277Z",fill:"white"})),i||(i=d.createElement("path",{opacity:.5,d:"M49.6003 42.9685C48.6314 42.9685 48.1751 43.2894 47.6466 43.6611C47.0772 44.0617 46.4318 44.5158 45.2013 44.5158C43.9705 44.5158 43.3251 44.0617 42.7555 43.6611C42.2272 43.2894 41.7709 42.9685 40.8017 42.9685C39.8326 42.9685 39.3763 43.2894 38.848 43.6611C38.2783 44.0617 37.633 44.5158 36.4022 44.5158C35.1714 44.5158 34.5258 44.0617 33.9562 43.6611C33.4278 43.2895 32.9715 42.9685 32.0021 42.9685C31.0328 42.9685 30.5765 43.2895 30.0481 43.6611C29.4785 44.0617 28.8329 44.5158 27.6021 44.5158C26.3712 44.5158 25.7256 44.0617 25.1559 43.6611C24.6275 43.2894 24.171 42.9685 23.2018 42.9685C22.2326 42.9685 21.7762 43.2894 21.2477 43.6611C20.6781 44.0617 20.0325 44.5158 18.8015 44.5158C17.5706 44.5158 16.9249 44.0617 16.3551 43.6611C15.8267 43.2895 15.3702 42.9685 14.4008 42.9685C13.4313 42.9685 12.9748 43.2895 12.4464 43.6611C11.8766 44.0617 11.231 44.5158 10 44.5158C10 46.1995 10 46.5127 10 47.9003C10.9695 47.9003 11.4259 47.5793 11.9544 47.2078C12.5242 46.8073 13.1698 46.3531 14.4008 46.3531C15.6317 46.3531 16.2774 46.8073 16.8471 47.2078C17.3756 47.5793 17.832 47.9003 18.8015 47.9003C19.7708 47.9003 20.2273 47.5793 20.7558 47.2078C21.3254 46.8073 21.971 46.3531 23.2018 46.3531C24.4326 46.3531 25.0783 46.8073 25.6479 47.2078C26.1764 47.5793 26.6328 47.9003 27.6021 47.9003C28.5713 47.9003 29.0276 47.5795 29.5561 47.2078C30.1257 46.8073 30.7712 46.3531 32.0021 46.3531C33.2331 46.3531 33.8786 46.8073 34.4482 47.2078C34.9767 47.5795 35.433 47.9003 36.4022 47.9003C37.3712 47.9003 37.8277 47.5795 38.3559 47.2078C38.9256 46.8073 39.5709 46.3531 40.8017 46.3531C42.0324 46.3531 42.6779 46.8073 43.2474 47.2078C43.7757 47.5795 44.232 47.9003 45.2012 47.9003C46.17 47.9003 46.6262 47.5795 47.1547 47.2078C47.7241 46.8073 48.3695 46.3531 49.6001 46.3531C50.831 46.3531 51.4765 46.8073 52.0461 47.2078C52.5744 47.5795 53.0308 47.9003 54 47.9003C54 46.5127 54 46.1995 54 44.5158C52.7692 44.5158 52.1237 44.0617 51.5541 43.6611C51.0259 43.2894 50.5695 42.9685 49.6003 42.9685Z",fill:"white"})),l||(l=d.createElement("defs",null,d.createElement("linearGradient",{id:"paint0_linear_1802_5773",x1:.094284,y1:-8.9407e-8,x2:64.0943,y2:64,gradientUnits:"userSpaceOnUse"},d.createElement("stop",{stopColor:"#40A9FF"}),d.createElement("stop",{offset:1,stopColor:"#69C0FF"})))))}const p=d.forwardRef(u),h=s.p+"static/media/logo.a0b5ee707c41743be88493443e0b8f88.svg"},45597:(e,t,s)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return a.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return i.default}});var r=l(s(70854)),n=l(s(27803)),o=l(s(85468)),a=l(s(98463)),i=l(s(83272));function l(e){return e&&e.__esModule?e:{default:e}}const d=[r.default,n.default,o.default];t.h0=d},90914:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>Tr,__esModule:()=>br.X$,logo:()=>br.jY,panels:()=>br.h0,readme:()=>br.ng});var r=s(55754),n=s(28272),o=s(45055),a=s(32671),i=s(92950),l=s(58421),d=s(95418);const c=()=>({pools:(0,r.useSelector)((e=>e.pools))}),u=e=>{const{pools:t}=c(),[s,r]=(0,i.useState)(0),{getMintTotalValue:o}=(()=>{const e=(0,n.useGetMintData)(),{pools:t}=c(),s=(0,i.useCallback)((async(e,t)=>{try{var s;const r=await n.tokenProvider.findByAddress(e),o=null===r||void 0===r||null===(s=r.extensions)||void 0===s?void 0:s.coingeckoId;if(!o)throw new Error("Cant not find coingeckoId");const a=await n.util.fetchCGK(o);return Number(d.utils.undecimalize(t,r.decimals))*a.price}catch(r){return 0}}),[]),r=(0,i.useCallback)((async o=>{let{mintAddress:a,amount:i}=o;if(await n.tokenProvider.findByAddress(a))return s(a,i);const l=Object.values(t).find((e=>e.mint_lpt===a));if(!l)return 0;const{reserve_a:c,reserve_b:u,mint_a:p,mint_b:h}=l;if(c*u===BigInt(0))return 0;const x=await e({mintAddress:a});if(!x)return 0;const{supply:y}=x[a],{deltaA:m,deltaB:j}=d.Swap.oracle.withdraw(i,y,c,u);return await r({mintAddress:p,amount:m})+await r({mintAddress:h,amount:j})}),[e,s,t]);return{getMintTotalValue:r}})(),a=(0,i.useCallback)((async e=>{const s=t[e];if(!s)return 0;const{reserve_a:r,reserve_b:n,mint_a:a,mint_b:i}=s;return await o({mintAddress:a,amount:r})+await o({mintAddress:i,amount:n})}),[o,t]),l=(0,i.useCallback)((async e=>{if(!e)return r(0);const t=await a(e);r(t)}),[a]);return(0,i.useEffect)((()=>{l(e)}),[l,e]),{tvl:s,getTvl:a}};var p=s(45263);const h=e=>{let{poolAddress:t}=e;const{tvl:s}=u(t);return(0,p.jsxs)("span",{children:["$",n.util.numeric(s).format("0,0.[00]a")]})};var x=s(43785);let y,m,j,f,w;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(y||(y={})),function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Open=1]="Open",e[e.Approved=2]="Approved",e[e.Done=3]="Done",e[e.Rejected=4]="Rejected",e[e.Canceled=5]="Canceled"}(m||(m={})),function(e){e.Sentre="sentre-pools",e.YourPools="your-pools",e.Community="community-pools"}(j||(j={})),function(e){e.YourLiquidity="your-liquidity",e.Pools="pools"}(f||(f={})),function(e){e.address="poolAddress",e.wrapTab="tab",e.poolCategory="pool_category"}(w||(w={}));const g=[{locktime:7,discount:.025},{locktime:30,discount:.12},{locktime:60,discount:.265},{locktime:90,discount:.45}],C=e=>{let{poolAddress:t}=e;const{pools:s}=c(),r=s[t]||{},o=(0,n.useWalletAddress)(),i=r.state===y.Frozen,l=o===(null===r||void 0===r?void 0:r.owner);return(0,p.jsxs)(a.Space,{children:[i&&(0,p.jsx)(x.Z,{name:"snow-outline",style:{fontSize:16}}),l&&(0,p.jsx)(x.Z,{name:"person-outline",style:{fontSize:16}})]})},v=[void 0],b=e=>{let{mintAddress:t,size:s=24,icon:r=(0,p.jsx)(x.Z,{name:"diamond-outline"}),reversed:o=!1,...l}=e;const[u,h]=(0,i.useState)(v),{pools:y}=c(),m=(0,i.useCallback)((async e=>{const t=await n.tokenProvider.findByAddress(e);if(null!==t&&void 0!==t&&t.logoURI)return t.logoURI}),[]),j=(0,i.useCallback)((async()=>{if(!d.account.isAddress(t))return h(v);const e=Object.values(y||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:s}=e,r=await Promise.all([t,s].map(m));return o&&r.reverse(),h(r)}const s=await m(t);return h([s])}),[t,o,m,y]);return(0,i.useEffect)((()=>{j()}),[j]),1===u.length?(0,p.jsx)(a.Avatar,{src:u[0],size:s,style:{backgroundColor:"#2D3355",border:"none"},...l,children:r}):(0,p.jsx)(a.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...l,children:u.map(((e,t)=>(0,p.jsx)(a.Avatar,{src:e,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:r},t)))})},A="Unknown Token",T=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:r=!1}=e;const[o,a]=(0,i.useState)(A),{pools:l}=c(),u=(0,i.useCallback)((async e=>{const t=await n.tokenProvider.findByAddress(e);return null!==t&&void 0!==t&&t.name?t.name:A}),[]),h=(0,i.useCallback)((async()=>{if(!d.account.isAddress(t))return a(A);const e=Object.values(l||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:n}=e,o=await Promise.all([t,n].map(u));return r&&o.reverse(),a(`${o.join(s)} LP`)}const n=await u(t);return a(n)}),[t,r,u,l,s]);return(0,i.useEffect)((()=>{h()}),[h]),(0,p.jsx)("span",{children:o})},S="TOKN",k=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:r=!1}=e;const[o,a]=(0,i.useState)(S),{pools:l}=c(),u=(0,i.useCallback)((async e=>{const t=await n.tokenProvider.findByAddress(e);return null!==t&&void 0!==t&&t.symbol?t.symbol:e.substring(0,4)}),[]),h=(0,i.useCallback)((async()=>{if(!d.account.isAddress(t))return a(S);const e=Object.values(l||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:n}=e,o=await Promise.all([t,n].map(u));return r&&o.reverse(),a(o.join(s))}const n=await u(t);return a(n)}),[t,r,u,l,s]);return(0,i.useEffect)((()=>{h()}),[h]),(0,p.jsx)("span",{children:o})};s(7726);n.net;var R=s(19289);const P={appId:"sen_lp",url:"https://descartesnetwork.github.io/sen-lp/index.js"},_={development:{...P},production:{...P}},I={devnet:{swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9",senOwners:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"],sntrAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",purchasingAddress:"FHeonxeZFH76K57KGRWgsmE97tiupcHDjvWNKMQDmdVd",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:n.rpc,get purchasing(){return new d.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}},testnet:{swapAddress:"",taxmanAddress:"",senOwners:[],sntrAddress:"",purchasingAddress:"",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:n.rpc,get purchasing(){return new d.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}},mainnet:{swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e",senOwners:["Cs6jYywHTAgdvjxn8xG4VkJJH8DXXy7zbtatzMUWoCMG","8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"],sntrAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",purchasingAddress:"Ecw8Vh3cwwwwMsaU63mW6knKMsuaiSakVDvKxB5nyhFC",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:n.rpc,get purchasing(){return new d.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}}},D={devnet:{baseURL:"https://stat-dev.sentre.io"},testnet:{baseURL:"https://stat-dev.sentre.io"},mainnet:{baseURL:"https://stat.sentre.io"}},z={development:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},production:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)}},E={development:{myRoute:"/app/sen_lp",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"},production:{myRoute:"/app/sen_lp",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"}},B={manifest:_[n.env],sol:I[n.net],stat:D[n.net],fee:z[n.env],route:E[n.env]};var N=s(21995),O=s.n(N);const M={auth:async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("object"===typeof e)return e;if(!e)return null;const t=window.sentre.wallet;if(!t)throw new Error("Wallet is not connected");const s=Number(new Date)+1e4,r=s.toString()+Math.floor(Math.random()*10**16),n=await t.signMessage(r),o=JSON.stringify(n);return{Authorization:o}},post:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await M.auth(s);try{const{data:s}=await O()({method:"post",url:e,data:t,headers:r});if("ERROR"===s.status)throw new Error(s.error);return s}catch(n){if(!n.response)throw new Error(n.message);const{response:{data:{error:e}}}=n;throw new Error(e)}},get:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await M.auth(s);try{const{data:s}=await O()({method:"get",url:e,params:t,headers:r});if("ERROR"===s.status)throw new Error(s.error);return s}catch(n){if(!n.response)throw new Error(n.message);const{response:{data:{error:e}}}=n;throw new Error(e)}},put:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await M.auth(s);try{const{data:s}=await O()({method:"put",url:e,data:t,headers:r});if("ERROR"===s.status)throw new Error(s.error);return s}catch(n){if(!n.response)throw new Error(n.message);const{response:{data:{error:e}}}=n;throw new Error(e)}},delete:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await M.auth(s);try{const{data:s}=await O()({method:"delete",url:e,data:t,headers:r});if("ERROR"===s.status)throw new Error(s.error);return s}catch(n){if(!n.response)throw new Error(n.message);const{response:{data:{error:e}}}=n;throw new Error(e)}}},L=M;let Y;!function(e){e.endpointDetail="public/api/v1/detail/pools"}(Y||(Y={}));const{stat:{baseURL:F}}=B,Z="stat",W=(0,R.createAsyncThunk)("stat/fetchStatPoolData",(async(e,t)=>{let{address:s}=e,{getState:r}=t;try{const e=r().stat[s];if(e)return{[s]:e};return{[s]:{details:await L.get(`${F}/${Y.endpointDetail}/${s}`)}}}catch(n){return{}}})),H=(0,R.createSlice)({name:Z,initialState:{},reducers:{},extraReducers:e=>{e.addCase(W.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,$=e=>{let{poolAddress:t,onClick:s=(()=>{}),action:o=(0,p.jsx)(i.Fragment,{}),selected:l=!1,apy:u,myLp:x}=e;const m=(0,r.useDispatch)(),j=(0,r.useSelector)((e=>{var s;return null===(s=e.stat[t])||void 0===s?void 0:s.details})),{pools:{[t]:f}}=c(),w=(e=>{const{lpts:t}=(0,r.useSelector)((e=>e)),{amount:s,balance:n}=(0,i.useMemo)((()=>{var s;const r=Object.keys(t).find((s=>t[s].pool===e))||"",n=(null===(s=t[r])||void 0===s?void 0:s.amount)||BigInt(0);return{amount:n,balance:Number(d.utils.undecimalize(n,9))}}),[t,e]);return{amount:s,balance:n}})(t),g=(0,i.useMemo)((()=>{if(!j)return 0;const e=j.roi||0;return Math.pow(1+e/100,365)-1}),[j]);(0,i.useEffect)((()=>{d.account.isAddress(t)&&m(W({address:t}))}),[m,t]);const v=(null===f||void 0===f?void 0:f.state)===y.Frozen,A=l?"card-active lp-card":"lp-card";return(0,p.jsx)(a.Card,{className:A,bodyStyle:{padding:12,height:78},onClick:()=>s(t),bordered:l,hoverable:!0,children:(0,p.jsxs)(a.Row,{gutter:[12,12],wrap:!1,align:"middle",children:[(0,p.jsx)(a.Col,{span:24,flex:"auto",children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(b,{mintAddress:null===f||void 0===f?void 0:f.mint_lpt,size:24}),(0,p.jsx)(a.Typography.Text,{type:v?"secondary":void 0,children:(0,p.jsx)(k,{mintAddress:null===f||void 0===f?void 0:f.mint_lpt})})]}),(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(a.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,p.jsx)(a.Typography.Text,{children:(0,p.jsx)(h,{poolAddress:t})}),u&&(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(a.Divider,{type:"vertical",style:{margin:0}}),(0,p.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,p.jsx)(a.Typography.Text,{children:n.util.numeric(g).format("0,0.[00]%")})]}),x&&(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(a.Divider,{type:"vertical",style:{margin:0}}),(0,p.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"My LP:"}),(0,p.jsx)(a.Typography.Text,{children:n.util.numeric(w.balance).format("0,0.[00]")})]})]})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{size:2,children:[(0,p.jsx)(C,{poolAddress:t}),o]})})]})})},V="main",U=(0,R.createAsyncThunk)("main/selectPool",(async e=>({selectedPoolAddress:e}))),G=(0,R.createAsyncThunk)("main/handleOpenDrawer",(async e=>({visible:e}))),q=(0,R.createAsyncThunk)("main/onSearch",(async e=>({search:e}))),K=(0,R.createAsyncThunk)("main/onSetTotalTvl",(async e=>({tvl:e}))),J=(0,R.createSlice)({name:V,initialState:{selectedPoolAddress:"",visible:!1,search:"",tvl:0},reducers:{},extraReducers:e=>{e.addCase(U.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(G.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(q.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(K.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{senOwners:X}}=B,Q=()=>{const[e,t]=(0,i.useState)({}),{pools:s}=c(),r=(0,i.useCallback)((e=>X.includes(s[e].owner)),[s]),n=(0,i.useCallback)((e=>{const s={};for(const t in e)r(t)&&(s[t]=e[t]);return t(s)}),[r]);return(0,i.useEffect)((()=>{n(s)}),[s,n]),{sentrePools:e,filterSentrePools:n,checkSentrePools:r}};let ee;const te=e=>{const{filteredPools:t}=(e=>{const[t,s]=(0,i.useState)({}),{settings:{showArchived:n}}=(0,r.useSelector)((e=>e)),o=(0,i.useCallback)((t=>{const{reserve_a:s,reserve_b:r}=e[t]||{};return!s||!r}),[e]),a=(0,i.useCallback)((e=>{const t={};for(const s in e)!n&&o(s)||(t[s]=e[s]);return s(t)}),[o,n]);return(0,i.useEffect)((()=>{a(e)}),[e,a]),{filteredPools:t}})(e),{searchedPools:s}=(e=>{const[t,s]=(0,i.useState)({}),{main:{search:o}}=(0,r.useSelector)((e=>e)),a=(0,i.useCallback)((async t=>{if(d.account.isAddress(o)&&o===t)return!0;const s=await n.tokenProvider.find(o);if(!s)return!1;const{mint_a:r,mint_b:a}=e[t],i=s.map((e=>{let{address:t}=e;return t}));return!!i.includes(r)||!!i.includes(a)}),[e,o]),c=(0,i.useCallback)((async e=>{if(!o||o.length<3)return s(e);const t={};for(const s in e)await a(s)&&(t[s]=e[s]);return s(t)}),[a,o]);return(0,i.useEffect)((()=>{c(e),ee&&clearTimeout(ee),ee=setTimeout(l.be,500)}),[e,c]),{searchedPools:t}})(t),{sortedPools:o}=(e=>{const[t,s]=(0,i.useState)({}),{getTvl:r}=u(),n=(0,i.useCallback)((async e=>{let t=Object.keys(e);const n={},o={};await Promise.all(t.map((async e=>o[e]=await r(e))));const a=t.sort(((e,t)=>o[t]-o[e]));for(const s of a)n[s]=e[s];return s(n)}),[r]);return(0,i.useEffect)((()=>{n(e)}),[e,n]),{sortedPools:t}})(s);return{listPoolAddress:(0,i.useMemo)((()=>Object.keys(o)),[o])}},{route:{myRoute:se}}=B,re=e=>{let{poolAddress:t}=e;const s=(0,r.useDispatch)(),n=(0,o.useHistory)(),l=(0,i.useCallback)((async e=>(await s(U(e)),await s(G(!1)),n.push(`${se}/details?${w.address}=${e}`))),[s,n]);return(0,p.jsx)(a.Button,{type:"text",onClick:e=>{e.stopPropagation(),l(t)},icon:(0,p.jsx)(x.Z,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})},ne=e=>{const[t,s]=(0,i.useState)(0),{getTvl:r}=u(),n=(0,i.useCallback)((async e=>{if(null===e||void 0===e||!e.length)return s(0);let t=0;for(const s of e){t+=await r(s)}s(t)}),[r]);return(0,i.useEffect)((()=>{n(e)}),[n,e]),t},{route:{myRoute:oe}}=B,ae=()=>{const e=(0,o.useHistory)(),t=(0,r.useDispatch)(),{selectedPoolAddress:s}=(0,r.useSelector)((e=>e.main)),{communityPools:n}=(()=>{const[e,t]=(0,i.useState)({}),{pools:s}=c(),{checkSentrePools:r}=Q(),n=(0,i.useCallback)((e=>!r(e)),[r]),o=(0,i.useCallback)((e=>{const s={};for(const t in e)n(t)&&(s[t]=e[t]);return t(s)}),[n]);return(0,i.useEffect)((()=>{o(s)}),[s,o]),{communityPools:e,filterCommunityPools:o,checkCommunityPools:n}})(),{listPoolAddress:d}=te(n),u=ne(d),h=(0,i.useCallback)((async s=>(await t(U(s)),await t(G(!1)),e.push(`${oe}/details?${w.address}=${s}`))),[t,e]);return(0,i.useEffect)((()=>{t(K(u))}),[t,u]),(0,p.jsx)(a.Row,{gutter:[12,12],justify:"center",children:d.length?d.map((e=>(0,p.jsx)(a.Col,{id:e,span:24,children:(0,p.jsx)(l.ZP,{height:78,overflow:!0,children:(0,p.jsx)($,{poolAddress:e,action:(0,p.jsx)(re,{poolAddress:e}),onClick:h,selected:s===e,apy:!0})})},e))):(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Empty,{})})})},{route:{myRoute:ie}}=B,le=()=>{const e=(0,o.useHistory)(),t=(0,r.useDispatch)(),{main:{selectedPoolAddress:s}}=(0,r.useSelector)((e=>e)),n=(0,o.useLocation)(),{sentrePools:l}=Q(),{listPoolAddress:d}=te(l),c=ne(d),u=(0,i.useMemo)((()=>new URLSearchParams(n.search)),[n.search]),h=(0,i.useCallback)((async s=>(await t(U(s)),u.set(w.address,s),e.push(`${ie}/details?${u.toString()}`))),[t,e,u]);return(0,i.useEffect)((()=>{t(K(c))}),[t,c]),(0,p.jsxs)(a.Row,{gutter:[12,12],justify:"center",children:[!d.length&&(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Empty,{})}),d.map(((e,t)=>(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)($,{poolAddress:e,action:(0,p.jsx)(a.Button,{type:"text",onClick:t=>{t.stopPropagation(),h(e)},icon:(0,p.jsx)(x.Z,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})}),onClick:()=>h(e),selected:s===e,apy:!0})},e+t)))]})},de=e=>{let{onClick:t=(()=>{}),selectedPoolAddress:s,action:o=(()=>(0,p.jsx)(i.Fragment,{}))}=e;const d=(0,r.useDispatch)(),{yourPools:u}=(()=>{const[e,t]=(0,i.useState)({}),s=(0,r.useSelector)((e=>e.lpts)),o=(0,n.useWalletAddress)(),{pools:a}=c(),l=(0,i.useCallback)((()=>{const e={};for(const t in s){const{pool:r}=s[t],n=a[r];n&&n.owner===o&&(e[r]=n)}return t(e)}),[s,a,o]);return(0,i.useEffect)((()=>{l()}),[l]),{yourPools:e}})(),{listPoolAddress:h}=te(u),x=ne(h);return(0,i.useEffect)((()=>{d(K(x))}),[d,x]),(0,p.jsxs)(a.Row,{gutter:[12,12],justify:"center",children:[!h.length&&(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Empty,{})}),h.map((e=>(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(l.ZP,{height:78,overflow:!0,children:(0,p.jsx)($,{poolAddress:e,action:o(e),onClick:()=>t(e),selected:s===e,myLp:!0})})},e)))]})},{route:{myRoute:ce}}=B,ue=()=>{const e=(0,r.useDispatch)(),{main:{selectedPoolAddress:t}}=(0,r.useSelector)((e=>e)),s=(0,o.useHistory)(),n=(0,i.useCallback)((t=>(e(U(t)),e(G(!1)),s.push(`${ce}/details?${w.address}=${t}`))),[e,s]),l=(0,i.useCallback)((e=>(0,p.jsx)(a.Button,{type:"text",onClick:()=>n(e),size:"small",icon:(0,p.jsx)(x.Z,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[n]);return(0,p.jsx)(a.Row,{gutter:[12,12],children:(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(de,{action:l,selectedPoolAddress:t,onClick:n})})})},pe="settings",he=(0,R.createAsyncThunk)("settings/setShowArchived",(async e=>({showArchived:e}))),xe=(0,R.createSlice)({name:pe,initialState:{showArchived:!1},reducers:{},extraReducers:e=>{e.addCase(he.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ye=()=>{const e=(0,r.useDispatch)(),{settings:{showArchived:t}}=(0,r.useSelector)((e=>e));return(0,p.jsx)(a.Popover,{zIndex:1e3,content:(0,p.jsx)(a.Row,{gutter:[8,8],style:{maxWidth:224},children:(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Space,{size:"large",children:[(0,p.jsx)(a.Switch,{size:"small",checked:t,onChange:t=>e(he(t))}),(0,p.jsx)(a.Typography.Text,{children:"Show archived pools"})]})})}),trigger:"click",placement:"topRight",children:(0,p.jsx)(a.Button,{type:"text",icon:(0,p.jsx)(x.Z,{name:"cog-outline"})})})};let me;const je=(0,i.forwardRef)(((e,t)=>{var s;let{max:r,onValue:n=(()=>{}),onChange:o=(()=>{}),...l}=e;const[d,c]=(0,i.useState)(""),[u,h]=(0,i.useState)(null),y=(0,i.useRef)(t),m=(0,i.useCallback)((e=>{const t=e=>{me&&(clearTimeout(me),me=void 0),c(e),me=setTimeout((()=>c("")),500)};return/^\d*(\.\d*)?$/.test(e)?r&&parseFloat(e)>parseFloat(r.toString())?t("Not enough balance"):n(e):t("Invalid character")}),[r,n]);return null!==u&&(null===y||void 0===y||null===(s=y.current)||void 0===s||s.setSelectionRange(u,u)),(0,p.jsx)(a.Tooltip,{title:(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(x.Z,{name:"warning"}),d]}),visible:!!d,children:(0,p.jsx)(a.Input,{...l,onChange:e=>{o(e),h(e.target.selectionStart),m(e.target.value||"")},ref:y})})}));var fe=s(67642);const we="Select",ge=e=>{let{mintAddresses:t,activeMintAddress:s,onSelect:r}=e;return(0,p.jsxs)(a.Select,{onChange:r,value:s||we,bordered:!1,suffixIcon:(0,p.jsx)(a.Divider,{type:"vertical",style:{margin:0}}),style:{marginLeft:-7},children:[(0,p.jsx)(a.Select.Option,{value:we,children:(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(fe.Z,{children:(0,p.jsx)(x.Z,{name:"help-outline"})}),(0,p.jsx)(a.Typography.Text,{children:we})]})}),t.map(((e,t)=>(0,p.jsx)(a.Select.Option,{value:e,children:(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(b,{mintAddress:e}),(0,p.jsx)(k,{mintAddress:e})]})},t)))]})},Ce=e=>{const[t,s]=(0,i.useState)(void 0),r=(0,n.useGetMintDecimals)(),o=(0,i.useCallback)((async()=>{if(!d.account.isAddress(e))return s(void 0);try{const t=await r({mintAddress:e})||0;return s(t)}catch(t){return s(void 0)}}),[e,r]);return(0,i.useEffect)((()=>{o()}),[o]),t},ve=e=>{let{mintAddresses:t,onChange:s,suggestion:r}=e;const[o,l]=(0,i.useState)(""),[c,u]=(0,i.useState)("Select"),[h,x]=(0,i.useState)(""),y=(0,n.useAccounts)(),m=Ce(c)||0,j=(0,n.useWalletAddress)(),{amount:f}=y[h]||{amount:"0"},w=d.utils.undecimalize(f,m)||"0",g=(0,i.useCallback)((async()=>{const{splt:e}=window.sentre;if(!d.account.isAddress(c))return;const t=await e.deriveAssociatedAddress(j,c);return x(t)}),[c,j]),C=(0,i.useCallback)((async e=>{if(await l(e),d.account.isAddress(c))return s(m?{amount:d.utils.decimalize(e,m),mintAddress:c}:{amount:BigInt(0),mintAddress:c})}),[s,m,c]),v=(0,i.useCallback)((async e=>(await u(e),m&&parseFloat(o)?s({amount:d.utils.decimalize(o,m),mintAddress:e}):s({amount:BigInt(0),mintAddress:e}))),[s,m,o]);return(0,i.useEffect)((()=>{g()}),[g]),(0,p.jsxs)(a.Row,{gutter:[4,4],children:[(0,p.jsx)(je,{placeholder:"0",value:o,onValue:C,prefix:(0,p.jsx)(ge,{mintAddresses:t,activeMintAddress:c,onSelect:v}),size:"large",suffix:(0,p.jsx)(a.Button,{type:"text",style:{marginRight:-7},onClick:()=>C(w),children:"MAX"}),max:w}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[4,4],children:[(0,p.jsx)(a.Col,{span:24,flex:"auto",children:r?(0,p.jsxs)(a.Space,{size:4,children:[(0,p.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"Recommend:"}),(0,p.jsx)(a.Typography.Text,{type:"danger",className:"caption",onClick:()=>C((r||0).toString()),children:n.util.numeric(r).format("0,0.[0000]a")}),(0,p.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:(0,p.jsx)(k,{mintAddress:c})})]}):null}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Typography.Text,{type:"secondary",className:"caption",children:["Available: ",n.util.numeric(w).format("0,0.[0000]")," ",(0,p.jsx)(k,{mintAddress:c})]})})]})})]})},be=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(n.util.explorer(t),"_blank")}),Ae=e=>window.notify({type:"error",description:e.message});const Te=(e,t)=>{const s=(0,n.useGetMintDecimals)(),r=(0,n.useGetMintData)(),{pools:o}=c(),[a,l]=(0,i.useState)(0),u=(0,i.useCallback)((async e=>{var s;const r=await n.tokenProvider.findByAddress(e),o=null===r||void 0===r||null===(s=r.extensions)||void 0===s?void 0:s.coingeckoId;if(!o){if(t)throw new Error("Unknown Token");return 0}const a=(await n.util.fetchCGK(o)).price;if(!a){if(t)throw new Error("Not find on Cgk");return 0}return a}),[t]),p=(0,i.useCallback)((async(e,t)=>{const r=await u(e),n=await s({mintAddress:e})||0;return Number(d.utils.undecimalize(t,n))*r}),[s,u]),h=(0,i.useCallback)((async e=>{const t=Object.values(o).find((t=>t.mint_lpt===e));if(!t)return 0;const{reserve_a:s,reserve_b:n,mint_a:a,mint_b:i}=t;if(s*n===BigInt(0))return 0;const l=await r({mintAddress:e});if(!l)return 0;const{supply:c}=l[e];return(await p(a,s)+await p(i,n))/Number(d.utils.undecimalize(c,9))}),[r,p,o]),x=(0,i.useCallback)((async e=>{try{var t;const s=await n.tokenProvider.findByAddress(e);if(!s){const t=await h(e);return l(t)}const r=null===(t=s.extensions)||void 0===t?void 0:t.coingeckoId;if(!r)return l(0);const o=await n.util.fetchCGK(r);return l(o.price)}catch(s){return 0}}),[h]);return(0,i.useEffect)((()=>{x(e)}),[x,e]),a},{sol:{taxmanAddress:Se},fee:{exoticFee:ke,exoticTax:Re},route:{myRoute:Pe}}=B,_e=()=>{const e=(0,o.useHistory)(),[t,s]=(0,i.useState)(!1),[l,u]=(0,i.useState)(BigInt(0)),[h,y]=(0,i.useState)(""),[m,g]=(0,i.useState)(BigInt(0)),[C,v]=(0,i.useState)(""),[b,A]=(0,i.useState)(!1),[T,S]=(0,i.useState)([0,0]),{lpts:k}=(0,r.useSelector)((e=>e)),R=(0,n.useWalletAddress)(),P=(0,n.useAccounts)(),{pools:_}=c(),I=Object.values(_).map((e=>{let{mint_a:t,mint_b:s}=e;return`${t}${s}`})),D=I.includes(`${h}${C}`)||I.includes(`${C}${h}`),z=Object.values(k).map((e=>{var t;let{pool:s}=e;return null===(t=_[s])||void 0===t?void 0:t.mint_lpt})).filter((e=>d.account.isAddress(e))),E=Object.values(P).map((e=>{let{mint:t}=e;return t})).filter((e=>!z.includes(e))),B=Te(h),N=Ce(h)||0,O=Te(C),M=Ce(C)||0,L=l&&m&&d.account.isAddress(h)&&d.account.isAddress(C);return(0,i.useEffect)((()=>{if(b&&O){const e=Number(d.utils.undecimalize(l,N))*B/O;return S([0,e])}if(!b&&B){const e=Number(d.utils.undecimalize(m,M))*O/B;return S([e,0])}return S([0,0])}),[b,l,B,N,m,O,M]),(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(a.Button,{type:"primary",icon:(0,p.jsx)(x.Z,{name:"add-outline"}),onClick:()=>s(!t),children:"New"}),(0,p.jsx)(a.Modal,{open:t,onCancel:()=>{s(!1),y(""),v(""),S([0,0])},closeIcon:(0,p.jsx)(x.Z,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,p.jsxs)(a.Row,{gutter:[24,24],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Typography.Title,{level:4,children:"New Pool"})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Typography.Text,{type:"secondary",children:[(0,p.jsx)("strong",{className:"content",children:"Liquidity Provider Incentive."})," ","Liquidity providers earn a 0.25% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(ve,{mintAddresses:E,onChange:e=>{let{amount:t,mintAddress:s}=e;u(t),y(s),A(!0)},suggestion:T[0]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(ve,{mintAddresses:E,onChange:e=>{let{amount:t,mintAddress:s}=e;g(t),v(s),A(!1)},suggestion:T[1]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Button,{type:"primary",onClick:async()=>{try{const{swap:t,splt:r,wallet:n}=window.sentre;if(!n||!d.account.isAddress(R))throw new Error("Wallet is not connected");if(!d.account.isAddress(h)||!d.account.isAddress(C))throw new Error("Please select both tokens");const o=[h,C],a=await Promise.all(o.map((e=>r.deriveAssociatedAddress(R,e)))),{txId:i}=await t.initializePool(l,m,ke,Re,R,a[0],a[1],Se,n);return e.push(`${Pe}?${w.wrapTab}=${f.Pools}&${w.poolCategory}=${j.YourPools}`),s(!1),be("Create a new pool",i)}catch(t){return Ae(t)}},disabled:!L,block:!0,children:"Supply"})}),D&&(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Space,{align:"start",children:[(0,p.jsx)(a.Typography.Text,{className:"caption",type:"danger",children:(0,p.jsx)(x.Z,{name:"warning-outline"})}),(0,p.jsx)(a.Typography.Text,{className:"caption",type:"danger",children:"A pool of the desired pair of tokens had already created. We highly recommend to deposit your liquidity to the pool instead."})]})})]})})]})})]})},Ie=()=>{const{main:{search:e}}=(0,r.useSelector)((e=>e)),t=(0,r.useDispatch)();return(0,p.jsx)(a.Card,{bodyStyle:{padding:8},bordered:!1,className:"lp-card",children:(0,p.jsx)(a.Input,{placeholder:"Search",value:e,size:"small",bordered:!1,prefix:(0,p.jsx)(a.Button,{type:"text",style:{marginLeft:-7},size:"small",onClick:e?()=>t(q("")):()=>{},icon:(0,p.jsx)(x.Z,{name:e?"close-outline":"search-outline"})}),onChange:e=>t(q(e.target.value))})})},De=e=>{let{selectedTab:t,handleChange:s,poolsSelected:r,hideHeaderOption:n=!1}=e;return(0,p.jsx)(a.Card,{bordered:!1,bodyStyle:{padding:0},children:(0,p.jsxs)(a.Row,{gutter:[12,24],className:"side-bar",children:[(0,p.jsx)(a.Col,{span:24,style:{display:n?"none":"block"},children:(0,p.jsxs)(a.Row,{gutter:[8,8],wrap:!1,children:[(0,p.jsx)(a.Col,{children:(0,p.jsx)(ye,{})}),(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsxs)(a.Select,{value:t,onChange:s,className:"header-sidebar",children:[(0,p.jsx)(a.Select.Option,{value:j.Sentre,children:"Sentre pools"}),(0,p.jsx)(a.Select.Option,{value:j.YourPools,children:"Your pools"}),(0,p.jsx)(a.Select.Option,{value:j.Community,children:"Community pools"})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsx)(_e,{})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Ie,{})}),(0,p.jsx)(a.Col,{span:24,className:"body-sidebar scrollbar",id:"scroll-container",children:r})]})})},ze=()=>{const[e,t]=(0,i.useState)({}),s=(0,r.useSelector)((e=>e.lpts)),{pools:n}=c(),o=(0,i.useCallback)((()=>{const e={};for(const t in s){const{pool:r,amount:o}=s[t];o>BigInt(0)&&(e[r]=n[r])}return t(e)}),[s,n]);return(0,i.useEffect)((()=>{o()}),[o]),{depositedPools:e}},{route:{myRoute:Ee}}=B,Be=()=>{const e=(0,r.useDispatch)(),t=(0,o.useHistory)(),s=(0,o.useLocation)(),n=(0,i.useMemo)((()=>new URLSearchParams(s.search)),[s]),{main:{selectedPoolAddress:d}}=(0,r.useSelector)((e=>e)),{depositedPools:c}=ze(),{listPoolAddress:u}=te(c),h=ne(u),y=(0,i.useCallback)((s=>(e(U(s)),e(G(!1)),n.set(w.address,s),t.push(`${Ee}/details?${n.toString()}`))),[e,t,n]);(0,i.useEffect)((()=>{e(K(h))}),[e,h]);const m=(0,i.useCallback)((e=>(0,p.jsx)(a.Button,{type:"text",onClick:()=>y(e),icon:(0,p.jsx)(x.Z,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[y]);return(0,p.jsx)(a.Row,{gutter:[12,12],justify:"center",children:u.length?u.map(((e,t)=>(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(l.ZP,{height:78,overflow:!0,children:(0,p.jsx)($,{poolAddress:e,action:m(e),onClick:()=>y(e),selected:d===e,myLp:!0})})},e))):(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Empty,{})})})},{route:{myRoute:Ne}}=B,Oe=()=>{const e=(0,o.useHistory)(),t=(0,o.useLocation)(),{depositedPools:s}=ze(),{listPoolAddress:r}=te(s),n=(0,i.useMemo)((()=>new URLSearchParams(t.search)),[t.search]),l=n.get(w.poolCategory)||j.Sentre,d=n.get(w.wrapTab)||f.Pools,c=(0,i.useCallback)((t=>{n.set(w.wrapTab,t),e.push(`${Ne}?${n.toString()}`)}),[e,n]),u=(0,i.useCallback)((t=>{n.set(w.poolCategory,t),e.push(`${Ne}?${n.toString()}`)}),[e,n]),h=(0,i.useMemo)((()=>{switch(l){case j.Community:return(0,p.jsx)(ae,{});case j.YourPools:return(0,p.jsx)(ue,{});default:return(0,p.jsx)(le,{})}}),[l]),x=[{label:"",key:f.YourLiquidity,children:(0,p.jsx)(De,{selectedTab:l,handleChange:u,poolsSelected:(0,p.jsx)(Be,{}),hideHeaderOption:!0})},{label:"",key:f.Pools,children:(0,p.jsx)(De,{selectedTab:l,handleChange:u,poolsSelected:h})}];return(0,p.jsx)(a.Row,{gutter:[24,24],justify:"center",className:"list-pool",children:(0,p.jsx)(a.Col,{xs:24,md:12,lg:8,children:(0,p.jsxs)(a.Row,{gutter:[24,24],justify:"center",children:[(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Segmented,{className:"liquidity-and-pool",options:Object.keys(f).map((e=>({label:f[e].replace("-"," "),value:f[e]}))),value:d,onChange:e=>c(e.toString()),block:!0,disabled:!r.length})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Tabs,{activeKey:d,centered:!0,items:x})})]})})})};var Me=s(51518),Le=s.n(Me);const{route:{swapRoute:Ye}}=B,Fe=e=>{let{poolAddress:t}=e;const s=(0,o.useHistory)(),{pools:r}=c(),n=(null===r||void 0===r?void 0:r[t].state)===y.Frozen,i=e=>s.push({pathname:Ye,state:{poolAddress:t,originalRoute:e}});return(0,p.jsxs)(a.Row,{gutter:[24,12],style:{width:256},children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Space,{direction:"vertical",size:0,children:[(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(x.Z,{style:{color:"#FA8C16"},name:"alert-circle-outline"}),(0,p.jsx)(a.Typography.Title,{level:5,children:"Choose the route"})]}),(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"We recommend choosing the best route to optimize the price."})]})}),(0,p.jsx)(a.Col,{style:{textAlign:"right"},span:24,children:(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(a.Button,{size:"small",disabled:n,onClick:()=>i(!0),children:"Original route"}),(0,p.jsx)(a.Button,{size:"small",onClick:()=>i(!1),type:"primary",children:"Best route"})]})})]})},Ze=e=>{let{poolAddress:t}=e;return(0,p.jsx)(a.Popover,{trigger:"click",placement:"bottomLeft",content:(0,p.jsx)(Fe,{poolAddress:t}),children:(0,p.jsx)(a.Button,{block:!0,children:"Swap"})})},We=e=>{let{title:t,label:s,ratio:r,currentRatio:n="0",onChange:o=(()=>{})}=e;return(0,p.jsxs)(a.Row,{gutter:[4,4],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:t})}),(0,p.jsx)(a.Col,{style:{fontSize:12},children:(0,p.jsxs)(a.Space,{size:4,children:[(0,p.jsxs)(a.Typography.Text,{type:"secondary",children:[s,":"]}),(0,p.jsxs)(a.Typography.Text,{children:[n,"%"]})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(je,{placeholder:"0",value:r,onValue:o,size:"large"})})]})},He=e=>{let{address:t}=e;const{pools:s}=c(),[r,o]=(0,i.useState)(""),[l,u]=(0,i.useState)(""),[h,y]=(0,i.useState)(!1),m=(null===s||void 0===s?void 0:s[t])||{},{fee_ratio:j,tax_ratio:f}=m,w=(0,i.useMemo)((()=>j?d.utils.undecimalize(j,7):"0"),[j]),g=(0,i.useMemo)((()=>f?d.utils.undecimalize(f,7):"0"),[f]);return(0,p.jsxs)(a.Row,{gutter:[16,24],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(We,{title:"Fee (%)",label:"Current fee",ratio:r,currentRatio:w,onChange:o})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(We,{title:"Tax (%)",label:"Current tax",ratio:l,currentRatio:g,onChange:u})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Button,{onClick:async()=>{y(!0);const e=d.utils.decimalize(r||w,7),s=d.utils.decimalize(l||g,7),{swap:a,wallet:i}=window.sentre;if(!i)return;const{txId:c}=await a.updateFee(e,s,t,i);return y(!1),c?(o(""),u(""),window.notify({type:"success",description:"Update fee successfully. Click to view details",onClick:()=>window.open(n.util.explorer(c),"_blank")})):window.notify({type:"error",description:"Update fee make failure."})},icon:(0,p.jsx)(x.Z,{name:"cash-outline"}),block:!0,loading:h,disabled:!l&&!r,children:"Update Fee"})})]})};var $e;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}($e||($e={}));const Ve=e=>{let{poolStatus:t,description:s}=e;const r=t===$e.Active;return(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Space,{size:0,children:[(0,p.jsx)(a.Badge,{status:r?"success":"error"}),(0,p.jsxs)(a.Typography.Text,{children:["Current status: ",r?"Active":"Frozen"]})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Space,{size:4,align:"start",children:[(0,p.jsx)(x.Z,{name:"information-circle-outline"}),(0,p.jsx)(a.Space,{direction:"vertical",size:0,children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:s})})]})})]})},Ue=e=>{let{address:t}=e;const{pools:s}=c(),[r,o]=(0,i.useState)(!1),l=null===s||void 0===s?void 0:s[t],d=(0,i.useMemo)((()=>{const e=null===l||void 0===l?void 0:l.state;return e===$e.Active?(0,p.jsx)(Ve,{poolStatus:e,description:"Freezing a pool will prevent all actions until the pool has been thawed."}):e===$e.Frozen?(0,p.jsx)(Ve,{poolStatus:e,description:"Thaw a pool will active all actions"}):"Pool is closed"}),[null===l||void 0===l?void 0:l.state]);return(0,p.jsxs)(a.Row,{gutter:[24,24],children:[(0,p.jsx)(a.Col,{span:24,children:d}),(0,p.jsx)(a.Col,{span:24,children:(null===l||void 0===l?void 0:l.state)===$e.Active?(0,p.jsx)(a.Button,{style:{background:"#40A9FF",color:"#fff"},onClick:async()=>{o(!0);const{swap:e,wallet:s}=window.sentre;if(!s)return;const{txId:r}=await e.freezePool(t,s);return o(!1),r?window.notify({type:"success",description:"Freeze the pool successfully. Click to view details",onClick:()=>window.open(n.util.explorer(r),"_blank")}):window.notify({type:"error",description:"Freeze the pool make failure."})},icon:(0,p.jsx)(x.Z,{name:"snow-outline"}),block:!0,loading:r,children:"Freeze Pool"}):(0,p.jsx)(a.Button,{type:"primary",onClick:async()=>{o(!0);const{swap:e,wallet:s}=window.sentre;if(!s)return;const{txId:r}=await e.thawPool(t,s);return o(!1),r?window.notify({type:"success",description:"Thaw the pool successfully. Click to view details",onClick:()=>window.open(n.util.explorer(r),"_blank")}):window.notify({type:"error",description:"Thaw the pool make failure."})},icon:(0,p.jsx)(x.Z,{name:"sunny-outline"}),block:!0,loading:r,children:"Thaw Pool"})})]})},Ge=e=>{let{address:t}=e;const[s,r]=(0,i.useState)(""),[o,l]=(0,i.useState)(!1);return(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Space,{align:"start",children:[(0,p.jsx)(x.Z,{name:"information-circle-outline"}),(0,p.jsx)(a.Typography.Text,{children:"Your current account will lose the pool control when you transfer ownership."})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Card,{bodyStyle:{padding:8},style:{background:"transparent",borderRadius:8,boxShadow:"none"},children:(0,p.jsxs)(a.Row,{gutter:[0,0],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Typography.Text,{style:{marginLeft:12,fontSize:12},type:"secondary",children:"Transfer to Owner"})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Input,{placeholder:"E.g. AgTMC...",value:s,onChange:e=>r(e.target.value),bordered:!1})})]})})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Button,{onClick:async()=>{await l(!0);try{const{swap:e,wallet:r}=window.sentre;if(!r)throw new Error("Wallet is not connected.");const{txId:o}=await e.transferPoolOwnership(t,s,r);return window.notify({type:"success",description:"Transfer successfully. Click to view details.",onClick:()=>window.open(n.util.explorer(o),"_blank")})}catch(e){return window.notify({type:"error",description:e.message})}finally{return l(!1)}},icon:(0,p.jsx)(x.Z,{name:"airplane-outline"}),disabled:!d.account.isAddress(s),loading:o,block:!0,children:"Transfer"})})]})},qe=e=>{let{poolAddress:t,visible:s=!1,onClose:r=(()=>{})}=e;const n=[{label:"Freeze/Thaw",key:"freeze-thaw",children:(0,p.jsx)(Ue,{address:t})},{label:"Fee",key:"fee",children:(0,p.jsx)(He,{address:t})},{label:"Transfer Owner",key:"transfer-owner",children:(0,p.jsx)(Ge,{address:t})}];return(0,p.jsx)(a.Modal,{open:s,onCancel:r,centered:!0,closable:!1,footer:!1,style:{minHeight:285},bodyStyle:{padding:0},children:(0,p.jsx)(a.Tabs,{style:{padding:24},items:n})})},{route:{farmRoute:Ke}}=B,Je=e=>{let{poolAddress:t}=e;const[s,r]=(0,i.useState)(!1),[l,d]=(0,i.useState)(!1),u=(0,o.useHistory)(),{pools:h}=c(),y=(0,n.useWalletAddress)(),{mint_lpt:m,owner:j}=(null===h||void 0===h?void 0:h[t])||{},f=(0,i.useCallback)((()=>u.push(`${Ke}?search=${t}`)),[u,t]),w=y===j;return(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsxs)(a.Space,{children:[(0,p.jsxs)(a.Space,{size:4,children:[(0,p.jsx)(b,{mintAddress:m,size:32}),(0,p.jsx)(a.Typography.Title,{level:5,children:(0,p.jsx)(k,{mintAddress:m})})]}),(0,p.jsx)(a.Popover,{placement:"bottom",content:(0,p.jsxs)(a.Space,{align:"center",children:[(0,p.jsx)(a.Tooltip,{title:"Copied",visible:s,arrowPointAtCenter:!0,children:(0,p.jsx)(Le(),{text:t,children:(0,p.jsx)(a.Button,{type:"text",size:"small",icon:(0,p.jsx)(x.Z,{name:"copy-outline"}),onClick:async()=>{r(!0),await n.util.asyncWait(1500),r(!1)}})})}),(0,p.jsxs)(a.Space,{direction:"vertical",size:4,children:[(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"PoolAddress"}),(0,p.jsx)(a.Typography.Text,{style:{wordBreak:"break-all"},children:t})]})]}),children:(0,p.jsx)(a.Button,{type:"text",icon:(0,p.jsx)(x.Z,{name:"alert-circle-outline"})})})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{children:[w&&(0,p.jsx)(a.Button,{onClick:()=>d(!0),children:"Management"}),(0,p.jsx)(Ze,{poolAddress:t}),(0,p.jsx)(a.Button,{onClick:f,children:"Go Farming"})]})}),(0,p.jsx)(qe,{poolAddress:t,visible:l,onClose:()=>d(!1)})]})};var Xe=s(4550),Qe=s.n(Xe),et=s(76907),tt=s.n(et),st=s(21111),rt=s.n(st);const nt=e=>{let{chartData:t=[],labels:s=[],type:r="line",configs:o,disableAxe:a=!1,chartId:l="sen_chart"}=e;const{backgroundColor:d}=o||{},[c,u]=(0,i.useState)(!1),h=(0,i.useCallback)(((e,t,s)=>({labels:t,datasets:[{...o,data:e,backgroundColor:s}]})),[o]),x=(0,i.useRef)(null),y=(0,i.useCallback)((()=>{var e,t;if(!x||!d)return"#dadada";const s=null===x||void 0===x||null===(e=x.current)||void 0===e||null===(t=e.canvas)||void 0===t?void 0:t.getContext("2d"),n=null===s||void 0===s?void 0:s.createLinearGradient(0,0,0,270);null===n||void 0===n||n.addColorStop(0,d),null===n||void 0===n||n.addColorStop(1,`${d}00`);return"line"===r?n:d}),[d,r]);return(0,i.useEffect)((()=>{var e;const r=x.current,n=null===r||void 0===r||null===(e=r.data.datasets)||void 0===e?void 0:e.find((e=>{let{data:t}=e;return t})),o=rt()(null===n||void 0===n?void 0:n.data,t);r&&!o&&(r.data=h(t,s,y()),null===r||void 0===r||r.update())}),[t,h,y,s]),(0,p.jsx)("canvas",{id:l,height:"270",ref:e=>{if(!e)return;const t=e.getContext("2d");t&&!c&&(x.current=new(tt())(t,{type:r,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!a}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!a,beginAtZero:!1,maxTicksLimit:8,callback:function(e,t,s){return n.util.numeric(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,t)=>{const s=document.getElementById(l);s&&(s.style.cursor=t[0]?"pointer":"default")}}}}),u(!0))}})};class ot{constructor(){this.programId="",this.time=0,this.address="",this.mint="",this.actionType="",this.amountIn=BigInt(0),this.amountOut=BigInt(0),this.totalTrans=0}}class at{parserDailyReport(e){let t=new Array;for(const s of e)t=t.concat(this.parseDailyReport(s));return this.mergeDailyReport(t)}parseDailyReport(e){const t=new Array,{programId:s,time:r,actionType:n,actionTransfers:o}=e;for(const a of o){const{source:e,destination:o,amount:i}=a,l=new ot;if(l.programId=s,l.time=r,l.actionType=n,e){const{mint:s,address:r}=e;t.push({...l,mint:s,address:r,amountOut:BigInt(i)})}if(o){const{mint:e,address:s}=o;t.push({...l,mint:e,address:s,amountIn:BigInt(i)})}}return t}mergeDailyReport(e){const t=new Map;for(const r of e){const e=`${r.time}^${r.address}^${r.mint}^${r.actionType}`;if(t.has(e)){const s=t.get(e);void 0!==s&&(r.amountIn+=s.amountIn,r.amountOut+=s.amountOut,r.totalTrans+=s.totalTrans)}t.set(e,r)}const s=new Array;return t.forEach((e=>s.push(e))),s}}var it=s(68532),lt=s.n(it);class dt{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class ct{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class ut{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}var pt=s(71256);const ht=700;class xt{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ht;s>ht&&(s=ht);const r={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,r)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let n=0;n<=e.length/200;n++){const t=200*n,r=e.slice(t,t+200);s.push(this.conn.getParsedConfirmedTransactions(r))}const r=await Promise.all(s);for(const n of r)t=t.concat(n);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:r,secondTo:n,lastSignature:o,limit:a}=t;r=Math.floor(r||0),n=Math.floor(n||s);const i=new pt.PublicKey(e);let l=[],d=!1;for(;!d;){const e=await this.fetchSignatures(i,o,a);if(null===e||void 0===e||!e.length||d)break;for(const t of e){const e=t.blockTime;if(e&&!(e>n)){if(e<r){d=!0;break}o=t.signature,l.push(t.signature)}}if(a&&l.length>=a)break;if((null===e||void 0===e?void 0:e.length)<ht)break}return await this.fetchConfirmTransaction(l)}}let yt;!function(e){e.Transfer="transfer"}(yt||(yt={}));const mt=1e3;let jt;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(jt||(jt={}));class ft{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new ft,s=e*mt;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new ft,s=Qe()(e,jt.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let r=ft.fromYmd(e);const n=ft.fromYmd(t);for(;r.ymd()<=n.ymd();)s.push(r.ymd()),r=r.addDay();return s}format(e){const t=new Date(this.milliSeconds);return Qe()(t).format(e)}subtractDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=Qe()(this.milliSeconds).subtract(e,"days").valueOf();return ft.fromSeconds(t/mt)}addDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=Qe()(this.milliSeconds).add(e,"days").valueOf();return ft.fromSeconds(t/mt)}seconds(){return(this.milliSeconds-this.milliSeconds%mt)/mt}ymd(){return Number(this.format(jt.YMD))}static today(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt.YMD;return Qe()().format(e)}}var wt=s(97429).Buffer;const{struct:gt}=s(70320),Ct={key:"code",type:"u8"};let vt;!function(e){e.InitPool="INITIALIZE_POOL",e.AddLiquidity="ADD_LIQUIDITY",e.RemoveLiquidity="REMOVE_LIQUIDITY",e.Swap="SWAP",e.Route="SWAP"}(vt||(vt={}));const bt={0:vt.InitPool,1:vt.AddLiquidity,10:vt.AddLiquidity,2:vt.RemoveLiquidity,3:vt.Swap,8:vt.Route};class At extends class{constructor(){this.parseAction=e=>""}async collect(e,t,s){let{lastSignature:r,limit:n}=t;const o=new xt;let a=[],i=r,l=!1,d=200;for(;!l;){const r=await o.fetchTransactions(e,{...t,lastSignature:i,limit:d});for(const e of r){i=e.transaction.signatures[0];const t=this.parseTransLog(e);if(t){if(s){if(!await s(t))continue}if(a.push(t),n&&a.length>=n){l=!0;break}}}if(n&&(d=d*n/(a.length||1)),!r.length)break;if(l)break}return a}parseTransLog(e){var t,s;const{blockTime:r,meta:n,transaction:o}=e;if(!r||!n)return;const{postTokenBalances:a,preTokenBalances:i,postBalances:l,preBalances:d}=n,{signatures:c,message:u}=o,p=(null===(t=n.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],h=u.instructions[0]||[],x=new dt;x.signature=c[0],x.blockTime=r,x.time=ft.fromSeconds(r).ymd(),x.programId=h.programId.toString();const y=this.parseAccountInfo(u.accountKeys,a||[],i||[],l,d);return this.isParsedInstruction(h)?(x.programTransfer=this.parseListActionTransfer([h],y),x):(x.actionTransfers=this.parseListActionTransfer(p,y),x.programInfo={programId:h.programId.toString(),data:h.data},x.actionType=this.parseAction(x),x)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,t){const s=[];for(const r of e){if(!this.isParsedInstruction(r))continue;const e=r.parsed||{};if(e.type===yt.Transfer){const r=e.info,n=this.parseActionTransfer(r,t);n&&s.push(n)}}return s}parseActionTransfer(e,t){const{source:s,destination:r,amount:n,lamports:o}=e,a=n||o.toString();if(!a||!t.has(s)||!t.has(r))return;const i=new ut;return i.source=t.get(s),i.destination=t.get(r),i.amount=a,i}parseAccountInfo(e,t,s,r,n){const o=new Map;for(const a of t){const{accountIndex:t,mint:s,uiTokenAmount:r}=a,n=new ct;n.address=e[t].pubkey.toString(),n.postBalance=r.amount,n.mint=s,n.decimals=r.decimals,o.set(n.address,n)}for(const a of s){const{accountIndex:t,uiTokenAmount:s}=a,r=e[t].pubkey.toString(),n=o.get(r)||new ct;n.preBalance=s.amount,o.set(n.address,n)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!d.account.isAssociatedAddress(s)){const e=o.get(s)||new ct;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(r[t]||0),e.preBalance=String(n[t]||0),e.decimals=9,o.set(e.address,e)}})),o}}{constructor(){super(...arguments),this.parseAction=e=>{var t;const s=null===(t=e.programInfo)||void 0===t?void 0:t.data;if(!s)return"";const r=lt().decode(s),n=new gt([Ct]).fromBuffer(wt.from(r));return bt[n.code]||""}}}class Tt{constructor(e){this.poolAddress=void 0,this.poolData=void 0,this.poolTransLogService=new At,this.dailyReportService=new at,this.tokenProvider=new n.TokenProvider,this.getPoolData=async()=>{if(!this.poolData){const e=window.sentre.swap;this.poolData=await e.getPoolData(this.poolAddress)}return this.poolData},this.getUsd=async(e,t)=>{const s=await this.tokenProvider.findByAddress(e);if(!s)return 0;const{decimals:r,extensions:o}=s;try{const e=await n.util.fetchCGK(null===o||void 0===o?void 0:o.coingeckoId);if(null===e||void 0===e||!e.price)return 0;const s=d.utils.undecimalize(t,r);return Number(s)*e.price}catch(a){return 0}},this.fetchTransLog=async(e,t)=>{const s=new n.PDB(this.poolAddress).createInstance("stat");let r=await s.getItem("translogs")||[];r=r.sort(((e,t)=>t.blockTime-e.blockTime));const o=r[0],a=r[r.length-1];if(o&&a){const[s]=await Promise.all([this.poolTransLogService.collect(this.poolAddress,{secondFrom:o.blockTime,secondTo:t})]);r=r.filter((t=>t.blockTime>e)),r=[...s,...r]}else r=await this.poolTransLogService.collect(this.poolAddress,{secondFrom:e,secondTo:t});return await s.setItem("translogs",r),r},this.getDailyInfo=async()=>{let e=new ft;const t=(new ft).subtractDay(11),{mint_a:s,mint_b:r,treasury_a:n,treasury_b:o,reserve_a:a,reserve_b:i,fee_ratio:l,tax_ratio:c}=await this.getPoolData(),u=await this.fetchTransLog(t.seconds(),e.seconds()),p=this.dailyReportService.parserDailyReport(u),h={};for(const d of p){const{time:e,address:t}=d;t!==n&&t!==o||(h[e]||(h[e]=[]),h[e].push(d))}const x=await this.getUsd(s,a),y=await this.getUsd(r,i),m={};for(m[e.ymd()]={tvl:x+y,fee:0,volume:0};e.ymd()>t.ymd();){const s=h[e.ymd()]||[],r=m[e.ymd()],n=e.subtractDay(1);!m[n.ymd()]&&n.ymd()>=t.ymd()&&(m[n.ymd()]={tvl:r.tvl,fee:0,volume:0});for(const t of s){const s=await this.getUsd(t.mint,t.amountOut),r=await this.getUsd(t.mint,t.amountIn);if(m[n.ymd()]&&(m[n.ymd()].tvl+=s-r,m[n.ymd()].tvl<0&&(m[n.ymd()].tvl=0)),t.actionType===vt.Swap){m[e.ymd()].volume+=r+s;const t=Number(d.utils.undecimalize(l+c,9))*s;m[e.ymd()].fee+=t}}e=e.subtractDay(1)}return m},this.poolAddress=e}}const St="#40A9FF",kt=0,Rt=14,Pt="TVL",_t="transparent",It=()=>{const{selectedPoolAddress:e}=(0,r.useSelector)((e=>e.main)),[t,s]=(0,i.useState)([]),[o,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!0),u=(0,n.useInfix)(),h={borderColor:_t,borderRadius:kt,pointRadius:kt,tooltip:Pt,pointHitRadius:Rt,pointHoverRadius:kt,backgroundColor:St},y=(0,i.useCallback)((async()=>{if(e)try{l(!0);const t=new Tt(e),r=await n.DataLoader.load("getDailyInfo"+e,t.getDailyInfo,{cache:{ttl:3e5}}),o=Object.keys(r).map((e=>({data:r[e].volume,label:Qe()(e,"YYYYMMDD").format("MM/DD")})));s(o)}catch(t){}finally{l(!1)}}),[e]);(0,i.useEffect)((()=>{y()}),[y]);const m=d?"chevron-down-outline":"chevron-forward-outline",j=u<n.Infix.md;(0,i.useEffect)((()=>c(!j)),[j]);const f=(0,i.useMemo)((()=>{var e,s;const r=(null===(e=t[t.length-1])||void 0===e?void 0:e.data)||0,n=(null===(s=t[t.length-2])||void 0===s?void 0:s.data)||0;return r+(new Date).getHours()*n/24}),[t]);return(0,p.jsx)(a.Card,{bordered:!1,style:{height:"100%"},children:(0,p.jsx)(a.Spin,{tip:"Loading...",spinning:o,children:(0,p.jsxs)(a.Row,{gutter:[24,24],align:"middle",children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Title,{level:4,children:"24h Volume"})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{children:[(0,p.jsxs)(a.Typography.Title,{level:2,children:["$",n.util.numeric(f).format("0,0.[0]a")]}),j&&(0,p.jsx)(a.Button,{type:"text",shape:"circle",icon:(0,p.jsx)(x.Z,{name:m}),onClick:()=>c(!d)})]})}),d&&(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(nt,{type:"bar",chartData:t.map((e=>e.data)),labels:t.map((e=>e.label)),configs:h})})]})})})},Dt=e=>{let{poolAddress:t,reversed:s=!1}=e;const{pools:r}=c(),{mint_a:o,mint_b:i,reserve_a:l,reserve_b:u,mint_lpt:h}=r[t]||{},x=Ce(o)||0,y=Ce(i)||0,m=Number(d.utils.undecimalize(l,x)),j=Number(d.utils.undecimalize(u,y)),f=j?m/j:0,w=m?j/m:0;return(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(a.Typography.Text,{children:n.util.numeric(s?w:f).format("0,0.[0000]")}),(0,p.jsx)(k,{mintAddress:h,reversed:s,separator:" / "})]})},zt=e=>{let{poolAddress:t}=e;const{pools:s}=c(),[r,n]=(0,i.useState)(!0),{mint_lpt:o}=s[t]||{};return(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(b,{mintAddress:o,reversed:r}),(0,p.jsx)(Dt,{poolAddress:t,reversed:r}),(0,p.jsx)(a.Button,{type:"text",onClick:()=>n(!r),icon:(0,p.jsx)(x.Z,{name:"swap-horizontal-outline"})})]})},Et=e=>{let{label:t="label",title:s="",subTitle:r=null}=e;return(0,p.jsxs)(a.Space,{direction:"vertical",size:4,children:[(0,p.jsx)(a.Typography.Text,{className:"caption",type:"secondary",children:t}),(0,p.jsx)("span",{children:s}),r&&(0,p.jsx)(a.Typography.Text,{type:"secondary",children:r})]})},Bt=e=>{let{value:t=0,sub:s="",format:r=""}=e;return(0,p.jsxs)(a.Space,{size:4,align:"baseline",children:[(0,p.jsx)(a.Typography.Title,{level:4,children:n.util.numeric(t).format(r)}),s&&(0,p.jsx)(a.Typography.Text,{className:"caption",type:"secondary",children:s})]})},Nt=e=>{let{poolAddress:t}=e;const[s,o]=(0,i.useState)(0),l=(0,r.useSelector)((e=>e.lpts)),u=(0,r.useSelector)((e=>{var s,r,n;return null===(s=e.stat)||void 0===s||null===(r=s[t])||void 0===r||null===(n=r.details)||void 0===n?void 0:n.roi})),h=(0,n.useGetMintData)(),{pools:x}=c(),{mint_lpt:y}=x[t]||{},m=Object.keys(l).find((e=>l[e].pool===t))||"",{amount:j}=l[m]||{},f=Number(d.utils.undecimalize(j||BigInt(0),9)),w=(0,i.useCallback)((e=>u&&e?Math.pow(u/100+1,e)-1:0),[u]);return(0,i.useEffect)((()=>{(async()=>{if(!d.account.isAddress(y))return 0;const e=await h({mintAddress:y});if(!e)return o(0);const{supply:t,decimals:s}=e[y];o(Number(d.utils.undecimalize(t,s)))})()}),[h,y]),(0,p.jsxs)(a.Row,{gutter:[20,20],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Et,{label:"APY",title:(0,p.jsx)(Bt,{value:w(365),format:"0,0.[00]%"})})}),(0,p.jsx)(a.Col,{xs:12,children:(0,p.jsx)(Et,{label:"My Portion",title:(0,p.jsx)(Bt,{value:f/s,format:"0,0.[00]%"}),subTitle:`Over ${n.util.numeric(s).format("0,0.[0000]a")} LP`})}),(0,p.jsx)(a.Col,{xs:12,children:(0,p.jsx)(Et,{label:"My Contribution",title:(0,p.jsx)(Bt,{value:f,sub:"LP",format:"0,0.[0000]a"})})}),(0,p.jsx)(a.Col,{xs:24,children:(0,p.jsx)(Et,{label:"In-Pool Price",title:(0,p.jsx)(zt,{poolAddress:t})})})]})},Ot=()=>{const{main:{selectedPoolAddress:e}}=(0,r.useSelector)((e=>e)),[t,s]=(0,i.useState)(!0),l=(0,o.useLocation)(),d=(0,n.useInfix)(),c=(0,i.useMemo)((()=>new URLSearchParams(l.search)),[l]).get(w.address)||""||e,u=t?"chevron-down-outline":"chevron-forward-outline",y=d<n.Infix.md;return(0,i.useEffect)((()=>s(!y)),[y]),(0,p.jsx)(a.Card,{bordered:!1,style:{height:"100%"},children:(0,p.jsxs)(a.Row,{gutter:[24,24],align:"middle",children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Title,{level:4,children:"Total Value Locked"})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{size:0,children:[(0,p.jsx)(a.Typography.Title,{level:2,children:(0,p.jsx)(h,{poolAddress:c})}),y&&(0,p.jsx)(a.Button,{type:"text",shape:"circle",icon:(0,p.jsx)(x.Z,{name:u}),onClick:()=>s(!t)})]})}),t&&(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Nt,{poolAddress:c})})]})})},Mt=e=>{var t;let{value:s="0",poolAddress:o}=e;const[l,u]=(0,i.useState)(!1),[h,y]=(0,i.useState)("0"),{lpts:m}=(0,r.useSelector)((e=>e)),j=(0,n.useGetMintData)(),{pools:f}=c(),{mint_a:w,mint_b:g,reserve_a:C,reserve_b:v,mint_lpt:b}=f[o]||{},A=Ce(w)||0,T=Ce(g)||0,S=d.utils.undecimalize(C,A),R=d.utils.undecimalize(v,T),P=(null===(t=Object.keys(m))||void 0===t?void 0:t.find((e=>m[e].pool===o)))||"",{amount:_}=m[P]||{},I=Number(d.utils.undecimalize(_||BigInt(0),9));return(0,i.useEffect)((()=>{d.account.isAddress(b)&&(async()=>{const e=await j({mintAddress:b});if(!e)return y("0");const{supply:t,decimals:s}=e[b];y(d.utils.undecimalize(t,s))})()}),[b,j]),(0,p.jsx)(a.Card,{bordered:!1,className:"deposit-card",children:(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"In-Pool Price"})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(a.Button,{type:"text",style:{width:"auto",height:"auto"},icon:(0,p.jsx)(x.Z,{name:"swap-horizontal-outline"}),onClick:()=>u(!l)}),(0,p.jsx)(Dt,{poolAddress:o,reversed:l})]})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"Pool Composition"})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{size:4,children:[(0,p.jsxs)(a.Typography.Text,{children:[n.util.numeric(S).format("0,0.[00]a")," ",(0,p.jsx)(k,{mintAddress:w})]}),(0,p.jsx)(a.Typography.Title,{level:5,children:" + "}),(0,p.jsxs)(a.Typography.Text,{children:[n.util.numeric(R).format("0,0.[00]a")," ",(0,p.jsx)(k,{mintAddress:g})]})]})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"My Current LP"})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Typography.Text,{children:[n.util.numeric(I).format("0,0.[0000]")," LP"]})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[8,8],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"Total LP"})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Typography.Text,{children:[n.util.numeric(h).format("0,0.[0000]")," LP"]})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"You will reveice"})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{size:4,children:[(0,p.jsx)(a.Typography.Title,{level:5,children:n.util.numeric(s).format("0,0.[0000]")}),(0,p.jsx)(a.Typography.Title,{level:5,children:"LP"})]})})]})})]})})},Lt=e=>{let{mintAddress:t,onChange:s,value:r}=e;const[o,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),h=(0,n.useWalletAddress)(),x=(0,n.useAccounts)(),y=Ce(t)||0,m=null===x||void 0===x?void 0:x[c],j=(0,i.useMemo)((()=>{const{amount:e}=m||{};return e&&y&&d.utils.undecimalize(e,y)||"0"}),[m,y]),f=(0,i.useCallback)((async e=>(await l(e),y&&parseFloat(e)?s(d.utils.decimalize(e,y)):s(BigInt(0)))),[y,s]),w=(0,i.useCallback)((()=>{const e=d.utils.undecimalize(r,y||0);Number(e)!==Number(o)&&l(e)}),[y,r]),g=(0,i.useCallback)((async()=>{const{splt:e}=window.sentre;try{const s=await d.account.deriveAssociatedAddress(h,t,e.spltProgramId.toBase58(),e.splataProgramId.toBase58());u(s)}catch(s){}}),[t,h]);(0,i.useEffect)((()=>{g()}),[g]),(0,i.useEffect)((()=>{w()}),[w]);const C=Number(o)>Number(j);return(0,p.jsxs)(a.Row,{gutter:[4,4],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(je,{placeholder:"0",value:o,onValue:f,size:"large",prefix:(0,p.jsxs)(a.Space,{style:{marginLeft:-4,marginRight:7,lineHeight:1},children:[(0,p.jsx)(b,{mintAddress:t}),(0,p.jsx)(a.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,p.jsx)(a.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>f(j),children:"MAX"}),max:j})}),(0,p.jsx)(a.Col,{flex:"auto",children:C&&(0,p.jsx)(a.Typography.Text,{style:{fontSize:12},type:"danger",children:"Not enough balance."})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",n.util.numeric(j).format("0,0.[0000]")," ",(0,p.jsx)(k,{mintAddress:t})]})})]})},Yt=e=>{let{poolAddress:t,onClose:s=(()=>{}),onChange:r=(()=>{})}=e;const[o,l]=(0,i.useState)(!1),[u,h]=(0,i.useState)(""),[x,y]=(0,i.useState)([BigInt(0),BigInt(0)]),[m,j]=(0,i.useState)("all"),[f,w]=(0,i.useState)(!0),{pools:g}=c(),C=(0,n.useWalletAddress)(),v=(0,n.useGetMintData)(),b=(0,n.useAccounts)(),{mint_a:A,mint_b:T,reserve_a:S,reserve_b:R,mint_lpt:P,fee_ratio:_,tax_ratio:I}=g[t]||{},D=[A,T],z=Ce(A)||0,E=Ce(T)||0,B=(0,i.useMemo)((()=>[z,E]),[z,E]),N=(0,i.useMemo)((()=>Number(d.utils.undecimalize(S,z))/Number(d.utils.undecimalize(R,E))),[z,E,S,R]),O=(0,i.useCallback)(((e,t)=>{if(!B)return BigInt(0);const s=0===t?B[1]:B[0],r=Number(d.utils.undecimalize(e,B[t]));let n=r*N;return 0===t&&(n=r/N),d.utils.decimalize(n,s)}),[B,N]),M=(0,i.useCallback)((async()=>{if(!d.account.isAddress(C)||!d.account.isAddress(P))return h("");try{const e=await v({mintAddress:P});if(!e)return h("");const{supply:t}=e[P],{lpt:s}=d.Swap.oracle.sided_deposit(x[0],x[1],S,R,t,_,I);return h(d.utils.undecimalize(s,9))}catch(e){window.notify({type:"error",description:e.message})}}),[x,_,v,P,S,R,I,C]);(0,i.useEffect)((()=>{M()}),[M]),(0,i.useEffect)((()=>{y([BigInt(0),BigInt(0)])}),[m]);const L=(0,i.useCallback)((async()=>{const{splt:e}=window.sentre;if(!A||!T)return!1;const t=await e.deriveAssociatedAddress(C,A),s=b[t],r=await e.deriveAssociatedAddress(C,T),n=b[r],o=(null===s||void 0===s?void 0:s.amount)||0,a=(null===n||void 0===n?void 0:n.amount)||0,i=x[0]>o||x[1]>a;w(i)}),[b,x,A,T,C]);(0,i.useEffect)((()=>{L()}),[L]);return(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Radio.Group,{onChange:e=>{var t;j((t=e).target.value),r(t.target.value)},value:m,children:[(0,p.jsx)(a.Radio,{value:"all",children:(0,p.jsxs)(a.Space,{size:4,children:[(0,p.jsx)(k,{mintAddress:P,separator:"+"}),(0,p.jsx)(a.Tag,{className:"deposit-tag",children:"0 Fee"})]})}),null===D||void 0===D?void 0:D.map(((e,t)=>(0,p.jsx)(a.Radio,{value:e,children:(0,p.jsx)(k,{mintAddress:e})},`${e}${t}`)))]})}),null===D||void 0===D?void 0:D.map(((e,t)=>(e===m||"all"===m)&&(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Lt,{mintAddress:e,value:x[t],onChange:t=>((e,t)=>{if(!d.account.isAddress(e)||!t)return y([BigInt(0),BigInt(0)]);const s=D.findIndex((t=>t===e));if(-1===s)return;let r=[...x];"all"===m&&(r[0]=r[1]=O(t,s)),r[s]=t,y(r)})(e,t)})},`${e}_${t}`))),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Mt,{value:u,poolAddress:t})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Button,{type:"primary",onClick:async()=>{l(!0);const{splt:e,swap:r,wallet:o}=window.sentre,[a,i]=await Promise.all(D.map((t=>e.deriveAssociatedAddress(C,t))));if(o)try{const{txId:e}=await r.addSidedLiquidity(x[0],x[1],t,a,i,o);return s(),window.notify({type:"success",description:"Deposit liquidity successfully. Click to view details.",onClick:()=>window.open(n.util.explorer(e),"_blank")})}catch(d){return window.notify({type:"error",description:d.message})}finally{l(!1)}},disabled:!Number(u)||f,block:!0,loading:o,children:"Deposit"})})]})},Ft=e=>{let{poolAddress:t,onClose:s=(()=>{})}=e;const{pools:r}=c(),[n,o]=(0,i.useState)("all"),{fee_ratio:l,tax_ratio:u}=(null===r||void 0===r?void 0:r[t])||{},h=l||BigInt(0),x=u||BigInt(0),y=d.utils.undecimalize(h+x,7),m="all"!==n,j=m?"#F9575E":"inherit",f=m?void 0:"secondary";return(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Typography.Title,{level:5,children:"Deposit Liquidity"})}),(0,p.jsxs)(a.Col,{span:24,children:[(0,p.jsxs)(a.Typography.Paragraph,{type:"secondary",children:[(0,p.jsx)("strong",{children:"Liquidity provider incentive."})," Liquidity providers earn a ",y,"% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]}),(0,p.jsxs)(a.Typography.Paragraph,{type:f,children:[(0,p.jsx)("strong",{style:{color:j},children:"Asymmetric Deposit."})," ","Instead of depositing amounts of tokens proportionally, Asymmetric Deposit allows you to deposit even one side of token. The pool will automatically re-balance itself."]})]}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Yt,{poolAddress:t,onClose:s,onChange:o})})]})},Zt=e=>{let{lpt:t,lptAddress:s,onChange:o,poolAddress:l}=e;const{lpts:u}=(0,r.useSelector)((e=>e)),{pools:h}=c(),{amount:x}=(null===u||void 0===u?void 0:u[s])||{},{mint_lpt:y}=(null===h||void 0===h?void 0:h[l])||{},m=(0,i.useMemo)((()=>x&&d.utils.undecimalize(x,9)||"0"),[x]),j=(0,i.useCallback)((async e=>parseFloat(e)?o(d.utils.decimalize(e,9)):o(BigInt(0))),[o]),f=(0,i.useMemo)((()=>d.utils.undecimalize(t,9)),[t]);return(0,p.jsxs)(a.Row,{gutter:[4,4],justify:"end",children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(je,{placeholder:"Amount of LP",value:f,onValue:j,size:"large",prefix:(0,p.jsxs)(a.Space,{style:{marginLeft:-7,marginRight:7,fontSize:12,lineHeight:1},children:[(0,p.jsx)(b,{mintAddress:y,size:24}),(0,p.jsx)(a.Typography.Text,{children:(0,p.jsx)(T,{mintAddress:y})}),(0,p.jsx)(a.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,p.jsx)(a.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>j(m),children:"MAX"}),max:m})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",n.util.numeric(m).format("0,0.[0000]")," LPT"]})})]})},Wt=e=>{let{mintAddresses:t,amounts:s}=e;return(0,p.jsx)(a.Card,{bordered:!1,className:"deposit-card",children:(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Typography.Text,{children:"You will receive"})}),t.map(((e,t)=>(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[8,8],justify:"space-between",align:"middle",children:[(0,p.jsx)(a.Col,{children:(0,p.jsx)(b,{mintAddress:e,size:32})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Typography.Title,{level:5,style:{margin:0},children:[n.util.numeric(s[t]||0).format("0,0.[0000]")," ",(0,p.jsx)(k,{mintAddress:e})]})})]})},t)))]})})},Ht=e=>{var t;let{poolAddress:s,onClose:o=(()=>{})}=e;const[l,u]=(0,i.useState)(BigInt(0)),[h,x]=(0,i.useState)(),[y,m]=(0,i.useState)([]),[j,f]=(0,i.useState)([0,0]),[w,g]=(0,i.useState)(!1),{lpts:C}=(0,r.useSelector)((e=>e)),v=(0,n.useGetMintDecimals)(),b=Object.keys(C).find((e=>C[e].pool===s))||"",A=null===C||void 0===C||null===(t=C[b])||void 0===t?void 0:t.pool,T=(0,n.useWalletAddress)(),{pools:S}=c(),k=(0,n.useGetMintData)(),{reserve_a:R,reserve_b:P,mint_lpt:_}=(null===S||void 0===S?void 0:S[A])||{},{mint_a:I,mint_b:D}=null===S||void 0===S?void 0:S[s],z=[I,D],E=(0,i.useCallback)((async()=>{try{const e=await k({mintAddress:_});if(!e)return x(void 0);const{supply:t}=e[_];x(t)}catch(e){}try{let e=await v({mintAddress:I})||0,t=await v({mintAddress:D})||0;f([e,t])}catch(e){}}),[k,_,v,I,D]);return(0,i.useEffect)((()=>{if(h){const{deltaA:e,deltaB:t}=d.Swap.oracle.withdraw(l,h,R,P),s=[e,t].map(((e,t)=>d.utils.undecimalize(e,j[t])));m(s)}else m([])}),[R,P,l,h,j]),(0,i.useEffect)((()=>{E()}),[E]),(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Typography.Title,{level:5,children:"Withdraw Liquidity"})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Zt,{lpt:l,poolAddress:s,lptAddress:b,onChange:u})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Wt,{mintAddresses:z,amounts:y})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Button,{type:"primary",onClick:async()=>{if(!l)return;g(!0);const{swap:e,wallet:t,splt:r}=window.sentre,o=await Promise.all(z.map((e=>r.deriveAssociatedAddress(T,e))));if(t)try{const{txId:r}=await e.removeLiquidity(l,s,o[0],o[1],t);return u(BigInt(0)),window.notify({type:"success",description:"Withdraw liquidity successfully. Click to view details.",onClick:()=>window.open(n.util.explorer(r),"_blank")})}catch(a){return window.notify({type:"error",description:a.message})}finally{g(!1)}},disabled:!l,block:!0,loading:w,children:"Withdraw"})})]})},$t={width:"33%"};let Vt;!function(e){e[e.SEVEN_DAYS=7]="SEVEN_DAYS",e[e.THIRTY_DAYS=30]="THIRTY_DAYS",e[e.NINETY_DAYS=90]="NINETY_DAYS"}(Vt||(Vt={}));const Ut=e=>{let{onChange:t}=e;return(0,p.jsxs)(a.Radio.Group,{onChange:t,style:{width:"100%",textAlign:"center"},defaultValue:Vt.SEVEN_DAYS,children:[(0,p.jsxs)(a.Radio.Button,{style:$t,value:Vt.SEVEN_DAYS,children:["Past ",Vt.SEVEN_DAYS," days"]}),(0,p.jsxs)(a.Radio.Button,{style:$t,value:Vt.THIRTY_DAYS,children:["Past ",Vt.THIRTY_DAYS," days"]}),(0,p.jsxs)(a.Radio.Button,{style:$t,value:Vt.NINETY_DAYS,children:["Past ",Vt.NINETY_DAYS," days"]})]})};var Gt=s(97429).Buffer;const qt=[{key:"code",type:"u8"},{key:"delta_a",type:"u64"},{key:"delta_b",type:"u64"}],Kt="history",Jt=async(e,t)=>{const s=new At,r=new ft,n=(new ft).subtractDay(e);return await s.collect(t,{secondFrom:n.seconds(),secondTo:r.seconds()})},Xt=(e,t,s)=>{const{treasury_a:r,treasury_b:n}=s,o=[r,n];for(const a of t){const{source:t,destination:s}=a;if(t&&s){if(e===vt.AddLiquidity)return o.includes(s.address);if(e===vt.RemoveLiquidity)return o.includes(t.address)}}return!1},Qt=(0,R.createAsyncThunk)("history/fetchWithdrawHistories",(async e=>{var t;let{days:s,poolData:r}=e;const{sentre:{splt:n}}=window,o=await(null===(t=window.sentre.wallet)||void 0===t?void 0:t.getAddress());if(!o)throw new Error("Wallet is not connected");const a=await Jt(s,o),i=[];for(const l of a){const{actionType:e,actionTransfers:t,blockTime:s}=l;if(e!==vt.RemoveLiquidity)continue;if(!Xt(e,t,r))continue;const a={time:s,actions:[]};for(const r of t){const{amount:e,source:t,destination:s}=r;if(!t||!s)continue;const{mint:i,address:l,decimals:d}=s;l===await n.deriveAssociatedAddress(o,i)&&a.actions.push({mint:i,amount:BigInt(e),decimals:d})}i.push(a)}return{withdrawHistories:i}})),es=(0,R.createAsyncThunk)("history/fetchDepositHistory",(async e=>{var t;let{days:r,poolData:n}=e;const o=await(null===(t=window.sentre.wallet)||void 0===t?void 0:t.getAddress());if(!o)throw new Error("Wallet is not connected");const{struct:a}=s(70320),i=await Jt(r,o),l=[];for(const s of i){const{blockTime:e,actionType:t,programInfo:r,actionTransfers:o}=s;if(t!==vt.AddLiquidity)continue;if(!Xt(t,o,n))continue;const i=null===r||void 0===r?void 0:r.data;if(!i)continue;const d=lt().decode(i),c=new a(qt).fromBuffer(Gt.from(d)),u={time:e,amount_a:c.delta_a,amount_b:c.delta_b};l.push(u)}return{depositHistories:l}})),ts=(0,R.createSlice)({name:Kt,initialState:{depositHistories:[],withdrawHistories:[]},reducers:{},extraReducers:e=>{e.addCase(Qt.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(es.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ss=e=>{let{record:t}=e;const{main:{selectedPoolAddress:s}}=(0,r.useSelector)((e=>e)),{pools:o}=c(),{mint_a:i,mint_b:l}=o[s]||{},u=Ce(i)||0,h=Ce(l)||0;return(0,p.jsx)(a.Typography.Text,{children:(0,p.jsxs)(a.Space,{size:4,children:[n.util.numeric(d.utils.undecimalize(t.amount_a,u)).format("0,0.[0000]"),(0,p.jsx)(k,{mintAddress:i}),"+"," ",n.util.numeric(d.utils.undecimalize(t.amount_b,h)).format("0,0.[0000]"),(0,p.jsx)(k,{mintAddress:l})]})})},rs=[{title:"TIME",render:e=>(0,p.jsx)(a.Typography.Text,{children:Qe()(1e3*e.time).format("MMM DD, YYYY HH:mm")})},{title:"TOKEN",width:300,render:e=>(0,p.jsx)(ss,{record:e})}],ns=()=>{const[e,t]=(0,i.useState)(Vt.SEVEN_DAYS),[s,n]=(0,i.useState)(!1),o=(0,r.useDispatch)(),{history:{depositHistories:l},main:{selectedPoolAddress:d}}=(0,r.useSelector)((e=>e)),{pools:{[d]:u}}=c(),h=(0,i.useCallback)((async()=>{n(!0);try{await o(es({days:e,poolData:u}))}catch(t){Ae(t)}finally{n(!1)}}),[o,e,u]);(0,i.useEffect)((()=>{h()}),[h]);return(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Ut,{onChange:e=>{t(e.target.value)}})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Table,{pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row",dataSource:l,columns:rs,rowKey:e=>e.time,loading:s,scroll:{y:300}})})]})},os=e=>{let{record:t}=e;return(0,p.jsx)(a.Typography.Text,{children:(0,p.jsx)(a.Space,{size:4,children:t.actions.map(((e,s)=>{let{mint:r,amount:o,decimals:a}=e;const l=d.utils.undecimalize(o,a);return(0,p.jsxs)(i.Fragment,{children:[n.util.numeric(l).format("0,0.[0000]"),(0,p.jsx)(k,{mintAddress:r}),s!==t.actions.length-1&&"+"]},s)}))})})},as=[{title:"TIME",render:e=>(0,p.jsx)(a.Typography.Text,{children:Qe()(1e3*e.time).format("MMM DD, YYYY HH:mm")})},{title:"TOKEN",width:300,render:e=>(0,p.jsx)(os,{record:e})}],is=()=>{const[e,t]=(0,i.useState)(Vt.SEVEN_DAYS),[s,n]=(0,i.useState)(!1),o=(0,r.useDispatch)(),{history:{withdrawHistories:l},main:{selectedPoolAddress:d}}=(0,r.useSelector)((e=>e)),{pools:{[d]:u}}=c(),h=(0,i.useCallback)((async()=>{n(!0);try{await o(Qt({days:e,poolData:u}))}catch(t){Ae(t)}finally{n(!1)}}),[o,e,u]);(0,i.useEffect)((()=>{h()}),[h]);return(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Ut,{onChange:e=>{t(e.target.value)}})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Table,{pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row",dataSource:l,columns:as,rowKey:e=>e.time,loading:s,scroll:{y:300}})})]})},ls=e=>{const[t,s]=(0,i.useState)(0),{orders:o}=(0,r.useSelector)((e=>e)),a=(0,n.useWalletAddress)(),l=Object.keys(o),d=(0,i.useCallback)((async()=>{try{const{sol:{purchasing:t}}=B;let r=0;for(;r<1e4;){const s=await t.deriveOrderAddress(r,a,e);if(!l.includes(s))break;r+=1}return s(r)}catch(t){return s(0)}}),[e,l,a]);return(0,i.useEffect)((()=>{d()}),[d]),t},ds=e=>{let{label:t="",avatar:s=(0,p.jsx)(i.Fragment,{}),value:r="",subValue:n="",floatRight:o=!1}=e;const l=o?"right":"left";return(0,p.jsxs)(a.Space,{size:12,direction:"vertical",style:{textAlign:l},children:[(0,p.jsx)(a.Typography.Text,{children:t}),s,(0,p.jsx)(a.Typography.Title,{level:3,children:r}),n&&(0,p.jsx)(a.Typography.Title,{level:5,style:{textDecoration:"line-through"},type:"secondary",children:n})]})},cs=e=>{let{label:t="",value:s=""}=e;return(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{children:t})}),(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Typography.Title,{level:5,children:s})})]})},us=e=>{var t;let{retailerAddress:s,amount:o,locktime:l,visible:c=!1,onClose:u=(()=>{})}=e;const[h,y]=(0,i.useState)(!1),{retailers:{[s]:m}}=(0,r.useSelector)((e=>e)),j=ls(s),f=Ce(m.mint_bid)||0,w=Ce(m.mint_ask)||0,C=Te(m.mint_bid,!0),v=Te(m.mint_ask,!0),A=BigInt(Math.floor(24*l*60*60)),T=(null===(t=g.find((e=>{let{locktime:t}=e;return t===l})))||void 0===t?void 0:t.discount)||0,S=parseFloat(o)*C,R=d.utils.decimalize(o,f),P=v?d.utils.decimalize(S*(1+T)/v,w):BigInt(0);return(0,p.jsx)(a.Modal,{open:c,footer:!1,closeIcon:(0,p.jsx)(x.Z,{name:"close-outline"}),onCancel:u,children:(0,p.jsxs)(a.Row,{gutter:[24,24],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Typography.Title,{level:5,children:"Confirm"})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(ds,{label:"Payment",avatar:(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(b,{mintAddress:m.mint_bid}),(0,p.jsx)(a.Typography.Title,{level:5,children:(0,p.jsx)(k,{mintAddress:m.mint_bid})})]}),value:`${n.util.numeric(o).format("0,0.[0000]")} LP`})}),(0,p.jsx)(a.Col,{children:(0,p.jsx)(ds,{label:"Receiving",avatar:(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(b,{mintAddress:m.mint_ask}),(0,p.jsx)(a.Typography.Title,{level:5,children:(0,p.jsx)(k,{mintAddress:m.mint_ask})})]}),value:n.util.numeric(d.utils.undecimalize(P,w)).format("0,0.[0000]"),subValue:n.util.numeric(S/v).format("0,0.[0000]"),floatRight:!0})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Card,{className:"confirm-sub-card",bodyStyle:{padding:16},bordered:!1,children:(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(cs,{label:"Created At",value:Qe()().format("HH:mm DD/MM/YYYY")})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(cs,{label:"Locked Time",value:`${l} Days`})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(cs,{label:"Multiplier",value:100*(1+T)+"%"})})]})})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Button,{type:"primary",onClick:async()=>{try{const{sol:{purchasing:e}}=B,{wallet:t}=window.sentre;if(!t)throw new Error("Wallet is not connected");await y(!0);const{txId:r}=await e.placeOrder(j,R,P,A,s,t);return be("Place a new order",r),u()}catch(e){return Ae(e)}finally{return y(!1)}},loading:h,block:!0,children:"Confirm"})})]})})},ps=e=>{let{poolAddress:t,value:s,onChange:o}=e;const i=(0,r.useSelector)((e=>e.lpts)),{pools:l}=c(),u=Object.keys(i).find((e=>i[e].pool===t))||"",{amount:h}=i[u]||{},x=Number(d.utils.undecimalize(h||BigInt(0),9)),y=l[t];return(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{children:"I want to pay"})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{size:4,className:"caption",children:[(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"Available:"}),(0,p.jsxs)(a.Typography.Text,{type:"secondary",children:[n.util.numeric(x).format("0,0.[0000]")," LP"]})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(je,{value:s,onValue:o,prefix:(0,p.jsxs)(a.Space,{size:4,children:[(0,p.jsx)(k,{mintAddress:null===y||void 0===y?void 0:y.mint_lpt}),(0,p.jsx)(a.Divider,{type:"vertical"})]}),suffix:(0,p.jsx)(a.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>o(x.toString()),children:"MAX"})})})]})},hs=e=>{let{label:t="",value:s="",discount:r=!1,description:n=null}=e;const o={color:r?"#F9575E":"inherit"};return(0,p.jsxs)(a.Row,{gutter:[8,8],align:"bottom",children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsxs)(a.Space,{size:4,children:[(0,p.jsx)(a.Typography.Text,{style:o,children:t}),n&&(0,p.jsx)(a.Popover,{content:n,placement:"leftTop",arrowPointAtCenter:!0,children:(0,p.jsx)(x.Z,{name:"help-circle"})})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Typography.Title,{style:{...o,textDecoration:r?"unset":"line-through"},level:r?3:5,children:[s,(0,p.jsx)("small",{children:"%"})]})})]})},xs=e=>{var t;let{locktime:s}=e;const r=(null===(t=g.find((e=>{let{locktime:t}=e;return t===s})))||void 0===t?void 0:t.discount)||0;return(0,p.jsxs)(a.Row,{gutter:[5,5],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(hs,{label:"SNTR Buy-back",value:n.util.numeric(100*(r+1)).format("0.[00]"),discount:!0})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(hs,{label:"Market Buy-back",value:"100"})})]})},ys=g.map((e=>{let{locktime:t}=e;return t})),ms=e=>{let{poolAddress:t}=e;const[s,n]=(0,i.useState)(!1),[o,l]=(0,i.useState)(""),[u,h]=(0,i.useState)(ys[0]),{retailers:y}=(0,r.useSelector)((e=>e)),{pools:m}=c(),j=m[t],f=Object.values(y).findIndex((e=>{let{mint_bid:t}=e;return t===(null===j||void 0===j?void 0:j.mint_lpt)})),w=Object.keys(y)[f],g=!d.account.isAddress(w);return(0,p.jsxs)(a.Row,{gutter:[24,24],children:[(0,p.jsx)(a.Col,{xs:24,lg:12,children:(0,p.jsxs)(a.Space,{direction:"vertical",size:10,children:[(0,p.jsxs)(a.Space,{size:4,children:[(0,p.jsx)(a.Typography.Text,{children:"Lock Time (Days)"}),(0,p.jsx)(x.Z,{name:"alert-circle-outline"})]}),(0,p.jsx)(a.Space,{size:16,children:ys.map((e=>(0,p.jsx)(a.Button,{type:u===e?"primary":"default",icon:e,onClick:()=>h(e)},e)))})]})}),(0,p.jsx)(a.Col,{xs:24,lg:12,children:(0,p.jsx)(xs,{locktime:u})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Typography.Text,{children:[(0,p.jsx)("span",{style:{fontWeight:700,color:"inherit"},children:"SNTR Buy-back Offering:"})," ","Selling your LP tokens with juicy profit. No fee, no slippage. The tokens will be unlocked after the selected period."]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(ps,{poolAddress:t,value:o,onChange:l})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Button,{type:"primary",icon:(0,p.jsx)(x.Z,{name:g?"help-circle-outline":"diamond"}),onClick:()=>n(!0),disabled:!parseFloat(o)||g,block:!0,children:g?"There is no campaign on this pool":"Buy SNTR"})}),!g&&(0,p.jsx)(us,{retailerAddress:w,amount:o,locktime:u,visible:s,onClose:()=>n(!1)})]})},js=e=>{let{orderAddress:t}=e;const[s,o]=(0,i.useState)(!1),{orders:l}=(0,r.useSelector)((e=>e)),{state:d,locked_time:c,updated_at:u}=l[t]||{},h=async()=>{try{const{wallet:e}=window.sentre,{sol:{purchasing:s}}=B;if(!e)throw new Error("Wallet is not connected");await o(!0);const{txId:r}=await s.redeemOrder(t,e);return be("Redeem the order",r)}catch(e){return Ae(e)}finally{return o(!1)}};if(d===m.Open)return(0,p.jsx)(a.Button,{type:"text",size:"small",loading:s,onClick:async()=>{try{const{wallet:e}=window.sentre,{sol:{purchasing:s}}=B;if(!e)throw new Error("Wallet is not connected");await o(!0);const{txId:r}=await s.cancelOrder(t,e);return be("Cancel the order",r)}catch(e){return Ae(e)}finally{return o(!1)}},children:"Cancel"});if(d===m.Approved){const e=Number(c)>Date.now()/1e3-Number(u);return(0,p.jsx)(a.Button,{type:"primary",size:"small",disabled:e,loading:s,onClick:h,children:"Redeem"})}return(0,p.jsx)(a.Button,{type:"text",size:"small",icon:(0,p.jsx)(x.Z,{name:"open-outline"}),onClick:async()=>window.open(n.util.explorer(t),"_blank"),children:"Detail"})},fs=e=>{let{title:t}=e;return(0,p.jsx)(a.Typography.Text,{type:"secondary",style:{fontSize:12},children:t})},ws=e=>(0,p.jsx)(a.Tag,{style:{border:"none"},...e}),gs=e=>{let{state:t}=e;return t===m.Open?(0,p.jsx)(ws,{color:"gold",children:"Pending"}):t===m.Approved?(0,p.jsx)(ws,{color:"cyan",children:"Approved"}):t===m.Done?(0,p.jsx)(ws,{color:"green",children:"Done"}):t===m.Rejected?(0,p.jsx)(ws,{color:"red",children:"Rejected"}):t===m.Canceled?(0,p.jsx)(ws,{color:"volcano",children:"Canceled"}):(0,p.jsx)(ws,{children:"Unknown"})},Cs=e=>{let{orderAddress:t}=e;const[s,o]=(0,i.useState)(!1),{orders:l,retailers:c}=(0,r.useSelector)((e=>e)),{retailer:u,bid_amount:h,ask_amount:y,locked_time:m,state:j,created_at:f,updated_at:w}=l[t]||{},{mint_bid:g,mint_ask:C}=c[u]||{},v=Ce(g)||0,b=Ce(C)||0,A=d.utils.undecimalize(h,v),T=d.utils.undecimalize(y,b);return(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Card,{bordered:!1,bodyStyle:{padding:12},className:"order-card order-card-bg",children:(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsxs)(a.Space,{style:{fontSize:12},children:[(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"Order ID"}),(0,p.jsx)(a.Typography.Text,{children:n.util.shortenAddress(t)})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Button,{type:"text",size:"small",icon:(0,p.jsx)(x.Z,{name:s?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>o(!s)})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:[8,8],justify:"space-between",children:[(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsx)(fs,{title:"Payment"}),(0,p.jsxs)(a.Typography.Text,{ellipsis:!0,children:[n.util.numeric(A).format("0,0.[0000]")," LP"]})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsx)(fs,{title:"Receiving"}),(0,p.jsxs)(a.Typography.Text,{style:{fontWeight:700},ellipsis:!0,children:[n.util.numeric(T).format("0,0.[0000]")," ",(0,p.jsx)(k,{mintAddress:C})]})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsx)(fs,{title:"Locktime"}),(0,p.jsxs)(a.Typography.Text,{children:[Number(m)/86400," days"]})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsx)(fs,{title:"Status"}),(0,p.jsx)(gs,{state:j})]})})]})})]})})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Collapse,{activeKey:s.toString(),className:"expand-card expand-card-bg",children:(0,p.jsx)(a.Collapse.Panel,{header:null,showArrow:!1,children:(0,p.jsxs)(a.Row,{gutter:[8,8],justify:"space-between",align:"middle",children:[(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsx)(fs,{title:"Created At"}),(0,p.jsx)(a.Typography.Text,{ellipsis:!0,children:Qe()(1e3*Number(f)).format("HH:mm DD/MM/YYYY")})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsx)(fs,{title:"Updated At"}),(0,p.jsx)(a.Typography.Text,{ellipsis:!0,children:Qe()(1e3*Number(w)).format("HH:mm DD/MM/YYYY")})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsx)(js,{orderAddress:t})})]})},"true")})})]})},vs=e=>{let{poolAddress:t}=e;const{orders:s,retailers:o}=(0,r.useSelector)((e=>e)),{pools:i}=c(),d=(0,n.useWalletAddress)(),{mint_lpt:u}=i[t]||{},h=Object.keys(s).filter((e=>{const{retailer:t,owner:r}=s[e]||{},{mint_bid:n}=o[t]||{};return n===u&&r===d}));return(0,p.jsxs)(a.Row,{gutter:[16,16],style:{height:282},className:"scrollbar",justify:"center",align:"top",children:[!h.length&&(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Empty,{})}),h.map((e=>(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(l.ZP,{height:125,overflow:!0,children:(0,p.jsx)(Cs,{orderAddress:e})})},e)))]})},bs="retailers",As=(0,R.createAsyncThunk)("retailers/getRetailers",(async()=>{const{sol:{purchasing:e}}=B,t=await e.connection.getProgramAccounts(e.purchasingProgramId,{filters:[{dataSize:161}]});let s={};return t.forEach((t=>{let{pubkey:r,account:{data:n}}=t;const o=r.toBase58(),a=e.parseRetailerData(n);s[o]=a})),s})),Ts=(0,R.createAsyncThunk)("retailers/getRetailer",(async(e,t)=>{let{address:s}=e,{getState:r}=t;if(!d.account.isAddress(s))throw new Error("Invalid retailer address");const{sol:{purchasing:n}}=B,{retailers:{[s]:o}}=r();if(o)return{[s]:o};return{[s]:await n.getRetailerData(s)}})),Ss=(0,R.createAsyncThunk)("retailers/upsetRetailer",(async e=>{let{address:t,data:s}=e;if(!d.account.isAddress(t))throw new Error("Invalid retailer address");if(!s)throw new Error("Data is empty");return{[t]:s}})),ks=(0,R.createAsyncThunk)("retailers/deleteRetailer",(async e=>{let{address:t}=e;if(!d.account.isAddress(t))throw new Error("Invalid retailer address");return{address:t}})),Rs=(0,R.createSlice)({name:bs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(As.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(Ts.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ss.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ks.fulfilled,((e,t)=>{let{payload:s}=t;delete e[s.address]}))}}).reducer,Ps=e=>{let{poolAddress:t}=e;const s=(0,r.useDispatch)(),o=(0,n.useWalletAddress)(),{pools:i}=c(),l=i[t];return(0,p.jsx)(a.Row,{gutter:[24,24],children:(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Button,{type:"primary",onClick:async()=>{const{wallet:e}=window.sentre,{sol:{purchasing:t,sntrAddress:r}}=B;try{if(!e)throw new Error("Wallet is not connected");if(!d.account.isAddress(null===l||void 0===l?void 0:l.mint_lpt))throw new Error("Invalid bid mint address");if(!d.account.isAddress(r))throw new Error("Invalid ask mint address");const{txId:n,retailerAddress:a}=await t.initializeRetailer(o,l.mint_lpt,r,e);return await s(Ts({address:a})).unwrap(),be("Initialize a new retailer",n)}catch(n){return Ae(n)}},children:"New Retailer"})})})},_s=e=>{let{retailerAddress:t}=e;const[s,n]=(0,i.useState)(!1),{retailers:{[t]:o}}=(0,r.useSelector)((e=>e)),l=null===o||void 0===o?void 0:o.state;return(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(a.Typography.Text,{children:"Current State:"}),(0,p.jsx)(x.Z,{name:1===l?"checkmark-circle-sharp":"snow-outline"}),(0,p.jsx)(a.Typography.Text,{style:{fontWeight:700},children:1===l?"Active":"Frozen"}),(0,p.jsx)(a.Button,{size:"small",onClick:1===l?async()=>{try{const{sol:{purchasing:e}}=B,{wallet:s}=window.sentre;if(!s)throw new Error("Wallet is not connected");if(!d.account.isAddress(t))throw new Error("Invalid retailer address");await n(!0);const{txId:r}=await e.freezeRetailer(t,s);return be(`Freeze the retailer ${t}`,r)}catch(e){return Ae(e)}finally{return n(!1)}}:async()=>{try{const{sol:{purchasing:e}}=B,{wallet:s}=window.sentre;if(!s)throw new Error("Wallet is not connected");if(!d.account.isAddress(t))throw new Error("Invalid retailer address");await n(!0);const{txId:r}=await e.thawRetailer(t,s);return be(`Thaw the retailer ${t}`,r)}catch(e){return Ae(e)}finally{return n(!1)}},loading:s,children:1===l?"Freeze":"Thaw"})]})},Is=e=>{let{orderAddress:t}=e;const{retailers:s,orders:o}=(0,r.useSelector)((e=>e)),i=o[t],{mint_ask:l}=s[i.retailer]||{},c=Ce(l)||0,u=d.utils.undecimalize(i.ask_amount,c);return(0,p.jsxs)(a.Typography.Text,{style:{fontWeight:700},children:[n.util.numeric(u).format("0,0.[0000]")," ",(0,p.jsx)(k,{mintAddress:l})]})},Ds=e=>{let{orderAddress:t}=e;const{retailers:s,orders:o}=(0,r.useSelector)((e=>e)),i=o[t],{mint_bid:l}=s[i.retailer]||{},c=Ce(l)||0,u=d.utils.undecimalize(i.bid_amount,c);return(0,p.jsxs)(a.Typography.Text,{children:[n.util.numeric(u).format("0,0.[0000]")," LP"]})},zs=e=>{var t;let{orderAddress:s}=e;const{retailers:o,orders:i}=(0,r.useSelector)((e=>e)),{retailer:l,bid_amount:c,ask_amount:u,locked_time:h}=i[s],{mint_bid:x,mint_ask:y}=o[l]||{},m=Ce(x)||0,j=Number(d.utils.undecimalize(c,m))*Te(x),f=Ce(y)||0,w=(Number(d.utils.undecimalize(u,f))*Te(y)-j)/j,C=(null===(t=g.find((e=>e.locktime===Number(h)/86400)))||void 0===t?void 0:t.discount)||0;return(0,p.jsx)(a.Typography.Text,{style:{color:w<=C?"#14E041":"#D72311"},children:n.util.numeric(w).format("0,0.[00]%")})},Es=e=>{var t;let{orderData:s,onClose:o}=e;const[l,c]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),{retailers:y}=(0,r.useSelector)((e=>e)),{mint_bid:m,mint_ask:j}=y[s.retailer]||{},f=Ce(m)||0,w=Ce(j)||0,C=d.utils.undecimalize(s.bid_amount,f),v=d.utils.undecimalize(s.ask_amount,w),A=Number(s.locked_time)/86400,T=(null===(t=g.find((e=>{let{locktime:t}=e;return t===A})))||void 0===t?void 0:t.discount)||0;return(0,p.jsxs)(a.Row,{gutter:[16,24],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{align:"middle",justify:"space-between",children:[(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsx)(a.Typography.Text,{children:"Pay"}),(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(b,{mintAddress:j}),(0,p.jsx)(a.Typography.Text,{children:(0,p.jsx)(k,{mintAddress:j})})]}),(0,p.jsx)(a.Typography.Title,{level:4,children:v})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsx)(x.Z,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsx)(a.Typography.Text,{children:"Receive"}),(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(b,{mintAddress:m}),(0,p.jsx)(a.Typography.Text,{children:(0,p.jsx)(k,{separator:" + ",mintAddress:m})})]}),(0,p.jsx)(a.Typography.Title,{level:4,children:C})]})})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Card,{bordered:!1,className:"confirm-info",style:{boxShadow:"none",borderRadius:8},bodyStyle:{padding:16},children:(0,p.jsxs)(a.Row,{gutter:[12,12],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"Order ID"})}),(0,p.jsx)(a.Typography.Text,{children:n.util.shortenAddress(s.address)})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"Start day"})}),(0,p.jsx)(a.Col,{children:Qe()(1e3*Number(s.created_at)).format("DD/MM/YYYY")})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"Locked duration"})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Typography.Text,{children:[A," days"]})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"Purchase rate"})}),(0,p.jsxs)(a.Col,{children:[Math.round(100*(T+1)),"%"]})]})})]})})}),(0,p.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,p.jsxs)(a.Space,{size:4,children:[(0,p.jsx)(a.Button,{loading:u,onClick:async()=>{try{const{wallet:e}=window.sentre,{sol:{purchasing:t}}=B;if(!e)throw new Error("Wallet is not connected");await h(!0);const{txId:r}=await t.rejectOrder(s.address,e);return be("Reject the order",r)}catch(e){return Ae(e)}finally{return h(!1)}},children:"Reject"}),(0,p.jsx)(a.Button,{loading:l,onClick:async()=>{try{const{wallet:e}=window.sentre,{sol:{purchasing:t}}=B;if(!e)throw new Error("Wallet is not connected");await c(!0);const{txId:r}=await t.approveOrder(s.address,e);return be("Approve the order",r)}catch(e){return Ae(e)}finally{return o(!1),c(!1)}},type:"primary",children:"Approve"})]})})]})},Bs=e=>{let{state:t,orderData:s}=e;const[r,n]=(0,i.useState)(!1);return t===m.Open?(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(a.Button,{size:"small",type:"primary",onClick:()=>n(!0),children:"Confirm"}),(0,p.jsx)(a.Modal,{title:(0,p.jsx)(a.Typography.Title,{level:4,children:"Confirm order"}),open:r,footer:null,onCancel:()=>n(!1),closeIcon:(0,p.jsx)(x.Z,{name:"close"}),children:(0,p.jsx)(Es,{onClose:n,orderData:s})})]}):(0,p.jsx)(gs,{state:t})},Ns=[{title:"PAY",dataIndex:"ask_amount",key:"ask_amount",render:(e,t)=>(0,p.jsx)(l.ZP,{height:52,overflow:!0,children:(0,p.jsx)(Is,{orderAddress:t.address})})},{title:"RECEIVE",dataIndex:"bid_amount",key:"bid_amount",render:(e,t)=>(0,p.jsx)(l.ZP,{height:52,overflow:!0,children:(0,p.jsx)(Ds,{orderAddress:t.address})})},{title:"LOCKED",dataIndex:"locked_time",key:"locked_time",render:e=>(0,p.jsx)(l.ZP,{height:52,overflow:!0,children:(0,p.jsxs)(a.Typography.Text,{children:[Number(e)/86400," days"]})})},{title:"DISCOUNT",render:e=>(0,p.jsx)(l.ZP,{height:52,overflow:!0,children:(0,p.jsx)(zs,{orderAddress:e.address})})},{title:"ACTIONS",key:"state",dataIndex:"state",render:(e,t)=>(0,p.jsx)(l.ZP,{height:52,overflow:!0,children:(0,p.jsx)(Bs,{state:e,orderData:t})})}],Os="orders",Ms=(0,R.createAsyncThunk)("orders/getOrders",(async e=>{let{owner:t,retailer:s}=e;const{sol:{purchasing:r}}=B;let n={},o=[];d.account.isAddress(t)&&o.push({memcmp:{bytes:t,offset:0}}),d.account.isAddress(s)&&o.push({memcmp:{bytes:s,offset:33}});return(await r.connection.getProgramAccounts(r.purchasingProgramId,{filters:[{dataSize:105},...o]})).forEach((e=>{let{pubkey:t,account:{data:s}}=e;const o=t.toBase58(),a=r.parseOrderData(s);n[o]=a})),n})),Ls=(0,R.createAsyncThunk)("orders/getOrder",(async(e,t)=>{let{address:s}=e,{getState:r}=t;if(!d.account.isAddress(s))throw new Error("Invalid order address");const{sol:{purchasing:n}}=B,{retailers:{[s]:o}}=r();if(o)return{[s]:o};return{[s]:await n.getOrderData(s)}})),Ys=(0,R.createAsyncThunk)("orders/upsetOrder",(async e=>{let{address:t,data:s}=e;if(!d.account.isAddress(t))throw new Error("Invalid order address");if(!s)throw new Error("Data is empty");return{[t]:s}})),Fs=(0,R.createAsyncThunk)("orders/deleteOrder",(async e=>{let{address:t}=e;if(!d.account.isAddress(t))throw new Error("Invalid order address");return{address:t}})),Zs=(0,R.createSlice)({name:Os,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ms.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ls.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ys.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Fs.fulfilled,((e,t)=>{let{payload:s}=t;delete e[s.address]}))}}).reducer,Ws=e=>{let{poolAddress:t}=e;const[s,o]=(0,i.useState)(!0),[l,u]=(0,i.useState)(6),h=(0,r.useDispatch)(),{retailers:x,orders:y}=(0,r.useSelector)((e=>e)),{pools:j}=c(),f=(0,n.useWalletAddress)(),w=j[t],g=Object.keys(x).filter((e=>{const{owner:t}=x[e];return t===f})),C=g.find((e=>{const{mint_bid:t}=x[e];return t===(null===w||void 0===w?void 0:w.mint_lpt)})),v=(0,i.useMemo)((()=>Object.keys(y).filter((e=>{const{retailer:t,state:r}=y[e];let n=t===C;return s&&(n=n&&r===m.Open),n})).map((e=>({...y[e],address:e})))),[y,C,s]),b=(0,i.useCallback)((async()=>{await h(Ms({retailer:C}))}),[h,C]);return(0,i.useEffect)((()=>{b()}),[b]),(0,p.jsxs)(a.Row,{gutter:[24,12],justify:"center",children:[(0,p.jsx)(a.Col,{span:24,children:d.account.isAddress(C)?(0,p.jsxs)(a.Row,{gutter:[24,24],wrap:!1,children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(_s,{retailerAddress:C})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(a.Typography.Text,{type:"secondary",children:"Filtered?"}),(0,p.jsx)(a.Switch,{checked:s,onChange:o,size:"small"})]})})]}):(0,p.jsx)(Ps,{poolAddress:t})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Table,{className:"scrollbar",columns:Ns,dataSource:v.slice(0,l),rowClassName:(e,t)=>t%2?"odd-row":"even-row",pagination:!1,scroll:{y:155},rowKey:e=>Number(e.created_at)})}),(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Button,{onClick:()=>u(l+6),disabled:l>=v.length,type:"text",children:"View more"})})]})},Hs=e=>{var t;let{poolAddress:s,lpt:r}=e;const[o,l]=(0,i.useState)(!1),[d,u]=(0,i.useState)("deposit"),h=(0,n.useWalletAddress)(),{pools:y}=c(),m=h===(null===(t=y[s])||void 0===t?void 0:t.owner),j="deposit"===d,f=[{label:"Deposit",key:"deposit",children:(0,p.jsx)(Ft,{poolAddress:s})},{label:"Withdraw",key:"withdraw",children:(0,p.jsx)(Ht,{poolAddress:s})},{label:"Reinvestmnet",key:"reinvestmnet",children:(0,p.jsx)(ms,{poolAddress:s})},{label:"Redeem",key:"redeem",children:(0,p.jsx)(vs,{poolAddress:s})}],w=[{label:"Deposit",key:"deposit-history",children:(0,p.jsx)(ns,{})},{label:"Withdraw",key:"withdraw-history",children:(0,p.jsx)(is,{})}];return(0,p.jsxs)(a.Card,{bordered:!1,style:{height:j?"100%":"auto"},children:[(0,p.jsx)(a.Tabs,{tabBarExtraContent:(0,p.jsx)(a.Button,{type:"text",size:"small",shape:"circle",icon:(0,p.jsx)(x.Z,{name:"document-outline"}),onClick:()=>l(!0)}),activeKey:d,onChange:u,items:m?f:[...f,{label:"Admin",key:"admin",children:(0,p.jsx)(Ws,{poolAddress:s})}]}),(0,p.jsx)(a.Modal,{closeIcon:(0,p.jsx)(x.Z,{name:"close-outline"}),open:o,onCancel:()=>l(!1),footer:!1,children:(0,p.jsx)(a.Tabs,{items:w})})]})},{route:{myRoute:$s}}=B,Vs=()=>{const e=(0,r.useDispatch)(),t=(0,o.useHistory)(),{main:{selectedPoolAddress:s}}=(0,r.useSelector)((e=>e)),n=(0,o.useLocation)(),l=(0,i.useMemo)((()=>new URLSearchParams(n.search)),[n]).get(w.address)||"",d=(0,i.useCallback)((async()=>(await e(U("")),await t.push($s))),[e,t]),c=l||s;return(0,p.jsx)(a.Row,{gutter:[24,24],justify:"center",children:(0,p.jsx)(a.Col,{xs:24,md:20,lg:18,children:(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Button,{type:"text",icon:(0,p.jsx)(x.Z,{name:"arrow-back-outline"}),onClick:d,style:{margin:-12},children:"Back"})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Je,{poolAddress:c})}),(0,p.jsx)(a.Col,{xs:24,md:12,children:(0,p.jsxs)(a.Row,{gutter:[16,16],style:{height:"100%"},children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(Ot,{})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(It,{})})]})}),(0,p.jsx)(a.Col,{xs:24,md:12,children:(0,p.jsx)(Hs,{poolAddress:c})})]})})})},Us="lpts",Gs=(0,R.createAsyncThunk)("lpts/getLPTs",(async e=>{let{accounts:t}=e;const{splt:s,swap:r}=window.sentre,n=t.map((e=>{let{mint:t}=e;return t})).map((e=>d.account.fromAddress(e))),o=(await d.utils.wrappedGetMultipleAccountsInfo(s.connection,n)).map((e=>null!==e&&void 0!==e&&e.data?s.parseMintData(e.data):null));if(null===o||void 0===o||!o.length)return{};const a=await Promise.all(o.map((async e=>{try{const{mint_authority:t,freeze_authority:s}=e||{};if(!d.account.isAddress(t)||!d.account.isAddress(s))return;return await r.derivePoolAddress(t,s)}catch(t){return}})));let i={};return t.forEach(((e,t)=>{let{address:s,...r}=e;const n=a[t];d.account.isAddress(n)&&(i[s]={...r,pool:n})})),i})),qs=(0,R.createAsyncThunk)("lpts/getLPT",(async(e,t)=>{let{address:s}=e,{getState:r}=t;if(!d.account.isAddress(s))throw new Error("Invalid account address");const{lpts:{[s]:n}}=r();if(n)return{[s]:n};const{swap:o}=window.sentre;return{[s]:await o.getLPTData(s)}})),Ks=(0,R.createAsyncThunk)("lpts/upsetLPT",(async(e,t)=>{let{address:s,data:r}=e,{getState:n}=t;if(!d.account.isAddress(s))throw new Error("Invalid address");if(!r)throw new Error("Data is empty");const{lpts:{[s]:o}}=n(),{pool:a}=o||{};if(d.account.isAddress(a))return{[s]:{...r,pool:a}};const{swap:i}=window.sentre;return{[s]:await i.getLPTData(s)}})),Js=(0,R.createAsyncThunk)("lpts/deleteLPT",(async e=>{let{address:t}=e;if(!d.account.isAddress(t))throw new Error("Invalid address");return{address:t}})),Xs=(0,R.createSlice)({name:Us,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Gs.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(qs.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Ks.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Js.fulfilled,((e,t)=>{let{payload:s}=t;delete e[s.address]}))}}).reducer;let Qs=0;const er=()=>{const e=(0,r.useDispatch)(),t=(0,n.useAccounts)(),s=(0,n.useWalletAddress)(),o=(0,i.useMemo)((()=>Object.keys(t).map((e=>({address:e,...t[e]})))),[t]),a=(0,i.useCallback)((async()=>{try{if(!d.account.isAddress(s))return;await e(Gs({accounts:o})).unwrap()}catch(t){await Ae(t)}}),[e,o,s]),l=(0,i.useCallback)((async()=>{if(Qs)return console.warn("Already watched");const t=[{memcmp:{bytes:s,offset:32}}];Qs=window.sentre.splt.watch(((t,s)=>{if(t)return console.error(t);const{address:r,data:n}=s;return e(Ks({address:r,data:n}))}),t)}),[e,s]);return(0,i.useEffect)((()=>(a(),l(),()=>{(async()=>{try{await window.sentre.splt.unwatch(Qs)}catch(e){}})(),Qs=0})),[a,l]),(0,p.jsx)(i.Fragment,{})},{sol:{purchasing:tr}}=B;let sr=0;const rr=()=>{const e=(0,r.useDispatch)(),t=(0,n.useWalletAddress)(),s=(0,i.useCallback)((async()=>{try{if(!d.account.isAddress(t))return;await e(As()).unwrap()}catch(s){await Ae(s)}}),[e,t]),o=(0,i.useCallback)((async()=>{if(sr)return console.warn("Already watched");sr=tr.watch(((t,s)=>{if(t)return console.error(t);const{address:r,data:n}=s;return e(Ss({address:r,data:n}))}),[{dataSize:161}])}),[e]);return(0,i.useEffect)((()=>(s(),o(),()=>{(async()=>{try{await tr.unwatch(sr)}catch(e){}})(),sr=0})),[s,o]),(0,p.jsx)(i.Fragment,{})},{sol:{purchasing:nr}}=B;let or=0;const ar=()=>{const e=(0,r.useDispatch)(),t=(0,n.useWalletAddress)(),s=(0,i.useCallback)((async()=>{try{if(!d.account.isAddress(t))return;await e(Ms({owner:t})).unwrap()}catch(s){await Ae(s)}}),[e,t]),o=(0,i.useCallback)((async()=>{if(or)return console.warn("Already watched");or=nr.watch(((t,s)=>{if(t)return console.error(t);const{address:r,data:n}=s;return e(Ys({address:r,data:n}))}),[{dataSize:105}])}),[e]);return(0,i.useEffect)((()=>(s(),o(),()=>{(async()=>{try{await nr.unwatch(or)}catch(e){}})(),or=0})),[s,o]),(0,p.jsx)(i.Fragment,{})},{sol:{taxmanAddress:ir}}=B,lr="pools",dr=(0,R.createAsyncThunk)("pools/getPools",(async()=>{const{swap:e}=window.sentre,t=await e.connection.getProgramAccounts(e.swapProgramId,{filters:[{dataSize:257},{memcmp:{bytes:ir,offset:65}}]}),s={};return t.forEach((t=>{let{pubkey:r,account:{data:n}}=t;const o=r.toBase58(),a=e.parsePoolData(n);s[o]=a})),s})),cr=(0,R.createAsyncThunk)("pools/getPool",(async(e,t)=>{let{address:s}=e,{getState:r}=t;if(!n.util.isAddress(s))throw new Error("Invalid pool address");const{pools:{[s]:o}}=r();if(o)return{[s]:o};const{swap:a}=window.sentre;return{[s]:await a.getPoolData(s)}})),ur=(0,R.createAsyncThunk)("pools/upsetPool",(async e=>{let{address:t,data:s}=e;if(!n.util.isAddress(t))throw new Error("Invalid pool address");if(!s)throw new Error("Data is empty");return{[t]:s}})),pr=(0,R.createSlice)({name:lr,initialState:{},reducers:{},extraReducers:e=>{e.addCase(dr.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(cr.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(ur.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{taxmanAddress:hr}}=B;let xr=0;const yr=()=>{const e=(0,r.useDispatch)(),t=(0,n.useWalletAddress)(),s=(0,i.useCallback)((async()=>{try{if(!n.util.isAddress(t))return;await e(dr()).unwrap()}catch(s){return window.notify({type:"error",description:"Cannot fetch data of pools"})}}),[e,t]),o=(0,i.useCallback)((async()=>{if(xr)return console.warn("Already watched");const{swap:t}=window.sentre||{},s=[{memcmp:{bytes:hr,offset:65}}];xr=null===t||void 0===t?void 0:t.watch(((t,s)=>{if(t)return console.error(t);const{address:r,data:n}=s;return e(ur({address:r,data:n}))}),s)}),[e]);return(0,i.useEffect)((()=>(s(),o(),()=>{(async()=>{try{await window.sentre.swap.unwatch(xr)}catch(e){}})(),xr=0})),[s,o]),(0,p.jsx)(i.Fragment,{})};var mr=s(28186);const jr=()=>{const{to:e}=(0,mr.useAppRoute)();return(0,p.jsxs)(a.Row,{gutter:[24,24],style:{paddingBottom:12},justify:"center",children:[(0,p.jsx)(a.Col,{xs:24,lg:18,children:(0,p.jsx)(a.Alert,{type:"info",message:(0,p.jsx)(a.Typography.Title,{level:5,children:"Balansol is launched \u2705 Explorer Now \u2728"}),description:(0,p.jsxs)(a.Typography.Text,{type:"secondary",children:["Liquidity Providing and Swapping are now live on"," ",(0,p.jsx)("strong",{children:"Balansol"})," with index funds and custom pool weights."," ",(0,p.jsx)("strong",{children:"Get your LPs for juicy APR farming - Click here to use Balansol now!"})]}),onClick:()=>e("/app/balansol?autoInstall=true",{absolutePath:!0,newWindow:!0}),style:{cursor:"pointer"},showIcon:!0})}),(0,p.jsx)(a.Col,{xs:24,children:(0,p.jsxs)(o.Switch,{children:[(0,p.jsx)(o.Route,{exact:!0,path:"/app/sen_lp",component:Oe}),(0,p.jsx)(o.Route,{path:"/app/sen_lp/details",component:Vs})]})}),(0,p.jsx)(er,{}),(0,p.jsx)(rr,{}),(0,p.jsx)(ar,{}),(0,p.jsx)(yr,{})]})};var fr=s(48744),wr=s.n(fr),gr=s(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const Cr={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof pt.PublicKey||e instanceof wr()||e instanceof gr}},vr=(0,R.configureStore)({middleware:e=>e(Cr),devTools:!1,reducer:{main:J,stat:H,lpts:Xs,retailers:Rs,orders:Zs,settings:xe,history:ts,pools:pr}});var br=s(45597);const{manifest:{appId:Ar}}=B,Tr=()=>(0,p.jsx)(n.UIProvider,{appId:Ar,antd:!0,children:(0,p.jsx)(n.MintProvider,{children:(0,p.jsx)(n.PoolProvider,{children:(0,p.jsx)(n.AccountProvider,{children:(0,p.jsx)(n.WalletProvider,{children:(0,p.jsx)(r.Provider,{store:vr,children:(0,p.jsx)(jr,{})})})})})})})},83272:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/README.6103a3755dc0a8decd8e.md"},70854:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel.0cbac40649a8b7015704.png"},27803:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel1.041ec1c7740c4288c337.png"},85468:(e,t,s)=>{"use strict";e.exports=s.p+"static/media/panel2.d238793415911a6ea40c.png"},43094:()=>{},69159:()=>{},25129:()=>{},44454:()=>{},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},89408:()=>{},47956:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=node_modules_sentre_senhub_dist_components_pageLoader_lazy_recursive-src_bootstrap_app_tsx.2b0830ba.chunk.js.map