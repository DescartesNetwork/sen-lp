(globalThis.webpackChunksen_lp=globalThis.webpackChunksen_lp||[]).push([[399],{5122:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>xs,Widget:()=>gs,widgetConfig:()=>ys});var n=s(55754),o=s(49142),r=s(78589),i=s(92950);const a={"logo-telegram":s.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"};var l=s(45263);const d=(0,i.forwardRef)((({name:e,className:t,...s},n)=>{const o=t?"anticon "+t:"anticon";return(0,l.jsx)("span",{className:o,...s,children:a[e]?(0,l.jsx)("ion-icon",{ref:n,src:a[e]}):(0,l.jsx)("ion-icon",{ref:n,name:e})})}));var c=s(45055),u=s(95418),p=s(44891);const h=({pools:e,onChange:t})=>{const[s,n]=(0,i.useState)(""),{tokenProvider:a}=(0,o.useMint)(),c=(0,i.useCallback)((async()=>{if(!s||s.length<3)return t(void 0);if(u.account.isAddress(s)){const n=e.find((({address:e})=>e===s));return t(n?[n]:[])}const n=await a.find(s);if(!n)return t(void 0);const o=n.map((({address:e})=>e)),r=e.filter((e=>{const{mint_a:t,mint_b:s}=e;return!!o.includes(t)||!!o.includes(s)}));return t(r)}),[e,s,t,a]);return(0,i.useEffect)((()=>{c()}),[c]),(0,l.jsx)(r.Card,{bodyStyle:{padding:8},bordered:!1,children:(0,l.jsx)(r.Input,{placeholder:"Search",value:s,size:"small",bordered:!1,prefix:(0,l.jsx)(r.Button,{type:"text",style:{marginLeft:-7},size:"small",onClick:s?()=>n(""):()=>{},icon:(0,l.jsx)(d,{name:s?"close-outline":"search-outline"})}),onChange:e=>n(e.target.value)})})};var m=s(31633);const x={ttl:3e4},y={limit:{calls:10,time:1e3},cache:x};class g{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class f{static set(e,t,s=x){this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}f.mapCache=new Map;class j{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new w(e);return this.mapInstance.set(t,s),s}static async load(e,t,s={}){"object"===typeof e&&(e=JSON.stringify(e));let n=j.getSingleFlight(s);j.mapInstance.set(e,n);const o=new g(e);return n.load(o,t)}}j.mapInstance=new Map;class w{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(y,e)}async load(e,t){const s=f.get(e.key);if(s)return Promise.resolve(s);let n=!1,o=this.mapRequestCalling.get(e.key);return o||(o=e,n=!0,this.mapRequestCalling.set(o.key,o)),new Promise(((e,s)=>{if(!o)return s("Not found request!");o.add(e,s),n&&this.fetch(o,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{f.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){if(!this.config.limit)return!1;const e=this.timeLogs[0]||0,t=(new Date).getTime();if(this.timeLogs.length<this.config.limit.calls)return!0;return t-e>this.config.limit.time}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}const v=(e,t)=>{const{mint_a:s,mint_b:n,reserve_a:o,reserve_b:r}=t;return e===s?o:e===n?r:BigInt(0)},b=async()=>{const{sol:{sntrPoolAddress:e,sntrAddress:t}}=m.Z,s={icon:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png",symbol:"SNTR",name:"Sentre",address:t,rank:0,price:0,priceChange:0,totalVolume:0};try{var n,o;const r=await(null===(n=window.sentre)||void 0===n||null===(o=n.swap)||void 0===o?void 0:o.getPoolData(e)),{mint_a:i,mint_b:a}=r,l=v(t===i?a:i,r),d=v(t,r);return s.price=Number(u.utils.undecimalize(l,9))/Number(u.utils.undecimalize(d,9)),s}catch(r){return s}},C=async(e="")=>j.load("fetchCGK"+e,"sentre"===e?b:()=>u.utils.parseCGK(e));var T=s(16200),S=s.n(T),A=s(63805);const k=e=>new Promise((t=>setTimeout(t,e))),P=(e,t=4,s="...")=>e.substring(0,t)+s+e.substring(e.length-t,e.length),I=e=>u.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${A.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${A.ef}`,R=e=>e?S()(e):S()("0"),B=({poolAddress:e})=>{const{tokenProvider:t}=(0,o.useMint)(),{pools:s}=(0,o.usePool)(),[n,r]=(0,i.useState)(0),a=(0,i.useCallback)((async()=>{try{const{reserve_a:n,reserve_b:o,mint_a:i,mint_b:a}=s[e],l=[i,a],d=await Promise.all(l.map((e=>u.account.isAddress(e)?t.findByAddress(e):{}))),c=[n,o],p=d.map((({decimals:e})=>e)),h=(await Promise.all(d.map((({extensions:e})=>null!==e&&void 0!==e&&e.coingeckoId?C(null===e||void 0===e?void 0:e.coingeckoId):{})))).map((({price:e})=>e));let m=0;return[0,1,2].forEach((e=>{c[e]&&p[e]&&h[e]&&(m+=Number(u.utils.undecimalize(c[e],p[e]))*h[e])})),r(m)}catch(n){return r(0)}}),[s,e,t]);return(0,i.useEffect)((()=>{a()}),[a]),(0,l.jsxs)("span",{children:["$",R(n).format("0,0.[00]a")]})};let L;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(L||(L={}));const z=({poolAddress:e})=>{const{pools:t}=(0,o.usePool)(),s=t[e]||{},{wallet:{address:n}}=(0,o.useWallet)(),i=s.state===L.Frozen,a=n===(null===s||void 0===s?void 0:s.owner);return(0,l.jsxs)(r.Space,{children:[i&&(0,l.jsx)(d,{name:"snow-outline",style:{fontSize:16}}),a&&(0,l.jsx)(d,{name:"person-outline",style:{fontSize:16}})]})};var D=s(19289);const M={appId:"sen_lp",url:"https://descartesnetwork.github.io/sen-lp/index.js",senhub:"senhub@https://descartesnetwork.github.io/senhub/index.js"},E={development:{...M},staging:{...M},production:{...M}},_={spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},N={devnet:{node:"https://api.devnet.solana.com",chainId:103,cluster:"devnet",senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",..._,swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9",blackPoolAddresses:["FaHQpdp87S7d7PBJZjaty514rrEtmStaf1FcDst9GPY4","5V7sDTzYmjkyg7zXLTTcY8Ls6AAusLRX27CpWEJiqriE","G8BEKsiKPiazG623piXynTSr89TXLTgWycByvDR9bPii"],senPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",senOwner:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"]},testnet:{node:"https://api.devnet.solana.com",cluster:"devnet",chainId:103,senAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",..._,swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9",blackPoolAddresses:["FaHQpdp87S7d7PBJZjaty514rrEtmStaf1FcDst9GPY4","5V7sDTzYmjkyg7zXLTTcY8Ls6AAusLRX27CpWEJiqriE","G8BEKsiKPiazG623piXynTSr89TXLTgWycByvDR9bPii"],senPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",senOwner:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"]},mainnet:{node:"https://api.mainnet-beta.solana.com",cluster:"mainnet",chainId:101,senAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",..._,swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e",blackPoolAddresses:[],senPoolAddress:"",senOwner:["Cs6jYywHTAgdvjxn8xG4VkJJH8DXXy7zbtatzMUWoCMG"]}},F={devnet:{baseURL:"https://stat-dev.sentre.io"},testnet:{baseURL:"https://stat-dev.sentre.io"},mainnet:{baseURL:"https://stat.sentre.io"}},O={development:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},staging:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},production:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)}},q={development:{swapRoute:"/app/sen_swap"},staging:{swapRoute:"/app/sen_swap"},production:{swapRoute:"/app/sen_swap"}},Y={manifest:E[A.OB],sol:N[A.ef],stat:F[A.ef],fee:O[A.OB],swapRoute:q[A.OB]};var U=s(21995),V=s.n(U);const W={auth:async(e=!1)=>{if("object"===typeof e)return e;if(!e)return null;const t=window.sentre.wallet;if(!t)throw new Error("Wallet is not connected");const s=(Number(new Date)+1e4).toString()+Math.floor(Math.random()*10**16),n=await t.signMessage(s);return{Authorization:JSON.stringify(n)}},post:async(e,t=null,s=!1)=>{const n=await W.auth(s);try{const{data:s}=await V()({method:"post",url:e,data:t,headers:n});if("ERROR"===s.status)throw new Error(s.error);return s}catch(o){if(!o.response)throw new Error(o.message);const{response:{data:{error:e}}}=o;throw new Error(e)}},get:async(e,t=null,s=!1)=>{const n=await W.auth(s);try{const{data:s}=await V()({method:"get",url:e,params:t,headers:n});if("ERROR"===s.status)throw new Error(s.error);return s}catch(o){if(!o.response)throw new Error(o.message);const{response:{data:{error:e}}}=o;throw new Error(e)}},put:async(e,t=null,s=!1)=>{const n=await W.auth(s);try{const{data:s}=await V()({method:"put",url:e,data:t,headers:n});if("ERROR"===s.status)throw new Error(s.error);return s}catch(o){if(!o.response)throw new Error(o.message);const{response:{data:{error:e}}}=o;throw new Error(e)}},delete:async(e,t=null,s=!1)=>{const n=await W.auth(s);try{const{data:s}=await V()({method:"delete",url:e,data:t,headers:n});if("ERROR"===s.status)throw new Error(s.error);return s}catch(o){if(!o.response)throw new Error(o.message);const{response:{data:{error:e}}}=o;throw new Error(e)}}},H=W;let Z;!function(e){e.endpointDetail="public/api/v1/detail/pools",e.endpointDaily="public/api/v1/daily/pools"}(Z||(Z={}));const{stat:{baseURL:G}}=Y,J="stat",K=(0,D.createAsyncThunk)("stat/fetchStatPoolData",(async({address:e},{getState:t})=>{try{const s=t().stat[e];if(s)return{[e]:s};const n=H.get(`${G}/${Z.endpointDetail}/${e}`),o=H.get(`${G}/${Z.endpointDaily}/${e}`),[r,i]=await Promise.all([n,o]);return{[e]:{details:r,daily:i}}}catch(s){return{}}})),Q=(0,D.createSlice)({name:J,initialState:{},reducers:{},extraReducers:e=>{e.addCase(K.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,X=e=>{const{tokenProvider:t}=(0,o.useMint)(),{pools:s}=(0,o.usePool)(),[n,r]=(0,i.useState)([]),a=(0,i.useCallback)((async()=>{const n=await t.findByAddress(e);if(n)return r([n]);const o=Object.values(s).find((({mint_lpt:t})=>t===e));if(!o)return r([void 0]);const{mint_a:i,mint_b:a}=o,l=await t.findByAddress(i),d=await t.findByAddress(a);return r([l,d])}),[e,s,t]);return(0,i.useEffect)((()=>{a()}),[a]),n},$=({mintAddress:e,size:t=24,icon:s=(0,l.jsx)(d,{name:"diamond-outline"}),isReserve:n=!1})=>{const o=X(e),a=(0,i.useMemo)((()=>{const e=JSON.parse(JSON.stringify(o));return n?e.reverse():e}),[n,o]);return(0,l.jsx)(r.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},children:a.map(((e,n)=>(0,l.jsx)(r.Avatar,{src:null===e||void 0===e?void 0:e.logoURI,size:t,style:{backgroundColor:"#2D3355",border:"none"},children:s},(null===e||void 0===e?void 0:e.address)||n)))})},ee=({mintAddress:e,separator:t=" \u2022 ",isReverse:s=!1})=>{const n=X(e),o=(0,i.useMemo)((()=>{let o=n.map((t=>{if(!t)return P(e);const{name:s,address:o,symbol:r}=t;return 1===n.length&&s?s:r||P(o)}));return s&&o.reverse(),o.join(t),1===n.length?o:`${o} LP`}),[s,e,t,n]);return(0,l.jsx)("span",{children:o})},te=({mintAddress:e,separator:t=" \u2022 ",isReverse:s=!1})=>{const n=X(e),o=(0,i.useMemo)((()=>{const o=n.map((t=>u.account.isAddress(e)?t?t.symbol:e.substring(0,4):"TOKN"));return s&&o.reverse(),o.join(t)}),[s,e,t,n]);return(0,l.jsx)("span",{children:o})},se=({poolAddress:e,onClick:t=(()=>{}),action:s=(0,l.jsx)(i.Fragment,{}),selected:a=!1})=>{var d;const c=(0,n.useDispatch)(),{pools:u}=(0,o.usePool)(),p=(0,n.useSelector)((t=>{var s;return null===(s=t.stat[e])||void 0===s?void 0:s.details})),h=(null===u||void 0===u?void 0:u[e])||{},{state:m}=h,x=null===u||void 0===u||null===(d=u[e])||void 0===d?void 0:d.mint_lpt,y=(0,i.useMemo)((()=>{if(!p)return 0;const e=p.roi;return Math.pow(1+Number(e||0)/100,365)-1}),[p]);(0,i.useEffect)((()=>{e&&c(K({address:e}))}),[c,e]);const g=m===L.Frozen,f=a?"card-active":"";return(0,l.jsx)(r.Card,{className:f,bodyStyle:{padding:12,height:78},onClick:t,bordered:a,hoverable:!0,children:(0,l.jsxs)(r.Row,{gutter:[12,12],wrap:!1,align:"middle",children:[(0,l.jsx)(r.Col,{span:24,flex:"auto",children:(0,l.jsxs)(r.Space,{direction:"vertical",children:[(0,l.jsxs)(r.Space,{children:[(0,l.jsx)($,{mintAddress:x,size:24}),(0,l.jsx)(r.Typography.Text,{type:g?"secondary":void 0,children:(0,l.jsx)(te,{mintAddress:x})})]}),(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(r.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,l.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,l.jsx)(r.Typography.Text,{children:(0,l.jsx)(B,{poolAddress:e})}),(0,l.jsx)(r.Divider,{type:"vertical",style:{margin:0}}),(0,l.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,l.jsx)(r.Typography.Text,{children:R(y).format("0,0.[00]%")})]})]})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Space,{size:2,children:[(0,l.jsx)(z,{poolAddress:e}),s]})})]})})},ne=({onInit:e=(()=>{}),onClick:t=(()=>{}),selectedPoolAddress:s,action:n=(()=>(0,l.jsx)(i.Fragment,{}))})=>{const[a,d]=(0,i.useState)(),{pools:c}=(0,o.usePool)(),u=(0,i.useMemo)((()=>Object.keys(c).map((e=>({address:e,...c[e]}))).sort((({reserve_a:e,reserve_b:t},{reserve_a:s,reserve_b:n})=>{const o=e*t,r=s*n;return o>r?-1:o<r?1:0}))),[c]);return(0,i.useEffect)((()=>{var t;u.length&&!s&&e(null===(t=u[0])||void 0===t?void 0:t.address)}),[e,s,u]),(0,l.jsxs)(r.Row,{gutter:[12,12],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(h,{onChange:d,pools:u})}),(a||u).map(((e,o)=>(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(p.ZP,{height:78,overflow:!0,children:(0,l.jsx)(se,{poolAddress:e.address,action:n(e.address),onClick:()=>t(e.address),selected:s===e.address})})},e.address+o)))]})},oe="main",re=(0,D.createAsyncThunk)("main/selectPool",(async e=>({selectedPoolAddress:e,selectedLptAddress:""}))),ie=(0,D.createAsyncThunk)("main/selectCategoryPool",(async e=>({selectedCategoryPool:e}))),ae=(0,D.createAsyncThunk)("main/handleOpenDrawer",(async e=>({visible:e}))),le=(0,D.createSlice)({name:oe,initialState:{selectedPoolAddress:"",visible:!1,selectedCategoryPool:""},reducers:{},extraReducers:e=>{e.addCase(re.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(ae.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(ie.fulfilled,((e,{payload:t})=>{Object.assign(e,t)}))}}).reducer,de=()=>{const e=(0,n.useDispatch)(),{selectedPoolAddress:t}=(0,n.useSelector)((e=>e.main)),s=new URLSearchParams((0,c.useLocation)().search).get("poolAddress")||"",o=(0,i.useCallback)((t=>{const n=u.account.isAddress(s)?s:t;return e(re(n))}),[e,s]),a=(0,i.useCallback)((t=>{e(re(t)),e(ae(!1))}),[e]),p=(0,i.useCallback)((e=>(0,l.jsx)(r.Button,{type:"text",onClick:()=>a(e),icon:(0,l.jsx)(d,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[a]);return(0,l.jsx)(r.Row,{gutter:[12,12],children:(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(ne,{action:p,selectedPoolAddress:t,onInit:o,onClick:a})})})},ce=({data:e,onClick:t=(()=>{}),action:s=(0,l.jsx)(i.Fragment,{}),selected:n=!1})=>{var a;const{pool:d,amount:c}=e,p=u.utils.undecimalize(c,9),h=n?"card-active":"",m=e.state===L.Frozen,{pools:x}=(0,o.usePool)(),y=(null===x||void 0===x||null===(a=x[d])||void 0===a?void 0:a.mint_lpt)||"";return(0,l.jsx)(r.Card,{className:h,bodyStyle:{padding:12,height:78},onClick:t,bordered:n,hoverable:!0,children:(0,l.jsxs)(r.Row,{gutter:[12,12],align:"middle",wrap:!1,children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsxs)(r.Space,{direction:"vertical",children:[(0,l.jsxs)(r.Space,{size:"middle",children:[(0,l.jsx)($,{mintAddress:y,size:24}),(0,l.jsx)(r.Typography.Text,{type:m?"secondary":void 0,children:(0,l.jsx)(te,{mintAddress:y})})]}),(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(r.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,l.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,l.jsx)(r.Typography.Text,{children:(0,l.jsx)(B,{poolAddress:d})}),(0,l.jsx)(r.Divider,{type:"vertical",style:{margin:0}}),(0,l.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"My LPT:"}),(0,l.jsx)(r.Typography.Text,{children:R(p).format("0,0.[00]")})]})]})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Space,{size:2,children:[(0,l.jsx)(z,{poolAddress:d})," ",s]})})]})})},ue=({onInit:e=(()=>{}),onClick:t=(()=>{}),selectedPoolAddress:s,action:a=(()=>(0,l.jsx)(i.Fragment,{}))})=>{const d=(0,n.useSelector)((e=>e.lpts)),{pools:c}=(0,o.usePool)(),{wallet:{address:u}}=(0,o.useWallet)(),h=(0,i.useMemo)((()=>Object.keys(d).filter((e=>{var t;const{pool:s}=d[e];return(null===c||void 0===c||null===(t=c[s])||void 0===t?void 0:t.owner)===u?null===c||void 0===c?void 0:c[s]:null}))),[d,c,u]);return(0,i.useEffect)((()=>{h.length&&e(h[0])}),[e,h,d]),(0,l.jsx)(r.Row,{gutter:[12,12],children:h.map(((e,n)=>{const{pool:o}=d[e];return(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(p.ZP,{height:78,overflow:!0,children:(0,l.jsx)(ce,{data:d[e],action:a(e,o),onClick:()=>t(e,o),selected:s===o})})},e+n)}))})},pe=()=>{const e=(0,n.useDispatch)(),{selectedPoolAddress:t}=(0,n.useSelector)((e=>e.main)),s=(0,i.useCallback)(((t,s)=>{e(re(s)),e(ae(!1))}),[e]),o=(0,i.useCallback)(((e,t)=>(0,l.jsx)(r.Button,{type:"text",onClick:()=>s(e,t),size:"small",icon:(0,l.jsx)(d,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[s]);return(0,l.jsx)(r.Row,{gutter:[12,12],children:(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(ue,{action:o,selectedPoolAddress:t,onClick:s})})})};let he;const me=(0,i.forwardRef)((({max:e,onValue:t=(()=>{}),onChange:s=(()=>{}),onBlur:n=(()=>{}),...o},a)=>{var c;const[u,p]=(0,i.useState)(""),[h,m]=(0,i.useState)(null),x=(0,i.useRef)(a),y=(0,i.useCallback)((s=>{const n=e=>{he&&(clearTimeout(he),he=void 0),p(e),he=setTimeout((()=>p("")),500)};return/^\d*(\.\d*)?$/.test(s)?e&&parseFloat(s)>parseFloat(e.toString())?n("Not enough balance"):t(s):n("Invalid character")}),[e,t]);return null===x||void 0===x||null===(c=x.current)||void 0===c||c.setSelectionRange(h,h),(0,l.jsx)(r.Tooltip,{title:(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(d,{name:"warning"}),u]}),visible:!!u,children:(0,l.jsx)(r.Input,{...o,onBlur:e=>{n(e);const t=Number(e.target.value);e.target.value&&y(t?t.toString():"")},onChange:e=>{s(e),m(e.target.selectionStart),y(e.target.value||"")},ref:x})})})),xe=e=>{const[t,s]=(0,i.useState)(0),{tokenProvider:n,getMint:r}=(0,o.useMint)(),a=(0,i.useCallback)((async()=>{if(!e)return s(0);const t=await n.findByAddress(e);if(t)return s(t.decimals);try{const t=await r({address:e});return s(t[e].decimals)}catch(o){}return s(0)}),[r,e,n]);return(0,i.useEffect)((()=>{a()}),[a]),t},ye=({mintAddresses:e,activeMintAddress:t,onSelect:s})=>(0,l.jsxs)(r.Select,{onChange:s,value:t||"",bordered:!1,suffixIcon:(0,l.jsx)(r.Divider,{type:"vertical",style:{margin:0}}),style:{marginLeft:-7},children:[(0,l.jsx)(r.Select.Option,{value:"Select",children:(0,l.jsxs)(r.Space,{size:4,children:[(0,l.jsx)($,{mintAddress:"Select",icon:(0,l.jsx)(d,{name:"help-outline"})}),(0,l.jsx)(r.Typography.Text,{children:"Select"})]})}),e.map(((e,t)=>(0,l.jsx)(r.Select.Option,{value:e,children:(0,l.jsxs)(r.Space,{size:4,children:[(0,l.jsx)($,{mintAddress:e}),(0,l.jsx)(te,{mintAddress:e})]})},e+t)))]}),ge=({mintAddresses:e,onChange:t,suggestInfo:s})=>{const[n,a]=(0,i.useState)(""),[d,c]=(0,i.useState)("Select"),[p,h]=(0,i.useState)(""),{accounts:m}=(0,o.useAccount)(),x=X(d),y=xe(d),{wallet:{address:g}}=(0,o.useWallet)(),f=null===m||void 0===m?void 0:m[p],{symbol:j}=x[0]||{},w=(0,i.useMemo)((()=>{const{amount:e}=f||{};return e&&y&&u.utils.undecimalize(e,y)||"0"}),[f,y]),v=(0,i.useCallback)((async()=>{const{splt:e}=window.sentre;let t="";try{t=await(null===u.account||void 0===u.account?void 0:u.account.deriveAssociatedAddress(g,d,e.spltProgramId.toBase58(),e.splataProgramId.toBase58()))}catch(s){}h(t)}),[d,g]),b=(0,i.useCallback)((async e=>{if(await a(e),u.account.isAddress(d))return t(y?{amount:u.utils.decimalize(e,y),mintAddress:d}:{amount:BigInt(0),mintAddress:d})}),[t,y,d]),C=(0,i.useCallback)((async e=>(await c(e),y&&parseFloat(n)?t({amount:u.utils.decimalize(n,y),mintAddress:e}):t({amount:BigInt(0),mintAddress:e}))),[t,y,n]);(0,i.useEffect)((()=>{v()}),[v]);const{symbol:T,amount:S,address:A}=s||{},k=d===A;return(0,l.jsxs)(r.Row,{gutter:[4,4],children:[(0,l.jsx)(me,{placeholder:`Amount of ${j||"TOKEN"}`,value:n,onValue:b,prefix:(0,l.jsx)(ye,{mintAddresses:e,activeMintAddress:d,onSelect:C}),size:"large",suffix:(0,l.jsx)(r.Button,{type:"text",style:{marginRight:-7},onClick:()=>b(w),children:"MAX"}),max:w}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Row,{gutter:[4,4],children:[(0,l.jsx)(r.Col,{span:24,flex:"auto",children:k&&S?(0,l.jsxs)(r.Space,{size:4,children:[(0,l.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"Recommend:"}),(0,l.jsx)(r.Typography.Text,{type:"danger",style:{fontSize:12,cursor:"pointer"},onClick:()=>b((null===S||void 0===S?void 0:S.toString())||"0"),children:R(S).format("0,0.[00000]a")}),(0,l.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:T||"TOKEN"})]}):null}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Typography.Text,{type:"secondary",className:"caption",children:["Available: ",R(w).format("0,0.[0000]")," ",j||"TOKEN"]})})]})})]})},fe=e=>window.notify({type:"error",description:e.message}),je={calculateAmount:(e,t,s)=>{if(!e||!t||!s)return 0;const{price:n}=s,{decimals:o,price:r}=t;return Number(u.utils.undecimalize(e,o))*r/n}},{sol:{taxmanAddress:we}}=Y,{fee:{exoticFee:ve,exoticTax:be}}=Y,Ce=()=>{const[e,t]=(0,i.useState)(!1),[s,a]=(0,i.useState)(BigInt(0)),[c,p]=(0,i.useState)(""),[h,m]=(0,i.useState)(BigInt(0)),[x,y]=(0,i.useState)(""),[g,f]=(0,i.useState)(new Map),[j,w]=(0,i.useState)(),[v,b]=(0,i.useState)(!1),{accounts:T}=(0,o.useAccount)(),S=(0,n.useSelector)((e=>e.lpts)),{wallet:{address:A}}=(0,o.useWallet)(),{pools:k}=(0,o.usePool)(),{tokenProvider:P}=(0,o.useMint)(),R=(0,i.useMemo)((()=>Object.keys(S).map((e=>{var t;const{pool:s}=S[e];return null===k||void 0===k||null===(t=k[s])||void 0===t?void 0:t.mint_lpt}))),[k,S]),B=()=>{const e=[];for(const t of Object.keys(T)){const{mint:s}=T[t];R.includes(s)||e.push(s)}return e},L=(0,i.useMemo)((()=>{const e=[];return c&&e.push(c),x&&e.push(x),e}),[c,x]),z=s&&h&&u.account.isAddress(c)&&u.account.isAddress(x),D=`${c}${x}`,M=`${x}${c}`,E=g.has(D)||g.has(M),_=(0,i.useMemo)((()=>{if(!j)return;const e=j.get(c),t=j.get(x);if(!e||!t)return;const{address:n,symbol:o}=e,{address:r,symbol:i}=t;let a=0,l="",d="";return v?(a=je.calculateAmount(s,e,t),l=i,d=r):(a=je.calculateAmount(h,t,e),l=o,d=n),{symbol:l,amount:a,address:d}}),[v,c,x,j,s,h]),N=(0,i.useCallback)((()=>{for(let e in k){const t=k[e],{mint_a:s,mint_b:n}=t,o=`${s}${n}`;g.set(o,e)}f(g)}),[g,k]);(0,i.useEffect)((()=>{N()}),[N]);const F=(0,i.useCallback)((async e=>{let t=e.map((async e=>{var t;const s={},n=await P.findByAddress(e),o=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId;let r=0;return o&&(r=(await C(o)).price),n&&(s.symbol=n.symbol,s.decimals=n.decimals,s.address=n.address,s.price=r),s}));const s=await Promise.all(t),n=new Map;return s.forEach((e=>{n.set(e.address,e)})),n}),[P]);return(0,i.useEffect)((()=>{L&&(async()=>{const e=await F(L);w(e)})()}),[L,F]),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(r.Button,{type:"primary",size:"small",icon:(0,l.jsx)(d,{name:"add-outline"}),onClick:()=>t(!e)}),(0,l.jsx)(r.Modal,{visible:e,onCancel:()=>{t(!e),p(""),y("")},title:(0,l.jsx)(r.Typography.Title,{level:4,children:"New Pool"}),footer:(0,l.jsx)(r.Button,{type:"primary",size:"large",onClick:async()=>{const{swap:e,splt:n,wallet:o}=window.sentre,r=[c,x],i=await Promise.all(r.map((e=>n.deriveAssociatedAddress(A,e))));if(o)try{const{txId:n}=await e.initializePool(s,h,ve,be,A,i[0],i[1],we,o);return t(!1),((e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open(I(t),"_blank")}))("Create a new pool",n)}catch(a){return fe(a)}},disabled:!z,block:!0,children:"Supply"}),destroyOnClose:!0,centered:!0,children:(0,l.jsxs)(r.Row,{gutter:[16,12],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Typography.Text,{type:"secondary",children:"This is your first time adding liquidity. It is the rate you add that sets the price for that LP token pair. If you feel satisfied with the rate please press the Supply button."})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Typography.Text,{type:"secondary",children:[(0,l.jsx)("strong",{className:"content",children:"Liquidity provider incentive."})," ","Liquidity providers earn a 0.25% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(ge,{mintAddresses:B(),onChange:({amount:e,mintAddress:t})=>{a(e),p(t),b(!0)},suggestInfo:_})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(ge,{mintAddresses:B(),onChange:async({amount:e,mintAddress:t})=>{m(e),y(t),b(!1)},suggestInfo:_})}),E&&(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Typography.Text,{className:"caption",type:"danger",children:"The pool you want to create with selected mints already exists. We hightly recomment to deposit your liquidity to the pool instead."})})]})})]})},Te=()=>{const e=(0,n.useDispatch)(),{selectedPoolAddress:t}=(0,n.useSelector)((e=>e.main)),{pools:s}=(0,o.usePool)(),a=new URLSearchParams((0,c.useLocation)().search).get("poolAddress")||"",p=Y.sol.senOwner,h=Object.keys(s).filter((e=>{const t=null===s||void 0===s?void 0:s[e],{owner:n}=t;return p.includes(n)})),m=(0,i.useCallback)((t=>{e(re(t)),e(ae(!1))}),[e]),x=(0,i.useCallback)((e=>(0,l.jsx)(r.Button,{type:"text",onClick:()=>m(e),icon:(0,l.jsx)(d,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[m]),y=(0,i.useCallback)((t=>{const s=u.account.isAddress(a)?a:t;return e(re(s))}),[e,a]);return(0,i.useEffect)((()=>{h.length&&!t&&y(h[0])}),[h,y,t]),(0,l.jsx)(r.Row,{gutter:[16,16],children:h.map(((e,s)=>(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(se,{poolAddress:e,action:x(e),onClick:()=>m(e),selected:t===e})},e+s)))})},Se=()=>{const e=(0,n.useDispatch)(),t=(0,n.useSelector)((e=>e.lpts)),{selectedPoolAddress:s}=(0,n.useSelector)((e=>e.main)),{pools:a}=(0,o.usePool)(),c=(0,i.useMemo)((()=>Object.keys(t).filter((e=>{const{pool:s,amount:n}=t[e];return n!==BigInt(0)?null===a||void 0===a?void 0:a[s]:null}))),[a,t]),u=(0,i.useCallback)((t=>{e(re(t)),e(ae(!1))}),[e]),h=(0,i.useCallback)((e=>(0,l.jsx)(r.Button,{type:"text",onClick:()=>u(e),icon:(0,l.jsx)(d,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[u]);return(0,l.jsx)(r.Row,{gutter:[12,12],children:c.map(((e,n)=>{const{pool:o}=t[e];return(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(p.ZP,{height:78,overflow:!0,children:(0,l.jsx)(ce,{data:t[e],action:h(o),onClick:()=>u(o),selected:s===o})})},e+n)}))})},Ae=()=>(0,l.jsxs)(r.Tabs,{defaultActiveKey:"sentre-pools",tabBarExtraContent:(0,l.jsx)(Ce,{}),style:{maxHeight:"calc(100vh - 112px)",padding:"16px 24px"},className:"scrollbar",children:[(0,l.jsx)(r.Tabs.TabPane,{tab:"Sentre Pools",children:(0,l.jsx)(Te,{})},"sentre-pools"),(0,l.jsx)(r.Tabs.TabPane,{tab:"Community Pools",children:(0,l.jsx)(de,{})},"community-pools"),(0,l.jsx)(r.Tabs.TabPane,{tab:"Deposited",children:(0,l.jsx)(Se,{})},"deposited"),(0,l.jsx)(r.Tabs.TabPane,{tab:"Your Pools",children:(0,l.jsx)(pe,{})},"your-pools")]}),ke={address:"",chainId:0,decimals:0,name:"",symbol:"TOKEN",extensions:void 0,logoURI:"",tags:[]},Pe=({poolAddress:e})=>{const{pools:t}=(0,o.usePool)(),{tokenProvider:s}=(0,o.useMint)(),[n,a]=(0,i.useState)(!0),[c,p]=(0,i.useState)(),h=(0,i.useMemo)((()=>(null===t||void 0===t?void 0:t[e])||{}),[e,t]),m=(0,i.useCallback)((async()=>{if(!h)return;const{mint_a:e,mint_b:t}=h,n=[e,t].map((async e=>{let t=await s.findByAddress(e);return t||(t=ke),t})),o=await Promise.all(n);p(o)}),[h,s]);function x(e){if(!e||!h)return 0;const{address:t,decimals:s}=e,n=((e,t)=>{const{mint_a:s,mint_b:n,reserve_a:o,reserve_b:r}=t;return e===s?o:e===n?r:BigInt(0)})(t,h);return Number(u.utils.undecimalize(n,s))}return(0,i.useEffect)((()=>{m()}),[m]),(0,l.jsxs)(r.Space,{children:[(0,l.jsx)($,{mintAddress:null===h||void 0===h?void 0:h.mint_lpt,isReserve:n}),(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(r.Typography.Text,{children:R(function(){if(!c)return 0;const e=c[0],t=c[1],s=x(e),o=x(t);if(!s||!o)return 0;const r=s/o;return n?1/r:r}()).format("0,0.[0000]")}),(0,l.jsx)(te,{mintAddress:null===h||void 0===h?void 0:h.mint_lpt,isReverse:n,separator:"/"})]}),(0,l.jsx)(r.Button,{type:"text",onClick:()=>a(!n),icon:(0,l.jsx)(d,{name:"swap-horizontal-outline"})})]})},Ie=({mintAddress:e,onChange:t,value:s})=>{const[n,a]=(0,i.useState)(""),[d,c]=(0,i.useState)(""),{wallet:{address:p}}=(0,o.useWallet)(),{accounts:h}=(0,o.useAccount)(),m=X(e),x=xe(e),y=m.map((e=>null===e||void 0===e?void 0:e.symbol)).join("/"),g=null===h||void 0===h?void 0:h[d],f=(0,i.useMemo)((()=>{const{amount:e}=g||{};return e&&x&&u.utils.undecimalize(e,x)||"0"}),[g,x]),j=(0,i.useCallback)((async e=>(await a(e),x&&parseFloat(e)?t(u.utils.decimalize(e,x)):t(BigInt(0)))),[x,t]),w=(0,i.useCallback)((()=>{const e=u.utils.undecimalize(s,x||0);Number(e)!==Number(n)&&a(e)}),[x,s]),v=(0,i.useCallback)((async()=>{const{splt:t}=window.sentre;try{const s=await u.account.deriveAssociatedAddress(p,e,t.spltProgramId.toBase58(),t.splataProgramId.toBase58());c(s)}catch(s){}}),[e,p]);(0,i.useEffect)((()=>{v()}),[v]),(0,i.useEffect)((()=>{w()}),[w]);const b=Number(n)>Number(f);return(0,l.jsxs)(r.Row,{gutter:[4,4],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Card,{style:{borderRadius:8},bodyStyle:{padding:8},bordered:!1,children:(0,l.jsx)(me,{placeholder:`Amount of ${y||"TOKEN"}`,value:n,onValue:j,size:"small",bordered:!1,prefix:(0,l.jsxs)(r.Space,{style:{marginLeft:-4,marginRight:7,lineHeight:1},children:[(0,l.jsx)($,{mintAddress:e}),(0,l.jsx)(r.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,l.jsx)(r.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>j(f),children:"MAX"}),max:f})})}),(0,l.jsx)(r.Col,{flex:"auto",children:b&&(0,l.jsx)(r.Typography.Text,{style:{fontSize:12},type:"danger",children:"Not enough balance."})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",R(f).format("0,0.[0000]")," ",y||"TOKEN"]})})]})},Re={icon:"",symbol:"",name:"",address:"",rank:"",price:0,priceChange:0,totalVolume:0,decimals:0},Be=({value:e="0",poolAddress:t})=>{const[s,a]=(0,i.useState)(!1),[c,p]=(0,i.useState)("0"),[h,m]=(0,i.useState)([]),[x,y]=(0,i.useState)(0),g=(0,n.useSelector)((e=>e.lpts)),{getMint:f}=(0,o.useMint)(),{pools:j}=(0,o.usePool)(),w=null===j||void 0===j?void 0:j[t],{reserve_a:v,mint_a:b,reserve_b:T,mint_b:S,mint_lpt:A}=w,k=X(A),P=Object.keys(g).find((e=>g[e].pool===t))||"",{amount:I}=g[P]||{},B=Number(u.utils.undecimalize(I||BigInt(0),9)),L=(0,i.useMemo)((async()=>{const{[b]:{decimals:e}}=await f({address:b});return Number(u.utils.undecimalize(v,e))}),[f,b,v]),z=(0,i.useMemo)((async()=>{const{[S]:{decimals:e}}=await f({address:S});return Number(u.utils.undecimalize(T,e))}),[f,S,T]),D=(0,i.useMemo)((()=>{const e=k.map((e=>e?e.symbol:"UNKN"));return s&&e.reverse(),e.join("/")}),[s,k]),M=e=>{if(!e||!w)return 0;const{address:t,decimals:s}=e,n=((e,t)=>{const{mint_a:s,mint_b:n,reserve_a:o,reserve_b:r}=t;return e===s?o:e===n?r:BigInt(0)})(t,w);return Number(u.utils.undecimalize(n,s))};(0,i.useEffect)((()=>{(async()=>{const e=s?await z/await L:await L/await z;y(e)})()}),[s,L,z]),(0,i.useEffect)((()=>{(async()=>{const{[A]:{supply:e,decimals:t}}=await f({address:A});p(u.utils.undecimalize(e,t))})()}),[A,f]);const E=(0,i.useCallback)((async()=>{if(!k)return;const e=k.map((async e=>{var t;const s=null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.coingeckoId;if(!s)return Re;return{...await C(s),decimals:e.decimals,address:e.address}})),t=await Promise.all(e);m(t)}),[k]);return(0,i.useEffect)((()=>{E()}),[E]),(0,l.jsx)(r.Card,{bordered:!1,children:(0,l.jsxs)(r.Row,{gutter:[12,12],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Row,{gutter:[12,12],children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsx)(r.Typography.Text,{type:"secondary",children:"In - Pool Price"})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(r.Button,{type:"text",style:{width:"auto",height:"auto"},icon:(0,l.jsx)(d,{name:"swap-horizontal-outline"}),onClick:()=>a(!s)}),(0,l.jsx)(r.Typography.Text,{children:R(x).format("0,0.[0000]")}),(0,l.jsx)(r.Typography.Text,{children:D})]})})]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Row,{gutter:[12,12],children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsx)(r.Typography.Text,{type:"secondary",children:"Pool Share Composition"})}),(0,l.jsx)(r.Col,{children:(0,l.jsx)(r.Space,{size:4,children:h.map(((e,t)=>{const s=M(e);return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(r.Typography.Text,{children:[R(s).format("0,0.[00]a"),e.symbol]}),h.length>t+1&&(0,l.jsx)(r.Typography.Text,{children:"+"})]},s+t)}))})})]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Row,{gutter:[12,12],children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsx)(r.Typography.Text,{type:"secondary",children:"Your LPT"})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Typography.Text,{children:[R(B).format("0,0.[0000]"),"LPT"]})})]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Row,{gutter:[8,8],children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsx)(r.Typography.Text,{type:"secondary",children:"Total LPT"})}),(0,l.jsx)(r.Col,{children:(0,l.jsx)(r.Typography.Text,{children:R(c).format("0,0.[0000]")})})]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Row,{gutter:[12,12],children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsx)(r.Typography.Text,{type:"secondary",children:"You will reveice"})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Space,{size:4,children:[(0,l.jsx)(r.Typography.Title,{level:5,children:R(e).format("0,0.[0000]")}),(0,l.jsx)(r.Typography.Title,{level:5,children:"LPT"})]})})]})})]})})},Le=({poolAddress:e,onClose:t=(()=>{})})=>{const[s,n]=(0,i.useState)(!1),[a,d]=(0,i.useState)(""),[c,p]=(0,i.useState)([BigInt(0),BigInt(0)]),[h,m]=(0,i.useState)("all"),[x,y]=(0,i.useState)(!0),{pools:g}=(0,o.usePool)(),{wallet:{address:f}}=(0,o.useWallet)(),{getMint:j}=(0,o.useMint)(),{accounts:w}=(0,o.useAccount)(),{mint_a:v,mint_b:b,reserve_a:C,reserve_b:T,mint_lpt:S,fee_ratio:A,tax_ratio:k}=g[e],P=[v,b],R=xe(v),B=xe(b),L=(0,i.useMemo)((()=>[R,B]),[R,B]),z=(0,i.useMemo)((()=>Number(u.utils.undecimalize(C,R))/Number(u.utils.undecimalize(T,B))),[R,B,C,T]),D=(0,i.useCallback)(((e,t)=>{if(!L)return BigInt(0);const s=0===t?L[1]:L[0],n=Number(u.utils.undecimalize(e,L[t]));let o=n*z;return 0===t&&(o=n/z),u.utils.decimalize(o,s)}),[L,z]),M=(0,i.useCallback)((async()=>{if(!u.account.isAddress(f))return d("");try{const{[S]:{supply:e}}=await j({address:S}),{lpt:t}=u.Swap.oracle.sided_deposit(c[0],c[1],C,T,e,A,k);return d(u.utils.undecimalize(t,9))}catch(e){window.notify({type:"error",description:e.message})}}),[c,A,j,S,C,T,k,f]);(0,i.useEffect)((()=>{M()}),[M]),(0,i.useEffect)((()=>{p([BigInt(0),BigInt(0)])}),[h]);const E=(0,i.useCallback)((async()=>{const{splt:e}=window.sentre,t=await e.deriveAssociatedAddress(f,v),s=w[t],n=await e.deriveAssociatedAddress(f,b),o=w[n];if(!s||!o)return y(!0);const r=c[0]>s.amount||c[1]>o.amount;y(r)}),[w,c,v,b,f]);return(0,i.useEffect)((()=>{E()}),[E]),(0,l.jsxs)(r.Row,{gutter:[16,16],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Radio.Group,{onChange:e=>m(e.target.value),value:h,children:[(0,l.jsx)(r.Radio,{value:"all",children:(0,l.jsxs)(r.Space,{size:4,children:[(0,l.jsx)(te,{mintAddress:S,separator:"+"}),(0,l.jsx)(r.Tag,{className:"deposit-tag",children:"0 Fee"})]})}),P.map(((e,t)=>(0,l.jsx)(r.Radio,{value:e,children:(0,l.jsx)(te,{mintAddress:e})},e+t)))]})}),P.map(((e,t)=>(e===h||"all"===h)&&(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(Ie,{mintAddress:e,value:c[t],onChange:t=>((e,t)=>{if(!u.account.isAddress(e)||!t)return p([BigInt(0),BigInt(0)]);const s=P.findIndex((t=>t===e));if(-1===s)return;let n=[...c];"all"===h&&(n[0]=n[1]=D(t,s)),n[s]=t,p(n)})(e,t)})},e+t))),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(Be,{value:a,poolAddress:e})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Button,{type:"primary",onClick:async()=>{n(!0);const{splt:s,swap:o,wallet:r}=window.sentre,[i,a]=await Promise.all(P.map((e=>s.deriveAssociatedAddress(f,e))));if(r)try{const{txId:s}=await o.addSidedLiquidity(c[0],c[1],e,i,a,r);return t(),window.notify({type:"success",description:"Deposit liquidity successfully. Click to view details.",onClick:()=>window.open(I(s),"_blank")})}catch(l){return window.notify({type:"error",description:l.message})}finally{n(!1)}},disabled:!Number(a)||x,block:!0,loading:s,children:"Deposit"})})]})},ze=({poolAddress:e,onClose:t=(()=>{})})=>{const{pools:s}=(0,o.usePool)(),{fee_ratio:n,tax_ratio:i}=s[e]||{},a=n||BigInt(0),d=i||BigInt(0),c=u.utils.undecimalize(a+d,7);return(0,l.jsxs)(r.Row,{gutter:[16,16],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Typography.Title,{level:5,children:"Deposit Liquidity"})}),(0,l.jsxs)(r.Col,{span:24,children:[(0,l.jsxs)(r.Typography.Paragraph,{type:"secondary",children:[(0,l.jsx)("strong",{children:"Liquidity provider incentive."})," Liquidity providers earn a ",c,"%% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]}),(0,l.jsxs)(r.Typography.Paragraph,{type:"secondary",children:[(0,l.jsx)("strong",{children:"Asymmetric Deposit."})," Instead of depositing amounts of tokens proportionally, Asymmetric Deposit allows you to deposit even one side of token. The pool will automatically re-balance itself."]})]}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(Le,{poolAddress:e,onClose:t})})]})},De=({lptAddress:e,onChange:t})=>{const[s,a]=(0,i.useState)(""),d=(0,n.useSelector)((e=>e.lpts)),{pools:c}=(0,o.usePool)(),{amount:p,pool:h}=(null===d||void 0===d?void 0:d[e])||{},{mint_lpt:m}=(null===c||void 0===c?void 0:c[h])||{},x=(0,i.useMemo)((()=>p&&u.utils.undecimalize(p,9)||"0"),[p]),y=(0,i.useCallback)((async e=>(await a(e),parseFloat(e)?t(u.utils.decimalize(e,9)):t(BigInt(0)))),[t]);return(0,l.jsxs)(r.Row,{gutter:[4,4],justify:"end",children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Card,{bodyStyle:{padding:8},bordered:!1,children:(0,l.jsx)(me,{placeholder:"Amount of LPT",value:s,onValue:y,size:"small",bordered:!1,prefix:(0,l.jsxs)(r.Space,{style:{marginLeft:-7,marginRight:7,fontSize:12,lineHeight:1},children:[(0,l.jsx)($,{mintAddress:m,size:24}),(0,l.jsx)(r.Typography.Text,{children:(0,l.jsx)(ee,{mintAddress:m})}),(0,l.jsx)(r.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,l.jsx)(r.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>y(x),children:"MAX"}),max:x})})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",R(x).format("0,0.[0000]")," LPT"]})})]})},Me=({mintAddresses:e,amounts:t})=>(0,l.jsx)(r.Card,{bordered:!1,children:(0,l.jsxs)(r.Row,{gutter:[16,16],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Typography.Text,{children:"You will receive"})}),e.map(((e,s)=>(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Row,{gutter:[8,8],justify:"space-between",children:[(0,l.jsx)(r.Col,{children:(0,l.jsx)($,{mintAddress:e,size:32})}),(0,l.jsx)(r.Col,{children:(0,l.jsx)(r.Typography.Title,{level:5,style:{margin:0},children:R(t[s]||0).format("0,0.[0000]")})})]})},s)))]})}),Ee=({poolAddress:e,onClose:t=(()=>{})})=>{var s;const[a,d]=(0,i.useState)(BigInt(0)),[c,p]=(0,i.useState)(),[h,m]=(0,i.useState)([]),[x,y]=(0,i.useState)([0,0]),[g,f]=(0,i.useState)(!1),j=(0,n.useSelector)((e=>e.lpts)),w=Object.keys(j).find((t=>j[t].pool===e))||"",v=null===j||void 0===j||null===(s=j[w])||void 0===s?void 0:s.pool,{wallet:{address:b}}=(0,o.useWallet)(),{pools:C}=(0,o.usePool)(),{getMint:T}=(0,o.useMint)(),{mint_a:S,mint_b:A,mint_lpt:k,reserve_a:P,reserve_b:R}=(null===C||void 0===C?void 0:C[v])||{},B=[S,A],L=(0,i.useCallback)((async()=>{try{const{[k]:{supply:e}}=await T({address:k});p(e)}catch(e){}try{const{[S]:{decimals:e}}=await T({address:S}),{[A]:{decimals:t}}=await T({address:A});y([e,t])}catch(e){}}),[S,A,k,T]);return(0,i.useEffect)((()=>{if(c){const{deltaA:e,deltaB:t}=u.Swap.oracle.withdraw(a,c,P,R),s=[e,t].map(((e,t)=>u.utils.undecimalize(e,x[t])));m(s)}else m([])}),[P,R,a,c,x]),(0,i.useEffect)((()=>{L()}),[L]),(0,l.jsxs)(r.Row,{gutter:[16,16],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Typography.Title,{level:5,children:"Withdraw Liquidity"})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(De,{lptAddress:w,onChange:d})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(Me,{mintAddresses:B,amounts:h})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Button,{type:"primary",onClick:async()=>{if(!a)return;f(!0);const{swap:s,wallet:n,splt:o}=window.sentre,r=await Promise.all(B.map((e=>o.deriveAssociatedAddress(b,e))));if(n)try{const{txId:o}=await s.removeLiquidity(a,e,r[0],r[1],n);return t(),window.notify({type:"success",description:"Withdraw liquidity successfully. Click to view details.",onClick:()=>window.open(I(o),"_blank")})}catch(i){return window.notify({type:"error",description:i.message})}finally{f(!1)}},disabled:!a,block:!0,loading:g,children:"Withdraw"})})]})},_e=({poolAddress:e,lpt:t})=>{const[s,n]=(0,i.useState)(!1),[o,a]=(0,i.useState)(!1);return(0,l.jsxs)(r.Row,{gutter:[12,12],children:[(0,l.jsx)(r.Col,{span:12,children:(0,l.jsx)(r.Button,{onClick:()=>a(!0),icon:(0,l.jsx)(d,{name:"log-out-outline"}),disabled:!t,block:!0,children:"Withdraw"})}),(0,l.jsx)(r.Col,{span:12,children:(0,l.jsx)(r.Button,{onClick:()=>n(!0),type:"primary",icon:(0,l.jsx)(d,{name:"log-in-outline"}),block:!0,children:"Deposit"})}),(0,l.jsx)(r.Modal,{visible:s,onCancel:()=>n(!1),closeIcon:(0,l.jsx)(d,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,l.jsx)(ze,{poolAddress:e,onClose:()=>n(!1)})}),(0,l.jsx)(r.Modal,{visible:o,onCancel:()=>a(!1),closeIcon:(0,l.jsx)(d,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,l.jsx)(Ee,{poolAddress:e,onClose:()=>a(!1)})})]})},Ne={icon:"",symbol:"",name:"",address:"",rank:"",price:0,priceChange:0,totalVolume:0,decimals:0},Fe=({label:e="label",title:t="",subTitle:s=null})=>(0,l.jsxs)(r.Space,{direction:"vertical",size:4,children:[(0,l.jsx)(r.Typography.Text,{className:"caption",type:"secondary",children:e}),(0,l.jsx)("span",{children:t}),s&&(0,l.jsx)(r.Typography.Text,{type:"secondary",children:s})]}),Oe=({value:e=0,sub:t="",format:s=""})=>(0,l.jsxs)(r.Space,{size:4,align:"baseline",children:[(0,l.jsx)(r.Typography.Title,{level:4,children:R(e).format(s)}),t&&(0,l.jsx)(r.Typography.Text,{className:"caption",type:"secondary",children:t})]}),qe=({poolAddress:e})=>{const[t,s]=(0,i.useState)([]),a=(0,n.useSelector)((t=>{var s,n,o;return null===(s=t.stat)||void 0===s||null===(n=s[e])||void 0===n||null===(o=n.details)||void 0===o?void 0:o.roi})),[d,c]=(0,i.useState)(0),p=(0,n.useSelector)((e=>e.lpts)),{getMint:h}=(0,o.useMint)(),{pools:m}=(0,o.usePool)(),x=(null===m||void 0===m?void 0:m[e])||{},{mint_lpt:y}=x,g=X(y),f=Object.keys(p).find((t=>p[t].pool===e))||"",{amount:j}=p[f]||{},w=Number(u.utils.undecimalize(j||BigInt(0),9)),v=(0,i.useCallback)((e=>a&&e?Math.pow(a/100+1,e)-1:0),[a]),b=(0,i.useCallback)((async()=>{if(!u.account.isAddress(y))return 0;const{[y]:{decimals:e,supply:t}}=await h({address:y});c(Number(u.utils.undecimalize(t,e)))}),[h,y]);(0,i.useEffect)((()=>{b()}),[b]);const T=e=>{if(!e||!x)return 0;const{address:t,decimals:s}=e,n=((e,t)=>{const{mint_a:s,mint_b:n,reserve_a:o,reserve_b:r}=t;return e===s?o:e===n?r:BigInt(0)})(t,x);return Number(u.utils.undecimalize(n,s))},S=(0,i.useCallback)((async()=>{if(!g)return;const e=g.map((async e=>{var t;const s=null===e||void 0===e||null===(t=e.extensions)||void 0===t?void 0:t.coingeckoId;if(!s)return Ne;return{...await C(s),decimals:e.decimals,address:e.address}})),t=await Promise.all(e);s(t)}),[g]);return(0,i.useEffect)((()=>{S()}),[S]),(0,l.jsx)(r.Card,{bordered:!1,children:(0,l.jsxs)(r.Row,{gutter:[24,24],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Typography.Title,{level:4,children:"Liquidity Position"})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Row,{gutter:[20,20],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(Fe,{label:"APY",title:(0,l.jsx)(Oe,{value:v(365),format:"0,0.[00]%"})})}),(0,l.jsx)(r.Col,{xs:7,sm:12,children:(0,l.jsx)(Fe,{label:"Your LPT",title:(0,l.jsx)(Oe,{value:w,sub:"LPT",format:"0,0.[0000]a"})})}),(0,l.jsx)(r.Col,{xs:17,sm:12,children:(0,l.jsx)(Fe,{label:"Pool Share Composition",title:(0,l.jsx)(r.Space,{size:4,align:"baseline",children:t.map(((e,s)=>{const n=T(e);return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(Oe,{value:n,sub:e.symbol,format:"0,0.[00]a"}),t.length>s+1&&(0,l.jsx)(r.Typography.Title,{level:5,children:"+"})]},n+s)}))})})}),(0,l.jsx)(r.Col,{xs:7,sm:12,children:(0,l.jsx)(Fe,{label:"My Portion",title:(0,l.jsx)(Oe,{value:w/d,format:"0,0.[00]%"}),subTitle:R(d).format("0,0.[0000]a")})}),(0,l.jsx)(r.Col,{xs:17,sm:12,children:(0,l.jsx)(Fe,{label:"In - Pool Price",title:(0,l.jsx)(Pe,{poolAddress:e})})})]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(_e,{lpt:w,poolAddress:e})})]})})};let Ye;const Ue=(0,i.forwardRef)((({max:e,onChange:t,...s},n)=>{var o;const[a,c]=(0,i.useState)(""),[u,p]=(0,i.useState)(null),h=(0,i.useRef)(n),m=(0,i.useCallback)((s=>{const n=e=>{Ye&&(clearTimeout(Ye),Ye=void 0),c(e),Ye=setTimeout((()=>c("")),500)};return/^\d*(\.\d*)?$/.test(s)?e&&parseFloat(s)>parseFloat(e)?n("Not enough balance"):t(s):n("Invalid character")}),[e,t]);return null===h||void 0===h||null===(o=h.current)||void 0===o||o.setSelectionRange(u,u),(0,l.jsx)(r.Tooltip,{title:(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(d,{name:"warning"}),a]}),visible:!!a,children:(0,l.jsx)(r.Input,{...s,onChange:e=>{p(e.target.selectionStart),m(e.target.value||"")},ref:h})})})),Ve=({title:e,label:t,ratio:s,currentRatio:n="0",onChange:o=(()=>{})})=>(0,l.jsxs)(r.Row,{gutter:[4,4],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Typography.Text,{type:"secondary",children:e})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Card,{bodyStyle:{padding:4},bordered:!1,children:(0,l.jsx)(Ue,{placeholder:0,value:s,onChange:o,bordered:!1})})}),(0,l.jsx)(r.Col,{span:24,style:{fontSize:12},children:(0,l.jsxs)(r.Space,{size:4,children:[(0,l.jsxs)(r.Typography.Text,{type:"secondary",children:[t,":"]}),(0,l.jsxs)(r.Typography.Text,{children:[n,"%"]})]})})]}),We=({address:e})=>{const{pools:t}=(0,o.usePool)(),{wallet:{address:s}}=(0,o.useWallet)(),[n,a]=(0,i.useState)(""),[c,p]=(0,i.useState)(""),[h,m]=(0,i.useState)(!1),x=t[e],{fee_ratio:y,tax_ratio:g}=x||{},f=(0,i.useMemo)((()=>y?u.utils.undecimalize(y,7):"0"),[y]),j=(0,i.useMemo)((()=>g?u.utils.undecimalize(g,7):"0"),[g]);return x&&s===(null===x||void 0===x?void 0:x.owner)?(0,l.jsxs)(r.Row,{gutter:[16,24],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Row,{gutter:[4,4],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(Ve,{title:"Fee (%)",label:"Current fee",ratio:n,currentRatio:f,onChange:a})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(Ve,{title:"Tax (%)",label:"Current tax",ratio:c,currentRatio:j,onChange:p})})]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Button,{onClick:async()=>{m(!0);const t=u.utils.decimalize(n||f,7),s=u.utils.decimalize(c||j,7),{swap:o,wallet:r}=window.sentre;if(!r)return;const{txId:i}=await o.updateFee(t,s,e,r);return m(!1),i?(a(""),p(""),window.notify({type:"success",description:"Update fee successfully. Click to view details",onClick:()=>window.open(I(i),"_blank")})):window.notify({type:"error",description:"Update fee make failure."})},icon:(0,l.jsx)(d,{name:"cash-outline"}),block:!0,loading:h,disabled:!c&&!n,children:"Update Fee"})})]}):null};var He;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(He||(He={}));const Ze=({poolStatus:e,description:t})=>{const s=e===He.Active;return(0,l.jsxs)(r.Row,{gutter:[16,16],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Space,{size:0,children:[(0,l.jsx)(r.Badge,{status:s?"success":"error"}),(0,l.jsxs)(r.Typography.Text,{children:["Current status: ",s?"Active":"Frozen"]})]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Card,{bordered:!1,bodyStyle:{padding:16},children:(0,l.jsxs)(r.Space,{size:4,align:"start",children:[(0,l.jsx)(d,{name:"information-circle-outline"}),(0,l.jsx)(r.Space,{direction:"vertical",size:0,children:(0,l.jsx)(r.Typography.Text,{children:t})})]})})})]})},Ge=({address:e})=>{const{pools:t}=(0,o.usePool)(),{wallet:{address:s}}=(0,o.useWallet)(),[n,a]=(0,i.useState)(!1),c=t[e],u=(0,i.useMemo)((()=>{const e=null===c||void 0===c?void 0:c.state;return e===He.Active?(0,l.jsx)(Ze,{poolStatus:e,description:"Freezing a pool will prevent all actions until the pool has been thawed."}):e===He.Frozen?(0,l.jsx)(Ze,{poolStatus:e,description:"Thaw a pool will active all actions"}):"Pool is closed"}),[null===c||void 0===c?void 0:c.state]);return c&&s===(null===c||void 0===c?void 0:c.owner)?(0,l.jsxs)(r.Row,{gutter:[24,24],children:[(0,l.jsx)(r.Col,{span:24,children:u}),(0,l.jsx)(r.Col,{span:24,children:(null===c||void 0===c?void 0:c.state)===He.Active?(0,l.jsx)(r.Button,{style:{background:"#40A9FF",color:"#fff"},onClick:async()=>{a(!0);const{swap:t,wallet:s}=window.sentre;if(!s)return;const{txId:n}=await t.freezePool(e,s);return a(!1),n?window.notify({type:"success",description:"Freeze the pool successfully. Click to view details",onClick:()=>window.open(I(n),"_blank")}):window.notify({type:"error",description:"Freeze the pool make failure."})},icon:(0,l.jsx)(d,{name:"snow-outline"}),block:!0,loading:n,children:"Freeze Pool"}):(0,l.jsx)(r.Button,{type:"primary",onClick:async()=>{a(!0);const{swap:t,wallet:s}=window.sentre;if(!s)return;const{txId:n}=await t.thawPool(e,s);return a(!1),n?window.notify({type:"success",description:"Thaw the pool successfully. Click to view details",onClick:()=>window.open(I(n),"_blank")}):window.notify({type:"error",description:"Thaw the pool make failure."})},icon:(0,l.jsx)(d,{name:"sunny-outline"}),block:!0,loading:n,children:"Thaw Pool"})})]}):null},Je=({address:e})=>{const{pools:t}=(0,o.usePool)(),{wallet:{address:s}}=(0,o.useWallet)(),[n,a]=(0,i.useState)(""),[c,p]=(0,i.useState)(!1),h=t[e];return h&&s===(null===h||void 0===h?void 0:h.owner)?(0,l.jsxs)(r.Row,{gutter:[16,16],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Space,{align:"start",children:[(0,l.jsx)(d,{name:"information-circle-outline"}),(0,l.jsx)(r.Typography.Text,{children:"Your current account will lose the pool control when you transfer ownership."})]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Card,{bodyStyle:{padding:8},bordered:!1,children:(0,l.jsxs)(r.Row,{gutter:[0,0],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Typography.Text,{style:{marginLeft:12,fontSize:12},type:"secondary",children:"Transfer to Owner"})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Input,{placeholder:"E.g. AgTMC...",value:n,onChange:e=>a(e.target.value),bordered:!1})})]})})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(r.Button,{onClick:async()=>{const{swap:t,wallet:s}=window.sentre;if(!s)return;p(!0);const{txId:o}=await t.transferPoolOwnership(e,n,s);return p(!1),o?window.notify({type:"success",description:"Transfer successfully. Click to view details",onClick:()=>window.open(I(o),"_blank")}):window.notify({type:"error",description:"Transfer make failure."})},icon:(0,l.jsx)(d,{name:"airplane-outline"}),disabled:!u.account.isAddress(n),loading:c,block:!0,children:"Transfer"})})]}):null};function Ke({poolAddress:e}){const{wallet:{address:t}}=(0,o.useWallet)(),{pools:s}=(0,o.usePool)(),n=null===s||void 0===s?void 0:s[e];return n&&t===(null===n||void 0===n?void 0:n.owner)?(0,l.jsx)(r.Col,{xs:24,lg:12,children:(0,l.jsx)(r.Card,{style:{minHeight:285},bodyStyle:{padding:0},bordered:!1,children:(0,l.jsxs)(r.Tabs,{style:{padding:24},children:[(0,l.jsx)(r.Tabs.TabPane,{tab:"Freeze/Thaw",children:(0,l.jsx)(Ge,{address:e})},"freeze-thaw"),(0,l.jsx)(r.Tabs.TabPane,{tab:"Fee",children:(0,l.jsx)(We,{address:e})},"fee"),(0,l.jsx)(r.Tabs.TabPane,{tab:"Transfer Owner",children:(0,l.jsx)(Je,{address:e})},"transfer-owner")]})})}):null}var Qe=s(4550),Xe=s.n(Qe),$e=s(76907),et=s.n($e),tt=s(21111),st=s.n(tt);const nt=({chartData:e=[],labels:t=[],type:s="line",configs:n,disableAxe:o=!1,chartId:r="sen_chart"})=>{const{backgroundColor:a}=n||{},[d,c]=(0,i.useState)(!1),u=(0,i.useCallback)(((e,t,s)=>({labels:t,datasets:[{...n,data:e,backgroundColor:s}]})),[n]),p=(0,i.useRef)(null),h=(0,i.useCallback)((()=>{var e,t;if(!p||!a)return"#dadada";const n=null===p||void 0===p||null===(e=p.current)||void 0===e||null===(t=e.canvas)||void 0===t?void 0:t.getContext("2d"),o=null===n||void 0===n?void 0:n.createLinearGradient(0,0,0,270);null===o||void 0===o||o.addColorStop(0,a),null===o||void 0===o||o.addColorStop(1,`${a}00`);return"line"===s?o:a}),[a,s]);return(0,i.useEffect)((()=>{var s;const n=p.current,o=null===n||void 0===n||null===(s=n.data.datasets)||void 0===s?void 0:s.find((({data:e})=>e)),r=st()(null===o||void 0===o?void 0:o.data,e);n&&!r&&(n.data=u(e,t,h()),null===n||void 0===n||n.update())}),[e,u,h,t]),(0,l.jsx)("canvas",{id:r,height:"270",ref:e=>{if(!e)return;const t=e.getContext("2d");t&&!d&&(p.current=new(et())(t,{type:s,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o,beginAtZero:!1,maxTicksLimit:8,callback:function(e,t,s){return R(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,t)=>{const s=document.getElementById(r);s&&(s.style.cursor=t[0]?"pointer":"default")}}}}),c(!0))}})};var ot=s(20418);const rt=1e3;let it;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(it||(it={}));class at{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new at,s=e*rt;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new at,s=Xe()(e,it.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let n=at.fromYmd(e);const o=at.fromYmd(t);for(;n.ymd()<=o.ymd();)s.push(n.ymd()),n=n.addDay();return s}format(e){const t=new Date(this.milliSeconds);return Xe()(t).format(e)}subtractDay(e=1){const t=Xe()(this.milliSeconds).subtract(e,"days").valueOf();return at.fromSeconds(t/rt)}addDay(e=1){const t=Xe()(this.milliSeconds).add(e,"days").valueOf();return at.fromSeconds(t/rt)}seconds(){return(this.milliSeconds-this.milliSeconds%rt)/rt}ymd(){return Number(this.format(it.YMD))}static today(e=it.YMD){return Xe()().format(e)}}class lt{constructor(){this.programId="",this.time=0,this.address="",this.mint="",this.actionType="",this.amountIn=BigInt(0),this.amountOut=BigInt(0),this.totalTrans=0}}class dt{parserDailyReport(e){let t=new Array;for(const s of e)t=t.concat(this.parseDailyReport(s));return this.mergeDailyReport(t)}parseDailyReport(e){const t=new Array,{programId:s,time:n,actionType:o,actionTransfers:r}=e;for(const i of r){const{source:e,destination:r,amount:a}=i,l=new lt;if(l.programId=s,l.time=n,l.actionType=o,e){const{mint:s,address:n}=e;t.push({...l,mint:s,address:n,amountOut:BigInt(a)})}if(r){const{mint:e,address:s}=r;t.push({...l,mint:e,address:s,amountIn:BigInt(a)})}}return t}mergeDailyReport(e){const t=new Map;for(const n of e){const e=`${n.time}^${n.address}^${n.mint}^${n.actionType}`;if(t.has(e)){const s=t.get(e);void 0!==s&&(n.amountIn+=s.amountIn,n.amountOut+=s.amountOut,n.totalTrans+=s.totalTrans)}t.set(e,n)}const s=new Array;return t.forEach((e=>s.push(e))),s}}var ct=s(15454),ut=s.n(ct),pt=s(32642),ht=s(97429).Buffer;class mt{constructor(){this._ipfs=async()=>{try{return window.ipfs||(window.ipfs=await(0,pt.Ue)()),window.ipfs}catch(e){return await k(500),await this._ipfs()}},this.get=async e=>{if(!mt.isCID(e))throw new Error("Invalid CID");const t=await this._ipfs(),s=await t.cat(e);let n="";for await(const o of s)n+=ht.from(o).toString();return JSON.parse(n)},this.set=async e=>{if(!e)throw new Error("Empty data");const t=JSON.stringify(e),s=await this._ipfs(),{path:n}=await s.add(t);return n}}}mt.isCID=e=>{try{return!!e&&pt.bf.multihash(e)}catch(t){return!1}};const xt=mt;class yt{constructor(e){if(this.dbName=void 0,this.driver=void 0,this.ipfs=void 0,this.createInstance=e=>ut().createInstance({driver:this.driver,name:this.dbName,storeName:e}),this.dropInstance=async e=>{const t=this.createInstance(e);return await t.clear(),await ut().dropInstance({name:this.dbName,storeName:e})},this.all=async()=>{let e={};const t=(await this.createInstance("sentre").getItem("appIds")||[]).flat().concat(["sentre"]);for(const s of t){e[s]={};const t=this.createInstance(s);await t.iterate(((t,n)=>{e[s][n]=t}))}return e},this.fetch=async e=>await this.ipfs.get(e),this.backup=async()=>{const e=await this.all();return await this.ipfs.set(e)},this.restore=async e=>{const t=await this.fetch(e);for(const s in t){const e=await this.createInstance(s);for(const n in t[s]){const o=t[s][n];await e.setItem(n,o)}}return t},!u.account.isAddress(e))throw new Error("Invalid address");this.dbName=e,this.driver=[ut().WEBSQL,ut().LOCALSTORAGE],this.ipfs=new xt}}const gt=yt;var ft=s(74370),jt=s(70320);class wt{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class vt{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class bt{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}var Ct=s(71256);const Tt=700;class St{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,t,s=700){s>Tt&&(s=Tt);const n={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let o=0;o<=e.length/200;o++){const t=200*o,n=e.slice(t,t+200);s.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(s);for(const o of n)t=t.concat(o);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:o,lastSignature:r,limit:i}=t;n=Math.floor(n||0),o=Math.floor(o||s);const a=new Ct.PublicKey(e);let l=[],d=!1;for(;!d;){const e=await this.fetchSignatures(a,r,i);if(null===e||void 0===e||!e.length||d)break;for(const t of e){const e=t.blockTime;if(e&&!(e>o)){if(e<n){d=!0;break}r=t.signature,l.push(t.signature)}}if(i&&l.length>=i)break;if((null===e||void 0===e?void 0:e.length)<Tt)break}return await this.fetchConfirmTransaction(l)}}let At;!function(e){e.Transfer="transfer"}(At||(At={}));var kt=s(97429).Buffer;const Pt={key:"code",type:"u8"};let It;!function(e){e.InitPool="INITIALIZE_POOL",e.AddLiquidity="ADD_LIQUIDITY",e.RemoveLiquidity="REMOVE_LIQUIDITY",e.Swap="SWAP",e.Route="SWAP"}(It||(It={}));const Rt={0:It.InitPool,1:It.AddLiquidity,2:It.RemoveLiquidity,3:It.Swap,8:It.Route};class Bt extends class{constructor(){this.parseAction=e=>""}async collect(e,t,s){let{lastSignature:n,limit:o}=t;const r=new St;let i=[],a=n,l=!1,d=200;for(;!l;){const n=await r.fetchTransactions(e,{...t,lastSignature:a,limit:d});for(const e of n){a=e.transaction.signatures[0];const t=this.parseTransLog(e);if(t){if(s){if(!await s(t))continue}if(i.push(t),o&&i.length>=o){l=!0;break}}}if(o&&(d=d*o/(i.length||1)),!n.length)break;if(l)break}return i}parseTransLog(e){var t,s;const{blockTime:n,meta:o,transaction:r}=e;if(!n||!o)return;const{postTokenBalances:i,preTokenBalances:a,postBalances:l,preBalances:d}=o,{signatures:c,message:u}=r,p=(null===(t=o.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],h=u.instructions[0]||[],m=new wt;m.signature=c[0],m.blockTime=n,m.time=at.fromSeconds(n).ymd(),m.programId=h.programId.toString();const x=this.parseAccountInfo(u.accountKeys,i||[],a||[],l,d);return this.isParsedInstruction(h)?(m.programTransfer=this.parseListActionTransfer([h],x),m):(m.actionTransfers=this.parseListActionTransfer(p,x),m.programInfo={programId:h.programId.toString(),data:h.data},m.actionType="",m.actionType=this.parseAction(m),m)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,t){const s=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===At.Transfer){const n=e.info,o=this.parseActionTransfer(n,t);o&&s.push(o)}}return s}parseActionTransfer(e,t){const{source:s,destination:n,amount:o,lamports:r}=e,i=o||r.toString();if(!i||!t.has(s)||!t.has(n))return;const a=new bt;return a.source=t.get(s),a.destination=t.get(n),a.amount=i,a}parseAccountInfo(e,t,s,n,o){const r=new Map;for(const i of t){const{accountIndex:t,mint:s,uiTokenAmount:n}=i,o=new vt;o.address=e[t].pubkey.toString(),o.postBalance=n.amount,o.mint=s,o.decimals=n.decimals,r.set(o.address,o)}for(const i of s){const{accountIndex:t,uiTokenAmount:s}=i,n=e[t].pubkey.toString(),o=r.get(n)||new vt;o.preBalance=s.amount,r.set(o.address,o)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!u.account.isAssociatedAddress(s)){const e=r.get(s)||new vt;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(n[t]||0),e.preBalance=String(o[t]||0),e.decimals=9,r.set(e.address,e)}})),r}}{constructor(...e){super(...e),this.parseAction=e=>{var t;const s=null===(t=e.programInfo)||void 0===t?void 0:t.data,n=(0,ft.base58_to_binary)(s),o=new jt.struct([Pt]).fromBuffer(kt.from(n));return Rt[o.code]||""}}}class Lt{constructor(e){this.poolAddress=void 0,this.poolData=void 0,this.poolTransLogService=new Bt,this.dailyReportService=new dt,this.tokenProvider=new ot.Z,this.getPoolData=async()=>{if(!this.poolData){const e=window.sentre.swap;this.poolData=await e.getPoolData(this.poolAddress)}return this.poolData},this.getUsd=async(e,t)=>{const s=await this.tokenProvider.findByAddress(e);if(!s)return 0;const{decimals:n,extensions:o}=s;try{const e=await C(null===o||void 0===o?void 0:o.coingeckoId);if(null===e||void 0===e||!e.price)return 0;const s=u.utils.undecimalize(t,n);return Number(s)*e.price}catch(r){return 0}},this.fetchTransLog=async(e,t)=>{const s=new gt(this.poolAddress).createInstance("stat");let n=await s.getItem("translogs")||[];n=n.sort(((e,t)=>t.blockTime-e.blockTime));const o=n[0],r=n.at(-1);if(o&&r){const[s,i]=await Promise.all([this.poolTransLogService.collect(this.poolAddress,{secondFrom:o.blockTime,secondTo:t}),this.poolTransLogService.collect(this.poolAddress,{secondFrom:e,secondTo:r.blockTime,lastSignature:r.signature})]);n=n.filter((t=>t.blockTime>e)),n=[...s,...n,...i]}else n=await this.poolTransLogService.collect(this.poolAddress,{secondFrom:e,secondTo:t});return await s.setItem("translogs",n),n},this.getDailyInfo=async()=>{let e=new at;const t=(new at).subtractDay(11),{mint_a:s,mint_b:n,treasury_a:o,treasury_b:r,reserve_a:i,reserve_b:a,fee_ratio:l,tax_ratio:d}=await this.getPoolData(),c=await this.fetchTransLog(t.seconds(),e.seconds()),p=this.dailyReportService.parserDailyReport(c),h={};for(const u of p){const{time:e,address:t}=u;t!==o&&t!==r||(h[e]||(h[e]=[]),h[e].push(u))}const m=await this.getUsd(s,i),x=await this.getUsd(n,a),y={};for(y[e.ymd()]={tvl:m+x,fee:0,volume:0};e.ymd()>t.ymd();){const s=h[e.ymd()]||[],n=y[e.ymd()],o=e.subtractDay(1);!y[o.ymd()]&&o.ymd()>=t.ymd()&&(y[o.ymd()]={tvl:n.tvl,fee:0,volume:0});for(const t of s){const s=await this.getUsd(t.mint,t.amountOut),n=await this.getUsd(t.mint,t.amountIn);if(y[o.ymd()]&&(y[o.ymd()].tvl+=s-n,y[o.ymd()].tvl<0&&(y[o.ymd()].tvl=0)),t.actionType===It.Swap){y[e.ymd()].volume+=n+s;const t=Number(u.utils.undecimalize(l+d,9))*s;y[e.ymd()].fee+=t}}e=e.subtractDay(1)}return y},this.poolAddress=e}}const zt="#40A9FF",Dt=0,Mt=14,Et="TVL",_t="transparent",Nt=()=>{var e;const{selectedPoolAddress:t}=(0,n.useSelector)((e=>e.main)),[s,o]=(0,i.useState)([]),[a,d]=(0,i.useState)(!1),c={borderColor:_t,borderRadius:Dt,pointRadius:Dt,tooltip:Et,pointHitRadius:Mt,pointHoverRadius:Dt,backgroundColor:zt},u=(0,i.useCallback)((async()=>{if(t)try{d(!0);const e=new Lt(t),s=await j.load("getDailyInfo"+t,e.getDailyInfo,{cache:{ttl:3e5}}),n=Object.keys(s).map((e=>({data:s[e].tvl,label:Xe()(e,"YYYYMMDD").format("MM/DD")})));o(n)}catch(e){}finally{d(!1)}}),[t]);return(0,i.useEffect)((()=>{u()}),[u]),(0,l.jsx)(r.Card,{bordered:!1,style:{height:"auto"},children:(0,l.jsx)(r.Spin,{tip:"Loading...",spinning:a,children:(0,l.jsxs)(r.Row,{gutter:[24,24],children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsx)(r.Typography.Title,{level:4,children:"Total Value Locked"})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Typography.Title,{level:2,children:["$",R(null===(e=s.at(-1))||void 0===e?void 0:e.data).format("0,0.[0]a")]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(nt,{chartData:s.map((e=>e.data)),labels:s.map((e=>e.label)),configs:c})})]})})})},Ft="#40A9FF",Ot=0,qt=14,Yt="TVL",Ut="transparent",Vt=()=>{const{selectedPoolAddress:e}=(0,n.useSelector)((e=>e.main)),[t,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(!1),d={borderColor:Ut,borderRadius:Ot,pointRadius:Ot,tooltip:Yt,pointHitRadius:qt,pointHoverRadius:Ot,backgroundColor:Ft},c=(0,i.useCallback)((async()=>{if(e)try{a(!0);const t=new Lt(e),n=await j.load("getDailyInfo"+e,t.getDailyInfo,{cache:{ttl:3e5}}),o=Object.keys(n).map((e=>({data:n[e].volume,label:Xe()(e,"YYYYMMDD").format("MM/DD")})));s(o)}catch(t){}finally{a(!1)}}),[e]);(0,i.useEffect)((()=>{c()}),[c]);const u=(0,i.useMemo)((()=>{var e,s;const n=(null===(e=t.at(-1))||void 0===e?void 0:e.data)||0,o=(null===(s=t.at(-2))||void 0===s?void 0:s.data)||0;return n+(new Date).getHours()*o/24}),[t]);return(0,l.jsx)(r.Card,{bordered:!1,style:{height:384},children:(0,l.jsx)(r.Spin,{tip:"Loading...",spinning:o,children:(0,l.jsxs)(r.Row,{gutter:[24,24],children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsx)(r.Typography.Title,{level:4,children:"24h Volume"})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Typography.Title,{level:2,children:["$",R(u).format("0,0.[0]a")]})}),(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(nt,{type:"bar",chartData:t.map((e=>e.data)),labels:t.map((e=>e.label)),configs:d})})]})})})};var Wt=s(51518),Ht=s.n(Wt);const Zt=({poolAddress:e})=>{const[t,s]=(0,i.useState)(!1),n=(0,c.useHistory)(),{pools:a}=(0,o.usePool)(),{mint_lpt:u}=(null===a||void 0===a?void 0:a[e])||{},p=(0,i.useCallback)((()=>n.push(`/app/sen_farming?mintAddress=${u}`)),[n,u]);return(0,l.jsxs)(r.Row,{gutter:[16,16],children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsxs)(r.Space,{children:[(0,l.jsx)($,{mintAddress:u,size:32}),(0,l.jsx)(te,{mintAddress:u})]})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(r.Popover,{placement:"left",content:(0,l.jsxs)(r.Space,{children:[(0,l.jsxs)(r.Typography.Text,{children:["PoolAddress: ",e]}),(0,l.jsx)(r.Tooltip,{title:"Copied",visible:t,arrowPointAtCenter:!0,children:(0,l.jsx)(Ht(),{text:e,children:(0,l.jsx)(r.Button,{type:"text",size:"small",icon:(0,l.jsx)(d,{name:"copy-outline"}),onClick:async()=>{s(!0),await k(1500),s(!1)}})})})]}),children:(0,l.jsx)(d,{name:"alert-circle-outline"})}),(0,l.jsx)(r.Button,{onClick:p,children:"Go Farming"})]})})]})},Gt=()=>{const{selectedPoolAddress:e}=(0,n.useSelector)((e=>e.main));return(0,l.jsxs)(r.Row,{gutter:[24,24],children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(Zt,{poolAddress:e})}),(0,l.jsx)(r.Col,{xs:24,lg:12,children:(0,l.jsx)(Nt,{})}),(0,l.jsx)(r.Col,{xs:24,lg:12,children:(0,l.jsx)(Vt,{})}),(0,l.jsx)(r.Col,{xs:24,lg:12,children:(0,l.jsx)(qe,{poolAddress:e})}),(0,l.jsx)(Ke,{poolAddress:e})]})},Jt=()=>{const e=(0,n.useDispatch)(),{ui:{width:t}}=(0,o.useUI)();return t>=1200?null:(0,l.jsx)(r.Affix,{style:{position:"fixed",bottom:16,right:16},children:(0,l.jsx)(r.Button,{type:"primary",onClick:()=>e(ae(!0)),icon:(0,l.jsx)(d,{name:"list-outline"}),size:"large",children:"Pools"})})},Kt="lpts",Qt=(0,D.createAsyncThunk)("lpts/getLPTs",(async({accounts:e})=>{const{splt:t,swap:s}=window.sentre,n=e.map((({mint:e})=>e)).map((e=>u.account.fromAddress(e))),o=(await u.utils.wrappedGetMultipleAccountsInfo(t.connection,n)).map((e=>null!==e&&void 0!==e&&e.data?t.parseMintData(e.data):null));if(null===o||void 0===o||!o.length)return{};const r=await Promise.all(o.map((async e=>{try{const{mint_authority:t,freeze_authority:n}=e||{};if(!u.account.isAddress(t)||!u.account.isAddress(n))return;return await s.derivePoolAddress(t,n)}catch(t){return}})));let i={};return e.forEach((({address:e,...t},s)=>{const n=r[s];u.account.isAddress(n)&&(i[e]={...t,pool:n})})),i})),Xt=(0,D.createAsyncThunk)("lpts/getLPT",(async({address:e},{getState:t})=>{if(!u.account.isAddress(e))throw new Error("Invalid account address");const{lpts:{[e]:s}}=t();if(s)return{[e]:s};const{swap:n}=window.sentre;return{[e]:await n.getLPTData(e)}})),$t=(0,D.createAsyncThunk)("lpts/upsetLPT",(async({address:e,data:t},{getState:s})=>{if(!u.account.isAddress(e))throw new Error("Invalid address");if(!t)throw new Error("Data is empty");const{lpts:{[e]:n}}=s(),{pool:o}=n||{};if(u.account.isAddress(o))return{[e]:{...t,pool:o}};const{swap:r}=window.sentre;return{[e]:await r.getLPTData(e)}})),es=(0,D.createAsyncThunk)("lpts/deleteLPT",(async({address:e})=>{if(!u.account.isAddress(e))throw new Error("Invalid address");return{address:e}})),ts=(0,D.createSlice)({name:Kt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Qt.fulfilled,((e,{payload:t})=>t)).addCase(Xt.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase($t.fulfilled,((e,{payload:t})=>{Object.assign(e,t)})).addCase(es.fulfilled,((e,{payload:t})=>{delete e[t.address]}))}}).reducer;let ss=0;const ns=()=>{const e=(0,n.useDispatch)(),{accounts:t}=(0,o.useAccount)(),{wallet:{address:s}}=(0,o.useWallet)(),r=(0,i.useMemo)((()=>Object.keys(t).map((e=>({address:e,...t[e]})))),[t]),a=(0,i.useCallback)((async()=>{try{await e(Qt({accounts:r})).unwrap()}catch(t){await fe(t)}}),[e,r]),d=(0,i.useCallback)((async()=>{if(ss)return console.warn("Already watched");const t=[{memcmp:{bytes:s,offset:32}}];ss=window.sentre.splt.watch(((t,s)=>{if(t)return console.error(t);const{address:n,data:o}=s;return e($t({address:n,data:o}))}),t)}),[e,s]);return(0,i.useEffect)((()=>(a(),d(),()=>{(async()=>{try{await window.sentre.splt.unwatch(ss)}catch(e){}})(),ss=0})),[a,d]),(0,l.jsx)(i.Fragment,{})},os=()=>{const e=(0,n.useDispatch)(),{main:{visible:t}}=(0,n.useSelector)((e=>e)),{ui:{width:s}}=(0,o.useUI)();return(0,l.jsxs)(r.Row,{gutter:[24,24],style:{paddingBottom:12},children:[s>=1200?(0,l.jsx)(r.Col,{lg:8,xl:6,children:(0,l.jsx)(r.Card,{bodyStyle:{padding:0},bordered:!1,children:(0,l.jsx)(Ae,{})})}):(0,l.jsx)(r.Modal,{visible:t,onCancel:()=>e(ae(!1)),closeIcon:(0,l.jsx)(d,{name:"close-outline"}),footer:null,title:(0,l.jsx)(r.Typography.Title,{level:4,children:"Pool Selection"}),bodyStyle:{padding:0},centered:!0,forceRender:!0,children:(0,l.jsx)(Ae,{})}),(0,l.jsx)(r.Col,{xs:24,lg:24,xl:18,children:(0,l.jsx)(Gt,{})}),(0,l.jsx)(Jt,{}),(0,l.jsx)(ns,{})]})},rs=()=>{const e=(0,n.useDispatch)();return(0,i.useEffect)((()=>{e(ie("sentre"))}),[e]),(0,l.jsxs)(r.Row,{gutter:24,align:"middle",className:"header-widget",children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsx)(r.Typography.Text,{style:{color:"#e9e9eb "},children:"Pools list by"})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Select,{defaultValue:"sentre",onChange:t=>{e(ie(t))},className:"header-select",children:[(0,l.jsx)(r.Select.Option,{value:"sentre",children:"Sentre"}),(0,l.jsx)(r.Select.Option,{value:"community",children:"Community"}),(0,l.jsx)(r.Select.Option,{value:"deposited",children:"Deposited"}),(0,l.jsx)(r.Select.Option,{value:"your-pools",children:"Your pools"})]})})]})},is=({poolAddress:e,isDisabled:t})=>{const s=(0,c.useHistory)(),{swapRoute:{swapRoute:n}}=Y,o=t=>{s.push({pathname:n,state:{poolAddress:e,originalRoute:t}})};return(0,l.jsxs)(r.Row,{gutter:[24,12],style:{width:260},children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsxs)(r.Space,{direction:"vertical",size:0,children:[(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(d,{style:{color:"#FA8C16"},name:"alert-circle-outline"}),(0,l.jsx)(r.Typography.Title,{level:5,children:"Choose the route?"})]}),(0,l.jsx)(r.Typography.Text,{type:"secondary",children:"We recommend choosing the best route to optimize the price."})]})}),(0,l.jsx)(r.Col,{style:{textAlign:"right"},span:24,children:(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(r.Button,{size:"small",disabled:t,onClick:()=>o(!0),children:"Original route"}),(0,l.jsx)(r.Button,{size:"small",onClick:()=>o(!1),type:"primary",children:"Best route"})]})})]})},as=({data:e,onClick:t=(()=>{}),action:s=(0,l.jsx)(i.Fragment,{}),keyExpand:n})=>{var a;const{pool:c,amount:p}=e,[h,m]=(0,i.useState)(!1),x=u.utils.undecimalize(p,9),{pools:y}=(0,o.usePool)(),g=(null===y||void 0===y?void 0:y[c].state)===L.Frozen,f=(null===y||void 0===y||null===(a=y[c])||void 0===a?void 0:a.mint_lpt)||"",j=h?"":"expandHidden",w=n.toString();return(0,l.jsxs)(r.Card,{bodyStyle:{padding:12,minHeight:78},hoverable:!0,children:[(0,l.jsxs)(r.Row,{gutter:[12,12],align:"top",children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsxs)(r.Space,{direction:"vertical",children:[(0,l.jsxs)(r.Space,{children:[(0,l.jsx)($,{mintAddress:f,size:24}),(0,l.jsx)(r.Typography.Text,{type:g?"secondary":void 0,children:(0,l.jsx)(te,{mintAddress:f})})]}),(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(r.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,l.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,l.jsx)(r.Typography.Text,{children:(0,l.jsx)(B,{poolAddress:c})}),(0,l.jsx)(r.Divider,{type:"vertical",style:{margin:0}}),(0,l.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"Your LPT:"}),(0,l.jsx)(r.Typography.Text,{children:R(x).format("0,0.[00]")})]})]})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Space,{size:2,children:[(0,l.jsx)(z,{poolAddress:c}),s,(0,l.jsx)(r.Button,{size:"small",type:"text",icon:(0,l.jsx)(d,{name:h?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>m(!h)})]})})]}),(0,l.jsx)(r.Collapse,{className:j,style:{marginTop:16},ghost:!0,activeKey:w,bordered:!1,children:(0,l.jsx)(r.Collapse.Panel,{header:"",children:(0,l.jsxs)(r.Row,{gutter:[16,16],children:[(0,l.jsx)(r.Col,{span:12,children:(0,l.jsx)(r.Popover,{trigger:"click",placement:"bottomLeft",content:(0,l.jsx)(is,{isDisabled:g,poolAddress:c}),children:(0,l.jsx)(r.Button,{block:!0,children:"Swap"})})}),(0,l.jsx)(r.Col,{span:12,children:(0,l.jsx)(r.Button,{onClick:t,block:!0,type:"primary",children:"Detail"})})]})},w)})]})},ls=({onInit:e=(()=>{}),onClick:t=(()=>{}),action:s=(()=>(0,l.jsx)(i.Fragment,{}))})=>{const a=(0,n.useSelector)((e=>e.lpts)),d=(0,n.useSelector)((e=>e.main.selectedCategoryPool)),{pools:c}=(0,o.usePool)(),{wallet:{address:u}}=(0,o.useWallet)(),h=(0,i.useMemo)((()=>Object.keys(a).filter((e=>{var t;const{pool:s,amount:n}=a[e];return"deposited"===d&&n!==BigInt(0)||"your-pools"===d&&(null===c||void 0===c||null===(t=c[s])||void 0===t?void 0:t.owner)===u?c[s]:null}))),[c,a,u,d]);return(0,i.useEffect)((()=>{h.length&&e(h[0])}),[e,h,a]),(0,l.jsx)(r.Row,{gutter:[12,12],children:h.map(((e,n)=>{const{pool:o}=a[e];return(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(p.ZP,{height:78,overflow:!0,children:(0,l.jsx)(as,{keyExpand:n+1,data:a[e],action:s(e,o),onClick:()=>t(o)})})},e+n)}))})},ds=({poolAddress:e,onClick:t=(()=>{}),action:s=(0,l.jsx)(i.Fragment,{}),keyExpand:a})=>{const c=(0,n.useDispatch)(),[u,p]=(0,i.useState)(!1),{pools:h}=(0,o.usePool)(),m=(0,n.useSelector)((t=>{var s;return null===(s=t.stat[e])||void 0===s?void 0:s.details})),x=(null===h||void 0===h?void 0:h[e])||{},{mint_lpt:y,state:g}=x,f=(0,i.useMemo)((()=>{if(!m||!m.roi)return 0;const e=m.roi;return Math.pow(1+Number(e)/100,365)-1}),[m]);(0,i.useEffect)((()=>{e&&c(K({address:e}))}),[c,e]);const j=g===L.Frozen,w=u?"":"expandHidden",v=a.toString();return(0,l.jsxs)(r.Card,{bodyStyle:{padding:12,minHeight:78},hoverable:!0,children:[(0,l.jsxs)(r.Row,{gutter:[12,12],align:"top",children:[(0,l.jsx)(r.Col,{flex:"auto",children:(0,l.jsxs)(r.Space,{direction:"vertical",children:[(0,l.jsxs)(r.Space,{children:[(0,l.jsx)($,{mintAddress:y,size:24}),(0,l.jsx)(r.Typography.Text,{type:j?"secondary":void 0,children:(0,l.jsx)(te,{mintAddress:y})})]}),(0,l.jsxs)(r.Space,{children:[(0,l.jsx)(r.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,l.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,l.jsx)(r.Typography.Text,{children:(0,l.jsx)(B,{poolAddress:e})}),(0,l.jsx)(r.Divider,{type:"vertical",style:{margin:0}}),(0,l.jsx)(r.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,l.jsx)(r.Typography.Text,{children:R(f).format("0,0.[00]%")})]})]})}),(0,l.jsx)(r.Col,{children:(0,l.jsxs)(r.Space,{size:2,children:[(0,l.jsx)(z,{poolAddress:e}),s,(0,l.jsx)(r.Button,{size:"small",type:"text",icon:(0,l.jsx)(d,{name:u?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>p(!u)})]})})]}),(0,l.jsx)(r.Collapse,{className:w,style:{marginTop:16},ghost:!0,activeKey:v,bordered:!1,children:(0,l.jsx)(r.Collapse.Panel,{header:"",children:(0,l.jsxs)(r.Row,{gutter:[16,16],children:[(0,l.jsx)(r.Col,{span:12,children:(0,l.jsx)(r.Popover,{trigger:"click",placement:"bottomLeft",content:(0,l.jsx)(is,{isDisabled:j,poolAddress:e}),children:(0,l.jsx)(r.Button,{block:!0,children:"Swap"})})}),(0,l.jsx)(r.Col,{span:12,children:(0,l.jsx)(r.Button,{onClick:t,block:!0,type:"primary",children:"Detail"})})]})},v)})]})},cs=({onInit:e=(()=>{}),onClick:t=(()=>{}),action:s=(()=>(0,l.jsx)(i.Fragment,{}))})=>{const{pools:a}=(0,o.usePool)(),d=(0,n.useSelector)((e=>e.main.selectedCategoryPool)),c=Y.sol.senOwner,u=(0,i.useMemo)((()=>Object.keys(a).map((e=>({address:e,...a[e]}))).sort((({reserve_a:e,reserve_b:t},{reserve_a:s,reserve_b:n})=>{const o=e*t,r=s*n;return o>r?-1:o<r?1:0}))),[a]),h=Object.keys(a).filter((e=>{const t=null===a||void 0===a?void 0:a[e],{owner:s}=t;return c.includes(s)}));(0,i.useEffect)((()=>{var t;u.length&&e(null===(t=u[0])||void 0===t?void 0:t.address)}),[e,u]);const m=()=>(0,l.jsx)(i.Fragment,{children:u.map(((e,n)=>(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(p.ZP,{height:78,overflow:!0,children:(0,l.jsx)(ds,{poolAddress:e.address,action:s(e.address),onClick:()=>t(e.address),keyExpand:n+1})})},e.address+n)))}),x=()=>(0,l.jsx)(i.Fragment,{children:h.map(((e,n)=>(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(p.ZP,{height:78,overflow:!0,children:(0,l.jsx)(ds,{poolAddress:e,action:s(e),onClick:()=>t(e),keyExpand:n+1})})},e+n)))});return(0,l.jsx)(r.Row,{gutter:[12,12],children:"sentre"===d?(0,l.jsx)(x,{}):(0,l.jsx)(m,{})})},us=()=>{const e=(0,n.useDispatch)(),t=(0,n.useSelector)((e=>e.main.selectedCategoryPool)),s=(0,c.useHistory)(),{manifest:{appId:o}}=Y,a=(0,i.useCallback)((t=>{e(re(t)),e(ae(!1)),s.push(`app/${o}`)}),[e,s,o]);return(0,l.jsxs)(r.Row,{children:[(0,l.jsx)(r.Col,{span:24,children:(0,l.jsx)(rs,{})}),(0,l.jsx)(r.Col,{span:24,className:"body-widget",children:"sentre"===t||"community"===t?(0,l.jsx)(cs,{onClick:a}):(0,l.jsx)(ls,{onClick:a})}),(0,l.jsx)(r.Col,{span:24,style:{height:16}}),(0,l.jsx)(ns,{})]})};BigInt.prototype.toJSON=function(){return this.toString()};const ps={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e}},hs=(0,D.configureStore)({middleware:e=>e(ps),devTools:!1,reducer:{main:le,stat:Q,lpts:ts}}),{manifest:{appId:ms}}=Y,xs=()=>(0,l.jsx)(o.UIProvider,{appId:ms,antd:!0,children:(0,l.jsx)(o.MintProvider,{children:(0,l.jsx)(o.PoolProvider,{children:(0,l.jsx)(o.AccountProvider,{children:(0,l.jsx)(o.WalletProvider,{children:(0,l.jsx)(n.Provider,{store:hs,children:(0,l.jsx)(os,{})})})})})})}),ys={size:"small",type:"solid"},gs=()=>(0,l.jsx)(o.MintProvider,{children:(0,l.jsx)(o.UIProvider,{appId:ms,antd:!0,children:(0,l.jsx)(o.PoolProvider,{children:(0,l.jsx)(o.AccountProvider,{children:(0,l.jsx)(o.WalletProvider,{children:(0,l.jsx)(n.Provider,{store:hs,children:(0,l.jsx)(us,{})})})})})})})},31633:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(63805),o=s(77566),r=s(77330);const i={sol:o.Z[n.ef],register:r.Z[n.OB]}},77330:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});const n="senhub",o={sen_lp:{url:"https://descartesnetwork.github.io/sen-lp/index.js",appId:"sen_lp",name:"Sen LP",author:{name:"Sentre",email:"hi@sentre.io"},supportedViews:"page,widget".split(",").map((e=>e.trim())).filter((e=>["page","widget"].includes(e))),tags:"solana,dapps,liquidity".split(",").map((e=>e.trim())),description:"Liquidity Provision to pools in the Sentre ecosystem",verified:!1}},r={development:{defaultAppId:n,extra:o,senreg:"https://descartesnetwork.github.io/senreg/register.json"},staging:{defaultAppId:n,extra:o,senreg:"https://descartesnetwork.github.io/senreg/register.json"},production:{defaultAppId:n,extra:{},senreg:"https://descartesnetwork.github.io/senreg/register.json"}}},77566:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n={spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},o={devnet:{...n,node:"https://api.devnet.solana.com",chainId:103,sntrAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",sntrPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9"},testnet:{...n,node:"https://api.testnet.solana.com",chainId:102,sntrAddress:"",sntrPoolAddress:"",swapAddress:"",taxmanAddress:""},mainnet:{...n,node:"https://api.mainnet-beta.solana.com",chainId:101,sntrAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",sntrPoolAddress:"Aa3WZX7Xunfebp2MuAcz9CNw8TYTDL7mVrmb11rjyVm6",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}}},20418:(e,t,s)=>{"use strict";s.d(t,{Z:()=>x});var n=s(11796),o=s(67845),r=s(63805),i=s(31633);const a=e=>({symbol:"SOL",name:"Solana",address:"11111111111111111111111111111111",decimals:9,chainId:e,extensions:{coingeckoId:"solana"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"}),l=e=>({symbol:"SNTR",name:"Sentre",address:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",decimals:9,chainId:e,extensions:{coingeckoId:"sentre"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png"}),d=[a(103),l(103),{symbol:"wBTC",name:"Wrapped Bitcoin",address:"8jk4eJymMfNZV9mkRNxJEt2VJ3pRvdJvD5FE94GXGBPM",decimals:9,chainId:103,extensions:{coingeckoId:"bitcoin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/qfnqNqs3nCAHjnyCgLRDbBtq4p2MtHZxw8YjSyYhPoL/logo.png"},{symbol:"wETH",name:"Ethereum",address:"27hdcZv7RtuMp75vupThR3T4KLsL61t476eosMdoec4c",decimals:9,chainId:103,extensions:{coingeckoId:"ethereum"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf/logo.png"},{symbol:"UNI",name:"Uniswap",address:"FVZFSXu3yn17YdcxLD72TFDUqkdE5xZvcW18EUpRQEbe",decimals:9,chainId:103,extensions:{coingeckoId:"uniswap"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/3MVa4e32PaKmPxYUQ6n8vFkWtCma68Ld7e7fTktWDueQ/logo.png"},{symbol:"USDC",name:"USD Coin",address:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",decimals:9,chainId:103,extensions:{coingeckoId:"usd-coin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"}],{sol:{chainId:c,sntrAddress:u}}=i.Z,p=/[\W_]+/g,h={tokenize:"full",context:!0,minlength:3},m={document:{id:"address",index:[{field:"symbol",...h},{field:"name",...h}]}};const x=class{constructor(){this.tokenMap=void 0,this.engine=void 0,this.chainId=void 0,this.cluster=void 0,this.loading=void 0,this.queue=void 0,this._init=async()=>this.tokenMap.size?[this.tokenMap,this.engine]:new Promise((async e=>{if(this.loading)return this.queue.push(e);this.loading=!0;let t=await(await(new o.DK).resolve()).filterByChainId(this.chainId).getList();for(t.forEach(((e,s)=>{if(e.address===u){const{extensions:n,name:o,symbol:r,...i}=e;t[s]={...i,name:"Sentre",symbol:"SNTR",extensions:{...n,coingeckoId:"sentre"}}}})),"devnet"===this.cluster&&(t=t.concat(d)),t="testnet"===this.cluster?t.concat([l(102),a(102)]):t.concat([a(101)]),t.forEach((e=>this.tokenMap.set(e.address,e))),this.engine=new n.Document(m),this.tokenMap.forEach((({address:e,...t})=>this.engine.add(e,t))),e([this.tokenMap,this.engine]);this.queue.length;)this.queue.shift()([this.tokenMap,this.engine]);this.loading=!1})),this.all=async()=>{const[e]=await this._init();return Array.from(e.values())},this.findByAddress=async e=>{const[t]=await this._init();return t.get(e)},this.find=async(e,t)=>{const[s,n]=await this._init();let o=[];return e.split(p).forEach((e=>n.search(e,t).forEach((({result:e})=>e.forEach((e=>{if(o.findIndex((({address:t})=>t===e))<0){const t=s.get(e);t&&o.push(t)}})))))),o},this.tokenMap=new Map,this.engine=void 0,this.chainId=c,this.cluster=r.ef,this.loading=!1,this.queue=[],this._init()}}},63805:(e,t,s)=>{"use strict";s.d(t,{OB:()=>o,ef:()=>r});var n=s(53933);const o="production",r=(()=>{switch(n.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},53933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const n="sentre",o=window.localStorage,r=e=>{if(!e)return null;try{return JSON.parse(e)}catch(t){return null}},i={set:(e,t)=>{let s=r(o.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,o.setItem(n,JSON.stringify(s))},get:e=>{let t=r(o.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{i.set(e,null)}},a=i},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},88795:()=>{},89408:()=>{},57600:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=399.8e045e12.chunk.js.map