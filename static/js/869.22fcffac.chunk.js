(globalThis.webpackChunksen_lp=globalThis.webpackChunksen_lp||[]).push([[869],{2574:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>Sn,Widget:()=>Rn,widgetConfig:()=>kn});var n=s(55754),r=s(98846),o=s(45055),a=s(99019),i=s(92950),l=s(95418),d=s(44891),c=s(34559);const u=e=>{const{pools:t}=(0,r.usePool)(),[s,n]=(0,i.useState)(0),{getMintTotalValue:o}=(()=>{const{tokenProvider:e,getMint:t}=(0,r.useMint)(),{pools:s}=(0,r.usePool)(),n=(0,i.useCallback)((async(t,s)=>{try{var n;const r=await e.findByAddress(t),o=null===r||void 0===r||null===(n=r.extensions)||void 0===n?void 0:n.coingeckoId;if(!o)throw new Error("Cant not find coingeckoId");const a=await(0,c.l$)(o);return Number(l.utils.undecimalize(s,r.decimals))*a.price}catch(r){return 0}}),[e]),o=(0,i.useCallback)((async r=>{let{mintAddress:a,amount:i}=r;if(await e.findByAddress(a))return n(a,i);const d=Object.values(s).find((e=>e.mint_lpt===a));if(!d)return 0;const{reserve_a:c,reserve_b:u,mint_a:h,mint_b:p}=d;if(c*u===BigInt(0))return 0;const{[a]:{supply:x}}=await t({address:a}),{deltaA:m,deltaB:y}=l.Swap.oracle.withdraw(i,x,c,u);return await o({mintAddress:h,amount:m})+await o({mintAddress:p,amount:y})}),[t,n,e,s]);return{getMintTotalValue:o}})(),a=(0,i.useCallback)((async e=>{const s=t[e];if(!s)return 0;const{reserve_a:n,reserve_b:r,mint_a:a,mint_b:i}=s;return await o({mintAddress:a,amount:n})+await o({mintAddress:i,amount:r})}),[o,t]),d=(0,i.useCallback)((async e=>{if(!e)return n(0);const t=await a(e);n(t)}),[a]);return(0,i.useEffect)((()=>{d(e)}),[d,e]),{tvl:s,getTvl:a}};var h=s(45263);const p=e=>{let{poolAddress:t}=e;const{tvl:s}=u(t);return(0,h.jsxs)("span",{children:["$",(0,c.uR)(s).format("0,0.[00]a")]})};const x={"logo-telegram":s.p+"static/media/icon-telegram.2450489f40d03000fe65fc1c6f238d85.svg"},m=(0,i.forwardRef)(((e,t)=>{let{name:s,className:n,...r}=e;const o=n?"anticon "+n:"anticon";return(0,h.jsx)("span",{className:o,...r,children:x[s]?(0,h.jsx)("ion-icon",{ref:t,src:x[s]}):(0,h.jsx)("ion-icon",{ref:t,name:s})})}));let y,j,g,f,w;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(y||(y={})),function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Open=1]="Open",e[e.Approved=2]="Approved",e[e.Done=3]="Done",e[e.Rejected=4]="Rejected",e[e.Canceled=5]="Canceled"}(j||(j={})),function(e){e.Sentre="sentre-pools",e.Deposited="deposited-pools",e.YourPools="your-pools",e.Community="community-pools"}(g||(g={})),function(e){e.YourLiquidity="your-liquidity",e.Pools="pools"}(f||(f={})),function(e){e.details="details",e.address="poolAddress",e.category="category",e.wrapTab="tab",e.tabInPools="tab-in-pools"}(w||(w={}));const v=[{locktime:7,discount:.025},{locktime:30,discount:.12},{locktime:60,discount:.265},{locktime:90,discount:.45}],b=e=>{let{poolAddress:t}=e;const{pools:s}=(0,r.usePool)(),n=s[t]||{},{wallet:{address:o}}=(0,r.useWallet)(),i=n.state===y.Frozen,l=o===(null===n||void 0===n?void 0:n.owner);return(0,h.jsxs)(a.Space,{children:[i&&(0,h.jsx)(m,{name:"snow-outline",style:{fontSize:16}}),l&&(0,h.jsx)(m,{name:"person-outline",style:{fontSize:16}})]})},C=[void 0],T=e=>{let{mintAddress:t,size:s=24,icon:n=(0,h.jsx)(m,{name:"diamond-outline"}),reversed:o=!1,...d}=e;const[c,u]=(0,i.useState)(C),{tokenProvider:p}=(0,r.useMint)(),{pools:x}=(0,r.usePool)(),y=(0,i.useCallback)((async e=>{const t=await p.findByAddress(e);if(null!==t&&void 0!==t&&t.logoURI)return t.logoURI}),[p]),j=(0,i.useCallback)((async()=>{if(!l.account.isAddress(t))return u(C);const e=Object.values(x).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:s}=e,n=await Promise.all([t,s].map(y));return o&&n.reverse(),u(n)}const s=await y(t);return u([s])}),[t,o,y,x]);return(0,i.useEffect)((()=>{j()}),[j]),1===c.length?(0,h.jsx)(a.Avatar,{src:c[0],size:s,style:{backgroundColor:"#2D3355",border:"none"},...d,children:n}):(0,h.jsx)(a.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...d,children:c.map(((e,t)=>(0,h.jsx)(a.Avatar,{src:e,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:n},t)))})},A="Unknown Token",S=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[o,a]=(0,i.useState)(A),{tokenProvider:d}=(0,r.useMint)(),{pools:c}=(0,r.usePool)(),u=(0,i.useCallback)((async e=>{const t=await d.findByAddress(e);return null!==t&&void 0!==t&&t.name?t.name:A}),[d]),p=(0,i.useCallback)((async()=>{if(!l.account.isAddress(t))return a(A);const e=Object.values(c).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:r}=e,o=await Promise.all([t,r].map(u));return n&&o.reverse(),a(`${o.join(s)} LP`)}const r=await u(t);return a(r)}),[t,n,u,c,s]);return(0,i.useEffect)((()=>{p()}),[p]),(0,h.jsx)("span",{children:o})},k="TOKN",R=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[o,a]=(0,i.useState)(k),{tokenProvider:d}=(0,r.useMint)(),{pools:c}=(0,r.usePool)(),u=(0,i.useCallback)((async e=>{const t=await d.findByAddress(e);return null!==t&&void 0!==t&&t.symbol?t.symbol:e.substring(0,4)}),[d]),p=(0,i.useCallback)((async()=>{if(!l.account.isAddress(t))return a(k);const e=Object.values(c).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:r}=e,o=await Promise.all([t,r].map(u));return n&&o.reverse(),a(o.join(s))}const r=await u(t);return a(r)}),[t,n,u,c,s]);return(0,i.useEffect)((()=>{p()}),[p]),(0,h.jsx)("span",{children:o})};var P=s(19289),I=s(15190);const D={appId:"sen_lp",url:"https://descartesnetwork.github.io/sen-lp/index.js"},_={development:{...D},staging:{...D},production:{...D}},z={devnet:{swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9",senOwners:["GJLqpmDxxrV9xruee2vFvEoTho7VVQHRtuHH8nfoAE54"],sntrAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",purchasingAddress:"FHeonxeZFH76K57KGRWgsmE97tiupcHDjvWNKMQDmdVd",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:"https://api.devnet.solana.com",get purchasing(){return new l.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}},testnet:{swapAddress:"",taxmanAddress:"",senOwners:[],sntrAddress:"",purchasingAddress:"",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:"https://api.testnet.solana.com",get purchasing(){return new l.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}},mainnet:{swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e",senOwners:["Cs6jYywHTAgdvjxn8xG4VkJJH8DXXy7zbtatzMUWoCMG","8W6QginLcAydYyMYjxuyKQN56NzeakDE3aRFrAmocS6D"],sntrAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",purchasingAddress:"Ecw8Vh3cwwwwMsaU63mW6knKMsuaiSakVDvKxB5nyhFC",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",nodeUrl:"http://api.google.mainnet-beta.solana.com",get purchasing(){return new l.Purchasing(this.purchasingAddress,this.spltAddress,this.splataAddress,this.nodeUrl)}}},E={devnet:{baseURL:"https://stat-dev.sentre.io"},testnet:{baseURL:"https://stat-dev.sentre.io"},mainnet:{baseURL:"https://stat.sentre.io"}},B={development:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},staging:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)},production:{exoticFee:BigInt(25e5),exoticTax:BigInt(0),correlatedFee:BigInt(5e5),correlatedTax:BigInt(0)}},N={development:{myRoute:"/app/sen_lp",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"},staging:{myRoute:"/app/sen_lp",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"},production:{myRoute:"/app/sen_lp",swapRoute:"/app/sen_swap",farmRoute:"/app/sen_farming"}},L={manifest:_[I.OB],sol:z[I.ef],stat:E[I.ef],fee:B[I.OB],route:N[I.OB]};var M=s(21995),O=s.n(M);const Y={auth:async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("object"===typeof e)return e;if(!e)return null;const t=window.sentre.wallet;if(!t)throw new Error("Wallet is not connected");const s=Number(new Date)+1e4,n=s.toString()+Math.floor(Math.random()*10**16),r=await t.signMessage(n),o=JSON.stringify(r);return{Authorization:o}},post:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=await Y.auth(s);try{const{data:s}=await O()({method:"post",url:e,data:t,headers:n});if("ERROR"===s.status)throw new Error(s.error);return s}catch(r){if(!r.response)throw new Error(r.message);const{response:{data:{error:e}}}=r;throw new Error(e)}},get:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=await Y.auth(s);try{const{data:s}=await O()({method:"get",url:e,params:t,headers:n});if("ERROR"===s.status)throw new Error(s.error);return s}catch(r){if(!r.response)throw new Error(r.message);const{response:{data:{error:e}}}=r;throw new Error(e)}},put:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=await Y.auth(s);try{const{data:s}=await O()({method:"put",url:e,data:t,headers:n});if("ERROR"===s.status)throw new Error(s.error);return s}catch(r){if(!r.response)throw new Error(r.message);const{response:{data:{error:e}}}=r;throw new Error(e)}},delete:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=await Y.auth(s);try{const{data:s}=await O()({method:"delete",url:e,data:t,headers:n});if("ERROR"===s.status)throw new Error(s.error);return s}catch(r){if(!r.response)throw new Error(r.message);const{response:{data:{error:e}}}=r;throw new Error(e)}}},F=Y;let U;!function(e){e.endpointDetail="public/api/v1/detail/pools"}(U||(U={}));const{stat:{baseURL:W}}=L,q="stat",H=(0,P.createAsyncThunk)("stat/fetchStatPoolData",(async(e,t)=>{let{address:s}=e,{getState:n}=t;try{const e=n().stat[s];if(e)return{[s]:e};return{[s]:{details:await F.get(`${W}/${U.endpointDetail}/${s}`)}}}catch(r){return{}}})),$=(0,P.createSlice)({name:q,initialState:{},reducers:{},extraReducers:e=>{e.addCase(H.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,V=e=>{let{poolAddress:t,onClick:s=(()=>{}),action:o=(0,h.jsx)(i.Fragment,{}),selected:d=!1,apy:u,myLp:x}=e;const m=(0,n.useDispatch)(),j=(0,n.useSelector)((e=>{var s;return null===(s=e.stat[t])||void 0===s?void 0:s.details})),{pools:{[t]:g}}=(0,r.usePool)(),f=(e=>{const{lpts:t}=(0,n.useSelector)((e=>e)),{amount:s,balance:r}=(0,i.useMemo)((()=>{var s;const n=Object.keys(t).find((s=>t[s].pool===e))||"",r=(null===(s=t[n])||void 0===s?void 0:s.amount)||BigInt(0);return{amount:r,balance:Number(l.utils.undecimalize(r,9))}}),[t,e]);return{amount:s,balance:r}})(t),w=(0,i.useMemo)((()=>{if(!j)return 0;const e=j.roi||0;return Math.pow(1+e/100,365)-1}),[j]);(0,i.useEffect)((()=>{l.account.isAddress(t)&&m(H({address:t}))}),[m,t]);const v=(null===g||void 0===g?void 0:g.state)===y.Frozen,C=d?"card-active lp-card":"lp-card";return(0,h.jsx)(a.Card,{className:C,bodyStyle:{padding:12,height:78},onClick:()=>s(t),bordered:d,hoverable:!0,children:(0,h.jsxs)(a.Row,{gutter:[12,12],wrap:!1,align:"middle",children:[(0,h.jsx)(a.Col,{span:24,flex:"auto",children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(T,{mintAddress:null===g||void 0===g?void 0:g.mint_lpt,size:24}),(0,h.jsx)(a.Typography.Text,{type:v?"secondary":void 0,children:(0,h.jsx)(R,{mintAddress:null===g||void 0===g?void 0:g.mint_lpt})})]}),(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(a.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,h.jsx)(a.Typography.Text,{children:(0,h.jsx)(p,{poolAddress:t})}),u&&(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(a.Divider,{type:"vertical",style:{margin:0}}),(0,h.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,h.jsx)(a.Typography.Text,{children:(0,c.uR)(w).format("0,0.[00]%")})]}),x&&(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(a.Divider,{type:"vertical",style:{margin:0}}),(0,h.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"My LP:"}),(0,h.jsx)(a.Typography.Text,{children:(0,c.uR)(f.balance).format("0,0.[00]")})]})]})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{size:2,children:[(0,h.jsx)(b,{poolAddress:t}),o]})})]})})},Z="main",G=(0,P.createAsyncThunk)("main/selectPool",(async e=>({selectedPoolAddress:e}))),K=(0,P.createAsyncThunk)("main/handleOpenDrawer",(async e=>({visible:e}))),Q=(0,P.createAsyncThunk)("main/onSearch",(async e=>({search:e}))),J=(0,P.createAsyncThunk)("main/onSetTotalTvl",(async e=>({tvl:e}))),X=(0,P.createSlice)({name:Z,initialState:{selectedPoolAddress:"",visible:!1,search:"",tvl:0},reducers:{},extraReducers:e=>{e.addCase(G.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(K.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Q.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(J.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,{sol:{senOwners:ee}}=L,te=()=>{const[e,t]=(0,i.useState)({}),{pools:s}=(0,r.usePool)(),n=(0,i.useCallback)((e=>ee.includes(s[e].owner)),[s]),o=(0,i.useCallback)((e=>{const s={};for(const t in e)n(t)&&(s[t]=e[t]);return t(s)}),[n]);return(0,i.useEffect)((()=>{o(s)}),[s,o]),{sentrePools:e,filterSentrePools:o,checkSentrePools:n}},se=()=>{const[e,t]=(0,i.useState)({}),{pools:s}=(0,r.usePool)(),{checkSentrePools:n}=te(),o=(0,i.useCallback)((e=>!n(e)),[n]),a=(0,i.useCallback)((e=>{const s={};for(const t in e)o(t)&&(s[t]=e[t]);return t(s)}),[o]);return(0,i.useEffect)((()=>{a(s)}),[s,a]),{communityPools:e,filterCommunityPools:a,checkCommunityPools:o}};let ne;const re=e=>{const{filteredPools:t}=(e=>{const[t,s]=(0,i.useState)({}),{settings:{showArchived:r}}=(0,n.useSelector)((e=>e)),o=(0,i.useCallback)((t=>{const{reserve_a:s,reserve_b:n}=e[t]||{};return!s||!n}),[e]),a=(0,i.useCallback)((e=>{const t={};for(const s in e)!r&&o(s)||(t[s]=e[s]);return s(t)}),[o,r]);return(0,i.useEffect)((()=>{a(e)}),[e,a]),{filteredPools:t}})(e),{searchedPools:s}=(e=>{const{tokenProvider:t}=(0,r.useMint)(),[s,o]=(0,i.useState)({}),{main:{search:a}}=(0,n.useSelector)((e=>e)),c=(0,i.useCallback)((async s=>{if(l.account.isAddress(a)&&a===s)return!0;const n=await t.find(a);if(!n)return!1;const{mint_a:r,mint_b:o}=e[s],i=n.map((e=>{let{address:t}=e;return t}));return!!i.includes(r)||!!i.includes(o)}),[e,a,t]),u=(0,i.useCallback)((async e=>{if(!a||a.length<3)return o(e);const t={};for(const s in e)await c(s)&&(t[s]=e[s]);return o(t)}),[c,a]);return(0,i.useEffect)((()=>{u(e),ne&&clearTimeout(ne),ne=setTimeout(d.be,500)}),[e,u]),{searchedPools:s}})(t),{sortedPools:o}=(e=>{const[t,s]=(0,i.useState)({}),{getTvl:n}=u(),r=(0,i.useCallback)((async e=>{let t=Object.keys(e);const r={},o={};await Promise.all(t.map((async e=>o[e]=await n(e))));const a=t.sort(((e,t)=>o[t]-o[e]));for(const s of a)r[s]=e[s];return s(r)}),[n]);return(0,i.useEffect)((()=>{r(e)}),[e,r]),{sortedPools:t}})(s);return{listPoolAddress:(0,i.useMemo)((()=>Object.keys(o)),[o])}},{route:{myRoute:oe}}=L,ae=e=>{let{poolAddress:t,category:s}=e;const r=(0,n.useDispatch)(),l=(0,o.useHistory)(),d=(0,i.useCallback)((async e=>(await r(G(e)),await r(K(!1)),l.push(`${oe}/${w.details}?${w.address}=${e}`))),[r,l]);return(0,h.jsx)(a.Button,{type:"text",onClick:e=>{e.stopPropagation(),d(t)},icon:(0,h.jsx)(m,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})},ie=e=>{const[t,s]=(0,i.useState)(0),{getTvl:n}=u(),r=(0,i.useCallback)((async e=>{if(null===e||void 0===e||!e.length)return s(0);let t=0;for(const s of e){t+=await n(s)}s(t)}),[n]);return(0,i.useEffect)((()=>{r(e)}),[r,e]),t},{route:{myRoute:le}}=L,de=()=>{const e=(0,o.useHistory)(),t=(0,n.useDispatch)(),{selectedPoolAddress:s}=(0,n.useSelector)((e=>e.main)),{communityPools:r}=se(),{listPoolAddress:l}=re(r),c=ie(l),u=(0,i.useCallback)((async s=>(await t(G(s)),await t(K(!1)),e.push(`${le}/${w.details}?${w.address}=${s}`))),[t,e]);return(0,i.useEffect)((()=>{t(J(c))}),[t,c]),(0,h.jsx)(a.Row,{gutter:[12,12],justify:"center",children:l.length?l.map((e=>(0,h.jsx)(a.Col,{id:e,span:24,children:(0,h.jsx)(d.ZP,{height:78,overflow:!0,children:(0,h.jsx)(V,{poolAddress:e,action:(0,h.jsx)(ae,{poolAddress:e,category:g.Community}),onClick:u,selected:s===e,apy:!0})})},e))):(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Empty,{})})})},{route:{myRoute:ce}}=L,ue=()=>{const e=(0,o.useHistory)(),t=(0,n.useDispatch)(),{main:{selectedPoolAddress:s}}=(0,n.useSelector)((e=>e)),r=(0,o.useLocation)(),{sentrePools:l}=te(),{listPoolAddress:d}=re(l),c=ie(d),u=(0,i.useMemo)((()=>new URLSearchParams(r.search)),[r.search]),p=(0,i.useCallback)((async s=>(await t(G(s)),u.set(w.address,s),e.push(`${ce}/${w.details}?${u.toString()}`))),[t,e,u]);return(0,i.useEffect)((()=>{t(J(c))}),[t,c]),(0,h.jsxs)(a.Row,{gutter:[12,12],justify:"center",children:[!d.length&&(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Empty,{})}),d.map(((e,t)=>(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(V,{poolAddress:e,action:(0,h.jsx)(a.Button,{type:"text",onClick:t=>{t.stopPropagation(),p(e)},icon:(0,h.jsx)(m,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})}),onClick:()=>p(e),selected:s===e,apy:!0})},e+t)))]})},he=e=>{let{onClick:t=(()=>{}),selectedPoolAddress:s,action:o=(()=>(0,h.jsx)(i.Fragment,{}))}=e;const l=(0,n.useDispatch)(),{yourPools:c}=(()=>{const[e,t]=(0,i.useState)({}),s=(0,n.useSelector)((e=>e.lpts)),{wallet:o}=(0,r.useWallet)(),{pools:a}=(0,r.usePool)(),l=(0,i.useCallback)((()=>{const e={};for(const t in s){const{pool:n}=s[t],r=a[n];r&&r.owner===o.address&&(e[n]=r)}return t(e)}),[s,a,o.address]);return(0,i.useEffect)((()=>{l()}),[l]),{yourPools:e}})(),{listPoolAddress:u}=re(c),p=ie(u);return(0,i.useEffect)((()=>{l(J(p))}),[l,p]),(0,h.jsxs)(a.Row,{gutter:[12,12],justify:"center",children:[!u.length&&(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Empty,{})}),u.map((e=>(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(d.ZP,{height:78,overflow:!0,children:(0,h.jsx)(V,{poolAddress:e,action:o(e),onClick:()=>t(e),selected:s===e,myLp:!0})})},e)))]})},{route:{myRoute:pe}}=L,xe=()=>{const e=(0,n.useDispatch)(),{main:{selectedPoolAddress:t}}=(0,n.useSelector)((e=>e)),s=(0,o.useHistory)(),r=(0,i.useCallback)((t=>(e(G(t)),e(K(!1)),s.push(`${pe}/${w.details}?${w.address}=${t}`))),[e,s]),l=(0,i.useCallback)((e=>(0,h.jsx)(a.Button,{type:"text",onClick:()=>r(e),size:"small",icon:(0,h.jsx)(m,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[r]);return(0,h.jsx)(a.Row,{gutter:[12,12],children:(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(he,{action:l,selectedPoolAddress:t,onClick:r})})})},me="settings",ye=(0,P.createAsyncThunk)("settings/setShowArchived",(async e=>({showArchived:e}))),je=(0,P.createSlice)({name:me,initialState:{showArchived:!1},reducers:{},extraReducers:e=>{e.addCase(ye.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ge=()=>{const e=(0,n.useDispatch)(),{settings:{showArchived:t}}=(0,n.useSelector)((e=>e));return(0,h.jsx)(a.Popover,{zIndex:1e3,content:(0,h.jsx)(a.Row,{gutter:[8,8],style:{maxWidth:224},children:(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Space,{size:"large",children:[(0,h.jsx)(a.Switch,{size:"small",checked:t,onChange:t=>e(ye(t))}),(0,h.jsx)(a.Typography.Text,{children:"Show archived pools"})]})})}),trigger:"click",placement:"topRight",children:(0,h.jsx)(a.Button,{type:"text",icon:(0,h.jsx)(m,{name:"cog-outline"})})})};let fe;const we=(0,i.forwardRef)(((e,t)=>{var s;let{max:n,onValue:r=(()=>{}),onChange:o=(()=>{}),...l}=e;const[d,c]=(0,i.useState)(""),[u,p]=(0,i.useState)(null),x=(0,i.useRef)(t),y=(0,i.useCallback)((e=>{const t=e=>{fe&&(clearTimeout(fe),fe=void 0),c(e),fe=setTimeout((()=>c("")),500)};return/^\d*(\.\d*)?$/.test(e)?n&&parseFloat(e)>parseFloat(n.toString())?t("Not enough balance"):r(e):t("Invalid character")}),[n,r]);return null!==u&&(null===x||void 0===x||null===(s=x.current)||void 0===s||s.setSelectionRange(u,u)),(0,h.jsx)(a.Tooltip,{title:(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(m,{name:"warning"}),d]}),visible:!!d,children:(0,h.jsx)(a.Input,{...l,onChange:e=>{o(e),p(e.target.selectionStart),y(e.target.value||"")},ref:x})})}));var ve=s(67642);const be="Select",Ce=e=>{let{mintAddresses:t,activeMintAddress:s,onSelect:n}=e;return(0,h.jsxs)(a.Select,{onChange:n,value:s||be,bordered:!1,suffixIcon:(0,h.jsx)(a.Divider,{type:"vertical",style:{margin:0}}),style:{marginLeft:-7},children:[(0,h.jsx)(a.Select.Option,{value:be,children:(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(ve.Z,{children:(0,h.jsx)(m,{name:"help-outline"})}),(0,h.jsx)(a.Typography.Text,{children:be})]})}),t.map(((e,t)=>(0,h.jsx)(a.Select.Option,{value:e,children:(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(T,{mintAddress:e}),(0,h.jsx)(R,{mintAddress:e})]})},t)))]})},Te=e=>{const[t,s]=(0,i.useState)(void 0),{getDecimals:n}=(0,r.useMint)(),o=(0,i.useCallback)((async()=>{if(!l.account.isAddress(e))return s(void 0);try{const t=await n(e);return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,i.useEffect)((()=>{o()}),[o]),t},Ae=e=>{let{mintAddresses:t,onChange:s,suggestion:n}=e;const[o,d]=(0,i.useState)(""),[u,p]=(0,i.useState)("Select"),[x,m]=(0,i.useState)(""),{accounts:y}=(0,r.useAccount)(),j=Te(u)||0,{wallet:{address:g}}=(0,r.useWallet)(),{amount:f}=y[x]||{amount:"0"},w=l.utils.undecimalize(f,j)||"0",v=(0,i.useCallback)((async()=>{const{splt:e}=window.sentre;if(!l.account.isAddress(u))return;const t=await e.deriveAssociatedAddress(g,u);return m(t)}),[u,g]),b=(0,i.useCallback)((async e=>{if(await d(e),l.account.isAddress(u))return s(j?{amount:l.utils.decimalize(e,j),mintAddress:u}:{amount:BigInt(0),mintAddress:u})}),[s,j,u]),C=(0,i.useCallback)((async e=>(await p(e),j&&parseFloat(o)?s({amount:l.utils.decimalize(o,j),mintAddress:e}):s({amount:BigInt(0),mintAddress:e}))),[s,j,o]);return(0,i.useEffect)((()=>{v()}),[v]),(0,h.jsxs)(a.Row,{gutter:[4,4],children:[(0,h.jsx)(we,{placeholder:"0",value:o,onValue:b,prefix:(0,h.jsx)(Ce,{mintAddresses:t,activeMintAddress:u,onSelect:C}),size:"large",suffix:(0,h.jsx)(a.Button,{type:"text",style:{marginRight:-7},onClick:()=>b(w),children:"MAX"}),max:w}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[4,4],children:[(0,h.jsx)(a.Col,{span:24,flex:"auto",children:n?(0,h.jsxs)(a.Space,{size:4,children:[(0,h.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"Recommend:"}),(0,h.jsx)(a.Typography.Text,{type:"danger",className:"caption",onClick:()=>b((n||0).toString()),children:(0,c.uR)(n).format("0,0.[0000]a")}),(0,h.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:(0,h.jsx)(R,{mintAddress:u})})]}):null}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Typography.Text,{type:"secondary",className:"caption",children:["Available: ",(0,c.uR)(w).format("0,0.[0000]")," ",(0,h.jsx)(R,{mintAddress:u})]})})]})})]})},Se=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open((0,c.kU)(t),"_blank")}),ke=e=>window.notify({type:"error",description:e.message});function Re(e){return Object.keys(e).filter((e=>Number.isNaN(+e)))}const Pe=(e,t)=>{const{tokenProvider:s,getMint:n,getDecimals:o}=(0,r.useMint)(),{pools:a}=(0,r.usePool)(),[d,u]=(0,i.useState)(0),h=(0,i.useCallback)((async e=>{var n;const r=await s.findByAddress(e),o=null===r||void 0===r||null===(n=r.extensions)||void 0===n?void 0:n.coingeckoId;if(!o){if(t)throw new Error("Unknown Token");return 0}const a=(await(0,c.l$)(o)).price;if(!a){if(t)throw new Error("Not find on Cgk");return 0}return a}),[t,s]),p=(0,i.useCallback)((async(e,t)=>{const s=await h(e),n=await o(e);return Number(l.utils.undecimalize(t,n))*s}),[o,h]),x=(0,i.useCallback)((async e=>{const t=Object.values(a).find((t=>t.mint_lpt===e));if(!t)return 0;const{reserve_a:s,reserve_b:r,mint_a:o,mint_b:i}=t;if(s*r===BigInt(0))return 0;const{[e]:{supply:d}}=await n({address:e});return(await p(o,s)+await p(i,r))/Number(l.utils.undecimalize(d,9))}),[n,p,a]),m=(0,i.useCallback)((async e=>{try{var t;const n=await s.findByAddress(e);if(!n){const t=await x(e);return u(t)}const r=null===(t=n.extensions)||void 0===t?void 0:t.coingeckoId;if(!r)return u(0);const o=await(0,c.l$)(r);return u(o.price)}catch(n){return 0}}),[x,s]);return(0,i.useEffect)((()=>{m(e)}),[m,e]),d},{sol:{taxmanAddress:Ie},fee:{exoticFee:De,exoticTax:_e},route:{myRoute:ze}}=L,Ee=()=>{const e=(0,o.useHistory)(),[t,s]=(0,i.useState)(!1),[d,c]=(0,i.useState)(BigInt(0)),[u,p]=(0,i.useState)(""),[x,y]=(0,i.useState)(BigInt(0)),[j,v]=(0,i.useState)(""),[b,C]=(0,i.useState)(!1),[T,A]=(0,i.useState)([0,0]),{lpts:S}=(0,n.useSelector)((e=>e)),{wallet:{address:k}}=(0,r.useWallet)(),{accounts:R}=(0,r.useAccount)(),{pools:P}=(0,r.usePool)(),I=Object.values(P).map((e=>{let{mint_a:t,mint_b:s}=e;return`${t}${s}`})),D=I.includes(`${u}${j}`)||I.includes(`${j}${u}`),_=Object.values(S).map((e=>{var t;let{pool:s}=e;return null===(t=P[s])||void 0===t?void 0:t.mint_lpt})).filter((e=>l.account.isAddress(e))),z=Object.values(R).map((e=>{let{mint:t}=e;return t})).filter((e=>!_.includes(e))),E=Pe(u),B=Te(u)||0,N=Pe(j),L=Te(j)||0,M=d&&x&&l.account.isAddress(u)&&l.account.isAddress(j);return(0,i.useEffect)((()=>{if(b&&N){const e=Number(l.utils.undecimalize(d,B))*E/N;return A([0,e])}if(!b&&E){const e=Number(l.utils.undecimalize(x,L))*N/E;return A([e,0])}return A([0,0])}),[b,d,E,B,x,N,L]),(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(a.Button,{type:"primary",icon:(0,h.jsx)(m,{name:"add-outline"}),onClick:()=>s(!t),children:"New"}),(0,h.jsx)(a.Modal,{visible:t,onCancel:()=>{s(!1),p(""),v(""),A([0,0])},closeIcon:(0,h.jsx)(m,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,children:(0,h.jsxs)(a.Row,{gutter:[24,24],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Typography.Title,{level:4,children:"New Pool"})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Typography.Text,{type:"secondary",children:[(0,h.jsx)("strong",{className:"content",children:"Liquidity Provider Incentive."})," ","Liquidity providers earn a 0.25% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Ae,{mintAddresses:z,onChange:e=>{let{amount:t,mintAddress:s}=e;c(t),p(s),C(!0)},suggestion:T[0]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Ae,{mintAddresses:z,onChange:e=>{let{amount:t,mintAddress:s}=e;y(t),v(s),C(!1)},suggestion:T[1]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Button,{type:"primary",onClick:async()=>{try{const{swap:t,splt:n,wallet:r}=window.sentre;if(!r||!l.account.isAddress(k))throw new Error("Wallet is not connected");if(!l.account.isAddress(u)||!l.account.isAddress(j))throw new Error("Please select both tokens");const o=[u,j],a=await Promise.all(o.map((e=>n.deriveAssociatedAddress(k,e)))),{txId:i}=await t.initializePool(d,x,De,_e,k,a[0],a[1],Ie,r);return e.push(`${ze}?${w.wrapTab}=${f.Pools}&${w.tabInPools}=${g.YourPools}`),s(!1),Se("Create a new pool",i)}catch(t){return ke(t)}},disabled:!M,block:!0,children:"Supply"})}),D&&(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Space,{align:"start",children:[(0,h.jsx)(a.Typography.Text,{className:"caption",type:"danger",children:(0,h.jsx)(m,{name:"warning-outline"})}),(0,h.jsx)(a.Typography.Text,{className:"caption",type:"danger",children:"A pool of the desired pair of tokens had already created. We highly recommend to deposit your liquidity to the pool instead."})]})})]})})]})})]})},Be=()=>{const{main:{search:e}}=(0,n.useSelector)((e=>e)),t=(0,n.useDispatch)();return(0,h.jsx)(a.Card,{bodyStyle:{padding:8},bordered:!1,className:"lp-card",children:(0,h.jsx)(a.Input,{placeholder:"Search",value:e,size:"small",bordered:!1,prefix:(0,h.jsx)(a.Button,{type:"text",style:{marginLeft:-7},size:"small",onClick:e?()=>t(Q("")):()=>{},icon:(0,h.jsx)(m,{name:e?"close-outline":"search-outline"})}),onChange:e=>t(Q(e.target.value))})})},Ne=e=>{let{selectedTab:t,handleChange:s,poolsSelected:n,hideHeaderOption:r=!1}=e;return(0,h.jsx)(a.Card,{bordered:!1,bodyStyle:{padding:0},children:(0,h.jsxs)(a.Row,{gutter:[12,24],className:"side-bar",children:[(0,h.jsx)(a.Col,{span:24,style:{display:r?"none":"block"},children:(0,h.jsxs)(a.Row,{gutter:[8,8],wrap:!1,children:[(0,h.jsx)(a.Col,{children:(0,h.jsx)(ge,{})}),(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsxs)(a.Select,{value:t,onChange:s,className:"header-sidebar",children:[(0,h.jsx)(a.Select.Option,{value:g.Sentre,children:"Sentre pools"}),(0,h.jsx)(a.Select.Option,{value:g.YourPools,children:"Your pools"}),(0,h.jsx)(a.Select.Option,{value:g.Community,children:"Community pools"})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsx)(Ee,{})})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Be,{})}),(0,h.jsx)(a.Col,{span:24,className:"body-sidebar scrollbar",id:"scroll-container",children:n})]})})},Le=()=>{const[e,t]=(0,i.useState)({}),s=(0,n.useSelector)((e=>e.lpts)),{pools:o}=(0,r.usePool)(),a=(0,i.useCallback)((()=>{const e={};for(const t in s){const{pool:n,amount:r}=s[t];r>BigInt(0)&&(e[n]=o[n])}return t(e)}),[s,o]);return(0,i.useEffect)((()=>{a()}),[a]),{depositedPools:e}},{route:{myRoute:Me}}=L,Oe=()=>{const e=(0,n.useDispatch)(),t=(0,o.useHistory)(),s=(0,o.useLocation)(),r=(0,i.useMemo)((()=>new URLSearchParams(s.search)),[s]),{main:{selectedPoolAddress:l}}=(0,n.useSelector)((e=>e)),{depositedPools:c}=Le(),{listPoolAddress:u}=re(c),p=ie(u),x=(0,i.useCallback)((s=>(e(G(s)),e(K(!1)),r.set(w.address,s),t.push(`${Me}/${w.details}?${r.toString()}`))),[e,t,r]);(0,i.useEffect)((()=>{e(J(p))}),[e,p]);const y=(0,i.useCallback)((e=>(0,h.jsx)(a.Button,{type:"text",onClick:()=>x(e),icon:(0,h.jsx)(m,{name:"arrow-forward-outline",style:{fontSize:12,color:"#7A7B85"}})})),[x]);return(0,h.jsx)(a.Row,{gutter:[12,12],justify:"center",children:u.length?u.map(((e,t)=>(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(d.ZP,{height:78,overflow:!0,children:(0,h.jsx)(V,{poolAddress:e,action:y(e),onClick:()=>x(e),selected:l===e,myLp:!0})})},e))):(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Empty,{})})})},Ye=()=>{const e=(0,n.useDispatch)(),[t,s]=(0,i.useState)(g.Sentre),{depositedPools:r}=Le(),{listPoolAddress:d}=re(r),[c,u]=(0,i.useState)(f.YourLiquidity),p=(0,o.useLocation)(),x=(0,i.useMemo)((()=>new URLSearchParams(p.search)),[p.search]),m=(0,i.useMemo)((()=>x.get(w.address)||""),[x]),y=(0,i.useMemo)((()=>x.get(w.wrapTab)||""),[x]),j=(0,i.useMemo)((()=>x.get(w.tabInPools)||""),[x]),v=(0,i.useCallback)((async()=>{if(l.account.isAddress(m))return await e(G(m))}),[e,m]),b=e=>{s(e)},C=(0,i.useMemo)((()=>{if(j)for(const e of Re(g))if(g[e]===j)return(0,h.jsx)(xe,{});return t===g.Sentre?(0,h.jsx)(ue,{}):t===g.Community?(0,h.jsx)(de,{}):(0,h.jsx)(xe,{})}),[t,j]);return(0,i.useEffect)((()=>{v()}),[v]),(0,i.useEffect)((()=>{if(y)for(const e of Re(f))if(f[e]===y)return u(f[e]);d.length&&u(f.YourLiquidity),d.length||u(f.Pools)}),[d.length,y]),(0,i.useEffect)((()=>{if(j)for(const e of Re(g))if(g[e]===j)return s(g[e])}),[j]),(0,h.jsx)(a.Row,{gutter:[24,24],justify:"center",className:"list-pool",children:(0,h.jsx)(a.Col,{xs:24,md:12,lg:8,children:(0,h.jsxs)(a.Row,{gutter:[24,24],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Radio.Group,{onChange:e=>u(e.target.value),className:"pool-option",disabled:!d.length,value:c,children:[(0,h.jsx)(a.Radio.Button,{value:f.YourLiquidity,children:"Your liquidity"}),(0,h.jsx)(a.Radio.Button,{value:f.Pools,children:"Pools"})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Tabs,{activeKey:c,centered:!0,children:[(0,h.jsx)(a.Tabs.TabPane,{children:(0,h.jsx)(Ne,{selectedTab:t,handleChange:b,poolsSelected:(0,h.jsx)(Oe,{}),hideHeaderOption:!0})},f.YourLiquidity),(0,h.jsx)(a.Tabs.TabPane,{children:(0,h.jsx)(Ne,{selectedTab:t,handleChange:b,poolsSelected:C})},f.Pools)]})})]})})})};var Fe=s(51518),Ue=s.n(Fe);const{route:{swapRoute:We}}=L,qe=e=>{let{poolAddress:t}=e;const s=(0,o.useHistory)(),{pools:n}=(0,r.usePool)(),i=(null===n||void 0===n?void 0:n[t].state)===y.Frozen,l=e=>s.push({pathname:We,state:{poolAddress:t,originalRoute:e}});return(0,h.jsxs)(a.Row,{gutter:[24,12],style:{width:256},children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Space,{direction:"vertical",size:0,children:[(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(m,{style:{color:"#FA8C16"},name:"alert-circle-outline"}),(0,h.jsx)(a.Typography.Title,{level:5,children:"Choose the route"})]}),(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"We recommend choosing the best route to optimize the price."})]})}),(0,h.jsx)(a.Col,{style:{textAlign:"right"},span:24,children:(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(a.Button,{size:"small",disabled:i,onClick:()=>l(!0),children:"Original route"}),(0,h.jsx)(a.Button,{size:"small",onClick:()=>l(!1),type:"primary",children:"Best route"})]})})]})},He=e=>{let{poolAddress:t}=e;return(0,h.jsx)(a.Popover,{trigger:"click",placement:"bottomLeft",content:(0,h.jsx)(qe,{poolAddress:t}),children:(0,h.jsx)(a.Button,{block:!0,children:"Swap"})})},$e=e=>{let{title:t,label:s,ratio:n,currentRatio:r="0",onChange:o=(()=>{})}=e;return(0,h.jsxs)(a.Row,{gutter:[4,4],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:t})}),(0,h.jsx)(a.Col,{style:{fontSize:12},children:(0,h.jsxs)(a.Space,{size:4,children:[(0,h.jsxs)(a.Typography.Text,{type:"secondary",children:[s,":"]}),(0,h.jsxs)(a.Typography.Text,{children:[r,"%"]})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(we,{placeholder:"0",value:n,onValue:o,size:"large"})})]})},Ve=e=>{let{address:t}=e;const{pools:s}=(0,r.usePool)(),[n,o]=(0,i.useState)(""),[d,u]=(0,i.useState)(""),[p,x]=(0,i.useState)(!1),y=(null===s||void 0===s?void 0:s[t])||{},{fee_ratio:j,tax_ratio:g}=y,f=(0,i.useMemo)((()=>j?l.utils.undecimalize(j,7):"0"),[j]),w=(0,i.useMemo)((()=>g?l.utils.undecimalize(g,7):"0"),[g]);return(0,h.jsxs)(a.Row,{gutter:[16,24],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)($e,{title:"Fee (%)",label:"Current fee",ratio:n,currentRatio:f,onChange:o})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)($e,{title:"Tax (%)",label:"Current tax",ratio:d,currentRatio:w,onChange:u})})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Button,{onClick:async()=>{x(!0);const e=l.utils.decimalize(n||f,7),s=l.utils.decimalize(d||w,7),{swap:r,wallet:a}=window.sentre;if(!a)return;const{txId:i}=await r.updateFee(e,s,t,a);return x(!1),i?(o(""),u(""),window.notify({type:"success",description:"Update fee successfully. Click to view details",onClick:()=>window.open((0,c.kU)(i),"_blank")})):window.notify({type:"error",description:"Update fee make failure."})},icon:(0,h.jsx)(m,{name:"cash-outline"}),block:!0,loading:p,disabled:!d&&!n,children:"Update Fee"})})]})};var Ze;!function(e){e[e.Frozen=2]="Frozen",e[e.Active=1]="Active"}(Ze||(Ze={}));const Ge=e=>{let{poolStatus:t,description:s}=e;const n=t===Ze.Active;return(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Space,{size:0,children:[(0,h.jsx)(a.Badge,{status:n?"success":"error"}),(0,h.jsxs)(a.Typography.Text,{children:["Current status: ",n?"Active":"Frozen"]})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Space,{size:4,align:"start",children:[(0,h.jsx)(m,{name:"information-circle-outline"}),(0,h.jsx)(a.Space,{direction:"vertical",size:0,children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:s})})]})})]})},Ke=e=>{let{address:t}=e;const{pools:s}=(0,r.usePool)(),[n,o]=(0,i.useState)(!1),l=null===s||void 0===s?void 0:s[t],d=(0,i.useMemo)((()=>{const e=null===l||void 0===l?void 0:l.state;return e===Ze.Active?(0,h.jsx)(Ge,{poolStatus:e,description:"Freezing a pool will prevent all actions until the pool has been thawed."}):e===Ze.Frozen?(0,h.jsx)(Ge,{poolStatus:e,description:"Thaw a pool will active all actions"}):"Pool is closed"}),[null===l||void 0===l?void 0:l.state]);return(0,h.jsxs)(a.Row,{gutter:[24,24],children:[(0,h.jsx)(a.Col,{span:24,children:d}),(0,h.jsx)(a.Col,{span:24,children:(null===l||void 0===l?void 0:l.state)===Ze.Active?(0,h.jsx)(a.Button,{style:{background:"#40A9FF",color:"#fff"},onClick:async()=>{o(!0);const{swap:e,wallet:s}=window.sentre;if(!s)return;const{txId:n}=await e.freezePool(t,s);return o(!1),n?window.notify({type:"success",description:"Freeze the pool successfully. Click to view details",onClick:()=>window.open((0,c.kU)(n),"_blank")}):window.notify({type:"error",description:"Freeze the pool make failure."})},icon:(0,h.jsx)(m,{name:"snow-outline"}),block:!0,loading:n,children:"Freeze Pool"}):(0,h.jsx)(a.Button,{type:"primary",onClick:async()=>{o(!0);const{swap:e,wallet:s}=window.sentre;if(!s)return;const{txId:n}=await e.thawPool(t,s);return o(!1),n?window.notify({type:"success",description:"Thaw the pool successfully. Click to view details",onClick:()=>window.open((0,c.kU)(n),"_blank")}):window.notify({type:"error",description:"Thaw the pool make failure."})},icon:(0,h.jsx)(m,{name:"sunny-outline"}),block:!0,loading:n,children:"Thaw Pool"})})]})},Qe=e=>{let{address:t}=e;const[s,n]=(0,i.useState)(""),[r,o]=(0,i.useState)(!1);return(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Space,{align:"start",children:[(0,h.jsx)(m,{name:"information-circle-outline"}),(0,h.jsx)(a.Typography.Text,{children:"Your current account will lose the pool control when you transfer ownership."})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Card,{bodyStyle:{padding:8},style:{background:"transparent",borderRadius:8,boxShadow:"none"},children:(0,h.jsxs)(a.Row,{gutter:[0,0],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Typography.Text,{style:{marginLeft:12,fontSize:12},type:"secondary",children:"Transfer to Owner"})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Input,{placeholder:"E.g. AgTMC...",value:s,onChange:e=>n(e.target.value),bordered:!1})})]})})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Button,{onClick:async()=>{await o(!0);try{const{swap:e,wallet:n}=window.sentre;if(!n)throw new Error("Wallet is not connected.");const{txId:r}=await e.transferPoolOwnership(t,s,n);return window.notify({type:"success",description:"Transfer successfully. Click to view details.",onClick:()=>window.open((0,c.kU)(r),"_blank")})}catch(e){return window.notify({type:"error",description:e.message})}finally{return o(!1)}},icon:(0,h.jsx)(m,{name:"airplane-outline"}),disabled:!l.account.isAddress(s),loading:r,block:!0,children:"Transfer"})})]})},Je=e=>{let{poolAddress:t,visible:s=!1,onClose:n=(()=>{})}=e;return(0,h.jsx)(a.Modal,{visible:s,onCancel:n,centered:!0,closable:!1,footer:!1,style:{minHeight:285},bodyStyle:{padding:0},children:(0,h.jsxs)(a.Tabs,{style:{padding:24},children:[(0,h.jsx)(a.Tabs.TabPane,{tab:"Freeze/Thaw",children:(0,h.jsx)(Ke,{address:t})},"freeze-thaw"),(0,h.jsx)(a.Tabs.TabPane,{tab:"Fee",children:(0,h.jsx)(Ve,{address:t})},"fee"),(0,h.jsx)(a.Tabs.TabPane,{tab:"Transfer Owner",children:(0,h.jsx)(Qe,{address:t})},"transfer-owner")]})})},{route:{farmRoute:Xe}}=L,et=e=>{let{poolAddress:t}=e;const[s,n]=(0,i.useState)(!1),[l,d]=(0,i.useState)(!1),u=(0,o.useHistory)(),{pools:p}=(0,r.usePool)(),{wallet:{address:x}}=(0,r.useWallet)(),{mint_lpt:y,owner:j}=(null===p||void 0===p?void 0:p[t])||{},g=(0,i.useCallback)((()=>u.push(`${Xe}?search=${t}`)),[u,t]),f=x===j;return(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsxs)(a.Space,{children:[(0,h.jsxs)(a.Space,{size:4,children:[(0,h.jsx)(T,{mintAddress:y,size:32}),(0,h.jsx)(a.Typography.Title,{level:5,children:(0,h.jsx)(R,{mintAddress:y})})]}),(0,h.jsx)(a.Popover,{placement:"bottom",content:(0,h.jsxs)(a.Space,{align:"center",children:[(0,h.jsx)(a.Tooltip,{title:"Copied",visible:s,arrowPointAtCenter:!0,children:(0,h.jsx)(Ue(),{text:t,children:(0,h.jsx)(a.Button,{type:"text",size:"small",icon:(0,h.jsx)(m,{name:"copy-outline"}),onClick:async()=>{n(!0),await(0,c.sA)(1500),n(!1)}})})}),(0,h.jsxs)(a.Space,{direction:"vertical",size:4,children:[(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"PoolAddress"}),(0,h.jsx)(a.Typography.Text,{style:{wordBreak:"break-all"},children:t})]})]}),children:(0,h.jsx)(a.Button,{type:"text",icon:(0,h.jsx)(m,{name:"alert-circle-outline"})})})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{children:[f&&(0,h.jsx)(a.Button,{onClick:()=>d(!0),children:"Management"}),(0,h.jsx)(He,{poolAddress:t}),(0,h.jsx)(a.Button,{onClick:g,children:"Go Farming"})]})}),(0,h.jsx)(Je,{poolAddress:t,visible:l,onClose:()=>d(!1)})]})};var tt=s(4550),st=s.n(tt),nt=s(76907),rt=s.n(nt),ot=s(21111),at=s.n(ot);const it=e=>{let{chartData:t=[],labels:s=[],type:n="line",configs:r,disableAxe:o=!1,chartId:a="sen_chart"}=e;const{backgroundColor:l}=r||{},[d,u]=(0,i.useState)(!1),p=(0,i.useCallback)(((e,t,s)=>({labels:t,datasets:[{...r,data:e,backgroundColor:s}]})),[r]),x=(0,i.useRef)(null),m=(0,i.useCallback)((()=>{var e,t;if(!x||!l)return"#dadada";const s=null===x||void 0===x||null===(e=x.current)||void 0===e||null===(t=e.canvas)||void 0===t?void 0:t.getContext("2d"),r=null===s||void 0===s?void 0:s.createLinearGradient(0,0,0,270);null===r||void 0===r||r.addColorStop(0,l),null===r||void 0===r||r.addColorStop(1,`${l}00`);return"line"===n?r:l}),[l,n]);return(0,i.useEffect)((()=>{var e;const n=x.current,r=null===n||void 0===n||null===(e=n.data.datasets)||void 0===e?void 0:e.find((e=>{let{data:t}=e;return t})),o=at()(null===r||void 0===r?void 0:r.data,t);n&&!o&&(n.data=p(t,s,m()),null===n||void 0===n||n.update())}),[t,p,m,s]),(0,h.jsx)("canvas",{id:a,height:"270",ref:e=>{if(!e)return;const t=e.getContext("2d");t&&!d&&(x.current=new(rt())(t,{type:n,data:{labels:[],datasets:[{data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o}}],yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!o,beginAtZero:!1,maxTicksLimit:8,callback:function(e,t,s){return(0,c.uR)(e).format("0,0.[0]a")}}}]},plugins:{legend:!1},hover:{onHover:(e,t)=>{const s=document.getElementById(a);s&&(s.style.cursor=t[0]?"pointer":"default")}}}}),u(!0))}})};class lt{constructor(){this.programId="",this.time=0,this.address="",this.mint="",this.actionType="",this.amountIn=BigInt(0),this.amountOut=BigInt(0),this.totalTrans=0}}class dt{parserDailyReport(e){let t=new Array;for(const s of e)t=t.concat(this.parseDailyReport(s));return this.mergeDailyReport(t)}parseDailyReport(e){const t=new Array,{programId:s,time:n,actionType:r,actionTransfers:o}=e;for(const a of o){const{source:e,destination:o,amount:i}=a,l=new lt;if(l.programId=s,l.time=n,l.actionType=r,e){const{mint:s,address:n}=e;t.push({...l,mint:s,address:n,amountOut:BigInt(i)})}if(o){const{mint:e,address:s}=o;t.push({...l,mint:e,address:s,amountIn:BigInt(i)})}}return t}mergeDailyReport(e){const t=new Map;for(const n of e){const e=`${n.time}^${n.address}^${n.mint}^${n.actionType}`;if(t.has(e)){const s=t.get(e);void 0!==s&&(n.amountIn+=s.amountIn,n.amountOut+=s.amountOut,n.totalTrans+=s.totalTrans)}t.set(e,n)}const s=new Array;return t.forEach((e=>s.push(e))),s}}var ct=s(3007),ut=s(68532),ht=s.n(ut);class pt{constructor(){this.programId="",this.programInfo=void 0,this.signature="",this.blockTime=0,this.time=0,this.owner="",this.actionType="",this.actionTransfers=[],this.programTransfer=[]}}class xt{constructor(){this.address="",this.mint="",this.decimals=0,this.preBalance="0",this.postBalance="0"}}class mt{constructor(){this.source=void 0,this.destination=void 0,this.amount="0"}}var yt=s(71256);const jt=700;class gt{constructor(){this.conn=window.sentre.splt.connection}async fetchSignatures(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jt;s>jt&&(s=jt);const n={limit:s,before:t};return this.conn.getConfirmedSignaturesForAddress2(e,n)}async fetchConfirmTransaction(e){let t=[];const s=[];for(let r=0;r<=e.length/200;r++){const t=200*r,n=e.slice(t,t+200);s.push(this.conn.getParsedConfirmedTransactions(n))}const n=await Promise.all(s);for(const r of n)t=t.concat(r);return t}async fetchTransactions(e,t){const s=(new Date).getTime()/1e3;let{secondFrom:n,secondTo:r,lastSignature:o,limit:a}=t;n=Math.floor(n||0),r=Math.floor(r||s);const i=new yt.PublicKey(e);let l=[],d=!1;for(;!d;){const e=await this.fetchSignatures(i,o,a);if(null===e||void 0===e||!e.length||d)break;for(const t of e){const e=t.blockTime;if(e&&!(e>r)){if(e<n){d=!0;break}o=t.signature,l.push(t.signature)}}if(a&&l.length>=a)break;if((null===e||void 0===e?void 0:e.length)<jt)break}return await this.fetchConfirmTransaction(l)}}let ft;!function(e){e.Transfer="transfer"}(ft||(ft={}));const wt=1e3;let vt;!function(e){e.YMD="YYYYMMDD",e.SortableTimePattern="YYYY-MM-DD HH:mm:ss"}(vt||(vt={}));class bt{constructor(){this.milliSeconds=(new Date).valueOf()}setMilliSeconds(e){this.milliSeconds=e}static fromSeconds(e){const t=new bt,s=e*wt;return t.setMilliSeconds(s),t}static fromYmd(e){const t=new bt,s=st()(e,vt.YMD).valueOf();return t.setMilliSeconds(s),t}static getListDate(e,t){const s=[];let n=bt.fromYmd(e);const r=bt.fromYmd(t);for(;n.ymd()<=r.ymd();)s.push(n.ymd()),n=n.addDay();return s}format(e){const t=new Date(this.milliSeconds);return st()(t).format(e)}subtractDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=st()(this.milliSeconds).subtract(e,"days").valueOf();return bt.fromSeconds(t/wt)}addDay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=st()(this.milliSeconds).add(e,"days").valueOf();return bt.fromSeconds(t/wt)}seconds(){return(this.milliSeconds-this.milliSeconds%wt)/wt}ymd(){return Number(this.format(vt.YMD))}static today(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt.YMD;return st()().format(e)}}var Ct=s(97429).Buffer;const{struct:Tt}=s(70320),At={key:"code",type:"u8"};let St;!function(e){e.InitPool="INITIALIZE_POOL",e.AddLiquidity="ADD_LIQUIDITY",e.RemoveLiquidity="REMOVE_LIQUIDITY",e.Swap="SWAP",e.Route="SWAP"}(St||(St={}));const kt={0:St.InitPool,1:St.AddLiquidity,10:St.AddLiquidity,2:St.RemoveLiquidity,3:St.Swap,8:St.Route};class Rt extends class{constructor(){this.parseAction=e=>""}async collect(e,t,s){let{lastSignature:n,limit:r}=t;const o=new gt;let a=[],i=n,l=!1,d=200;for(;!l;){const n=await o.fetchTransactions(e,{...t,lastSignature:i,limit:d});for(const e of n){i=e.transaction.signatures[0];const t=this.parseTransLog(e);if(t){if(s){if(!await s(t))continue}if(a.push(t),r&&a.length>=r){l=!0;break}}}if(r&&(d=d*r/(a.length||1)),!n.length)break;if(l)break}return a}parseTransLog(e){var t,s;const{blockTime:n,meta:r,transaction:o}=e;if(!n||!r)return;const{postTokenBalances:a,preTokenBalances:i,postBalances:l,preBalances:d}=r,{signatures:c,message:u}=o,h=(null===(t=r.innerInstructions)||void 0===t||null===(s=t[0])||void 0===s?void 0:s.instructions)||[],p=u.instructions[0]||[],x=new pt;x.signature=c[0],x.blockTime=n,x.time=bt.fromSeconds(n).ymd(),x.programId=p.programId.toString();const m=this.parseAccountInfo(u.accountKeys,a||[],i||[],l,d);return this.isParsedInstruction(p)?(x.programTransfer=this.parseListActionTransfer([p],m),x):(x.actionTransfers=this.parseListActionTransfer(h,m),x.programInfo={programId:p.programId.toString(),data:p.data},x.actionType=this.parseAction(x),x)}isParsedInstruction(e){return void 0!==e.parsed}parseListActionTransfer(e,t){const s=[];for(const n of e){if(!this.isParsedInstruction(n))continue;const e=n.parsed||{};if(e.type===ft.Transfer){const n=e.info,r=this.parseActionTransfer(n,t);r&&s.push(r)}}return s}parseActionTransfer(e,t){const{source:s,destination:n,amount:r,lamports:o}=e,a=r||o.toString();if(!a||!t.has(s)||!t.has(n))return;const i=new mt;return i.source=t.get(s),i.destination=t.get(n),i.amount=a,i}parseAccountInfo(e,t,s,n,r){const o=new Map;for(const a of t){const{accountIndex:t,mint:s,uiTokenAmount:n}=a,r=new xt;r.address=e[t].pubkey.toString(),r.postBalance=n.amount,r.mint=s,r.decimals=n.decimals,o.set(r.address,r)}for(const a of s){const{accountIndex:t,uiTokenAmount:s}=a,n=e[t].pubkey.toString(),r=o.get(n)||new xt;r.preBalance=s.amount,o.set(r.address,r)}return e.forEach(((e,t)=>{const s=e.pubkey.toString();if(!l.account.isAssociatedAddress(s)){const e=o.get(s)||new xt;e.address=s,e.mint="11111111111111111111111111111111",e.postBalance=String(n[t]||0),e.preBalance=String(r[t]||0),e.decimals=9,o.set(e.address,e)}})),o}}{constructor(){super(...arguments),this.parseAction=e=>{var t;const s=null===(t=e.programInfo)||void 0===t?void 0:t.data;if(!s)return"";const n=ht().decode(s),r=new Tt([At]).fromBuffer(Ct.from(n));return kt[r.code]||""}}}var Pt=s(11503);class It{constructor(e){this.poolAddress=void 0,this.poolData=void 0,this.poolTransLogService=new Rt,this.dailyReportService=new dt,this.tokenProvider=new Pt.Z,this.getPoolData=async()=>{if(!this.poolData){const e=window.sentre.swap;this.poolData=await e.getPoolData(this.poolAddress)}return this.poolData},this.getUsd=async(e,t)=>{const s=await this.tokenProvider.findByAddress(e);if(!s)return 0;const{decimals:n,extensions:r}=s;try{const e=await(0,c.l$)(null===r||void 0===r?void 0:r.coingeckoId);if(null===e||void 0===e||!e.price)return 0;const s=l.utils.undecimalize(t,n);return Number(s)*e.price}catch(o){return 0}},this.fetchTransLog=async(e,t)=>{const s=new ct.Z(this.poolAddress).createInstance("stat");let n=await s.getItem("translogs")||[];n=n.sort(((e,t)=>t.blockTime-e.blockTime));const r=n[0],o=n[n.length-1];if(r&&o){const[s]=await Promise.all([this.poolTransLogService.collect(this.poolAddress,{secondFrom:r.blockTime,secondTo:t})]);n=n.filter((t=>t.blockTime>e)),n=[...s,...n]}else n=await this.poolTransLogService.collect(this.poolAddress,{secondFrom:e,secondTo:t});return await s.setItem("translogs",n),n},this.getDailyInfo=async()=>{let e=new bt;const t=(new bt).subtractDay(11),{mint_a:s,mint_b:n,treasury_a:r,treasury_b:o,reserve_a:a,reserve_b:i,fee_ratio:d,tax_ratio:c}=await this.getPoolData(),u=await this.fetchTransLog(t.seconds(),e.seconds()),h=this.dailyReportService.parserDailyReport(u),p={};for(const l of h){const{time:e,address:t}=l;t!==r&&t!==o||(p[e]||(p[e]=[]),p[e].push(l))}const x=await this.getUsd(s,a),m=await this.getUsd(n,i),y={};for(y[e.ymd()]={tvl:x+m,fee:0,volume:0};e.ymd()>t.ymd();){const s=p[e.ymd()]||[],n=y[e.ymd()],r=e.subtractDay(1);!y[r.ymd()]&&r.ymd()>=t.ymd()&&(y[r.ymd()]={tvl:n.tvl,fee:0,volume:0});for(const t of s){const s=await this.getUsd(t.mint,t.amountOut),n=await this.getUsd(t.mint,t.amountIn);if(y[r.ymd()]&&(y[r.ymd()].tvl+=s-n,y[r.ymd()].tvl<0&&(y[r.ymd()].tvl=0)),t.actionType===St.Swap){y[e.ymd()].volume+=n+s;const t=Number(l.utils.undecimalize(d+c,9))*s;y[e.ymd()].fee+=t}}e=e.subtractDay(1)}return y},this.poolAddress=e}}var Dt=s(57452);const _t="#40A9FF",zt=0,Et=14,Bt="TVL",Nt="transparent",Lt=()=>{const{selectedPoolAddress:e}=(0,n.useSelector)((e=>e.main)),[t,s]=(0,i.useState)([]),[o,l]=(0,i.useState)(!1),[d,u]=(0,i.useState)(!0),{ui:{width:p}}=(0,r.useUI)(),x={borderColor:Nt,borderRadius:zt,pointRadius:zt,tooltip:Bt,pointHitRadius:Et,pointHoverRadius:zt,backgroundColor:_t},y=(0,i.useCallback)((async()=>{if(e)try{l(!0);const t=new It(e),n=await Dt.R.load("getDailyInfo"+e,t.getDailyInfo,{cache:{ttl:3e5}}),r=Object.keys(n).map((e=>({data:n[e].volume,label:st()(e,"YYYYMMDD").format("MM/DD")})));s(r)}catch(t){}finally{l(!1)}}),[e]);(0,i.useEffect)((()=>{y()}),[y]);const j=d?"chevron-down-outline":"chevron-forward-outline",g=p<768;(0,i.useEffect)((()=>u(!g)),[g]);const f=(0,i.useMemo)((()=>{var e,s;const n=(null===(e=t[t.length-1])||void 0===e?void 0:e.data)||0,r=(null===(s=t[t.length-2])||void 0===s?void 0:s.data)||0;return n+(new Date).getHours()*r/24}),[t]);return(0,h.jsx)(a.Card,{bordered:!1,style:{height:"100%"},children:(0,h.jsx)(a.Spin,{tip:"Loading...",spinning:o,children:(0,h.jsxs)(a.Row,{gutter:[24,24],align:"middle",children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Title,{level:4,children:"24h Volume"})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{children:[(0,h.jsxs)(a.Typography.Title,{level:2,children:["$",(0,c.uR)(f).format("0,0.[0]a")]}),g&&(0,h.jsx)(a.Button,{type:"text",shape:"circle",icon:(0,h.jsx)(m,{name:j}),onClick:()=>u(!d)})]})}),d&&(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(it,{type:"bar",chartData:t.map((e=>e.data)),labels:t.map((e=>e.label)),configs:x})})]})})})},Mt=e=>{let{poolAddress:t,reversed:s=!1}=e;const{pools:n}=(0,r.usePool)(),{mint_a:o,mint_b:i,reserve_a:d,reserve_b:u,mint_lpt:p}=n[t]||{},x=Te(o)||0,m=Te(i)||0,y=Number(l.utils.undecimalize(d,x)),j=Number(l.utils.undecimalize(u,m)),g=j?y/j:0,f=y?j/y:0;return(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(a.Typography.Text,{children:(0,c.uR)(s?f:g).format("0,0.[0000]")}),(0,h.jsx)(R,{mintAddress:p,reversed:s,separator:" / "})]})},Ot=e=>{let{poolAddress:t}=e;const{pools:s}=(0,r.usePool)(),[n,o]=(0,i.useState)(!0),{mint_lpt:l}=s[t]||{};return(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(T,{mintAddress:l,reversed:n}),(0,h.jsx)(Mt,{poolAddress:t,reversed:n}),(0,h.jsx)(a.Button,{type:"text",onClick:()=>o(!n),icon:(0,h.jsx)(m,{name:"swap-horizontal-outline"})})]})},Yt=e=>{let{label:t="label",title:s="",subTitle:n=null}=e;return(0,h.jsxs)(a.Space,{direction:"vertical",size:4,children:[(0,h.jsx)(a.Typography.Text,{className:"caption",type:"secondary",children:t}),(0,h.jsx)("span",{children:s}),n&&(0,h.jsx)(a.Typography.Text,{type:"secondary",children:n})]})},Ft=e=>{let{value:t=0,sub:s="",format:n=""}=e;return(0,h.jsxs)(a.Space,{size:4,align:"baseline",children:[(0,h.jsx)(a.Typography.Title,{level:4,children:(0,c.uR)(t).format(n)}),s&&(0,h.jsx)(a.Typography.Text,{className:"caption",type:"secondary",children:s})]})},Ut=e=>{let{poolAddress:t}=e;const[s,o]=(0,i.useState)(0),d=(0,n.useSelector)((e=>e.lpts)),u=(0,n.useSelector)((e=>{var s,n,r;return null===(s=e.stat)||void 0===s||null===(n=s[t])||void 0===n||null===(r=n.details)||void 0===r?void 0:r.roi})),{getMint:p}=(0,r.useMint)(),{pools:x}=(0,r.usePool)(),{mint_lpt:m}=x[t]||{},y=Object.keys(d).find((e=>d[e].pool===t))||"",{amount:j}=d[y]||{},g=Number(l.utils.undecimalize(j||BigInt(0),9)),f=(0,i.useCallback)((e=>u&&e?Math.pow(u/100+1,e)-1:0),[u]);return(0,i.useEffect)((()=>{(async()=>{if(!l.account.isAddress(m))return 0;const{[m]:{decimals:e,supply:t}}=await p({address:m});o(Number(l.utils.undecimalize(t,e)))})()}),[p,m]),(0,h.jsxs)(a.Row,{gutter:[20,20],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Yt,{label:"APY",title:(0,h.jsx)(Ft,{value:f(365),format:"0,0.[00]%"})})}),(0,h.jsx)(a.Col,{xs:12,children:(0,h.jsx)(Yt,{label:"My Portion",title:(0,h.jsx)(Ft,{value:g/s,format:"0,0.[00]%"}),subTitle:`Over ${(0,c.uR)(s).format("0,0.[0000]a")} LP`})}),(0,h.jsx)(a.Col,{xs:12,children:(0,h.jsx)(Yt,{label:"My Contribution",title:(0,h.jsx)(Ft,{value:g,sub:"LP",format:"0,0.[0000]a"})})}),(0,h.jsx)(a.Col,{xs:24,children:(0,h.jsx)(Yt,{label:"In-Pool Price",title:(0,h.jsx)(Ot,{poolAddress:t})})})]})},Wt=()=>{const{main:{selectedPoolAddress:e}}=(0,n.useSelector)((e=>e)),[t,s]=(0,i.useState)(!0),{ui:{width:l}}=(0,r.useUI)(),d=(0,o.useLocation)(),c=(0,i.useMemo)((()=>new URLSearchParams(d.search)),[d]).get(w.address)||""||e,u=t?"chevron-down-outline":"chevron-forward-outline",x=l<768;return(0,i.useEffect)((()=>s(!x)),[x]),(0,h.jsx)(a.Card,{bordered:!1,style:{height:"100%"},children:(0,h.jsxs)(a.Row,{gutter:[24,24],align:"middle",children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Title,{level:4,children:"Total Value Locked"})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{size:0,children:[(0,h.jsx)(a.Typography.Title,{level:2,children:(0,h.jsx)(p,{poolAddress:c})}),x&&(0,h.jsx)(a.Button,{type:"text",shape:"circle",icon:(0,h.jsx)(m,{name:u}),onClick:()=>s(!t)})]})}),t&&(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Ut,{poolAddress:c})})]})})},qt=e=>{var t;let{value:s="0",poolAddress:o}=e;const[d,u]=(0,i.useState)(!1),[p,x]=(0,i.useState)("0"),{lpts:y}=(0,n.useSelector)((e=>e)),{getMint:j}=(0,r.useMint)(),{pools:g}=(0,r.usePool)(),{mint_a:f,mint_b:w,reserve_a:v,reserve_b:b,mint_lpt:C}=g[o]||{},T=Te(f)||0,A=Te(w)||0,S=l.utils.undecimalize(v,T),k=l.utils.undecimalize(b,A),P=(null===(t=Object.keys(y))||void 0===t?void 0:t.find((e=>y[e].pool===o)))||"",{amount:I}=y[P]||{},D=Number(l.utils.undecimalize(I||BigInt(0),9));return(0,i.useEffect)((()=>{l.account.isAddress(C)&&(async()=>{const{[C]:{supply:e,decimals:t}}=await j({address:C});x(l.utils.undecimalize(e,t))})()}),[C,j]),(0,h.jsx)(a.Card,{bordered:!1,className:"deposit-card",children:(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"In-Pool Price"})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(a.Button,{type:"text",style:{width:"auto",height:"auto"},icon:(0,h.jsx)(m,{name:"swap-horizontal-outline"}),onClick:()=>u(!d)}),(0,h.jsx)(Mt,{poolAddress:o,reversed:d})]})})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"Pool Composition"})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{size:4,children:[(0,h.jsxs)(a.Typography.Text,{children:[(0,c.uR)(S).format("0,0.[00]a")," ",(0,h.jsx)(R,{mintAddress:f})]}),(0,h.jsx)(a.Typography.Title,{level:5,children:" + "}),(0,h.jsxs)(a.Typography.Text,{children:[(0,c.uR)(k).format("0,0.[00]a")," ",(0,h.jsx)(R,{mintAddress:w})]})]})})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"My Current LP"})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Typography.Text,{children:[(0,c.uR)(D).format("0,0.[0000]")," LP"]})})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[8,8],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"Total LP"})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Typography.Text,{children:[(0,c.uR)(p).format("0,0.[0000]")," LP"]})})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"You will reveice"})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{size:4,children:[(0,h.jsx)(a.Typography.Title,{level:5,children:(0,c.uR)(s).format("0,0.[0000]")}),(0,h.jsx)(a.Typography.Title,{level:5,children:"LP"})]})})]})})]})})},Ht=e=>{let{mintAddress:t,onChange:s,value:n}=e;const[o,d]=(0,i.useState)(""),[u,p]=(0,i.useState)(""),{wallet:{address:x}}=(0,r.useWallet)(),{accounts:m}=(0,r.useAccount)(),y=Te(t)||0,j=null===m||void 0===m?void 0:m[u],g=(0,i.useMemo)((()=>{const{amount:e}=j||{};return e&&y&&l.utils.undecimalize(e,y)||"0"}),[j,y]),f=(0,i.useCallback)((async e=>(await d(e),y&&parseFloat(e)?s(l.utils.decimalize(e,y)):s(BigInt(0)))),[y,s]),w=(0,i.useCallback)((()=>{const e=l.utils.undecimalize(n,y||0);Number(e)!==Number(o)&&d(e)}),[y,n]),v=(0,i.useCallback)((async()=>{const{splt:e}=window.sentre;try{const s=await l.account.deriveAssociatedAddress(x,t,e.spltProgramId.toBase58(),e.splataProgramId.toBase58());p(s)}catch(s){}}),[t,x]);(0,i.useEffect)((()=>{v()}),[v]),(0,i.useEffect)((()=>{w()}),[w]);const b=Number(o)>Number(g);return(0,h.jsxs)(a.Row,{gutter:[4,4],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(we,{placeholder:"0",value:o,onValue:f,size:"large",prefix:(0,h.jsxs)(a.Space,{style:{marginLeft:-4,marginRight:7,lineHeight:1},children:[(0,h.jsx)(T,{mintAddress:t}),(0,h.jsx)(a.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,h.jsx)(a.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>f(g),children:"MAX"}),max:g})}),(0,h.jsx)(a.Col,{flex:"auto",children:b&&(0,h.jsx)(a.Typography.Text,{style:{fontSize:12},type:"danger",children:"Not enough balance."})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",(0,c.uR)(g).format("0,0.[0000]")," ",(0,h.jsx)(R,{mintAddress:t})]})})]})},$t=e=>{let{poolAddress:t,onClose:s=(()=>{}),onChange:n=(()=>{})}=e;const[o,d]=(0,i.useState)(!1),[u,p]=(0,i.useState)(""),[x,m]=(0,i.useState)([BigInt(0),BigInt(0)]),[y,j]=(0,i.useState)("all"),[g,f]=(0,i.useState)(!0),{pools:w}=(0,r.usePool)(),{wallet:{address:v}}=(0,r.useWallet)(),{getMint:b}=(0,r.useMint)(),{accounts:C}=(0,r.useAccount)(),{mint_a:T,mint_b:A,reserve_a:S,reserve_b:k,mint_lpt:P,fee_ratio:I,tax_ratio:D}=w[t]||{},_=[T,A],z=Te(T)||0,E=Te(A)||0,B=(0,i.useMemo)((()=>[z,E]),[z,E]),N=(0,i.useMemo)((()=>Number(l.utils.undecimalize(S,z))/Number(l.utils.undecimalize(k,E))),[z,E,S,k]),L=(0,i.useCallback)(((e,t)=>{if(!B)return BigInt(0);const s=0===t?B[1]:B[0],n=Number(l.utils.undecimalize(e,B[t]));let r=n*N;return 0===t&&(r=n/N),l.utils.decimalize(r,s)}),[B,N]),M=(0,i.useCallback)((async()=>{if(!l.account.isAddress(v)||!l.account.isAddress(P))return p("");try{const{[P]:{supply:e}}=await b({address:P}),{lpt:t}=l.Swap.oracle.sided_deposit(x[0],x[1],S,k,e,I,D);return p(l.utils.undecimalize(t,9))}catch(e){window.notify({type:"error",description:e.message})}}),[x,I,b,P,S,k,D,v]);(0,i.useEffect)((()=>{M()}),[M]),(0,i.useEffect)((()=>{m([BigInt(0),BigInt(0)])}),[y]);const O=(0,i.useCallback)((async()=>{const{splt:e}=window.sentre;if(!T||!A)return!1;const t=await e.deriveAssociatedAddress(v,T),s=C[t],n=await e.deriveAssociatedAddress(v,A),r=C[n],o=(null===s||void 0===s?void 0:s.amount)||0,a=(null===r||void 0===r?void 0:r.amount)||0,i=x[0]>o||x[1]>a;f(i)}),[C,x,T,A,v]);(0,i.useEffect)((()=>{O()}),[O]);return(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Radio.Group,{onChange:e=>{var t;j((t=e).target.value),n(t.target.value)},value:y,children:[(0,h.jsx)(a.Radio,{value:"all",children:(0,h.jsxs)(a.Space,{size:4,children:[(0,h.jsx)(R,{mintAddress:P,separator:"+"}),(0,h.jsx)(a.Tag,{className:"deposit-tag",children:"0 Fee"})]})}),null===_||void 0===_?void 0:_.map(((e,t)=>(0,h.jsx)(a.Radio,{value:e,children:(0,h.jsx)(R,{mintAddress:e})},`${e}${t}`)))]})}),null===_||void 0===_?void 0:_.map(((e,t)=>(e===y||"all"===y)&&(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Ht,{mintAddress:e,value:x[t],onChange:t=>((e,t)=>{if(!l.account.isAddress(e)||!t)return m([BigInt(0),BigInt(0)]);const s=_.findIndex((t=>t===e));if(-1===s)return;let n=[...x];"all"===y&&(n[0]=n[1]=L(t,s)),n[s]=t,m(n)})(e,t)})},`${e}_${t}`))),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(qt,{value:u,poolAddress:t})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Button,{type:"primary",onClick:async()=>{d(!0);const{splt:e,swap:n,wallet:r}=window.sentre,[o,a]=await Promise.all(_.map((t=>e.deriveAssociatedAddress(v,t))));if(r)try{const{txId:e}=await n.addSidedLiquidity(x[0],x[1],t,o,a,r);return s(),window.notify({type:"success",description:"Deposit liquidity successfully. Click to view details.",onClick:()=>window.open((0,c.kU)(e),"_blank")})}catch(i){return window.notify({type:"error",description:i.message})}finally{d(!1)}},disabled:!Number(u)||g,block:!0,loading:o,children:"Deposit"})})]})},Vt=e=>{let{poolAddress:t,onClose:s=(()=>{})}=e;const{pools:n}=(0,r.usePool)(),[o,d]=(0,i.useState)("all"),{fee_ratio:c,tax_ratio:u}=(null===n||void 0===n?void 0:n[t])||{},p=c||BigInt(0),x=u||BigInt(0),m=l.utils.undecimalize(p+x,7),y="all"!==o,j=y?"#F9575E":"inherit",g=y?void 0:"secondary";return(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Typography.Title,{level:5,children:"Deposit Liquidity"})}),(0,h.jsxs)(a.Col,{span:24,children:[(0,h.jsxs)(a.Typography.Paragraph,{type:"secondary",children:[(0,h.jsx)("strong",{children:"Liquidity provider incentive."})," Liquidity providers earn a ",m,"% fee on all trades proportional to their share of the pool. Fees are accrued into the pool and can be claimed by withdrawing your liquidity."]}),(0,h.jsxs)(a.Typography.Paragraph,{type:g,children:[(0,h.jsx)("strong",{style:{color:j},children:"Asymmetric Deposit."})," ","Instead of depositing amounts of tokens proportionally, Asymmetric Deposit allows you to deposit even one side of token. The pool will automatically re-balance itself."]})]}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)($t,{poolAddress:t,onClose:s,onChange:d})})]})},Zt=e=>{let{lpt:t,lptAddress:s,onChange:o}=e;const d=(0,n.useSelector)((e=>e.lpts)),{pools:u}=(0,r.usePool)(),{amount:p,pool:x}=(null===d||void 0===d?void 0:d[s])||{},{mint_lpt:m}=(null===u||void 0===u?void 0:u[x])||{},y=(0,i.useMemo)((()=>p&&l.utils.undecimalize(p,9)||"0"),[p]),j=(0,i.useCallback)((async e=>parseFloat(e)?o(l.utils.decimalize(e,9)):o(BigInt(0))),[o]),g=(0,i.useMemo)((()=>l.utils.undecimalize(t,9)),[t]);return(0,h.jsxs)(a.Row,{gutter:[4,4],justify:"end",children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(we,{placeholder:"Amount of LP",value:g,onValue:j,size:"large",prefix:(0,h.jsxs)(a.Space,{style:{marginLeft:-7,marginRight:7,fontSize:12,lineHeight:1},children:[(0,h.jsx)(T,{mintAddress:m,size:24}),(0,h.jsx)(a.Typography.Text,{children:(0,h.jsx)(S,{mintAddress:m})}),(0,h.jsx)(a.Divider,{type:"vertical",style:{margin:0}})]}),suffix:(0,h.jsx)(a.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>j(y),children:"MAX"}),max:y})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Typography.Text,{style:{fontSize:12},type:"secondary",children:["Available: ",(0,c.uR)(y).format("0,0.[0000]")," LPT"]})})]})},Gt=e=>{let{mintAddresses:t,amounts:s}=e;return(0,h.jsx)(a.Card,{bordered:!1,className:"deposit-card",children:(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Typography.Text,{children:"You will receive"})}),t.map(((e,t)=>(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[8,8],justify:"space-between",align:"middle",children:[(0,h.jsx)(a.Col,{children:(0,h.jsx)(T,{mintAddress:e,size:32})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Typography.Title,{level:5,style:{margin:0},children:[(0,c.uR)(s[t]||0).format("0,0.[0000]")," ",(0,h.jsx)(R,{mintAddress:e})]})})]})},t)))]})})},Kt=e=>{var t;let{poolAddress:s,onClose:o=(()=>{})}=e;const[d,u]=(0,i.useState)(BigInt(0)),[p,x]=(0,i.useState)(),[m,y]=(0,i.useState)([]),[j,g]=(0,i.useState)([0,0]),[f,w]=(0,i.useState)(!1),v=(0,n.useSelector)((e=>e.lpts)),b=Object.keys(v).find((e=>v[e].pool===s))||"",C=null===v||void 0===v||null===(t=v[b])||void 0===t?void 0:t.pool,{wallet:{address:T}}=(0,r.useWallet)(),{pools:A}=(0,r.usePool)(),{getMint:S}=(0,r.useMint)(),{mint_a:k,mint_b:R,mint_lpt:P,reserve_a:I,reserve_b:D}=(null===A||void 0===A?void 0:A[C])||{},_=[k,R],z=(0,i.useCallback)((async()=>{try{const{[P]:{supply:e}}=await S({address:P});x(e)}catch(e){}try{const{[k]:{decimals:e}}=await S({address:k}),{[R]:{decimals:t}}=await S({address:R});g([e,t])}catch(e){}}),[k,R,P,S]);return(0,i.useEffect)((()=>{if(p){const{deltaA:e,deltaB:t}=l.Swap.oracle.withdraw(d,p,I,D),s=[e,t].map(((e,t)=>l.utils.undecimalize(e,j[t])));y(s)}else y([])}),[I,D,d,p,j]),(0,i.useEffect)((()=>{z()}),[z]),(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Typography.Title,{level:5,children:"Withdraw Liquidity"})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Zt,{lpt:d,lptAddress:b,onChange:u})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Gt,{mintAddresses:_,amounts:m})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Button,{type:"primary",onClick:async()=>{if(!d)return;w(!0);const{swap:e,wallet:t,splt:n}=window.sentre,r=await Promise.all(_.map((e=>n.deriveAssociatedAddress(T,e))));if(t)try{const{txId:n}=await e.removeLiquidity(d,s,r[0],r[1],t);return u(BigInt(0)),window.notify({type:"success",description:"Withdraw liquidity successfully. Click to view details.",onClick:()=>window.open((0,c.kU)(n),"_blank")})}catch(o){return window.notify({type:"error",description:o.message})}finally{w(!1)}},disabled:!d,block:!0,loading:f,children:"Withdraw"})})]})},Qt={width:"33%"};let Jt;!function(e){e[e.SEVEN_DAYS=7]="SEVEN_DAYS",e[e.THIRTY_DAYS=30]="THIRTY_DAYS",e[e.NINETY_DAYS=90]="NINETY_DAYS"}(Jt||(Jt={}));const Xt=e=>{let{onChange:t}=e;return(0,h.jsxs)(a.Radio.Group,{onChange:t,style:{width:"100%",textAlign:"center"},defaultValue:Jt.SEVEN_DAYS,children:[(0,h.jsxs)(a.Radio.Button,{style:Qt,value:Jt.SEVEN_DAYS,children:["Past ",Jt.SEVEN_DAYS," days"]}),(0,h.jsxs)(a.Radio.Button,{style:Qt,value:Jt.THIRTY_DAYS,children:["Past ",Jt.THIRTY_DAYS," days"]}),(0,h.jsxs)(a.Radio.Button,{style:Qt,value:Jt.NINETY_DAYS,children:["Past ",Jt.NINETY_DAYS," days"]})]})};var es=s(97429).Buffer;const ts=[{key:"code",type:"u8"},{key:"delta_a",type:"u64"},{key:"delta_b",type:"u64"}],ss="history",ns=async(e,t)=>{const s=new Rt,n=new bt,r=(new bt).subtractDay(e);return await s.collect(t,{secondFrom:r.seconds(),secondTo:n.seconds()})},rs=(e,t,s)=>{const{treasury_a:n,treasury_b:r}=s,o=[n,r];for(const a of t){const{source:t,destination:s}=a;if(t&&s){if(e===St.AddLiquidity)return o.includes(s.address);if(e===St.RemoveLiquidity)return o.includes(t.address)}}return!1},os=(0,P.createAsyncThunk)("history/fetchWithdrawHistories",(async e=>{var t;let{days:s,poolData:n}=e;const{sentre:{splt:r}}=window,o=await(null===(t=window.sentre.wallet)||void 0===t?void 0:t.getAddress());if(!o)throw new Error("Wallet is not connected");const a=await ns(s,o),i=[];for(const l of a){const{actionType:e,actionTransfers:t,blockTime:s}=l;if(e!==St.RemoveLiquidity)continue;if(!rs(e,t,n))continue;const a={time:s,actions:[]};for(const n of t){const{amount:e,source:t,destination:s}=n;if(!t||!s)continue;const{mint:i,address:l,decimals:d}=s;l===await r.deriveAssociatedAddress(o,i)&&a.actions.push({mint:i,amount:BigInt(e),decimals:d})}i.push(a)}return{withdrawHistories:i}})),as=(0,P.createAsyncThunk)("history/fetchDepositHistory",(async e=>{var t;let{days:n,poolData:r}=e;const o=await(null===(t=window.sentre.wallet)||void 0===t?void 0:t.getAddress());if(!o)throw new Error("Wallet is not connected");const{struct:a}=s(70320),i=await ns(n,o),l=[];for(const s of i){const{blockTime:e,actionType:t,programInfo:n,actionTransfers:o}=s;if(t!==St.AddLiquidity)continue;if(!rs(t,o,r))continue;const i=null===n||void 0===n?void 0:n.data;if(!i)continue;const d=ht().decode(i),c=new a(ts).fromBuffer(es.from(d)),u={time:e,amount_a:c.delta_a,amount_b:c.delta_b};l.push(u)}return{depositHistories:l}})),is=(0,P.createSlice)({name:ss,initialState:{depositHistories:[],withdrawHistories:[]},reducers:{},extraReducers:e=>{e.addCase(os.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(as.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,ls=e=>{let{record:t}=e;const{main:{selectedPoolAddress:s}}=(0,n.useSelector)((e=>e)),{pools:o}=(0,r.usePool)(),{mint_a:i,mint_b:d}=o[s]||{},u=Te(i)||0,p=Te(d)||0;return(0,h.jsx)(a.Typography.Text,{children:(0,h.jsxs)(a.Space,{size:4,children:[(0,c.uR)(l.utils.undecimalize(t.amount_a,u)).format("0,0.[0000]"),(0,h.jsx)(R,{mintAddress:i}),"+"," ",(0,c.uR)(l.utils.undecimalize(t.amount_b,p)).format("0,0.[0000]"),(0,h.jsx)(R,{mintAddress:d})]})})},ds=[{title:"TIME",render:e=>(0,h.jsx)(a.Typography.Text,{children:st()(1e3*e.time).format("MMM DD, YYYY HH:mm")})},{title:"TOKEN",width:300,render:e=>(0,h.jsx)(ls,{record:e})}],cs=()=>{const[e,t]=(0,i.useState)(Jt.SEVEN_DAYS),[s,o]=(0,i.useState)(!1),l=(0,n.useDispatch)(),{history:{depositHistories:d},main:{selectedPoolAddress:c}}=(0,n.useSelector)((e=>e)),{pools:{[c]:u}}=(0,r.usePool)(),p=(0,i.useCallback)((async()=>{o(!0);try{await l(as({days:e,poolData:u}))}catch(t){ke(t)}finally{o(!1)}}),[l,e,u]);(0,i.useEffect)((()=>{p()}),[p]);return(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Xt,{onChange:e=>{t(e.target.value)}})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Table,{pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row",dataSource:d,columns:ds,rowKey:e=>e.time,loading:s,scroll:{y:300}})})]})},us=e=>{let{record:t}=e;return(0,h.jsx)(a.Typography.Text,{children:(0,h.jsx)(a.Space,{size:4,children:t.actions.map(((e,s)=>{let{mint:n,amount:r,decimals:o}=e;const a=l.utils.undecimalize(r,o);return(0,h.jsxs)(i.Fragment,{children:[(0,c.uR)(a).format("0,0.[0000]"),(0,h.jsx)(R,{mintAddress:n}),s!==t.actions.length-1&&"+"]},s)}))})})},hs=[{title:"TIME",render:e=>(0,h.jsx)(a.Typography.Text,{children:st()(1e3*e.time).format("MMM DD, YYYY HH:mm")})},{title:"TOKEN",width:300,render:e=>(0,h.jsx)(us,{record:e})}],ps=()=>{const[e,t]=(0,i.useState)(Jt.SEVEN_DAYS),[s,o]=(0,i.useState)(!1),l=(0,n.useDispatch)(),{history:{withdrawHistories:d},main:{selectedPoolAddress:c}}=(0,n.useSelector)((e=>e)),{pools:{[c]:u}}=(0,r.usePool)(),p=(0,i.useCallback)((async()=>{o(!0);try{await l(os({days:e,poolData:u}))}catch(t){ke(t)}finally{o(!1)}}),[l,e,u]);(0,i.useEffect)((()=>{p()}),[p]);return(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Xt,{onChange:e=>{t(e.target.value)}})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Table,{pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row",dataSource:d,columns:hs,rowKey:e=>e.time,loading:s,scroll:{y:300}})})]})},xs=e=>{const[t,s]=(0,i.useState)(0),{orders:o}=(0,n.useSelector)((e=>e)),{wallet:{address:a}}=(0,r.useWallet)(),l=Object.keys(o),d=(0,i.useCallback)((async()=>{try{const{sol:{purchasing:t}}=L;let n=0;for(;n<1e4;){const s=await t.deriveOrderAddress(n,a,e);if(!l.includes(s))break;n+=1}return s(n)}catch(t){return s(0)}}),[e,l,a]);return(0,i.useEffect)((()=>{d()}),[d]),t},ms=e=>{let{label:t="",avatar:s=(0,h.jsx)(i.Fragment,{}),value:n="",subValue:r="",floatRight:o=!1}=e;const l=o?"right":"left";return(0,h.jsxs)(a.Space,{size:12,direction:"vertical",style:{textAlign:l},children:[(0,h.jsx)(a.Typography.Text,{children:t}),s,(0,h.jsx)(a.Typography.Title,{level:3,children:n}),r&&(0,h.jsx)(a.Typography.Title,{level:5,style:{textDecoration:"line-through"},type:"secondary",children:r})]})},ys=e=>{let{label:t="",value:s=""}=e;return(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{children:t})}),(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Typography.Title,{level:5,children:s})})]})},js=e=>{var t;let{retailerAddress:s,amount:r,locktime:o,visible:d=!1,onClose:u=(()=>{})}=e;const[p,x]=(0,i.useState)(!1),{retailers:{[s]:y}}=(0,n.useSelector)((e=>e)),j=xs(s),g=Te(y.mint_bid)||0,f=Te(y.mint_ask)||0,w=Pe(y.mint_bid,!0),b=Pe(y.mint_ask,!0),C=BigInt(Math.floor(24*o*60*60)),A=(null===(t=v.find((e=>{let{locktime:t}=e;return t===o})))||void 0===t?void 0:t.discount)||0,S=parseFloat(r)*w,k=l.utils.decimalize(r,g),P=b?l.utils.decimalize(S*(1+A)/b,f):BigInt(0);return(0,h.jsx)(a.Modal,{visible:d,footer:!1,closeIcon:(0,h.jsx)(m,{name:"close-outline"}),onCancel:u,children:(0,h.jsxs)(a.Row,{gutter:[24,24],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Typography.Title,{level:5,children:"Confirm"})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(ms,{label:"Payment",avatar:(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(T,{mintAddress:y.mint_bid}),(0,h.jsx)(a.Typography.Title,{level:5,children:(0,h.jsx)(R,{mintAddress:y.mint_bid})})]}),value:`${(0,c.uR)(r).format("0,0.[0000]")} LP`})}),(0,h.jsx)(a.Col,{children:(0,h.jsx)(ms,{label:"Receiving",avatar:(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(T,{mintAddress:y.mint_ask}),(0,h.jsx)(a.Typography.Title,{level:5,children:(0,h.jsx)(R,{mintAddress:y.mint_ask})})]}),value:(0,c.uR)(l.utils.undecimalize(P,f)).format("0,0.[0000]"),subValue:(0,c.uR)(S/b).format("0,0.[0000]"),floatRight:!0})})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Card,{className:"confirm-sub-card",bodyStyle:{padding:16},bordered:!1,children:(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(ys,{label:"Created At",value:st()().format("HH:mm DD/MM/YYYY")})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(ys,{label:"Locked Time",value:`${o} Days`})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(ys,{label:"Multiplier",value:100*(1+A)+"%"})})]})})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Button,{type:"primary",onClick:async()=>{try{const{sol:{purchasing:e}}=L,{wallet:t}=window.sentre;if(!t)throw new Error("Wallet is not connected");await x(!0);const{txId:n}=await e.placeOrder(j,k,P,C,s,t);return Se("Place a new order",n),u()}catch(e){return ke(e)}finally{return x(!1)}},loading:p,block:!0,children:"Confirm"})})]})})},gs=e=>{let{poolAddress:t,value:s,onChange:o}=e;const i=(0,n.useSelector)((e=>e.lpts)),{pools:d}=(0,r.usePool)(),u=Object.keys(i).find((e=>i[e].pool===t))||"",{amount:p}=i[u]||{},x=Number(l.utils.undecimalize(p||BigInt(0),9)),m=d[t];return(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{children:"I want to pay"})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{size:4,className:"caption",children:[(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"Available:"}),(0,h.jsxs)(a.Typography.Text,{type:"secondary",children:[(0,c.uR)(x).format("0,0.[0000]")," LP"]})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(we,{value:s,onValue:o,prefix:(0,h.jsxs)(a.Space,{size:4,children:[(0,h.jsx)(R,{mintAddress:null===m||void 0===m?void 0:m.mint_lpt}),(0,h.jsx)(a.Divider,{type:"vertical"})]}),suffix:(0,h.jsx)(a.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:()=>o(x.toString()),children:"MAX"})})})]})},fs=e=>{let{label:t="",value:s="",discount:n=!1,description:r=null}=e;const o={color:n?"#F9575E":"inherit"};return(0,h.jsxs)(a.Row,{gutter:[8,8],align:"bottom",children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsxs)(a.Space,{size:4,children:[(0,h.jsx)(a.Typography.Text,{style:o,children:t}),r&&(0,h.jsx)(a.Popover,{content:r,placement:"leftTop",arrowPointAtCenter:!0,children:(0,h.jsx)(m,{name:"help-circle"})})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Typography.Title,{style:{...o,textDecoration:n?"unset":"line-through"},level:n?3:5,children:[s,(0,h.jsx)("small",{children:"%"})]})})]})},ws=e=>{var t;let{locktime:s}=e;const n=(null===(t=v.find((e=>{let{locktime:t}=e;return t===s})))||void 0===t?void 0:t.discount)||0;return(0,h.jsxs)(a.Row,{gutter:[5,5],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(fs,{label:"SNTR Buy-back",value:(0,c.uR)(100*(n+1)).format("0.[00]"),discount:!0})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(fs,{label:"Market Buy-back",value:"100"})})]})},vs=v.map((e=>{let{locktime:t}=e;return t})),bs=e=>{let{poolAddress:t}=e;const[s,o]=(0,i.useState)(!1),[d,c]=(0,i.useState)(""),[u,p]=(0,i.useState)(vs[0]),{retailers:x}=(0,n.useSelector)((e=>e)),{pools:y}=(0,r.usePool)(),j=y[t],g=Object.values(x).findIndex((e=>{let{mint_bid:t}=e;return t===(null===j||void 0===j?void 0:j.mint_lpt)})),f=Object.keys(x)[g],w=!l.account.isAddress(f);return(0,h.jsxs)(a.Row,{gutter:[24,24],children:[(0,h.jsx)(a.Col,{xs:24,lg:12,children:(0,h.jsxs)(a.Space,{direction:"vertical",size:10,children:[(0,h.jsxs)(a.Space,{size:4,children:[(0,h.jsx)(a.Typography.Text,{children:"Lock Time (Days)"}),(0,h.jsx)(m,{name:"alert-circle-outline"})]}),(0,h.jsx)(a.Space,{size:16,children:vs.map((e=>(0,h.jsx)(a.Button,{type:u===e?"primary":"default",icon:e,onClick:()=>p(e)},e)))})]})}),(0,h.jsx)(a.Col,{xs:24,lg:12,children:(0,h.jsx)(ws,{locktime:u})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Typography.Text,{children:[(0,h.jsx)("span",{style:{fontWeight:700,color:"inherit"},children:"SNTR Buy-back Offering:"})," ","Selling your LP tokens with juicy profit. No fee, no slippage. The tokens will be unlocked after the selected period."]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(gs,{poolAddress:t,value:d,onChange:c})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Button,{type:"primary",icon:(0,h.jsx)(m,{name:w?"help-circle-outline":"diamond"}),onClick:()=>o(!0),disabled:!parseFloat(d)||w,block:!0,children:w?"There is no campaign on this pool":"Buy SNTR"})}),!w&&(0,h.jsx)(js,{retailerAddress:f,amount:d,locktime:u,visible:s,onClose:()=>o(!1)})]})},Cs=e=>{let{orderAddress:t}=e;const[s,r]=(0,i.useState)(!1),{orders:o}=(0,n.useSelector)((e=>e)),{state:l,locked_time:d,updated_at:u}=o[t]||{},p=async()=>{try{const{wallet:e}=window.sentre,{sol:{purchasing:s}}=L;if(!e)throw new Error("Wallet is not connected");await r(!0);const{txId:n}=await s.redeemOrder(t,e);return Se("Redeem the order",n)}catch(e){return ke(e)}finally{return r(!1)}};if(l===j.Open)return(0,h.jsx)(a.Button,{type:"text",size:"small",loading:s,onClick:async()=>{try{const{wallet:e}=window.sentre,{sol:{purchasing:s}}=L;if(!e)throw new Error("Wallet is not connected");await r(!0);const{txId:n}=await s.cancelOrder(t,e);return Se("Cancel the order",n)}catch(e){return ke(e)}finally{return r(!1)}},children:"Cancel"});if(l===j.Approved){const e=Number(d)>Date.now()/1e3-Number(u);return(0,h.jsx)(a.Button,{type:"primary",size:"small",disabled:e,loading:s,onClick:p,children:"Redeem"})}return(0,h.jsx)(a.Button,{type:"text",size:"small",icon:(0,h.jsx)(m,{name:"open-outline"}),onClick:async()=>window.open((0,c.kU)(t),"_blank"),children:"Detail"})},Ts=e=>{let{title:t}=e;return(0,h.jsx)(a.Typography.Text,{type:"secondary",style:{fontSize:12},children:t})},As=e=>(0,h.jsx)(a.Tag,{style:{border:"none"},...e}),Ss=e=>{let{state:t}=e;return t===j.Open?(0,h.jsx)(As,{color:"gold",children:"Pending"}):t===j.Approved?(0,h.jsx)(As,{color:"cyan",children:"Approved"}):t===j.Done?(0,h.jsx)(As,{color:"green",children:"Done"}):t===j.Rejected?(0,h.jsx)(As,{color:"red",children:"Rejected"}):t===j.Canceled?(0,h.jsx)(As,{color:"volcano",children:"Canceled"}):(0,h.jsx)(As,{children:"Unknown"})},ks=e=>{let{orderAddress:t}=e;const[s,r]=(0,i.useState)(!1),{orders:o,retailers:d}=(0,n.useSelector)((e=>e)),{retailer:u,bid_amount:p,ask_amount:x,locked_time:y,state:j,created_at:g,updated_at:f}=o[t]||{},{mint_bid:w,mint_ask:v}=d[u]||{},b=Te(w)||0,C=Te(v)||0,T=l.utils.undecimalize(p,b),A=l.utils.undecimalize(x,C);return(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Card,{bordered:!1,bodyStyle:{padding:12},className:"order-card order-card-bg",children:(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsxs)(a.Space,{style:{fontSize:12},children:[(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"Order ID"}),(0,h.jsx)(a.Typography.Text,{children:(0,c.Xn)(t)})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Button,{type:"text",size:"small",icon:(0,h.jsx)(m,{name:s?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>r(!s)})})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{gutter:[8,8],justify:"space-between",children:[(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsx)(Ts,{title:"Payment"}),(0,h.jsxs)(a.Typography.Text,{ellipsis:!0,children:[(0,c.uR)(T).format("0,0.[0000]")," LP"]})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsx)(Ts,{title:"Receiving"}),(0,h.jsxs)(a.Typography.Text,{style:{fontWeight:700},ellipsis:!0,children:[(0,c.uR)(A).format("0,0.[0000]")," ",(0,h.jsx)(R,{mintAddress:v})]})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsx)(Ts,{title:"Locktime"}),(0,h.jsxs)(a.Typography.Text,{children:[Number(y)/86400," days"]})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsx)(Ts,{title:"Status"}),(0,h.jsx)(Ss,{state:j})]})})]})})]})})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Collapse,{activeKey:s.toString(),className:"expand-card expand-card-bg",children:(0,h.jsx)(a.Collapse.Panel,{header:null,showArrow:!1,children:(0,h.jsxs)(a.Row,{gutter:[8,8],justify:"space-between",align:"middle",children:[(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsx)(Ts,{title:"Created At"}),(0,h.jsx)(a.Typography.Text,{ellipsis:!0,children:st()(1e3*Number(g)).format("HH:mm DD/MM/YYYY")})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsx)(Ts,{title:"Updated At"}),(0,h.jsx)(a.Typography.Text,{ellipsis:!0,children:st()(1e3*Number(f)).format("HH:mm DD/MM/YYYY")})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsx)(Cs,{orderAddress:t})})]})},"true")})})]})},Rs=e=>{let{poolAddress:t}=e;const{orders:s,retailers:o}=(0,n.useSelector)((e=>e)),{pools:i}=(0,r.usePool)(),{wallet:{address:l}}=(0,r.useWallet)(),{mint_lpt:c}=i[t]||{},u=Object.keys(s).filter((e=>{const{retailer:t,owner:n}=s[e]||{},{mint_bid:r}=o[t]||{};return r===c&&n===l}));return(0,h.jsxs)(a.Row,{gutter:[16,16],style:{height:282},className:"scrollbar",justify:"center",align:"top",children:[!u.length&&(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Empty,{})}),u.map((e=>(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(d.ZP,{height:125,overflow:!0,children:(0,h.jsx)(ks,{orderAddress:e})})},e)))]})},Ps="retailers",Is=(0,P.createAsyncThunk)("retailers/getRetailers",(async()=>{const{sol:{purchasing:e}}=L,t=await e.connection.getProgramAccounts(e.purchasingProgramId,{filters:[{dataSize:161}]});let s={};return t.forEach((t=>{let{pubkey:n,account:{data:r}}=t;const o=n.toBase58(),a=e.parseRetailerData(r);s[o]=a})),s})),Ds=(0,P.createAsyncThunk)("retailers/getRetailer",(async(e,t)=>{let{address:s}=e,{getState:n}=t;if(!l.account.isAddress(s))throw new Error("Invalid retailer address");const{sol:{purchasing:r}}=L,{retailers:{[s]:o}}=n();if(o)return{[s]:o};return{[s]:await r.getRetailerData(s)}})),_s=(0,P.createAsyncThunk)("retailers/upsetRetailer",(async e=>{let{address:t,data:s}=e;if(!l.account.isAddress(t))throw new Error("Invalid retailer address");if(!s)throw new Error("Data is empty");return{[t]:s}})),zs=(0,P.createAsyncThunk)("retailers/deleteRetailer",(async e=>{let{address:t}=e;if(!l.account.isAddress(t))throw new Error("Invalid retailer address");return{address:t}})),Es=(0,P.createSlice)({name:Ps,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Is.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(Ds.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(_s.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(zs.fulfilled,((e,t)=>{let{payload:s}=t;delete e[s.address]}))}}).reducer,Bs=e=>{let{poolAddress:t}=e;const s=(0,n.useDispatch)(),{wallet:{address:o}}=(0,r.useWallet)(),{pools:i}=(0,r.usePool)(),d=i[t];return(0,h.jsx)(a.Row,{gutter:[24,24],children:(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Button,{type:"primary",onClick:async()=>{const{wallet:e}=window.sentre,{sol:{purchasing:t,sntrAddress:n}}=L;try{if(!e)throw new Error("Wallet is not connected");if(!l.account.isAddress(null===d||void 0===d?void 0:d.mint_lpt))throw new Error("Invalid bid mint address");if(!l.account.isAddress(n))throw new Error("Invalid ask mint address");const{txId:r,retailerAddress:a}=await t.initializeRetailer(o,d.mint_lpt,n,e);return await s(Ds({address:a})).unwrap(),Se("Initialize a new retailer",r)}catch(r){return ke(r)}},children:"New Retailer"})})})},Ns=e=>{let{retailerAddress:t}=e;const[s,r]=(0,i.useState)(!1),{retailers:{[t]:o}}=(0,n.useSelector)((e=>e)),d=null===o||void 0===o?void 0:o.state;return(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(a.Typography.Text,{children:"Current State:"}),(0,h.jsx)(m,{name:1===d?"checkmark-circle-sharp":"snow-outline"}),(0,h.jsx)(a.Typography.Text,{style:{fontWeight:700},children:1===d?"Active":"Frozen"}),(0,h.jsx)(a.Button,{size:"small",onClick:1===d?async()=>{try{const{sol:{purchasing:e}}=L,{wallet:s}=window.sentre;if(!s)throw new Error("Wallet is not connected");if(!l.account.isAddress(t))throw new Error("Invalid retailer address");await r(!0);const{txId:n}=await e.freezeRetailer(t,s);return Se(`Freeze the retailer ${t}`,n)}catch(e){return ke(e)}finally{return r(!1)}}:async()=>{try{const{sol:{purchasing:e}}=L,{wallet:s}=window.sentre;if(!s)throw new Error("Wallet is not connected");if(!l.account.isAddress(t))throw new Error("Invalid retailer address");await r(!0);const{txId:n}=await e.thawRetailer(t,s);return Se(`Thaw the retailer ${t}`,n)}catch(e){return ke(e)}finally{return r(!1)}},loading:s,children:1===d?"Freeze":"Thaw"})]})},Ls=e=>{let{orderAddress:t}=e;const{retailers:s,orders:r}=(0,n.useSelector)((e=>e)),o=r[t],{mint_ask:i}=s[o.retailer]||{},d=Te(i)||0,u=l.utils.undecimalize(o.ask_amount,d);return(0,h.jsxs)(a.Typography.Text,{style:{fontWeight:700},children:[(0,c.uR)(u).format("0,0.[0000]")," ",(0,h.jsx)(R,{mintAddress:i})]})},Ms=e=>{let{orderAddress:t}=e;const{retailers:s,orders:r}=(0,n.useSelector)((e=>e)),o=r[t],{mint_bid:i}=s[o.retailer]||{},d=Te(i)||0,u=l.utils.undecimalize(o.bid_amount,d);return(0,h.jsxs)(a.Typography.Text,{children:[(0,c.uR)(u).format("0,0.[0000]")," LP"]})},Os=e=>{var t;let{orderAddress:s}=e;const{retailers:r,orders:o}=(0,n.useSelector)((e=>e)),{retailer:i,bid_amount:d,ask_amount:u,locked_time:p}=o[s],{mint_bid:x,mint_ask:m}=r[i]||{},y=Te(x)||0,j=Number(l.utils.undecimalize(d,y))*Pe(x),g=Te(m)||0,f=(Number(l.utils.undecimalize(u,g))*Pe(m)-j)/j,w=(null===(t=v.find((e=>e.locktime===Number(p)/86400)))||void 0===t?void 0:t.discount)||0;return(0,h.jsx)(a.Typography.Text,{style:{color:f<=w?"#14E041":"#D72311"},children:(0,c.uR)(f).format("0,0.[00]%")})},Ys=e=>{var t;let{orderData:s,onClose:r}=e;const[o,d]=(0,i.useState)(!1),[u,p]=(0,i.useState)(!1),{retailers:x}=(0,n.useSelector)((e=>e)),{mint_bid:y,mint_ask:j}=x[s.retailer]||{},g=Te(y)||0,f=Te(j)||0,w=l.utils.undecimalize(s.bid_amount,g),b=l.utils.undecimalize(s.ask_amount,f),C=Number(s.locked_time)/86400,A=(null===(t=v.find((e=>{let{locktime:t}=e;return t===C})))||void 0===t?void 0:t.discount)||0;return(0,h.jsxs)(a.Row,{gutter:[16,24],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{align:"middle",justify:"space-between",children:[(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsx)(a.Typography.Text,{children:"Pay"}),(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(T,{mintAddress:j}),(0,h.jsx)(a.Typography.Text,{children:(0,h.jsx)(R,{mintAddress:j})})]}),(0,h.jsx)(a.Typography.Title,{level:4,children:b})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsx)(m,{name:"arrow-forward-outline",style:{fontSize:24}})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsx)(a.Typography.Text,{children:"Receive"}),(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(T,{mintAddress:y}),(0,h.jsx)(a.Typography.Text,{children:(0,h.jsx)(R,{separator:" + ",mintAddress:y})})]}),(0,h.jsx)(a.Typography.Title,{level:4,children:w})]})})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Card,{bordered:!1,className:"confirm-info",style:{boxShadow:"none",borderRadius:8},bodyStyle:{padding:16},children:(0,h.jsxs)(a.Row,{gutter:[12,12],children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"Order ID"})}),(0,h.jsx)(a.Typography.Text,{children:(0,c.Xn)(s.address)})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"Start day"})}),(0,h.jsx)(a.Col,{children:st()(1e3*Number(s.created_at)).format("DD/MM/YYYY")})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"Locked duration"})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Typography.Text,{children:[C," days"]})})]})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsxs)(a.Row,{children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"Purchase rate"})}),(0,h.jsxs)(a.Col,{children:[Math.round(100*(A+1)),"%"]})]})})]})})}),(0,h.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,h.jsxs)(a.Space,{size:4,children:[(0,h.jsx)(a.Button,{loading:u,onClick:async()=>{try{const{wallet:e}=window.sentre,{sol:{purchasing:t}}=L;if(!e)throw new Error("Wallet is not connected");await p(!0);const{txId:n}=await t.rejectOrder(s.address,e);return Se("Reject the order",n)}catch(e){return ke(e)}finally{return p(!1)}},children:"Reject"}),(0,h.jsx)(a.Button,{loading:o,onClick:async()=>{try{const{wallet:e}=window.sentre,{sol:{purchasing:t}}=L;if(!e)throw new Error("Wallet is not connected");await d(!0);const{txId:n}=await t.approveOrder(s.address,e);return Se("Approve the order",n)}catch(e){return ke(e)}finally{return r(!1),d(!1)}},type:"primary",children:"Approve"})]})})]})},Fs=e=>{let{state:t,orderData:s}=e;const[n,r]=(0,i.useState)(!1);return t===j.Open?(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(a.Button,{size:"small",type:"primary",onClick:()=>r(!0),children:"Confirm"}),(0,h.jsx)(a.Modal,{title:(0,h.jsx)(a.Typography.Title,{level:4,children:"Confirm order"}),visible:n,footer:null,onCancel:()=>r(!1),closeIcon:(0,h.jsx)(m,{name:"close"}),children:(0,h.jsx)(Ys,{onClose:r,orderData:s})})]}):(0,h.jsx)(Ss,{state:t})},Us=[{title:"PAY",dataIndex:"ask_amount",key:"ask_amount",render:(e,t)=>(0,h.jsx)(d.ZP,{height:52,overflow:!0,children:(0,h.jsx)(Ls,{orderAddress:t.address})})},{title:"RECEIVE",dataIndex:"bid_amount",key:"bid_amount",render:(e,t)=>(0,h.jsx)(d.ZP,{height:52,overflow:!0,children:(0,h.jsx)(Ms,{orderAddress:t.address})})},{title:"LOCKED",dataIndex:"locked_time",key:"locked_time",render:e=>(0,h.jsx)(d.ZP,{height:52,overflow:!0,children:(0,h.jsxs)(a.Typography.Text,{children:[Number(e)/86400," days"]})})},{title:"DISCOUNT",render:e=>(0,h.jsx)(d.ZP,{height:52,overflow:!0,children:(0,h.jsx)(Os,{orderAddress:e.address})})},{title:"ACTIONS",key:"state",dataIndex:"state",render:(e,t)=>(0,h.jsx)(d.ZP,{height:52,overflow:!0,children:(0,h.jsx)(Fs,{state:e,orderData:t})})}],Ws="orders",qs=(0,P.createAsyncThunk)("orders/getOrders",(async e=>{let{owner:t,retailer:s}=e;const{sol:{purchasing:n}}=L;let r={},o=[];l.account.isAddress(t)&&o.push({memcmp:{bytes:t,offset:0}}),l.account.isAddress(s)&&o.push({memcmp:{bytes:s,offset:33}});return(await n.connection.getProgramAccounts(n.purchasingProgramId,{filters:[{dataSize:105},...o]})).forEach((e=>{let{pubkey:t,account:{data:s}}=e;const o=t.toBase58(),a=n.parseOrderData(s);r[o]=a})),r})),Hs=(0,P.createAsyncThunk)("orders/getOrder",(async(e,t)=>{let{address:s}=e,{getState:n}=t;if(!l.account.isAddress(s))throw new Error("Invalid order address");const{sol:{purchasing:r}}=L,{retailers:{[s]:o}}=n();if(o)return{[s]:o};return{[s]:await r.getOrderData(s)}})),$s=(0,P.createAsyncThunk)("orders/upsetOrder",(async e=>{let{address:t,data:s}=e;if(!l.account.isAddress(t))throw new Error("Invalid order address");if(!s)throw new Error("Data is empty");return{[t]:s}})),Vs=(0,P.createAsyncThunk)("orders/deleteOrder",(async e=>{let{address:t}=e;if(!l.account.isAddress(t))throw new Error("Invalid order address");return{address:t}})),Zs=(0,P.createSlice)({name:Ws,initialState:{},reducers:{},extraReducers:e=>{e.addCase(qs.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Hs.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase($s.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(Vs.fulfilled,((e,t)=>{let{payload:s}=t;delete e[s.address]}))}}).reducer,Gs=e=>{let{poolAddress:t}=e;const[s,o]=(0,i.useState)(!0),[d,c]=(0,i.useState)(6),u=(0,n.useDispatch)(),{retailers:p,orders:x}=(0,n.useSelector)((e=>e)),{pools:m}=(0,r.usePool)(),{wallet:{address:y}}=(0,r.useWallet)(),g=m[t],f=Object.keys(p).filter((e=>{const{owner:t}=p[e];return t===y})),w=f.find((e=>{const{mint_bid:t}=p[e];return t===(null===g||void 0===g?void 0:g.mint_lpt)})),v=(0,i.useMemo)((()=>Object.keys(x).filter((e=>{const{retailer:t,state:n}=x[e];let r=t===w;return s&&(r=r&&n===j.Open),r})).map((e=>({...x[e],address:e})))),[x,w,s]),b=(0,i.useCallback)((async()=>{await u(qs({retailer:w}))}),[u,w]);return(0,i.useEffect)((()=>{b()}),[b]),(0,h.jsxs)(a.Row,{gutter:[24,12],justify:"center",children:[(0,h.jsx)(a.Col,{span:24,children:l.account.isAddress(w)?(0,h.jsxs)(a.Row,{gutter:[24,24],wrap:!1,children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(Ns,{retailerAddress:w})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(a.Typography.Text,{type:"secondary",children:"Filtered?"}),(0,h.jsx)(a.Switch,{checked:s,onChange:o,size:"small"})]})})]}):(0,h.jsx)(Bs,{poolAddress:t})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(a.Table,{className:"scrollbar",columns:Us,dataSource:v.slice(0,d),rowClassName:(e,t)=>t%2?"odd-row":"even-row",pagination:!1,scroll:{y:155},rowKey:e=>Number(e.created_at)})}),(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Button,{onClick:()=>c(d+6),disabled:d>=v.length,type:"text",children:"View more"})})]})},Ks=e=>{var t;let{poolAddress:s,lpt:n}=e;const[o,l]=(0,i.useState)(!1),[d,c]=(0,i.useState)("deposit"),{wallet:{address:u}}=(0,r.useWallet)(),{pools:p}=(0,r.usePool)(),x=u===(null===(t=p[s])||void 0===t?void 0:t.owner),y="deposit"===d;return(0,h.jsxs)(a.Card,{bordered:!1,style:{height:y?"100%":"auto"},children:[(0,h.jsxs)(a.Tabs,{tabBarExtraContent:(0,h.jsx)(a.Button,{type:"text",size:"small",shape:"circle",icon:(0,h.jsx)(m,{name:"document-outline"}),onClick:()=>l(!0)}),activeKey:d,onChange:c,children:[(0,h.jsx)(a.Tabs.TabPane,{tab:"Deposit",children:(0,h.jsx)(Vt,{poolAddress:s})},"deposit"),(0,h.jsx)(a.Tabs.TabPane,{tab:"Withdraw",children:(0,h.jsx)(Kt,{poolAddress:s})},"withdraw"),(0,h.jsx)(a.Tabs.TabPane,{tab:"Reinvestment",children:(0,h.jsx)(bs,{poolAddress:s})},"reinvestmnet"),(0,h.jsx)(a.Tabs.TabPane,{tab:"Redeem",children:(0,h.jsx)(Rs,{poolAddress:s})},"redeem"),x?(0,h.jsx)(a.Tabs.TabPane,{tab:"Admin",children:(0,h.jsx)(Gs,{poolAddress:s})},"admin"):null]}),(0,h.jsx)(a.Modal,{closeIcon:(0,h.jsx)(m,{name:"close-outline"}),visible:o,onCancel:()=>l(!1),footer:!1,children:(0,h.jsxs)(a.Tabs,{children:[(0,h.jsx)(a.Tabs.TabPane,{tab:"Deposit",children:(0,h.jsx)(cs,{})},"deposit-history"),(0,h.jsx)(a.Tabs.TabPane,{tab:"Withdraw",children:(0,h.jsx)(ps,{})},"withdraw-history")]})})]})},{route:{myRoute:Qs}}=L,Js=()=>{const e=(0,n.useDispatch)(),t=(0,o.useHistory)(),{main:{selectedPoolAddress:s}}=(0,n.useSelector)((e=>e)),r=(0,o.useLocation)(),l=(0,i.useMemo)((()=>new URLSearchParams(r.search)),[r]).get(w.address)||"",d=(0,i.useCallback)((async()=>(await e(G("")),await t.push(Qs))),[e,t]),c=l||s;return(0,h.jsx)(a.Row,{gutter:[24,24],justify:"center",children:(0,h.jsx)(a.Col,{xs:24,md:20,lg:18,children:(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Button,{type:"text",icon:(0,h.jsx)(m,{name:"arrow-back-outline"}),onClick:d,style:{margin:-12},children:"Back"})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(et,{poolAddress:c})}),(0,h.jsx)(a.Col,{xs:24,md:12,children:(0,h.jsxs)(a.Row,{gutter:[16,16],style:{height:"100%"},children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Wt,{})}),(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(Lt,{})})]})}),(0,h.jsx)(a.Col,{xs:24,md:12,children:(0,h.jsx)(Ks,{poolAddress:c})})]})})})},Xs="lpts",en=(0,P.createAsyncThunk)("lpts/getLPTs",(async e=>{let{accounts:t}=e;const{splt:s,swap:n}=window.sentre,r=t.map((e=>{let{mint:t}=e;return t})).map((e=>l.account.fromAddress(e))),o=(await l.utils.wrappedGetMultipleAccountsInfo(s.connection,r)).map((e=>null!==e&&void 0!==e&&e.data?s.parseMintData(e.data):null));if(null===o||void 0===o||!o.length)return{};const a=await Promise.all(o.map((async e=>{try{const{mint_authority:t,freeze_authority:s}=e||{};if(!l.account.isAddress(t)||!l.account.isAddress(s))return;return await n.derivePoolAddress(t,s)}catch(t){return}})));let i={};return t.forEach(((e,t)=>{let{address:s,...n}=e;const r=a[t];l.account.isAddress(r)&&(i[s]={...n,pool:r})})),i})),tn=(0,P.createAsyncThunk)("lpts/getLPT",(async(e,t)=>{let{address:s}=e,{getState:n}=t;if(!l.account.isAddress(s))throw new Error("Invalid account address");const{lpts:{[s]:r}}=n();if(r)return{[s]:r};const{swap:o}=window.sentre;return{[s]:await o.getLPTData(s)}})),sn=(0,P.createAsyncThunk)("lpts/upsetLPT",(async(e,t)=>{let{address:s,data:n}=e,{getState:r}=t;if(!l.account.isAddress(s))throw new Error("Invalid address");if(!n)throw new Error("Data is empty");const{lpts:{[s]:o}}=r(),{pool:a}=o||{};if(l.account.isAddress(a))return{[s]:{...n,pool:a}};const{swap:i}=window.sentre;return{[s]:await i.getLPTData(s)}})),nn=(0,P.createAsyncThunk)("lpts/deleteLPT",(async e=>{let{address:t}=e;if(!l.account.isAddress(t))throw new Error("Invalid address");return{address:t}})),rn=(0,P.createSlice)({name:Xs,initialState:{},reducers:{},extraReducers:e=>{e.addCase(en.fulfilled,((e,t)=>{let{payload:s}=t;return s})).addCase(tn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(sn.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase(nn.fulfilled,((e,t)=>{let{payload:s}=t;delete e[s.address]}))}}).reducer;let on=0;const an=()=>{const e=(0,n.useDispatch)(),{accounts:t}=(0,r.useAccount)(),{wallet:{address:s}}=(0,r.useWallet)(),o=(0,i.useMemo)((()=>Object.keys(t).map((e=>({address:e,...t[e]})))),[t]),a=(0,i.useCallback)((async()=>{try{if(!l.account.isAddress(s))return;await e(en({accounts:o})).unwrap()}catch(t){await ke(t)}}),[e,o,s]),d=(0,i.useCallback)((async()=>{if(on)return console.warn("Already watched");const t=[{memcmp:{bytes:s,offset:32}}];on=window.sentre.splt.watch(((t,s)=>{if(t)return console.error(t);const{address:n,data:r}=s;return e(sn({address:n,data:r}))}),t)}),[e,s]);return(0,i.useEffect)((()=>(a(),d(),()=>{(async()=>{try{await window.sentre.splt.unwatch(on)}catch(e){}})(),on=0})),[a,d]),(0,h.jsx)(i.Fragment,{})},{sol:{purchasing:ln}}=L;let dn=0;const cn=()=>{const e=(0,n.useDispatch)(),{wallet:{address:t}}=(0,r.useWallet)(),s=(0,i.useCallback)((async()=>{try{if(!l.account.isAddress(t))return;await e(Is()).unwrap()}catch(s){await ke(s)}}),[e,t]),o=(0,i.useCallback)((async()=>{if(dn)return console.warn("Already watched");dn=ln.watch(((t,s)=>{if(t)return console.error(t);const{address:n,data:r}=s;return e(_s({address:n,data:r}))}),[{dataSize:161}])}),[e]);return(0,i.useEffect)((()=>(s(),o(),()=>{(async()=>{try{await ln.unwatch(dn)}catch(e){}})(),dn=0})),[s,o]),(0,h.jsx)(i.Fragment,{})},{sol:{purchasing:un}}=L;let hn=0;const pn=()=>{const e=(0,n.useDispatch)(),{wallet:{address:t}}=(0,r.useWallet)(),s=(0,i.useCallback)((async()=>{try{if(!l.account.isAddress(t))return;await e(qs({owner:t})).unwrap()}catch(s){await ke(s)}}),[e,t]),o=(0,i.useCallback)((async()=>{if(hn)return console.warn("Already watched");hn=un.watch(((t,s)=>{if(t)return console.error(t);const{address:n,data:r}=s;return e($s({address:n,data:r}))}),[{dataSize:105}])}),[e]);return(0,i.useEffect)((()=>(s(),o(),()=>{(async()=>{try{await un.unwatch(hn)}catch(e){}})(),hn=0})),[s,o]),(0,h.jsx)(i.Fragment,{})},xn=()=>(0,h.jsxs)(a.Row,{gutter:[24,24],style:{paddingBottom:12},children:[(0,h.jsx)(a.Col,{xs:24,children:(0,h.jsxs)(o.Switch,{children:[(0,h.jsx)(o.Route,{exact:!0,path:"/app/sen_lp",component:Ye}),(0,h.jsx)(o.Route,{path:"/app/sen_lp/details",component:Js})]})}),(0,h.jsx)(an,{}),(0,h.jsx)(cn,{}),(0,h.jsx)(pn,{})]}),mn=e=>{let{selectedTab:t,onSelectedTab:s}=e;return(0,h.jsxs)(a.Row,{gutter:24,align:"middle",className:"header-widget",children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsx)(a.Typography.Text,{style:{color:"#e9e9eb "},children:"Pools list by"})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Select,{value:t,onChange:s,className:"header-select",children:[(0,h.jsx)(a.Select.Option,{value:g.Sentre,children:"Sentre"}),(0,h.jsx)(a.Select.Option,{value:g.Community,children:"Community"}),(0,h.jsx)(a.Select.Option,{value:g.Deposited,children:"Deposited"}),(0,h.jsx)(a.Select.Option,{value:g.YourPools,children:"Your pools"})]})})]})},yn=e=>{var t;let{data:s,onClick:n=(()=>{}),action:o=(0,h.jsx)(i.Fragment,{}),keyExpand:d}=e;const{pool:u,amount:x}=s,[j,g]=(0,i.useState)(!1),f=l.utils.undecimalize(x,9),{pools:w}=(0,r.usePool)(),v=(null===w||void 0===w?void 0:w[u].state)===y.Frozen,C=(null===w||void 0===w||null===(t=w[u])||void 0===t?void 0:t.mint_lpt)||"",A=j?"":"expandHidden",S=d.toString();return(0,h.jsxs)(a.Card,{bodyStyle:{padding:12,minHeight:78},bordered:!1,className:"lp-card",children:[(0,h.jsxs)(a.Row,{gutter:[12,12],align:"top",children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(T,{mintAddress:C,size:24}),(0,h.jsx)(a.Typography.Text,{type:v?"secondary":void 0,children:(0,h.jsx)(R,{mintAddress:C})})]}),(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(a.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,h.jsx)(a.Typography.Text,{children:(0,h.jsx)(p,{poolAddress:u})}),(0,h.jsx)(a.Divider,{type:"vertical",style:{margin:0}}),(0,h.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"My LP:"}),(0,h.jsx)(a.Typography.Text,{children:(0,c.uR)(f).format("0,0.[00]")})]})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{size:2,children:[(0,h.jsx)(b,{poolAddress:u}),o,(0,h.jsx)(a.Button,{size:"small",type:"text",icon:(0,h.jsx)(m,{name:j?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>g(!j)})]})})]}),(0,h.jsx)(a.Collapse,{className:A,style:{marginTop:16},ghost:!0,activeKey:S,bordered:!1,children:(0,h.jsx)(a.Collapse.Panel,{header:"",children:(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:12,children:(0,h.jsx)(He,{poolAddress:u})}),(0,h.jsx)(a.Col,{span:12,children:(0,h.jsx)(a.Button,{onClick:n,block:!0,type:"primary",children:"Detail"})})]})},S)})]})},jn=e=>{let{selectedTab:t,onClick:s=(()=>{}),action:o=(()=>(0,h.jsx)(i.Fragment,{}))}=e;const l=(0,n.useSelector)((e=>e.lpts)),{pools:c}=(0,r.usePool)(),{wallet:{address:u}}=(0,r.useWallet)(),p=(0,i.useMemo)((()=>Object.keys(l).filter((e=>{var s;const{pool:n}=l[e];return t===g.Deposited||t===g.YourPools&&(null===c||void 0===c||null===(s=c[n])||void 0===s?void 0:s.owner)===u?c[n]:null}))),[l,t,c,u]);return(0,h.jsxs)(a.Row,{gutter:[12,12],justify:"center",children:[!(null!==p&&void 0!==p&&p.length)&&(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Empty,{})}),null===p||void 0===p?void 0:p.map(((e,t)=>{const{pool:n}=l[e];return(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(d.ZP,{height:78,overflow:!0,children:(0,h.jsx)(yn,{keyExpand:t+1,data:l[e],action:o(e,n),onClick:()=>s(n)})})},e+t)}))]})},gn=e=>{let{poolAddress:t,onClick:s=(()=>{}),action:o=(0,h.jsx)(i.Fragment,{}),keyExpand:l}=e;const d=(0,n.useDispatch)(),[u,x]=(0,i.useState)(!1),{pools:j}=(0,r.usePool)(),g=(0,n.useSelector)((e=>{var s;return null===(s=e.stat[t])||void 0===s?void 0:s.details})),f=(null===j||void 0===j?void 0:j[t])||{},{mint_lpt:w,state:v}=f,C=(0,i.useMemo)((()=>{if(!g||!g.roi)return 0;const e=g.roi;return Math.pow(1+Number(e)/100,365)-1}),[g]);(0,i.useEffect)((()=>{t&&d(H({address:t}))}),[d,t]);const A=v===y.Frozen,S=u?"":"expandHidden",k=l.toString();return(0,h.jsxs)(a.Card,{bodyStyle:{padding:12,minHeight:78},bordered:!1,className:"lp-card",children:[(0,h.jsxs)(a.Row,{gutter:[12,12],align:"top",children:[(0,h.jsx)(a.Col,{flex:"auto",children:(0,h.jsxs)(a.Space,{direction:"vertical",children:[(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(T,{mintAddress:w,size:24}),(0,h.jsx)(a.Typography.Text,{type:A?"secondary":void 0,children:(0,h.jsx)(R,{mintAddress:w})})]}),(0,h.jsxs)(a.Space,{children:[(0,h.jsx)(a.Tooltip,{title:"The Total Value Locked is roughly estimated and perhaps inaccurate because unknown tokens ain't involved in the computation.",children:(0,h.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"TVL:"})}),(0,h.jsx)(a.Typography.Text,{children:(0,h.jsx)(p,{poolAddress:t})}),(0,h.jsx)(a.Divider,{type:"vertical",style:{margin:0}}),(0,h.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:"APY:"}),(0,h.jsx)(a.Typography.Text,{children:(0,c.uR)(C).format("0,0.[00]%")})]})]})}),(0,h.jsx)(a.Col,{children:(0,h.jsxs)(a.Space,{size:2,children:[(0,h.jsx)(b,{poolAddress:t}),o,(0,h.jsx)(a.Button,{size:"small",type:"text",icon:(0,h.jsx)(m,{name:u?"chevron-down-outline":"chevron-forward-outline"}),onClick:()=>x(!u)})]})})]}),(0,h.jsx)(a.Collapse,{className:S,style:{marginTop:16},ghost:!0,activeKey:k,bordered:!1,children:(0,h.jsx)(a.Collapse.Panel,{header:"",children:(0,h.jsxs)(a.Row,{gutter:[16,16],children:[(0,h.jsx)(a.Col,{span:12,children:(0,h.jsx)(He,{poolAddress:t})}),(0,h.jsx)(a.Col,{span:12,children:(0,h.jsx)(a.Button,{onClick:s,block:!0,type:"primary",children:"Detail"})})]})},k)})]})},fn=e=>{let{onClick:t=(()=>{}),action:s=(()=>(0,h.jsx)(i.Fragment,{}))}=e;const{sentrePools:n}=te(),{listPoolAddress:r}=re(n);return(0,h.jsxs)(i.Fragment,{children:[!r.length&&(0,h.jsx)(a.Col,{children:(0,h.jsx)(a.Empty,{})}),r.map(((e,n)=>(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(d.ZP,{height:78,overflow:!0,children:(0,h.jsx)(gn,{poolAddress:e,action:s(e),onClick:()=>t(e),keyExpand:n+1})})},e)))]})},wn=e=>{let{onClick:t=(()=>{}),action:s=(()=>(0,h.jsx)(i.Fragment,{}))}=e;const{communityPools:n}=se(),{listPoolAddress:r}=re(n);return(0,h.jsx)(i.Fragment,{children:r.map(((e,n)=>(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(d.ZP,{height:78,overflow:!0,children:(0,h.jsx)(gn,{poolAddress:e,action:s(e),onClick:()=>t(e),keyExpand:n+1})})},e)))})},vn=e=>{let{selectedTab:t,onClick:s=(()=>{}),action:n=(()=>(0,h.jsx)(i.Fragment,{}))}=e;return(0,h.jsx)(a.Row,{gutter:[12,12],justify:"center",children:t===g.Sentre?(0,h.jsx)(fn,{onClick:s,action:n}):(0,h.jsx)(wn,{onClick:s,action:n})})},bn=()=>{const[e,t]=(0,i.useState)(g.Sentre),s=(0,n.useDispatch)(),r=(0,o.useHistory)(),{manifest:{appId:l}}=L,d=(0,o.useLocation)(),c=(0,i.useMemo)((()=>new URLSearchParams(d.search)),[d.search]),u=(0,i.useCallback)((e=>{c.set(w.address,e),s(K(!1)),r.push(`app/${l}/${w.details}?${c.toString()}`)}),[c,s,r,l]);return(0,h.jsxs)(a.Row,{className:"widget",children:[(0,h.jsx)(a.Col,{span:24,children:(0,h.jsx)(mn,{selectedTab:e,onSelectedTab:e=>t(e)})}),(0,h.jsx)(a.Col,{span:24,className:"body-widget",children:e===g.Sentre||e===g.Community?(0,h.jsx)(vn,{selectedTab:e,onClick:u}):(0,h.jsx)(jn,{selectedTab:e,onClick:u})}),(0,h.jsx)(a.Col,{span:24,style:{height:16}}),(0,h.jsx)(an,{}),(0,h.jsx)(cn,{}),(0,h.jsx)(pn,{})]})};var Cn=s(85912);const Tn=(0,P.configureStore)({middleware:e=>e(Cn.h),devTools:(0,Cn.$)("sen_lp"),reducer:{main:X,stat:$,lpts:rn,retailers:Es,orders:Zs,settings:je,history:is}}),{manifest:{appId:An}}=L,Sn=()=>(0,h.jsx)(r.UIProvider,{appId:An,antd:!0,children:(0,h.jsx)(r.MintProvider,{children:(0,h.jsx)(r.PoolProvider,{children:(0,h.jsx)(r.AccountProvider,{children:(0,h.jsx)(r.WalletProvider,{children:(0,h.jsx)(n.Provider,{store:Tn,children:(0,h.jsx)(xn,{})})})})})})}),kn={size:"small",type:"solid"},Rn=()=>(0,h.jsx)(r.MintProvider,{children:(0,h.jsx)(r.UIProvider,{appId:An,antd:!0,children:(0,h.jsx)(r.PoolProvider,{children:(0,h.jsx)(r.AccountProvider,{children:(0,h.jsx)(r.WalletProvider,{children:(0,h.jsx)(n.Provider,{store:Tn,children:(0,h.jsx)(bn,{})})})})})})})},11495:(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var n=s(15190);const r={spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},o={devnet:{...r,node:"https://api.devnet.solana.com",chainId:103,sntrAddress:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",sntrPoolAddress:"3EUPL7YQLbU6DNU5LZeQeHPXTf1MigJ2yASXA9rH5Ku4",swapAddress:"4erFSLP7oBFSVC1t35jdxmbfxEhYCKfoM6XdG2BLR3UF",taxmanAddress:"8UaZw2jDhJzv5V53569JbCd3bD4BnyCfBH3sjwgajGS9"},testnet:{...r,node:"https://api.testnet.solana.com",chainId:102,sntrAddress:"",sntrPoolAddress:"",swapAddress:"",taxmanAddress:""},mainnet:{...r,node:"http://api.google.mainnet-beta.solana.com",chainId:101,sntrAddress:"SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M",sntrPoolAddress:"Aa3WZX7Xunfebp2MuAcz9CNw8TYTDL7mVrmb11rjyVm6",swapAddress:"SSW7ooZ1EbEognq5GosbygA3uWW1Hq1NsFq6TsftCFV",taxmanAddress:"9doo2HZQEmh2NgfT3Yx12M89aoBheycYqH1eaR5gKb3e"}};const a="sen_lp",i={[a]:{url:"https://descartesnetwork.github.io/sen-lp/index.js",appId:a,name:"Sen LP",author:{name:"Sentre",email:"hi@sentre.io"},supportedViews:"page,widget".split(",").map((e=>e.trim())).filter((e=>["page","widget"].includes(e))),tags:"solana,dapps,liquidity".split(",").map((e=>e.trim())),description:"Liquidity Provision to pools in the Sentre ecosystem",verified:!1}},l={development:{defaultAppId:a,extra:i,senreg:"https://descartesnetwork.github.io/senreg/register.json"},staging:{defaultAppId:a,extra:i,senreg:"https://descartesnetwork.github.io/senreg/register.json"},production:{defaultAppId:a,extra:{},senreg:"https://descartesnetwork.github.io/senreg/register.json"}},d={development:{base:`${window.location.origin}/dashboard?referrer=`},staging:{base:"https://hub.sentre.io/dashboard?referrer="},production:{base:"https://hub.sentre.io/dashboard?referrer="}},c={devnet:{baseURL:"https://stat-dev.sentre.io"},testnet:{baseURL:"https://stat-dev.sentre.io"},mainnet:{baseURL:"https://stat.sentre.io"}},u={sol:o[n.ef],register:l[n.OB],referral:d[n.OB],stat:c[n.ef]}},11503:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var n=s(11796),r=s(67845),o=s(15190),a=s(11495),i=s(63845);const{sol:{chainId:l}}=a.Z,d=/[\W_]+/g,c={tokenize:"full",context:!0,minlength:3},u={document:{id:"address",index:[{field:"symbol",...c},{field:"name",...c}]}};const h=class{constructor(){this.tokenMap=void 0,this.engine=void 0,this.chainId=void 0,this.cluster=void 0,this.loading=void 0,this.queue=void 0,this._init=async()=>this.tokenMap.size?[this.tokenMap,this.engine]:new Promise((async e=>{if(this.loading)return this.queue.push(e);this.loading=!0;let t=await(await(new r.DK).resolve()).filterByChainId(this.chainId).getList();for("devnet"===this.cluster&&(t=t.concat(i.ZP)),t="testnet"===this.cluster?t.concat([(0,i.Ki)(102),(0,i.Tz)(102)]):t.concat([(0,i.Tz)(101)]),t.forEach((e=>this.tokenMap.set(e.address,e))),this.engine=new n.Document(u),this.tokenMap.forEach((e=>{let{address:t,...s}=e;return this.engine.add(t,s)})),e([this.tokenMap,this.engine]);this.queue.length;)this.queue.shift()([this.tokenMap,this.engine]);this.loading=!1})),this.all=async()=>{const[e]=await this._init();return Array.from(e.values())},this.findByAddress=async e=>{const[t]=await this._init();return t.get(e)},this.find=async(e,t)=>{const[s,n]=await this._init();let r=[];return e.split(d).forEach((e=>n.search(e,t).forEach((e=>{let{result:t}=e;return t.forEach((e=>{if(r.findIndex((t=>{let{address:s}=t;return s===e}))<0){const t=s.get(e);t&&r.push(t)}}))})))),r},this.tokenMap=new Map,this.engine=void 0,this.chainId=l,this.cluster=o.ef,this.loading=!1,this.queue=[],this._init()}}},63845:(e,t,s)=>{"use strict";s.d(t,{Tz:()=>n,Ki:()=>r,ZP:()=>o});const n=e=>({symbol:"SOL",name:"Solana",address:"11111111111111111111111111111111",decimals:9,chainId:e,extensions:{coingeckoId:"solana"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"}),r=e=>({symbol:"SNTR",name:"Sentre",address:"5YwUkPdXLoujGkZuo9B4LsLKj3hdkDcfP4derpspifSJ",decimals:9,chainId:e,extensions:{coingeckoId:"sentre"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/SENBBKVCM7homnf5RX9zqpf1GFe935hnbU4uVzY1Y6M/logo.png"}),o=[n(103),r(103),{symbol:"wBTC",name:"Wrapped Bitcoin",address:"8jk4eJymMfNZV9mkRNxJEt2VJ3pRvdJvD5FE94GXGBPM",decimals:9,chainId:103,extensions:{coingeckoId:"bitcoin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/qfnqNqs3nCAHjnyCgLRDbBtq4p2MtHZxw8YjSyYhPoL/logo.png"},{symbol:"wETH",name:"Ethereum",address:"27hdcZv7RtuMp75vupThR3T4KLsL61t476eosMdoec4c",decimals:9,chainId:103,extensions:{coingeckoId:"ethereum"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/FeGn77dhg1KXRRFeSwwMiykZnZPw5JXW6naf2aQgZDQf/logo.png"},{symbol:"UNI",name:"Uniswap",address:"FVZFSXu3yn17YdcxLD72TFDUqkdE5xZvcW18EUpRQEbe",decimals:9,chainId:103,extensions:{coingeckoId:"uniswap"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/3MVa4e32PaKmPxYUQ6n8vFkWtCma68Ld7e7fTktWDueQ/logo.png"},{symbol:"USDC",name:"USD Coin",address:"2z6Ci38Cx6PyL3tFrT95vbEeB3izqpoLdxxBkJk2euyj",decimals:9,chainId:103,extensions:{coingeckoId:"usd-coin"},logoURI:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"}]},57452:(e,t,s)=>{"use strict";s.d(t,{R:()=>i});const n={ttl:3e4},r={limit:{calls:10,time:1e3},cache:n};class o{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class a{static set(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}a.mapCache=new Map;class i{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new l(e);return this.mapInstance.set(t,s),s}static async load(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof e&&(e=JSON.stringify(e));let n=i.getSingleFlight(s);i.mapInstance.set(e,n);const r=new o(e);return n.load(r,t)}}i.mapInstance=new Map;class l{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(r,e)}async load(e,t){const s=a.get(e.key);if(s)return Promise.resolve(s);let n=!1,r=this.mapRequestCalling.get(e.key);return r||(r=e,n=!0,this.mapRequestCalling.set(r.key,r)),new Promise(((e,s)=>{if(!r)return s("Not found request!");r.add(e,s),n&&this.fetch(r,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{a.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}},85912:(e,t,s)=>{"use strict";s.d(t,{$:()=>n,h:()=>r});const n=e=>!1;BigInt.prototype.toJSON=function(){return this.toString()};const r={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e}}},3007:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(15454),r=s.n(n),o=s(95418),a=s(83868);class i{constructor(e){if(this.dbName=void 0,this.driver=void 0,this.ipfs=void 0,this.createInstance=e=>r().createInstance({driver:this.driver,name:this.dbName,storeName:e}),this.dropInstance=async e=>{const t=this.createInstance(e);return await t.clear(),await r().dropInstance({name:this.dbName,storeName:e})},this.all=async()=>{let e={};const t=(await this.createInstance("sentre").getItem("appIds")||[]).flat().concat(["sentre"]);for(const s of t){e[s]={};const t=this.createInstance(s);await t.iterate(((t,n)=>{e[s][n]=t}))}return e},this.fetch=async e=>await this.ipfs.get(e),this.backup=async()=>{const e=await this.all();return await this.ipfs.set(e)},this.restore=async e=>{const t=await this.fetch(e);for(const s in t){const e=await this.createInstance(s);for(const n in t[s]){const r=t[s][n];await e.setItem(n,r)}}return t},!o.account.isAddress(e))throw new Error("Invalid address");this.dbName=e,this.driver=[r().WEBSQL,r().LOCALSTORAGE],this.ipfs=new a.Z}}const l=i},83868:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(32642),r=s(34559),o=s(97429).Buffer;class a{constructor(){this._ipfs=async()=>{try{return window.ipfs||(window.ipfs=await(0,n.Ue)()),window.ipfs}catch(e){return await(0,r.sA)(500),await this._ipfs()}},this.get=async e=>{if(!a.isCID(e))throw new Error("Invalid CID");const t=await this._ipfs(),s=await t.cat(e);let n="";for await(const r of s)n+=o.from(r).toString();return JSON.parse(n)},this.set=async e=>{if(!e)throw new Error("Empty data");const t=JSON.stringify(e),s=await this._ipfs(),{path:n}=await s.add(t);return n}}}a.isCID=e=>{try{return!!e&&n.bf.multihash(e)}catch(t){return!1}};const i=a},15190:(e,t,s)=>{"use strict";s.d(t,{OB:()=>l,ef:()=>d});const n="sentre",r=window.localStorage,o=e=>{try{return e?JSON.parse(e):null}catch(t){return null}},a={set:(e,t)=>{let s=o(r.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,r.setItem(n,JSON.stringify(s))},get:e=>{let t=o(r.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{a.set(e,null)}},i=a,l="production",d=(()=>{switch(i.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})()},34559:(e,t,s)=>{"use strict";s.d(t,{sA:()=>l,Xn:()=>d,kU:()=>c,uR:()=>u,l$:()=>h});var n=s(95418),r=s(16200),o=s.n(r),a=s(15190),i=s(57452);const l=e=>new Promise((t=>setTimeout(t,e))),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.substring(0,t)+s+e.substring(e.length-t,e.length)},c=e=>n.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${a.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${a.ef}`,u=e=>e?o()(e):o()("0"),h=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.R.load("fetchCGK"+e,(()=>n.utils.parseCGK(e)))}},35883:()=>{},46601:()=>{},89214:()=>{},5696:()=>{},85568:()=>{},64009:()=>{},42611:()=>{},88795:()=>{},89408:()=>{},57600:()=>{},21724:()=>{},62678:()=>{},25819:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=869.22fcffac.chunk.js.map